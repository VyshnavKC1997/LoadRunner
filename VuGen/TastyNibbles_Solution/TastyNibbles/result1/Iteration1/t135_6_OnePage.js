"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([[268],{41777:(e,t,n)=>{function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{A:()=>u});var r=n(63662),l=n(15299);function o(e){var t=e&&e.ownerDocument||document;return{document:t,window:t.defaultView||t.parentWindow||window}}function i(e){return e||document.head}var s="hcaptcha-api-script-id",d="hcaptchaOnLoad",c=[];const u=function(e){var t,n;function u(t){var n;return(n=e.call(this,t)||this)._hcaptcha=void 0,n.renderCaptcha=n.renderCaptcha.bind(a(n)),n.resetCaptcha=n.resetCaptcha.bind(a(n)),n.removeCaptcha=n.removeCaptcha.bind(a(n)),n.isReady=n.isReady.bind(a(n)),n.loadCaptcha=n.loadCaptcha.bind(a(n)),n.handleOnLoad=n.handleOnLoad.bind(a(n)),n.handleSubmit=n.handleSubmit.bind(a(n)),n.handleExpire=n.handleExpire.bind(a(n)),n.handleError=n.handleError.bind(a(n)),n.handleOpen=n.handleOpen.bind(a(n)),n.handleClose=n.handleClose.bind(a(n)),n.handleChallengeExpired=n.handleChallengeExpired.bind(a(n)),n.ref=l.createRef(),n.apiScriptRequested=!1,n.state={isApiReady:!1,isRemoved:!1,elementId:t.id,captchaId:""},n}n=e,(t=u).prototype=Object.create(n.prototype),t.prototype.constructor=t,(0,r.A)(t,n);var m=u.prototype;return m.componentDidMount=function(){var e=this,t=o(i(this.props.scriptLocation));this._hcaptcha=t.window.hcaptcha||void 0,void 0!==this._hcaptcha?this.setState({isApiReady:!0},(function(){e.renderCaptcha()})):this.loadCaptcha()},m.componentWillUnmount=function(){var e=this.state.captchaId,t=this._hcaptcha;this.isReady()&&(t.reset(e),t.remove(e))},m.shouldComponentUpdate=function(e,t){return this.state.isApiReady===t.isApiReady&&this.state.isRemoved===t.isRemoved},m.componentDidUpdate=function(e){var t=this;["sitekey","size","theme","tabindex","languageOverride","endpoint"].every((function(n){return e[n]===t.props[n]}))||this.removeCaptcha((function(){t.renderCaptcha()}))},m.loadCaptcha=function(){if(!this.apiScriptRequested){var e=this.props,t=e.apihost,n=e.assethost,a=e.endpoint,r=e.host,l=e.imghost;(function(e){void 0===e&&(e={});var t=i(e.scriptLocation);delete e.scriptLocation;var n=o(t),a=c.find((function(e){return e.scope===n.window}));if(n.document.getElementById(s)&&a)return a.promise;var r=new Promise((function(a,r){n.window[d]=a;var l=e.apihost||"https://js.hcaptcha.com";delete e.apihost;var o=n.document.createElement("script");o.id=s,o.src=l+"/1/api.js?render=explicit&onload="+d,o.async=void 0===e.loadAsync||e.loadAsync,delete e.loadAsync,o.onerror=function(e){return r("script-error")};var i=function(e){return Object.entries(e).filter((function(e){e[0];var t=e[1];return t||!1===t})).map((function(e){var t=e[0],n=e[1];return encodeURIComponent(t)+"="+encodeURIComponent(n)})).join("&")}(e);o.src+=""!==i?"&"+i:"",t.appendChild(o)}));return c.push({promise:r,scope:n.window}),r})({apihost:t,assethost:n,endpoint:a,hl:e.languageOverride,host:r,imghost:l,recaptchacompat:!1===e.reCaptchaCompat?"off":null,reportapi:e.reportapi,sentry:e.sentry,custom:e.custom,loadAsync:e.loadAsync,scriptLocation:e.scriptLocation}).then(this.handleOnLoad).catch(this.handleError),this.apiScriptRequested=!0}},m.renderCaptcha=function(e){if(this.state.isApiReady){var t=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),n=this._hcaptcha.render(this.ref.current,t);this.setState({isRemoved:!1,captchaId:n},(function(){e&&e()}))}},m.resetCaptcha=function(){var e=this.state.captchaId,t=this._hcaptcha;this.isReady()&&t.reset(e)},m.removeCaptcha=function(e){var t=this.state.captchaId,n=this._hcaptcha;this.isReady()&&this.setState({isRemoved:!0},(function(){n.remove(t),e&&e()}))},m.handleOnLoad=function(){var e=this;this.setState({isApiReady:!0},(function(){var t=o(i(e.props.scriptLocation));e._hcaptcha=t.window.hcaptcha,e.renderCaptcha((function(){var t=e.props.onLoad;t&&t()}))}))},m.handleSubmit=function(e){var t=this.props.onVerify,n=this.state,a=n.isRemoved,r=n.captchaId,l=this._hcaptcha;if(void 0!==l&&!a){var o=l.getResponse(r),i=l.getRespKey(r);t&&t(o,i)}},m.handleExpire=function(){var e=this.props.onExpire,t=this.state.captchaId,n=this._hcaptcha;this.isReady()&&(n.reset(t),e&&e())},m.handleError=function(e){var t=this.props.onError,n=this.state.captchaId,a=this._hcaptcha;this.isReady()&&a.reset(n),t&&t(e)},m.isReady=function(){var e=this.state,t=e.isApiReady,n=e.isRemoved;return t&&!n},m.handleOpen=function(){this.isReady()&&this.props.onOpen&&this.props.onOpen()},m.handleClose=function(){this.isReady()&&this.props.onClose&&this.props.onClose()},m.handleChallengeExpired=function(){this.isReady()&&this.props.onChalExpired&&this.props.onChalExpired()},m.execute=function(e){void 0===e&&(e=null);var t=this.state.captchaId,n=this._hcaptcha;if(this.isReady())return e&&"object"!=typeof e&&(e=null),n.execute(t,e)},m.setData=function(e){var t=this.state.captchaId,n=this._hcaptcha;this.isReady()&&(e&&"object"!=typeof e&&(e=null),n.setData(t,e))},m.getResponse=function(){return this._hcaptcha.getResponse(this.state.captchaId)},m.getRespKey=function(){return this._hcaptcha.getRespKey(this.state.captchaId)},m.render=function(){var e=this.state.elementId;return l.createElement("div",{ref:this.ref,id:e})},u}(l.Component)},61174:(e,t,n)=>{n.d(t,{m:()=>E});var a=n(15299),r=n(31928),l=n(50191),o=n(34839),i=n(78414),s=n(97184),d=n(95635),c=n(70083),u=n(35699),m=n(50996),p=n(38743),f=n(11635),h=n(39178),y=n(74051),g=n(75784);const _=300;function E({addressType:e,countryCode:t,initialAddressQuery:n="",provider:E="autocomplete-service",allowAllCountries:v}){const C=(0,r.Y)(),[S,k]=(0,a.useState)(n),[w,P]=(0,a.useState)(S),[A,I]=(0,a.useState)(!1),[x,M]=(0,a.useState)([]),[T,N]=(0,a.useState)(!1),L=(0,o.Fo)(),[D,R]=(0,a.useState)(b(L.sourceId)),{geolocation:B}=(0,l.u)(),{search:F,fetchAddress:z}=(0,s.t)(),V=(0,i.Z)(),O=(0,f.g)(),{id:W}=(0,m.q)(),{details:q}=(0,y.S0)(t),$=(0,g.QB)(),U=void 0,H=(0,a.useCallback)(((e,n,a,r)=>{const l=$.value.defaultAttributes?.uniqToken||"",o={schemaId:h.$D.AutocompleteSuggestion,payload:{shopId:parseInt((0,p.ee)(W),10),checkoutToken:L.checkoutSessionIdentifier||"",uniqueToken:l,provider:n[0]?.completionService,context:"shipping"===e?"Shipping address":"Billing address",territoryCode:t??B.country.code,locale:C,query:a,requestProvider:r,requestLatitude:B.coordinates?.latitude,requestLongitude:B.coordinates?.longitude,addressIds:n.map((e=>e.addressId))}};O?.record(o)}),[t,B.country.code,C,W,L.checkoutSessionIdentifier,$.value.defaultAttributes?.uniqToken,O,B.coordinates]);(0,a.useEffect)((()=>{const e=setTimeout((()=>{V&&P(S)}),_);return()=>{clearTimeout(e)}}),[V,S]),(0,a.useEffect)((()=>{k(n)}),[n]),(0,a.useEffect)((()=>{v||(0,d.TX)(t||B.country.code)||M([])}),[t,B.country.code,v]);const j=function(e){const t=(0,c.S)(),{geolocation:n}=(0,l.u)();return(0,a.useCallback)((async(a,r,l)=>{const o=await e(a,r,l);return t.distribution(u.J.PredictionDuration,{tags:{buyerCountry:n.country.code},value:o.duration.end-o.duration.start}),o.data}),[e,t])}(F);(0,a.useEffect)((()=>{(v||(0,d.TX)(t||B.country.code))&&A&&async function(n){try{if(n.length<=1)return void M([]);const a=await j(n,{locale:C,countryCode:t??B.country.code,location:B.coordinates,requestToken:D,shopId:(0,p.ee)(W),sourceId:L.sourceId||""},U);V.current&&(M(a),a?.length>0&&!T&&("shipping"===e||"billing"===e)&&(H(e,a,n,U),N(!0)))}catch(a){console.warn(`Unable to fetch predictions: ${a}`),M([])}}(w)}),[w,C,D,H,T]);const Y=(0,a.useCallback)(((e,n,a,r)=>{const l=q?.zones.find((e=>e.code===n.zoneCode))?.name||void 0,o=$.value.defaultAttributes?.uniqToken,i=a.findIndex((t=>t.addressId===e))+1,s={shopId:parseInt((0,p.ee)(W),10),checkoutToken:L.checkoutSessionIdentifier||"",uniqueToken:o,address1:n.address1,address2:n.address2,city:n.city,zone:l,latitude:n.coordinates?.latitude,longitude:n.coordinates?.longitude,zip:n.postalCode,territoryCode:t??B.country.code,position:i,query:w,context:"shipping"===r?"Shipping address":"Billing address",locale:C,requestLatitude:B.coordinates?.latitude,requestLongitude:B.coordinates?.longitude};O?.record({schemaId:h.$D.AutocompleteSelection,payload:s})}),[q,$.value.defaultAttributes?.uniqToken,W,L.checkoutSessionIdentifier,t,B.country.code,B.coordinates,w,C,O]),G=(0,a.useCallback)((async(t,n,a)=>{try{const r=await z(t,{locale:C,requestToken:D,completionService:n,shopId:(0,p.ee)(W),sourceId:L.sourceId||""});V.current&&(R(b(L.sourceId)),"shipping"!==e&&"billing"!==e||Y(t,r,x,e),a(r))}catch(r){console.warn(`Unable to select prediction: ${r}`)}}),[C,D,W,L.sourceId,z,V,e,Y,x]),X=(0,a.useCallback)(((e,t=!0)=>{k(e),I(t)}),[]);return{value:S,debouncedValue:w,setValue:X,predictions:x,selectPrediction:G,provider:E}}function b(e){return`${e}-${Date.now()}`}},32261:(e,t,n)=>{n.d(t,{H:()=>d});var a=n(15299),r=n(47969),l=n(9520),o=n(18012),i=n(90992),s=n(80125);function d({address:e,hiddenFields:t=[],multiline:n,textSize:d}){const c=(0,s.IL)(e,{hiddenFields:t,multiline:n,countryFormat:"explicit"});return null==c?a.default.createElement(r.r,null):n?a.default.createElement(l.V,null,a.default.createElement(o.E,{accessibilityRole:"address",size:d},a.default.createElement(i.c,null,c))):a.default.createElement(o.E,{accessibilityRole:"address",size:d},c)}},48753:(e,t,n)=>{n.d(t,{A:()=>_e});var a=n(15299),r=n(94973),l=n(50191),o=n(39370),i=n(94294),s=n(63292),d=n(33294),c=n(66242),u=n(27371),m=n(69516),p=n(20484),f=n(29551);class h extends Error{constructor(...e){super(...e),this.name="ApplePayAPIError"}}class y extends Error{constructor(...e){super(...e),this.name="AbortedSessionError"}}var g=n(38482),_=n(86766),E=n(52110),b=n(91287),v=n(81772),C=n(35240);function S({subtotal:e,duties:t,taxes:n,deliveryNext:a,discountLines:r,paymentLines:l,tipLines:o,lineItemsLabels:s,deliveryOptionGroupTypeLabels:d,deliveryMethodTitlePrefixes:c,formattedRecurringTotals:u,formattedRecurringTotalTooltip:m,isSplitShippingOptionsEnabled:p}){const f=void 0===e?[]:[{label:s.subtotal,amount:e?(0,i.DQ)(e.amount):void 0}],h=function({deliveryNext:e,deliveryOptionGroupTypeLabels:t,deliveryMethodTitlePrefixes:n,isSplitShippingOptionsEnabled:a}){const r=(0,_.ny)(e,a);if(r){const{methods:[{costAfterDiscounts:e}]}=r;return[{label:n[E.y.Shipping],amount:(0,i.DQ)(e.amount)}]}return(0,_.Be)(e).map((({line:e,method:a},r,l)=>({label:k(e,a,1===l.length,t,n),amount:(0,i.DQ)(a.costAfterDiscounts.amount)})))}({deliveryNext:a,deliveryOptionGroupTypeLabels:d,deliveryMethodTitlePrefixes:c,isSplitShippingOptionsEnabled:p}),y=t&&"available_total"===t?.status&&0!==t?.totalDuty.amount?[{label:s.duties,amount:(0,i.DQ)(t.totalDuty.amount)}]:[],b=n&&"available_total"===n.status&&0!==n.totalTax.amount?[{label:s.taxes,amount:(0,i.DQ)(n.totalTax.amount)}]:[],v=r&&r.lines.map((e=>{if((0,g.rj)(e))return{label:e.title,amount:(0,C.TS)((0,i.DQ)(e.amount.amount))}})).filter((e=>void 0!==e))||[],S=l?.lines.filter((e=>"giftCard"===e.method.type)).map((e=>{if(e.cost)return{label:s.giftCards,amount:(0,C.TS)((0,i.DQ)(e.cost.amount))}})).filter((e=>void 0!==e))||[],w=o&&o.lines[0],P=w&&w.amount.amount>0?[{label:s.tip,amount:(0,i.DQ)(w.amount.amount)}]:[],A=u?u.map((e=>({label:e,amount:"0.00",type:"pending"}))):[],I=A.length>0&&m?[{label:m,amount:"0.00",type:"pending"}]:[];return[...f,...h,...y,...b,...v,...S,...P,...A,...I]}function k(e,t,n,a,r){const l=r[t.methodType];return n?l:`${l} (${a[e.type]})`}function w({deliveryMethodTitlePrefixes:e,connectTwoShippingTitles:t,deliveryNext:n,isSplitShippingOptionsEnabled:a}){const r=(0,_.ny)(n,a);if(r){const{methods:[{title:e,costAfterDiscounts:t,deliveryPromisePresentmentTitle:n}]}=r;return[{label:e,amount:(0,i.DQ)(t.amount),detail:n?.short??"",identifier:JSON.stringify(e)}]}const l=(0,_.MD)(n).filter(_.gB).map(i.sm);return(0,i.WN)(l).filter((e=>e.length>0)).map((n=>({label:I(n,e,t),amount:x(n),detail:T(n,t),identifier:(0,i._y)(n)})))}const P=", ";function A(e,t){switch(e.length){case 0:case 1:return e.join("");case 2:return t(e[0],e[1]);default:return t(e.slice(0,e.length-1).join(P),e[-1])}}function I(e,t,n){const a=e.find((e=>e.deliveryLine.type===b.z.OneTimePurchase));let r="";a&&(r=a.methodType===E.y.PickUp?t[a.methodType]:a.title);const l=e.find((e=>e.deliveryLine.type===b.z.Subscription));let o="";if(l){if(l.methodType===E.y.PickUp||l.methodType===E.y.Local)return l.title;o=l.title,r=a?.title??""}return A([...new Set([r,o])].filter(Boolean),n)}function x(e){return(0,i.DQ)(e.reduce(((e,t)=>e+t.costAfterDiscounts.amount),0))}function M(e,t){return e.add(t),e}function T(e,t){return A([...e.map((e=>{const{methodType:t,pickupLocation:n,deliveryPromisePresentmentTitle:a,description:r}=e;return t===E.y.PickUp||t===E.y.PickupPoint?function(e){if(e){const{address1:t="",address2:n="",city:a="",company:r="",zoneCode:l="",countryCode:o=""}=e;return[r,[t,n].filter(Boolean).join(" "),a,l,o].filter(Boolean).join(", ")}}(n?.address)??"":a?a.short:r||""})).reduce(M,new Set)],t)}function N(e,t){return{label:e,amount:(0,i.DQ)(t.amount)}}const L=["AS","GU","MP","PR","VI"];function D(e){const t={firstName:e.givenName||void 0,lastName:e.familyName||void 0,address1:e?.addressLines?.[0],address2:e?.addressLines?.[1]||void 0,city:e.locality||void 0,postalCode:e.postalCode||void 0,zoneCode:e.administrativeArea||e.subLocality||void 0,countryCode:B(e.countryCode),phone:e.phoneNumber||void 0};return t.countryCode===v.O.Hk&&(t.postalCode=void 0,t.zoneCode=e.postalCode),t.countryCode&&L.includes(t.countryCode)&&(t.zoneCode=t.countryCode,t.countryCode=v.O.Us),t.lastName||(t.lastName=t.firstName),t}function R(e){return(0,i.kw)(D(e))}function B(e){if(!e)return v.O.Zz;const t=e.toUpperCase();if(function(e){return Object.values(v.O).includes(e)}(t))return t;const n={UK:v.O.Gb,JA:v.O.Jp};return Object.keys(n).includes(t)?n[t]:L.includes(t)?t:v.O.Zz}function F(e){const t=e.match(/ (\d+)$/);if(t)return t[1]}var z=n(81948),V=n(85914),O=n(56784),W=n(66126),q=n(76882),$=n(50996);const U=()=>{const e=(0,q.W)(),{name:t}=(0,$.q)(),n=e("order_summary.recurring_total_tooltip","Does not include shipping, tax, duties, or any applicable discounts."),r=(0,a.useMemo)((()=>({total:t,subtotal:e("order_summary.subtotal_label","Subtotal"),duties:e("order_summary.duties_label","Duties"),taxes:e("order_summary.taxes_label","Taxes"),giftCards:e("order_summary.gift_card_label","Gift card"),tip:e("order_summary.tip_label","Tip")})),[t,e]),l=(0,a.useMemo)((()=>({[b.z.OneTimePurchase]:e("shipping.shipping_method_one_time_purchase_group_title","One-time purchase"),[b.z.Subscription]:e("shipping.shipping_method_subscription_group_title","Subscription")})),[e]),o=(0,a.useMemo)((()=>({[E.y.Shipping]:e("wallets.shipping_line_label","Shipping"),[E.y.Local]:e("shipping.local_delivery","Local delivery"),[E.y.PickUp]:e("delivery_options.pick_up","Pick up"),[E.y.PickupPoint]:e("delivery_options.pickup_point_method_definition","Ship to pickup point"),[E.y.Retail]:e("delivery_options.retail_method_definition","Retail shipping"),[E.y.None]:e("delivery_options.none_method_definition","No shipping")})),[e]),i=(0,a.useMemo)((()=>(t,n)=>e("wallets.connect_shipping_methods",{method1:t,method2:n},"{{method1}} and {{method2}}")),[e]);return(0,a.useMemo)((()=>({formattedRecurringTotalTooltip:n,lineItemsLabels:r,deliveryOptionGroupTypeLabels:l,deliveryMethodTitlePrefixes:o,connectTwoShippingTitles:i})),[n,r,l,o,i])};var H=n(73896),j=n(89557),Y=n(36397),G=n(38530),X=n(31374);const Z=()=>{const{email:e,shippingAddress:t}=(0,X.C)(),n=(0,m.No)(),l=(0,Y.M3)(),o=(0,z.FI)(),[,i]=(0,G.WS)(),{inMemoryApplePayParts:s}=(0,p.b)(),d=(0,r.QN)();return(0,a.useCallback)((({clearBuyerState:a}={clearBuyerState:!0})=>{d.read(s.asPaymentMethod).value||l(),n||i(void 0),a&&(d.write(e,""),n||d.write(t,{city:void 0,address1:void 0,address2:void 0,company:void 0,firstName:void 0,lastName:void 0,name:void 0,phone:void 0,postalCode:void 0,coordinates:void 0,...o.defaultShippingDetails}))}),[o.defaultShippingDetails,s.asPaymentMethod,n,e,t,l,i,d])},Q=()=>{const e=(0,r.QN)(),t=(0,u.nR)(),n=(0,m.ob)(u.fi.ApplePay,t),l=Z(),{inMemoryApplePayParts:o,activeWalletSessionAtom:i}=(0,p.b)(),s=(0,f.ot)();return(0,a.useCallback)(((t,a)=>{const r=e.read(a).value,d=e.read(o.asPaymentMethod).value;s.incrementCounter("apple_pay_on_cancel",1,new Map([["completion_in_progress",r.toString()]])),r?e.write(o.paymentSheetError,{type:"payment_cancelled_while_processing"}):(t.abort(),d||l(),e.write(i,!1)),n(u.lC.Cancelled)}),[i,l,o.asPaymentMethod,o.paymentSheetError,e,n,s])};var J=n(89761),K=n(36125),ee=n(84030),te=n(86632),ne=(n(44114),n(55541)),ae=n(99610),re=n(49653),le=n(77979);class oe extends ne.Wu{constructor(e,t,n,a){super(),this.logger=e,this.translations=t,this.state=n,this.inMemoryApplePayParts=a}get negotiationResultMapper(){return new ne.Nn({success:({result:e,violationActions:t,defaultMapper:n})=>{if(!("errors"in e))return n();const{firstPaymentSheetAction:a}=this.getMergedPaymentSheetAction({resultViolations:e.errors,violationActions:t});return a||n()},invalid:()=>(this.logger.notify(new h("Intercepted negotiation returned invalid"),{severity:"error"}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_negotiation_status"})}]}),stale:()=>(this.logger.notify(new h("Intercepted negotiation returned stale"),{severity:"error"}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_negotiation_status"})}]}),denied:()=>({action:"abort"}),throttled:()=>({action:"abort"})},(()=>this.mapUnhandledNegotiation()),(()=>this.getNegotiationViolationActions()))}get completionResultMapper(){return new ne.Nn({success:({result:e,defaultMapper:t})=>"receipt"in e?{action:"submit"}:t(),rejected:({result:e,violationActions:t,defaultMapper:n})=>{const a="violations"in e;if(!a)return n();const r=a?e.violations:[];this.getUnhandledErrors(r,t).forEach((e=>{this.logger.notify(new h(`violation not handled: ${e.code}`),{severity:"error",errorClass:o.t8.Api})}));return this.getMergedPaymentSheetAction({resultViolations:r,violationActions:t}).generatePrioritizedPaymentSheetAction()||{action:"abort"}},invalid:()=>(this.logger.notify(new h("Intercepted negotiation returned invalid"),{severity:"error"}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}),stale:()=>(this.logger.notify(new h("Intercepted negotiation returned stale"),{severity:"error"}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}),fetch_failed:()=>({action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"exceptional_completion_status"})}]}),alreadyCompleted:()=>({action:"abort"}),denied:()=>({action:"abort"}),throttled:()=>({action:"abort"})},(e=>this.mapUnhandledCompletion(e)),(()=>this.getCompletionViolationActions()))}validateBilling(e){const{billingContact:t}=e;return t?{shouldPersist:!0}:{shouldPersist:!1,paymentSheetAction:{action:"abort"}}}validateShipping(e,t,n,a,r){const{shippingContact:l}=e;if(!t)return{shouldPersist:!1};if(!l)return{shouldPersist:!1,paymentSheetAction:{action:"abort"}};const o=D(l),i=[];return n&&!o.address2&&i.push(new ApplePayError("shippingContactInvalid","addressLines",this.translations.addressLine2Error)),a&&!o.firstName&&i.push(new ApplePayError("shippingContactInvalid","name",this.translations.firstNameBlank)),r&&!o.phone&&i.push(new ApplePayError("shippingContactInvalid","phoneNumber",this.translations.phoneBlank)),i.length>0?{shouldPersist:!1,paymentSheetAction:{action:"show_error",errors:i}}:{shouldPersist:!0}}getCompletionViolationActions(){return[{violations:[...re.GB],generateAction:()=>({action:"abort"})},{violations:ae.IY,generateAction:()=>({action:"abort"})},{violations:[re.G4],generateAction:()=>({action:"abort"})},{violations:[le.X.MerchandiseCartAndCurrencyUpdatedBasedOnCountry],generateAction:()=>({action:"abort"})},{violations:ae.us,generateAction:()=>({action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"unusable_partial_address"})}]})},{violations:ae.WX,generateAction:()=>({action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"shipping_options_changed"})}]})},{violations:ae.MZ,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",this.translations.emailInvalidError)]})},{violations:ae.uB,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.firstNameBlank)]})},{violations:ae.yQ,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.lastNameBlank)]})},{violations:ae.HE,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.translations.addressLine1Blank)]})},{violations:ae.U9,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.translations.addressLine2Blank)]})},{violations:ae.no,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.translations.cityBlank)]})},{violations:ae.sr,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.translations.deliveryZoneBlank)]})},{violations:ae.eS,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",this.translations.countryBlank)]})},{violations:ae.l2,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.translations.postalCodeBlank)]})},{violations:ae.CN,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.translations.phoneBlank)]})},{violations:ae.zt,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.translations.zoneNotFoundError)]})},{violations:[le.X.DeliveryInvalidPostalCodeForCountry,le.X.DeliveryInvalidPostalCodeForZone],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.translations.postalCodeInvalidError)]})},{violations:[ae._v],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.firstNameTooLongError)]})},{violations:[ae.MV],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.lastNameTooLongError)]})},{violations:ae.lD,generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.translations.nameContainsEmojisError)]})},{violations:ae.dQ,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.nameContainsEmojisError)]})},{violations:ae.$N,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.firstNameTooLongError)]})},{violations:ae.k9,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.lastNameTooLongError)]})},{violations:ae.ao,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","administrativeArea",this.translations.zoneNotFoundError)]})},{violations:[le.X.PaymentsInvalidPostalCodeForCountry,le.X.PaymentsInvalidPostalCodeForZone],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeInvalidError)]})},{violations:ae.tu,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeEmojiError)]})},{violations:ae.t7,generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeNotSupportedError)]})},{violations:[le.X.PaymentsFirstNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.firstNameBlank)]})},{violations:[le.X.PaymentsLastNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","name",this.translations.lastNameBlank)]})},{violations:[le.X.PaymentsAddress1Required],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","addressLines",this.translations.addressLine1Blank)]})},{violations:[le.X.PaymentsCityRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","locality",this.translations.cityBlank)]})},{violations:[le.X.PaymentsPostalCodeRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeBlank)]})},{violations:[le.X.PaymentsCountryRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","country",this.translations.countryBlank)]})},{violations:[le.X.PaymentsZoneRequiredForCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","administrativeArea",this.translations.deliveryZoneBlank)]})},{violations:[le.X.PaymentsShippingMustMatchBilling],generateAction:()=>({action:"show_error",errors:[new ApplePayError("billingContactInvalid","postalAddress",this.translations.billingMustMatchShipping)]})}]}mapUnhandledCompletion(e){return this.logger.notify(new h(`Intercepted completion returned unhandled status: ${e.status}`),{severity:"error",errorClass:o.t8.Api}),{action:"abort",effects:[()=>{this.state.write(this.inMemoryApplePayParts.paymentSheetError,{type:"unhandled_completion_status"})}]}}getNegotiationViolationActions(){return[{violations:[re.G4],generateAction:()=>({action:"abort"})},{violations:[...re.GB],generateAction:()=>({action:"abort"})},{violations:ae.zt,generateAction:()=>({action:"update",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.translations.zoneNotFoundError)]})},{violations:ae.ao,generateAction:()=>({action:"update",errors:[new ApplePayError("billingContactInvalid","administrativeArea",this.translations.zoneNotFoundError)]})},{violations:ae.WX,generateAction:()=>({action:"update",errors:[new ApplePayError("addressUnserviceable")]})},{violations:[le.X.DeliveryInvalidPostalCodeForCountry,le.X.DeliveryInvalidPostalCodeForZone],generateAction:()=>({action:"update",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.translations.postalCodeInvalidError)]})},{violations:[le.X.PaymentsInvalidPostalCodeForCountry,le.X.PaymentsInvalidPostalCodeForZone],generateAction:()=>({action:"update",errors:[new ApplePayError("billingContactInvalid","postalCode",this.translations.postalCodeInvalidError)]})},{violations:[le.X.MerchandiseCartAndCurrencyUpdatedBasedOnCountry],generateAction:()=>({action:"abort"})}]}mapUnhandledNegotiation(){return{action:"update",errors:[]}}}function ie(){const e=(0,q.W)(),t=(0,c.W)(),n=(0,r.QN)(),{inMemoryApplePayParts:l}=(0,p.b)(),o=(0,a.useMemo)((()=>({firstNameTooLongError:e("wallets.errors.formatting.first_name_too_long","First name contains too many letters"),lastNameTooLongError:e("wallets.errors.formatting.last_name_too_long","Last name contains too many letters"),nameContainsEmojisError:e("wallets.errors.formatting.name_contains_emojis","Delete emoji from your name"),zoneNotFoundError:e("wallets.errors.invalid.zone","Enter a valid state / province"),addressLine2Error:e("wallets.errors.missing.address2","Enter an apartment, suite, etc."),emailInvalidError:e("wallets.errors.invalid.email","Enter a valid email"),postalCodeInvalidError:e("wallets.errors.invalid.postal_code","Enter a valid ZIP / postal code"),postalCodeEmojiError:e("wallets.errors.formatting.postal_code_contains_emoji","Delete emoji from your postal code"),postalCodeNotSupportedError:e("wallets.errors.unsupported.postal_code","This location isn't supported"),addressLine1Blank:e("wallets.errors.missing.address1","Enter an address"),addressLine2Blank:e("wallets.errors.missing.address2","Enter an apartment, suite, etc."),firstNameBlank:e("wallets.errors.missing.first_name","Enter a first name"),lastNameBlank:e("wallets.errors.missing.last_name","Enter a last name"),cityBlank:e("wallets.errors.missing.city","Enter a city"),countryBlank:e("wallets.errors.missing.country","Select a country/region"),deliveryZoneBlank:e("wallets.errors.missing.province","Select a state / province"),postalCodeBlank:e("wallets.errors.missing.zip","Enter a ZIP / postal code"),phoneBlank:e("wallets.errors.missing.phone","Enter a phone number"),billingMustMatchShipping:e("wallets.errors.invalid.billing_must_match_shipping","Must match shipping address")})),[e]);return(0,a.useMemo)((()=>new oe(t,o,n,l)),[o,l,t,n])}const se=()=>{const e=ie();return(0,a.useCallback)((t=>{if(!e.negotiationResultMapper)throw new h("NegotiationResultMapper not set up correctly");return e.negotiationResultMapper.mapResultToPaymentSheetAction(t)}),[e.negotiationResultMapper])},de=()=>{const e=(0,r.QN)(),t=(0,u.nR)(),n=(0,m.ob)(u.fi.ApplePay,t),l=(0,c.W)(),{activeWalletSessionAtom:i,inMemoryApplePayParts:s}=(0,p.b)(),d=Z(),f=(0,r.md)(s.asPaymentMethod);return(0,a.useCallback)((({session:t,isProcessing:a=!1,error:r})=>{if(!(r instanceof y)&&(n(u.lC.Failure,f?u.S4.PaymentMethod:u.S4.Express),a||e.write(s.paymentSheetError,{type:"session_terminated"}),l.notify(r,{severity:"error",errorClass:o.t8.Api}),e.write(i,!1),t))try{t.abort()}catch{}finally{d()}}),[i,f,s.paymentSheetError,l,e,n,d])},ce=()=>{const{activeWalletSessionAtom:e}=(0,p.b)(),t=(0,r.QN)(),n=de(),l=Z(),o=se(),{negotiate:d}=(0,K.T4)(),c=(0,V.p)(),u=(0,s.a9)(),{shippingRequired:m}=(0,ee.kG)(),y=(0,f.ot)(),g=(0,O.a)(W.GJ),{formattedRecurringTotalTooltip:_,lineItemsLabels:E,deliveryOptionGroupTypeLabels:b,deliveryMethodTitlePrefixes:v}=U();return(0,a.useCallback)((async(a,r)=>{const{billingContact:s}=a.paymentMethod;!m&&s&&await d(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["duties","taxes"],customizeNegotiation:e=>((e,t)=>(0,i.i$)(e,R(t),te.i.ApplePay))(e,s),progression:!1,onComplete:n=>{if(!t.read(e).value)return void l();const a=o(n);a.effects?.forEach((e=>e())),"abort"===a.action&&(y.log(J.$b.Info,"[ApplePayButton.session.onpaymentmethodselected] session aborted due to blocking error",{errors:a.errors,session:r}),r.abort(),l())}}),r&&t.read(e).value&&function(){const{paymentDue:e,recurringTotals:t,...a}=(0,i.Nw)(u);if(null==e)return n({session:r,error:new h("Missing negotiated payment due")});try{r.completePaymentMethodSelection({newTotal:N(E.total,e),newLineItems:S({...a,formattedRecurringTotals:c(t),formattedRecurringTotalTooltip:_,lineItemsLabels:E,deliveryOptionGroupTypeLabels:b,deliveryMethodTitlePrefixes:v,isSplitShippingOptionsEnabled:g})})}catch(l){l instanceof Error&&(y.log(J.$b.Error,"[ApplePayButton.session.onpaymentmethodselected] session terminated due to error thrown",{error:l,session:r}),n({error:l,session:r}))}}()}),[e,l,v,b,c,_,o,g,E,d,u,m,t,y,n])},ue=()=>{const e=Z();return(0,a.useCallback)((({session:t,paymentSheetAction:n,onProceed:a})=>{switch(n.action){case"abort":t.abort(),e();break;case"update":a(n.errors);break;default:throw new h(`Missing handler for payment sheet action "${n.action}"`)}}),[e])};var me=n(65983),pe=n(40639);const fe=JSON.parse('{"id":"d9f071c731aecba22773de93d4a37b01327b6bb7efae9eeee0564b38f184ae28","name":"ApplePaySessionQuery","source":"query ApplePaySessionQuery($applePaySessionCreate:ApplePaySessionCreateInput,$pendingTask:PendingTaskInput){applePaySession(input:{applePaySessionCreate:$applePaySessionCreate,pendingTask:$pendingTask}){...on ApplePaySessionCreationSuccess{body id __typename}...on ApplePaySessionCreationFailed{code message __typename}...on PendingTask{taskId pollDelay __typename}__typename}}"}');var he=n(34839);const ye=()=>{const e=(0,r.QN)(),t=de(),n=(0,Y.M3)(),{progress:l}=(0,K.T4)(),{checkoutSessionIdentifier:o}=(0,he.Fo)(),d=(0,s.a9)(),c=(0,z.FI)(),f=(0,m.DC)(),y=(0,s.rZ)(),g=(0,ee.PW)(),_=(0,m.YC)(),E=(0,m.pF)(j.R.ApplePay),{activeWalletSessionAtom:b,inMemoryApplePayParts:{asPaymentMethod:v},walletUsedForSubmissionAtom:C}=(0,p.b)(),S=ie(),k=(()=>{const e=ie();return(0,a.useCallback)((t=>{if(!e.completionResultMapper)throw new h("CompletionResultMapper not set up correctly");return e.completionResultMapper.mapResultToPaymentSheetAction(t)}),[e.completionResultMapper])})(),w=Z(),P=(0,u.nR)(),A=(0,m.ob)(u.fi.ApplePay,P),{email:I,shippingAddress:x,billingAddress:M,paymentLines:T}=(0,X.C)();return(0,a.useCallback)((async(a,r,s)=>{const m=e.read(v).value;function p(a,r){switch(r.effects?.forEach((e=>e())),r.action){case"submit":{const n=o&&E?.walletOrderTypeIdentifier&&E?.walletServiceUrl&&E?.walletAuthenticationToken?{status:ApplePaySession.STATUS_SUCCESS,orderDetails:{orderTypeIdentifier:E.walletOrderTypeIdentifier,orderIdentifier:o,webServiceURL:E.walletServiceUrl,authenticationToken:E.walletAuthenticationToken}}:ApplePaySession.STATUS_SUCCESS;let r=!1;try{a.completePayment(n),r=!0}catch(l){t({session:a,error:l,isProcessing:!0})}finally{e.write(b,!1)}r&&A(u.lC.Success,m?u.S4.PaymentMethod:u.S4.Express),e.write(C,j.R.ApplePay);break}case"show_error":{const n=(0,ne.X)(r),o={status:ApplePaySession.STATUS_FAILURE,errors:n};try{a.completePayment(o),0===o.errors.length?(e.write(b,!1),w()):w({clearBuyerState:!1})}catch(l){t({session:a,error:l})}break}case"abort":try{a.completePayment(ApplePaySession.STATUS_FAILURE),e.write(b,!1)}catch(l){t({session:a,error:l})}finally{m||n()}break;default:t({session:a,error:new h(`Missing handler for payment sheet action "${r.action}"`)})}}const P=c.isRequired("address2"),N=c.isRequired("firstName"),L=c.isRequired("phone"),{token:R,billingContact:z,shippingContact:V}=a.payment,O=S.validateBilling(a.payment);if(O.shouldPersist&&z){const t=D({...z,phoneNumber:V?.phoneNumber});e.write(M,t)}if(O.paymentSheetAction)return void p(r,O.paymentSheetAction);if(!m){const t=S.validateShipping(a.payment,f,P,N,L);if(t.shouldPersist&&V){_({postalCode:V.postalCode,countryCode:B(V.countryCode),city:V.locality,zoneCode:V.administrativeArea||V.subLocality},j.R.ApplePay);const t=D(V);e.write(x,t)}if(t.paymentSheetAction)return void p(r,t.paymentSheetAction);const n=y?.email??V?.emailAddress;n&&e.write(I,n)}const W=d.state.read(d.current.fields.paymentDue).value;if(W&&W.amount>0||g){const t=e.read(T).value;e.write(T,(0,Y.mD)(t,{method:{type:"wallet",name:j.R.ApplePay,walletContent:{...R.paymentData,lastDigits:F(R.paymentMethod.displayName),paymentMethodIdentifier:E?.paymentMethodIdentifier}}}))}e.write(s,!0),await l((e=>{const t=k(e);p(r,t)}),{skipToCompletion:!0,customizeCompletion:e=>({...e,delivery:{...e.delivery,...(0,i.$y)(e.delivery?.supportsSplitShipping,te.i.ApplePay)}})}),e.write(s,!1)}),[c,v,S,f,y?.email,d,g,e,l,t,E?.walletOrderTypeIdentifier,E?.walletServiceUrl,E?.walletAuthenticationToken,E?.paymentMethodIdentifier,o,C,b,n,M,_,x,I,T,k,w,A])},ge=()=>{const e=de(),{inMemoryApplePayParts:t,activeWalletSessionAtom:n,telemetry:l}=(0,p.b)(),o=(0,r.QN)(),d=Q(),f=(()=>{const e=(0,r.QN)(),t=(0,me.bn)(),{sourceId:n}=(0,he.Fo)(),l=(0,u.nR)(),o=(0,m.ob)(u.fi.ApplePay,l),i=de(),{activeWalletSessionAtom:s}=(0,p.b)();return(0,a.useCallback)(((a,r,l,d)=>{let c;c=r===v.O.Cn?"https://cn-apple-pay-gateway.apple.com/paymentservices/startSession":"https://apple-pay-gateway.apple.com/paymentservices/startSession",(async(e,t,n,a=!1,r)=>{const l=async r=>{const{data:l,error:o}=await e.query(fe,{cache:!1,variables:r?{pendingTask:{taskId:r}}:{applePaySessionCreate:{resourceId:t,validationUrl:n,walletInstrumentation:{expressWalletInCheckout:a}}}});if(o)throw new h(`ApplePaySession Query error: ${JSON.stringify(o,["type","message"])}`);if(!l)throw new h("ApplePaySession Query error: no data returned by GraphQL");return l};let o=0,i="";for(;;){if(r.aborted)throw new y;const{applePaySession:e}=await l(i);switch(e.__typename){case"ApplePaySessionCreationSuccess":return e;case"ApplePaySessionCreationFailed":throw new h(`ApplePaySession Query error: fail to create apple pay session with ${e.code}`);case"PendingTask":if(i=e.taskId,o+=1,o>=5)throw new h("ApplePaySession Query error: reached maximum amount of polls");await(0,C.yy)(e.pollDelay);break;default:(0,pe.mg)(e)}}})(t,n,c,l,d.signal).then((t=>{o(u.lC.Success);try{a.completeMerchantValidation(JSON.parse(t.body))}catch(n){if(e.read(s).value)throw n}})).catch((e=>{i({error:e,session:a})}))}),[s,t,n,e,i,o])})(),g=ce(),_=(()=>{const e=(0,r.QN)(),t=de(),n=Z(),l=(0,V.p)(),o=se(),{negotiate:d}=(0,K.T4)(),c=(0,s.a9)(),u=(0,m.No)(),[,f]=(0,G.WS)(),{activeWalletSessionAtom:y}=(0,p.b)(),g=(0,O.a)(W.GJ),{shippingAddress:_}=(0,X.C)(),{formattedRecurringTotalTooltip:E,lineItemsLabels:b,deliveryOptionGroupTypeLabels:v,deliveryMethodTitlePrefixes:C}=U(),k=ue();return(0,a.useCallback)((async(a,r)=>{const s=e.read(_).value,m=(0,i.hv)(a.shippingMethod.identifier);f(m),await d(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["deliveryNext","duties","taxes"],progression:!1,customizeNegotiation:e=>(0,i.OF)(e,s,te.i.ApplePay,u),onComplete:a=>{if(e.read(y).value)try{const e=o(a);e.effects?.forEach((e=>e())),k({session:r,paymentSheetAction:e,onProceed:()=>function(e){const{paymentDue:n,recurringTotals:a,...r}=(0,i.Nw)(c);if(null==n)return t({session:e,error:new h("Missing negotiated payment due")});try{e.completeShippingMethodSelection({newTotal:N(b.total,n),newLineItems:S({...r,formattedRecurringTotals:l(a),formattedRecurringTotalTooltip:E,lineItemsLabels:b,deliveryOptionGroupTypeLabels:v,deliveryMethodTitlePrefixes:C,isSplitShippingOptionsEnabled:g})})}catch(o){o instanceof Error&&t({error:o,session:e})}}(r)})}catch(s){s instanceof Error&&t({error:s,session:r})}else n()}})}),[y,n,C,v,l,E,o,k,u,g,b,d,c,_,f,e,t])})(),E=(()=>{const e=(0,r.QN)(),t=de(),n=Z(),l=(0,V.p)(),o=se(),{negotiate:d}=(0,K.T4)(),u=(0,s.a9)(),f=(0,m.No)(),[,y]=(0,G.WS)(),{activeWalletSessionAtom:g}=(0,p.b)(),_=(0,O.a)(W.GJ),{shippingAddress:E}=(0,X.C)(),{formattedRecurringTotalTooltip:b,lineItemsLabels:v,deliveryOptionGroupTypeLabels:C,deliveryMethodTitlePrefixes:k,connectTwoShippingTitles:P}=U(),A=ue(),I=(0,c.W)();return(0,a.useCallback)((async(a,r)=>{y(void 0);const s=R(a.shippingContact);e.write(E,s),I.leaveBreadcrumb("ApplePay: Shipping contact selected",{partialStreetAddress:JSON.stringify(s)}),await d(void 0,{silenceValidations:!0,silenceViolations:["all"],fieldsToResolve:["deliveryNext","duties","taxes"],progression:!1,customizeNegotiation:e=>(0,i.OF)(e,s,te.i.ApplePay,f),onComplete:a=>{const s=o(a);s.effects?.forEach((e=>e())),e.read(g).value?A({session:r,paymentSheetAction:s,onProceed:e=>function(e,n){const{paymentDue:a,recurringTotals:r,deliveryNext:o,...s}=(0,i.Nw)(u);if(null==a)return t({session:e,error:new h("Missing negotiated payment due")});try{e.completeShippingContactSelection({errors:n,newTotal:N(v.total,a),newLineItems:S({...s,formattedRecurringTotals:l(r),formattedRecurringTotalTooltip:b,lineItemsLabels:v,deliveryOptionGroupTypeLabels:C,deliveryMethodTitlePrefixes:k,isSplitShippingOptionsEnabled:_}),newShippingMethods:w({deliveryMethodTitlePrefixes:k,connectTwoShippingTitles:P,deliveryNext:o,isSplitShippingOptionsEnabled:_})})}catch(d){d instanceof Error&&t({error:d,session:e})}}(r,e)}):n()}})}),[y,e,E,I,d,f,o,g,A,n,u,t,v,l,b,C,k,_,P])})(),b=ye();return(0,a.useCallback)(((a,r,i)=>{o.write(t.paymentSheetError,void 0),o.write(n,!0),o.write(l.lastClickedWallet,j.R.ApplePay);const s=(0,H.MN)(!1),c=new AbortController;let u;try{u=new ApplePaySession(6,a)}catch(m){return void(m instanceof Error&&e({error:m}))}return u.oncancel=()=>d(c,s),u.onvalidatemerchant=()=>f(u,r,i,c),u.onpaymentmethodselected=e=>g(e,u),u.onshippingmethodselected=e=>_(e,u),u.onshippingcontactselected=e=>E(e,u),u.onpaymentauthorized=e=>b(e,u,s),u}),[n,t.paymentSheetError,d,b,g,E,_,f,o,l.lastClickedWallet,e])},_e=({asPaymentMethod:e,supportedNetworks:t})=>{const n=(0,l.u)().shop.country.code,y=(0,c.W)(),g=(0,s.a9)(),_=(0,u.nR)(),E=ge(),b=(0,m.ob)(u.fi.ApplePay,_),[,v]=(0,d.RT)(),{inMemoryApplePayParts:C}=(0,p.b)(),[,k]=(0,r.fp)(C.asPaymentMethod),P=(0,f.ot)(),A=(()=>{const e=(0,z.FI)(),t=(0,m.zr)(),n=e.isRequired("phone"),l=(0,m.DC)(),{value:o}=(0,s.FC)(),d=(0,O.a)(W.GJ),c=(0,s.a9)(),u=(0,s.rZ)(),f=(0,V.p)(),{paymentDue:h,recurringTotals:y,...g}=(0,i.Nw)(c),_=U(),{deliveryMethodTitlePrefixes:E,connectTwoShippingTitles:b}=_,v=(0,r.QN)(),{inMemoryApplePayParts:{asPaymentMethod:C}}=(0,p.b)();return(0,a.useCallback)(((e,a)=>{const r=v.read(C).value,{requiredShippingContactFields:i,requiredBillingContactFields:s}=function({phoneRequired:e,emailRequired:t,shippingRequired:n}){const a=["name","postalAddress"],r=[...e?["phone"]:[],...t?["email"]:[]];return{requiredShippingContactFields:n?[...a,...r]:r,requiredBillingContactFields:a}}({phoneRequired:!r&&n,emailRequired:!r&&t,shippingRequired:!r&&l}),c=N(_.lineItemsLabels.total,h),m=function(e){const t={};return e?.email&&(t.emailAddress=e.email),e?.phone&&(t.phoneNumber=e.phone),t}("CustomerProfile"===u?.__typename?u:void 0),p=S({...g,formattedRecurringTotals:f(y),..._,isSplitShippingOptionsEnabled:d}),k=r?[]:w({deliveryMethodTitlePrefixes:E,connectTwoShippingTitles:b,deliveryNext:o,isSplitShippingOptionsEnabled:d});return{total:c,currencyCode:h.currencyCode,countryCode:a,lineItems:p,shippingMethods:k,shippingType:"shipping",merchantCapabilities:["supports3DS"],supportedNetworks:e,requiredShippingContactFields:i,requiredBillingContactFields:s,shippingContact:m,billingContact:m}}),[C,b,u,E,o,t,f,d,_,g,h,n,y,l,v])})();return(0,a.useCallback)((()=>{const{paymentDue:a}=(0,i.Nw)(g);if(!a)return b(u.lC.Failure,e?u.S4.PaymentMethod:u.S4.Express),v({type:"session_terminated"}),void y.notify(new h("Missing paymentDue"),{severity:"error",errorClass:o.t8.Api});P.incrementCounter("apple_pay_button_click",1,new Map([["as_payment_method",e.toString()]])),k(e);const r=A(t,n),l=E(r,n,!e);l?.begin()}),[e,A,E,n,y,g,k,v,t,P,b])}},88561:(e,t,n)=>{n.d(t,{G:()=>a});class a extends Error{constructor(...e){super(...e),this.name="BuyWithPrimeChangeLinkError"}}},99944:(e,t,n)=>{n.d(t,{S:()=>s});var a=n(15299),r=n(86883),l=n(58168);const o={success:e=>a.createElement("svg",(0,l.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 50"},e),a.createElement("path",{strokeWidth:2,d:"M49 25c0 13.255-10.745 24-24 24S1 38.255 1 25 11.745 1 25 1s24 10.745 24 24Z",style:{stroke:"currentColor"}}),a.createElement("path",{strokeWidth:2,d:"m15 24.511 7.307 7.307L35.125 19",style:{stroke:"currentColor"}})),cancelled:e=>a.createElement("svg",(0,l.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 50"},e),a.createElement("path",{strokeWidth:2,d:"M49 25c0 13.255-10.745 24-24 24S1 38.255 1 25 11.745 1 25 1s24 10.745 24 24Z",style:{stroke:"currentColor"}}),a.createElement("path",{d:"M39 12 12 39M12 12l27 27",style:{stroke:"currentColor"}})),warning:e=>a.createElement("svg",(0,l.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 50"},e),a.createElement("path",{strokeWidth:2,d:"M49 25c0 13.255-10.745 24-24 24S1 38.255 1 25 11.745 1 25 1s24 10.745 24 24Z",style:{stroke:"currentColor"}}),a.createElement("path",{strokeLinecap:"square",strokeWidth:2,d:"M25 11v19",style:{stroke:"currentColor"}}),a.createElement("path",{fillRule:"evenodd",d:"M25 39a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3",clipRule:"evenodd",style:{fill:"currentColor"}}))},i=48;function s({status:e,color:t="var(--x-default-color-accent)"}){const n=o[e];return a.default.createElement(r.S,{maxBlockSize:i,maxInlineSize:i,minBlockSize:i,minInlineSize:i},a.default.createElement(n,{focusable:"false","aria-hidden":"true",style:{color:t}}))}},13130:(e,t,n)=>{n.d(t,{R:()=>I});var a=n(15299),r=n(76882),l=n(94973),o=n(85013),i=n(18012),s=n(27534),d=n(84506),c=n(53008),u=n(1304),m=n(50996),p=n(64106),f=n(9210),h=n(80107),y=n(13614),g=n(32148),_=n(59208),E=n(19874),b=n(46966),v=n(25387),C=n(70234),S=n(70097);const k="closeCheckoutPolicyModal",w="shop.app";function P({source:e,title:t}){const n=`${t}-policy-modal`,[,r]=(0,l.fp)(C.N),o=(0,S.b)().isStandard(),{closeOverlay:i}=(0,b.e)();return(0,a.useEffect)((()=>{const e=({data:e,origin:t})=>{if(!t)return;const a=new URL(window.location.origin);e!==k||t!==window.location.origin&&!function(e){return e.hostname===w}(a)||i?.(n)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e,!1)}}),[i,n]),a.default.createElement(v.a,{id:n,source:e,onOpen:()=>{o&&r("footerContent")},onClose:()=>{o&&r("none")},title:t,padding:!0,blockSize:o?"fill":void 0})}const A="Shop Cash terms";function I(){const[e]=(0,l.fp)(f.D.showShopCashTerms),t=(0,p.Bl)(),{name:n,merchantPolicies:c=[]}=(0,m.q)(),u=(0,r.W)(),b=(0,h.B)(),v=(0,E.uL)(),{footer:{alignment:C,content:{visibility:S}={}}={}}=(0,g.kV)(),k=(0,a.useMemo)((()=>c.filter((({handle:e})=>!t||"subscription-policy"!==e)).map((({handle:e,url:t})=>({handle:e,url:t,name:u("shop_policies",{scope:e.replace(/-/g,"_")},{contact_information:"Contact information",legal_notice:"Legal notice",privacy_policy:"Privacy policy",purchase_options_cancellation_policy:"Cancellation policy",purchase_options_policy:"Purchase options policy",refund_policy:"Refund policy",shipping_policy:"Shipping policy",subscription_policy:"Subscription policy",terms_of_sale:"Terms of sale",terms_of_service:"Terms of service"})})))),[c,t,u]),w=0===k?.length?a.default.createElement(o.o,{blockAlignment:"center",inlineAlignment:C,spacing:["small400","base"]},a.default.createElement(i.E,{size:"small",appearance:"subdued"},u("general.all_rights_reserved",{shop_name:n},"All rights reserved %{shop_name}")),e&&a.default.createElement(x,null)):a.default.createElement(o.o,{inlineAlignment:C,spacing:["small400","base"]},k.map((({handle:e,name:n,url:r})=>a.default.createElement(s.$,{kind:"plain",overlay:b?void 0:a.default.createElement(P,{source:r,title:n}),key:e,"aria-haspopup":"dialog",ref:v(e)},t?n:a.default.createElement(i.E,{size:"small"},n)))),e&&a.default.createElement(x,null)),A=(0,y.w9)("purchase.checkout.footer.render-after"),I=(0,y.w9)("purchase.thank-you.footer.render-after");return a.default.createElement(d.a,{spacing:"large100"},"hidden"!==S&&w,a.default.createElement(_.N,{extensions:A,spacing:"base"}),a.default.createElement(_.N,{extensions:I,spacing:"base"}))}function x(){return a.default.createElement(c.N,{external:!0,to:"https://shop.app/shop-cash-terms",accessibilityLabel:A},a.default.createElement(o.o,{blockAlignment:"center",spacing:"small500"},a.default.createElement(i.E,{size:"small"},A),a.default.createElement(u.In,{source:"external",size:"small",display:"inline",appearance:"monochrome"})))}},41969:(e,t,n)=>{n.d(t,{H:()=>s,g:()=>d});var a=n(15299),r=n(13788),l=n(84506),o=n(52322),i=n(82199);function s({children:e}){const{formLayout:{spacing:t}}=(0,r.x)();return a.default.createElement(l.a,{spacing:t},e)}function d({children:e}){const{formLayout:{spacing:t="base"}}=(0,r.x)();return a.default.createElement(o.S,{spacing:t,autoFlow:i.OF.default("row").when({viewportInlineSize:{min:"small"}},"column")},e)}},52818:(e,t,n)=>{n.d(t,{b:()=>b});var a=n(58168),r=n(15299),l=n(53008),o=n(86883),i=n(44985),s=n(32148),d=n(50996),c=n(34839),u=n(54732),m=n(52027),p=n(80107),f=n(97100),h=n(11157),y=n(87039),g=n(19874);const _=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",width:72,height:30,fill:"none",viewBox:"0 0 101 42"},e),r.createElement("path",{fill:"#5433EB",d:"M12.029 18.26c-4.059-.88-5.867-1.225-5.867-2.79q0-2.204 3.67-2.203c2.153 0 3.726.94 4.884 2.783a.315.315 0 0 0 .416.115l4.566-2.307a.32.32 0 0 0 .131-.449c-1.895-3.287-5.397-5.086-10.007-5.086C3.764 8.323 0 11.31 0 16.056c0 5.042 4.583 6.316 8.647 7.197 4.065.88 5.878 1.225 5.878 2.789s-1.322 2.302-3.96 2.302c-2.437 0-4.245-1.116-5.337-3.281a.32.32 0 0 0-.432-.142L.24 27.179a.325.325 0 0 0-.142.438c1.808 3.636 5.518 5.682 10.472 5.682 6.31 0 10.123-2.937 10.123-7.831s-4.605-6.317-8.664-7.197zM36.502 8.323c-2.59 0-4.878.92-6.523 2.554a.16.16 0 0 1-.273-.115V.322A.32.32 0 0 0 29.384 0H23.67a.32.32 0 0 0-.322.323v32.402c0 .18.142.322.322.322h5.714a.32.32 0 0 0 .322-.322V18.511c0-2.746 2.103-4.851 4.939-4.851s4.889 2.062 4.889 4.85v14.214c0 .18.142.322.322.322h5.714a.32.32 0 0 0 .322-.322V18.511c0-5.972-3.911-10.183-9.39-10.183zM57.496 7.4c-3.103 0-6.02.945-8.106 2.318a.323.323 0 0 0-.104.432l2.518 4.304c.093.153.29.207.443.114a10.03 10.03 0 0 1 5.25-1.443c4.987 0 8.652 3.522 8.652 8.176 0 3.964-2.933 6.9-6.653 6.9-3.032 0-5.135-1.765-5.135-4.26 0-1.426.606-2.597 2.185-3.423a.317.317 0 0 0 .125-.448l-2.376-4.025a.32.32 0 0 0-.388-.137c-3.184 1.182-5.419 4.025-5.419 7.842 0 5.775 4.594 10.085 11.002 10.085 7.484 0 12.865-5.19 12.865-12.633 0-7.979-6.26-13.808-14.87-13.808zM89.064 8.28c-2.89 0-5.469 1.066-7.353 2.947a.16.16 0 0 1-.273-.115V8.848a.32.32 0 0 0-.323-.322H75.55a.32.32 0 0 0-.322.322v32.353c0 .18.142.323.322.323h5.714a.32.32 0 0 0 .322-.323V30.59c0-.142.17-.213.273-.12 1.88 1.75 4.365 2.773 7.211 2.773 6.703 0 11.931-5.43 11.931-12.485S95.766 8.274 89.069 8.274zm-1.077 19.484c-3.813 0-6.702-3.035-6.702-7.049s2.884-7.049 6.702-7.049 6.698 2.986 6.698 7.05c0 4.063-2.841 7.048-6.703 7.048z"})),E={Logo:"hmHjN",ShopName:"RsSB7"};function b({width:e}){const{header:{logo:t}}=(0,s.kV)(),n=(0,p.u)(),b=(0,d.q)(),v=(0,c.Fo)(),C=(0,m.j9)(),S=(0,u.P)("simulated"),{isOrderEditCheckout:k}=(0,h.S)(),{currentUrl:w}=(0,i.r)(),P=(0,g.uL)(),A=(0,f.r)();if((0,y.Mx)(w.search))return r.default.createElement(_,{height:30,width:72});const I=!S&&!A&&!k,x=(I&&t?.link)??v.headerLogoUrl??(b.hasStorefront&&I&&C.storefront()),M=n?{width:e}:{style:{maxWidth:`min(100%, ${e}px)`}},T=t?.image?r.default.createElement("img",(0,a.A)({src:t.image,alt:t.altText??b.name,className:E.Logo},e&&M,{height:e&&t.aspectRatio?e/t.aspectRatio:void 0})):r.default.createElement("span",{className:E.ShopName},b.name);if(x){const e=r.default.createElement("span",{ref:P("logo")},r.default.createElement(l.N,{to:x,appearance:"monochrome",textDecoration:"none"},T));return t?.image&&t?.maxWidth?r.default.createElement(o.S,{maxInlineSize:t?.maxWidth},e):e}return T}},22525:(e,t,n)=>{n.d(t,{v:()=>l});var a=n(58168),r=n(15299);const l=(0,r.forwardRef)((function(e,t){return r.default.createElement("iframe",(0,a.A)({},e,{ref:t}))}))},579:(e,t,n)=>{n.d(t,{c:()=>s});var a=n(15299),r=n(76882),l=n(53008),o=n(25387),i=n(50996);function s({handle:e}){const t=(0,r.W)(),[n,s]=(0,a.useState)(!1),{merchantPolicies:d}=(0,i.q)(),c=t("shop_policies",{scope:e.replace(/-/g,"_")},{contact_information:"Contact information",legal_notice:"Legal notice",privacy_policy:"Privacy policy",purchase_options_cancellation_policy:"Cancellation policy",purchase_options_policy:"Purchase options policy",refund_policy:"Refund policy",shipping_policy:"Shipping policy",subscription_policy:"Subscription policy",terms_of_sale:"Terms of sale",terms_of_service:"Terms of service"}),u=d&&d.length>0?d.find((t=>t.handle===e)):void 0;return u?a.default.createElement(a.default.Fragment,null,a.default.createElement(l.N,{onPress:()=>s(!0),"aria-haspopup":"dialog"},c),a.default.createElement(o.a,{open:n,source:u.url,title:c,onClose:()=>s(!1),padding:!0})):a.default.createElement(a.default.Fragment,null,c)}},54493:(e,t,n)=>{n.d(t,{R:()=>o});var a=n(15299),r=n(70212);const l={Wrapper:"pxSEU",Loading:"Kyqce"};function o({active:e=!1,size:t="base",children:n}){return a.default.createElement("div",{className:l.Wrapper,"aria-hidden":e?"true":"false"},e&&a.default.createElement("div",{className:l.Loading},a.default.createElement(r.y,{size:t})),n)}},68355:(e,t,n)=>{n.d(t,{T:()=>h});var a=n(15299),r=n(32485),l=n.n(r),o=n(76882),i=n(52027),s=n(67551),d=n(22525);const c={Map:"UlC9u"},u=n.p+"b1cb08d9bc7f3f02ae66.svg",m=n.p+"1d95a97370ba2873236f.svg",p="shopify_sandboxed_message:";function f(e){return e?.map((e=>{switch(e.type){case"current":return{...e,image:u};case"destination":return{...e,image:m};default:return e}}))}function h({className:e,markers:t,options:n,title:r,mapId:u,onMarkerSelect:m,handleBoundsChanged:h,handleCenterChanged:y,handleClick:g,handleDoubleClick:_,handleDrag:E,handleZoomChanged:b,handleDragEnd:v}){const C=(0,i.j9)(),S=(0,o.W)(),k=(0,a.useRef)(null),w=(0,a.useRef)(u??(0,s.u)()),P=(0,a.useRef)(!1),A=e=>{return k.current?.contentWindow?.postMessage((t=e,`${p}${JSON.stringify(t)}`),"*");var t},I=(0,a.useCallback)((({data:e})=>{function a(e){const t=e();t&&t?.action&&A(t)}const r=function(e){if("string"==typeof e&&e.startsWith(p))try{return JSON.parse(e.replace(p,""))}catch{}}(e);if(r?.id===w.current)switch(r?.action){case"ready":A({action:"createMapAndMarkers",body:f(t),options:n}),P.current=!0;break;case"marker":m?.(r?.body);break;case"bounds_changed":a((()=>h?.()));break;case"center_changed":a((()=>y?.()));break;case"click":a((()=>g?.(r?.body)));break;case"dblclick":a((()=>_?.(r?.body)));break;case"drag":a((()=>E?.()));break;case"zoom_changed":a((()=>b?.()));break;case"dragend":a((()=>v?.()))}}),[m,h,y,g,_,E,b]);return(0,a.useEffect)((()=>(window.addEventListener("message",I),()=>window.removeEventListener("message",I)))),(0,a.useEffect)((()=>{P&&A({action:"updateMarkers",body:f(t),options:n})}),[t,n]),a.default.createElement(d.v,{ref:k,title:r??S("general.google_map_title","Google Map"),className:l()(c.Map,e),src:C.sandboxGoogleMaps(w.current)})}},96088:(e,t,n)=>{n.d(t,{K:()=>a});const a=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]},3185:(e,t,n)=>{n.d(t,{I:()=>v});var a=n(15299),r=n(13788),l=n(86883),o=n(9520),i=n(84506),s=n(29155),d=n(18012),c=n(85630),u=n(76882),m=n(85914),p=n(13614),f=n(29664),h=n(36125),y=n(56784),g=n(66126),_=n(59208),E=n(60001);const b={wordBreak:"iZ894"};function v({id:e,deferredAmount:t,options:n,properties:v,quantity:C,recurringTotal:S,sellingPlan:k,subtitle:w,title:P,totalPrice:A,children:I}){const{lineItems:{quantityPosition:x="thumbnailBadge",titleTypographyStyle:M,optionsTypographyStyle:T,optionsAppearance:N="subdued",optionsEmphasis:L,optionsFormat:D="inline"}}=(0,r.x)(),R=(0,f.i)(),B=n&&n.length>0,F=t?.amount&&t.amount>0&&A?A:null,z=(0,c.a)(),V=(0,u.W)(),O=(0,m.G)(z),{currentDetour:W}=(0,h.Wm)();let q="Checkout::CartLineDetails::RenderAfter";(0,y.a)(g.hD)&&"thankYou"===W?.type&&(q="Checkout::ThankYou::CartLineDetails::RenderAfter");const $=(0,p.w9)(q),U={size:"small",appearance:"base"===N?void 0:N,emphasis:"base"===L?void 0:L,style:T};return a.default.createElement(l.S,{className:b.wordBreak},a.default.createElement(o.V,{style:M},P),a.default.createElement(i.a,{spacing:"none"},"inline"===D&&w?a.default.createElement(o.V,U,w):null,"descriptionList"===D&&B?a.default.createElement(s.B,{marker:"none",spacing:"none"},n?.map((({name:e,value:t})=>{const n=`${e}: ${t}`;return a.default.createElement(s.c,{key:e},a.default.createElement(d.E,U,n))}))):null,"inlinePrimary"===x?a.default.createElement(s.B,{marker:"none",spacing:"none"},a.default.createElement(s.c,null,a.default.createElement(d.E,U,V("order_summary.quantity_label","Quantity"),": ",C))):null,k&&a.default.createElement(o.V,U,k.name),F?a.default.createElement(o.V,U,V("order_summary.full_price",{price:z(F.amount,{currency:F.currencyCode,form:"short"})},"Full price: %{price}")):null,S&&S.fixedPrice&&S.fixedPriceCount?a.default.createElement(o.V,U,O(S)):null,v&&!R&&a.default.createElement(E.Z,{properties:v}),I,e&&a.default.createElement(_.N,{extensions:$,options:{stableId:e}})))}},60001:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(15299),r=n(13788),l=n(29155),o=n(53008),i=n(18012),s=n(6211);function d({name:e,value:t,...n}){const r=`${e}: ${t}`;return"string"!=typeof t||0!==t.lastIndexOf("https://cdn.undefined",0)&&0!==t.lastIndexOf(`https://${s.$z}`,0)?a.default.createElement(i.E,n,r):a.default.createElement(o.N,{to:t},a.default.createElement(i.E,n,e))}function c({properties:e,available:t}){const{lineItems:{propertiesTypographyStyle:n,propertiesAppearance:o="subdued",propertiesEmphasis:i}}=(0,r.x)(),s=e.map((({name:e,visible:r,value:s,sourceType:c})=>r&&"MerchandisePropertyValueJson"!==c&&""!==s&&null!==s&&a.default.createElement(l.c,{key:e},a.default.createElement(d,{size:"small",appearance:"base"===o?void 0:o,emphasis:"base"===i?void 0:i,accessibilityRole:!1===t?"deletion":void 0,style:n,name:e,value:s}))));return s.length>0?a.default.createElement(l.B,{marker:"none",spacing:"small400"},s):null}},56173:(e,t,n)=>{n.d(t,{c:()=>F});var a=n(15299),r=n(84506),l=n(82199),o=n(36675),i=n(72149),s=n(97100),d=n(19084),c=n(64106),u=n(56953),m=n(84030),p=n(76882),f=n(9520),h=n(53008),y=n(94973),g=n(85418),_=n(53416),E=n(20484),b=n(39370),v=n(66242),C=n(88561),S=n(82380);function k(){const e=(0,p.W)(),t=(0,g.N)(_.lC.AmazonPay),n=(0,g.N)(_.lC.BuyWithPrime),{inMemoryAmazonPayParts:r}=(0,E.b)(),l=(0,y.md)(r.sdkStatus),i=(0,v.W)(),s=(0,S.N)(),[,d]=(0,u.KW)(),c=n??t;if(l.status===b.SY.Error&&i.notify(new C.G("Unable to render change payment link because BWP SDK is unavailable")),l.status!==b.SY.Available)return null;if(!s||!t&&!n)return null;const m=Boolean(n);return a.default.createElement(o.l,{status:"critical"},a.default.createElement(f.V,null,e("amazon_pay.error_page.payment_decline.message","There was an issue processing your payment. Try again or "),a.default.createElement(h.N,{onPress:()=>{try{m?l.sdk.buywithprime.changePaymentMethod({amazonPayOptions:{amazonCheckoutSessionId:c,isDeclined:!0}}):l.sdk.Pay.changePaymentMethod({amazonCheckoutSessionId:c,isDeclined:s})}catch(e){d({type:"buy_with_prime_change_action_failure"}),i.notify(new C.G(`Error on changing buyer payment method. Details: ${e}`))}}},e("amazon_pay.error_page.payment_decline.link","use a different payment method."))))}var w=n(82491),P=n(87455),A=n(88686);function I({notice:e}){return e.localizedMessageHtml||e.localizedMessage||e.nonLocalizedMessage?a.default.createElement(o.l,{key:e.code,status:e.status??"info",onDismiss:e.onDismiss,title:e.localizedTitle,collapsible:e.collapsible},e.localizedMessageHtml?a.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.localizedMessageHtml}}):e.localizedMessage||e.nonLocalizedMessage):null}var x=n(53898);const M=()=>{const e=(0,s.r)(),t=(0,P.o)(),n=(0,i.w)(),{contactErrors:p,deliveryAddressErrors:f,globalErrors:h}=(0,d.a)(),{merchandiseLineTransformerErrors:y}=(0,A.L)(),g=(0,c.Bl)()?["large200","large200","none","large200"]:"none",_=(0,u.v2)(),{hasError:E}=(0,w.e)(),b=(0,m.vH)();return n.length>0||h.length>0||y.length>0||f.length>0||p.length>0||_.length>0||E?a.default.createElement(r.a,{spacing:"small200",padding:l.OF.default(e?["none","large200","base","large200"]:g).when({viewportInlineSize:{min:"small"}},"none")},n.map((e=>a.default.createElement(I,{key:e.code,notice:e}))),h.length>0?a.default.createElement(x.X,{errors:h}):null,y.length>0?a.default.createElement(x.X,{errors:y}):null,b&&!t&&f.length>0?a.default.createElement(x.X,{errors:f}):null,(b||t)&&p.length>0?a.default.createElement(x.X,{errors:p}):null,_.map((e=>a.default.createElement(o.l,{key:e,status:"critical"},e))),E&&a.default.createElement(k,null)):null};var T=n(40716),N=n(98951);const L=()=>{const{filterViolationsByType:e}=(0,T.c)(),t=e(N.j.ReductionViolations);return t&&0!==t.length?a.default.createElement(r.a,null,t.map((({code:e,localizedMessage:t,nonLocalizedMessage:n})=>a.default.createElement(o.l,{key:e,status:"warning"},t||n)))):null};var D=n(91176);function R(){const e=(0,D.Q)();return e?a.default.createElement(I,{notice:e}):null}function B(){const{filterViolationsByType:e}=(0,T.c)(),t=e(N.j.PaymentsViolations).filter(((e,t,n)=>t===n.findIndex((t=>t.code===e.code))));return t&&0!==t.length?a.default.createElement(r.a,null,t.map((({code:e,localizedMessage:t,nonLocalizedMessage:n})=>a.default.createElement(o.l,{key:e,status:"critical"},t||n)))):null}const F=({section:e="top"})=>({top:a.default.createElement(M,null),reductions:a.default.createElement(L,null),delivery:a.default.createElement(R,null),payment:a.default.createElement(B,null)}[e])},53898:(e,t,n)=>{n.d(t,{X:()=>l});var a=n(36675),r=n(15299);function l({errors:e}){return r.default.createElement(r.default.Fragment,null,e.map((e=>r.default.createElement(a.l,{key:`${e.target}${e.message}`,status:"critical"},e.message))))}},91176:(e,t,n)=>{n.d(t,{Q:()=>m});var a=n(76882),r=n(53008),l=n(15299),o=n(41601),i=n(63292),s=n(50996),d=n(98951),c=n(40716),u=n(5599);const m=()=>{const e=(0,a.W)(),t=(0,s.q)(),{filterEditableShippingAddressNoticeViolations:n}=(0,c.c)(),m=(0,o.q)(),p=(0,i.CL)(),f="inactive"!==m,h=d.j.DeliveryViolations,y=n(h);return 0===y.length||!f||p.loading?null:(0,u.e)({violations:y,noticeType:d.j.DeliveryViolations,noticeTitle:e("notice_banner.violations_title",{violation:e("notice_banner.individual_violations_title",{scope:h},{DeliveryViolations:"Shipping address",OtherViolations:"Order Information",PaymentViolations:"Billing address"})},"{{violation}} is missing or invalid"),noticeHeader:e("notice_banner.editable_shipping_address_violations_message_title","Add this information to complete your order:"),noticeFooter:e("notice_banner.editable_shipping_address_violations_message_footer",{emailLink:l.default.createElement(r.N,{to:`mailto:${t.contactEmail}`},e("notice_banner.editable_shipping_address_violations_email_link","contact us"))},"To permanently update the address for this location, {{emailLink}}.")})}},40716:(e,t,n)=>{n.d(t,{c:()=>y});var a=n(15299),r=n(94973),l=n(77979),o=n(78414),i=n(36125),s=n(80469),d=n(63292),c=n(41601),u=n(31374),m=n(90984),p=n(74267),f=n(59351),h=n(98951);function y(){const[e,t]=(0,a.useState)([]),n=(0,o.Z)(),y=(0,d.JZ)(),g=(0,i.Wm)(),_=(0,s.N)(),E=(0,c.q)(),{currentStep:b}=(0,i.Wm)(),{shippingAddress:v}=(0,u.C)(),C=(0,r.QN)(),S="inactive"!==E,k="payment"===b?.id,w="information"===b?.id,P=C.read(v).value,A=e=>f.OW.has(e)?h.j.DeliveryViolations:f.xS.has(e)?h.j.PaymentsViolations:f.HZ.has(e)?h.j.ReductionViolations:f.u3.has(e)?h.j.TipsViolations:h.j.OtherViolations,I=(0,a.useCallback)((e=>{if(!_||!n.current)return;const a=e.filter((e=>{const t=g.currentDetour?.type?f.d.get(g.currentDetour?.type)??[]:[];return![...f.rw,...t].includes(e.code)}));t(a)}),[_,g.currentDetour?.type,n]);return(0,a.useEffect)((()=>{y.value&&I(y.value)}),[y.value,I]),{filterViolationsByType:t=>e.filter((({code:e})=>A(e)===t)),filterViolationsByStep:t=>{const n=!k&&t===h.j.PaymentsViolations;return e.filter((({code:e})=>{if((!S||t!==h.j.DeliveryViolations&&!n)&&e!==l.X.PaymentsMethod)return A(e)===t}))},filterEditableShippingAddressNoticeViolations:t=>e.filter((({code:e})=>{if(!(S&&w&&(0,m.o)(P,{...p.$X,countryCode:P?.countryCode,company:_?.company?.name})))return A(e)===t})),filterPaymentMethodsUpdatedViolation:()=>e.filter((({code:e})=>e===l.X.PaymentsMethod))}}},72149:(e,t,n)=>{n.d(t,{w:()=>H}),n(44114);var a=n(76882),r=n(15299),l=n(89557),o=n(77979),i=n(78414),s=n(36125),d=n(63292),c=n(86766),u=n(33294),m=n(74251),p=n(41813),f=n(69516),h=n(19481),y=n(53008),g=n(84030),_=n(52027),E=n(46277),b=n(90319),v=n(24690),C=n(64106),S=n(56953),k=n(42420),w=n(98951),P=n(50996),A=n(59351),I=n(5599),x=n(40716),M=n(21273),T=n(61022),N=n(58389),L=n(69618);var D=n(41601),R=n(90992);function B(){const e=(0,P.q)(),t=(0,a.W)();return r.default.createElement(R.c,null,t("thank_you.missing_shipping_address_banner.text_html",{contact_us:r.default.createElement(y.N,{to:`mailto:${e.contactEmail}`},t("thank_you.missing_shipping_address_banner.contact_us","Contact us"))},{options:{dangerouslySetInnerHTML:!0}},"%{contact_us} to add your address"))}const F=()=>{const[e,t]=(0,r.useState)(!1),{filterViolationsByType:n}=(0,x.c)(),a=n(w.j.TipsViolations),l=a.length>0?a[0]:null;return(0,r.useMemo)((()=>e||!l?null:{code:w.j.TipsViolations,localizedMessage:l.localizedMessage||l.nonLocalizedMessage,status:"warning",onDismiss:()=>t(!0)}),[e,l])};var z=n(91176);const V=()=>{const e=(0,a.W)(),{filterPaymentMethodsUpdatedViolation:t}=(0,x.c)();return 0===t().length?null:{code:w.j.PaymentsViolations,localizedMessage:e("payment_errors.available_methods_updated","Available payment methods have been updated.")}};function O(){const e=function(){const e=(0,a.W)(),[t,n]=(0,r.useState)(void 0),{companyLocationChanged:l}=(0,M.E)(),o=function(){const e=(0,T.$_)(),t=(0,g.AZ)(),[n,a]=(0,r.useState)(!1),l=(0,r.useMemo)((()=>e.createUpdate(N.Z.CompanyLocationBundleRemoved,{scope:L.zW})),[e]),o=e.get(N.Z.CompanyLocationBundleRemoved,{scope:L.zW});return(0,r.useMemo)((()=>{const e=o?.current;return o?e!==t&&(l({previous:e,current:t}),a(Boolean(e&&!t))):l({previous:void 0,current:t}),n}),[t,n,o,a,l])}();return(0,r.useMemo)((()=>!0!==t&&l?(n(!1),{code:w.j.CompanyLocationChanged,localizedMessage:o?e("notice_banner.company_location_changed_product_removed","Your cart has been updated because some products are not available at this location. Review your order before submitting it."):e("notice_banner.company_location_changed","Your cart has been updated. Review your order before submitting it."),onDismiss:()=>n(!0)}):null),[t,e,l,o])}(),t=function(){const e=(0,a.W)(),[t,n]=(0,r.useState)(!1),l=(0,g.tu)(),o="inactive"!==(0,D.q)(),i=(0,C.Bl)(),{shippingRequired:s}=(0,g.kG)();return t||!l||o||i||!s?null:{code:w.j.ShippingAddressIsMissing,localizedTitle:e("thank_you.missing_shipping_address_banner.title","Order doesn’t have a shipping address"),localizedMessage:r.default.createElement(B,null),status:"info",onDismiss:()=>n(!0)}}(),n=F(),l=(0,z.Q)(),o=V(),{filterViolationsByStep:i}=(0,x.c)(),d=(0,C.Bl)(),c=(0,a.W)(),{currentDetour:u}=(0,s.Wm)(),m=(0,P.q)();if(u?.type&&A.IL.includes(u.type))return[];const p=[];return(d?[w.j.DeliveryViolations,w.j.OtherViolations]:[w.j.PaymentsViolations,w.j.DeliveryViolations,w.j.OtherViolations]).forEach((e=>{const t=i(e),n=(0,I.e)({violations:t,noticeType:e,noticeTitle:c("notice_banner.violations_title",{violation:c("notice_banner.individual_violations_title",{scope:e},{DeliveryViolations:"Shipping address",OtherViolations:"Order Information",PaymentViolations:"Billing address"})},"{{violation}} is missing or invalid"),noticeHeader:c("notice_banner.all_violations_content",{emailLink:r.default.createElement("a",{href:`mailto:${m.contactEmail}`},c("notice_banner.all_violations_email_link","email"))},"Call or {{emailLink}} us to update this information and complete your order:")});n&&p.push(n)})),[...p,...e?[e]:[],...t?[t]:[],...n?[n]:[],...l&&!d?[l]:[],...o&&!d?[o]:[]]}const W=new Set([o.X.MerchandiseCartUpdatedBasedOnCountry,o.X.MerchandiseCartAndCurrencyUpdatedBasedOnCountry]);var q=n(87455),$=n(76386),U=n(86224);function H(){const e=(0,i.Z)(),t=(0,a.W)(),[n,P]=(0,r.useState)([]),A=function(){const e=(0,g.Jr)(),t=(0,a.W)(),n=(0,_.j9)();return r.default.useMemo((()=>e?{code:e.code,localizedTitle:e.localizedMessage||e.nonLocalizedMessage,localizedMessage:r.default.createElement(r.default.Fragment,null,t("notice_banner.return_to_cart_to_update_quantities",{return_to_cart_link_text:r.default.createElement(y.N,{appearance:"monochrome",to:n.cart()},t("notice_banner.return_to_cart_link_text","Return to cart"))},"%{return_to_cart_link_text} to update the quantities")),collapsible:!1,status:"critical"}:null),[e,t,n])}(),I=function(){const e=(0,u.Zj)(),t=(0,m.mx)(),[n]=(0,h.k)(),a=(0,p._B)(),[l]=(0,p.dx)(),[o]=(0,p.VS)(),i=(0,f.fC)(),s="error"===l.status||"error"===o.status,d=i||n||e||t||(s?null:a);return(0,r.useMemo)((()=>{if(d)return{code:"PaymentSheetViolations",localizedMessage:d,nonLocalizedMessage:d,status:"critical"}}),[d])}(),x=function(){const e=(0,a.W)(),t=(0,E.IX)(),n=(0,b.x)(),l=(0,C.Bl)(),o=(0,S.Bv)(),i=(0,r.useMemo)((()=>"failed"===t?.status&&"payment"===t.failure?.type&&t?.failure.code===v.y.PreChargeError&&"success"!==n.type),[n.type,t])&&(l||o),[{error:s}]=(0,k.T)(),d=i||s,c=(0,r.useMemo)((()=>i?w.j.PaymentsViolations:w.j.OtherViolations),[i]);return d?{code:c,localizedMessage:e("wallets.errors.generic",{walletName:e("brand.amazon_pay","Amazon Pay")},"There was an issue with {{walletName}}. Try again or use a different payment method."),status:"critical"}:null}(),M=function(){const e=(0,d.Ek)(),t=(0,a.W)();return(0,r.useMemo)((()=>e.value?.sellingPlanMismatch?{code:w.j.SellingPlanDigest,localizedMessage:t("notice_banner.subscription_changed","One of your subscriptions has changed."),status:"warning"}:void 0),[e,t])}(),T=function(){const{value:e}=(0,d.JZ)(),t=(0,r.useMemo)((()=>e?.filter((({code:e})=>W.has(e)))),[e]);return(0,r.useMemo)((()=>{if(t?.length)return{...t[0],status:"info"}}),[t])}(),N=function(){const e=(0,d.DN)(),t=(0,d.Ek)(),n=(0,a.W)(),[l,o]=(0,r.useState)("unset"),[i,c]=(0,r.useState)(),{currentStep:u}=(0,s.Wm)();return(0,r.useEffect)((()=>{"unset"===l&&e&&e.value&&o(e.value.status),t.value?.priceMismatch&&"unset"!==l&&e.value?.status&&l!==e.value.status?(c({code:w.j.TaxExemption,localizedMessage:n("change_country.cart_updated_based_on_country","Your cart has been updated based on your shipping country.")}),o(e.value.status)):t.value?.priceMismatch&&"information"!==u?.id||c(void 0)}),[l,e,n,t,u]),i}(),L=(0,d.JZ)(),D=O(),R=(0,d.Dr)()?.value?.lines,B=function(){const e=(0,a.W)(),{topNoticeError:t}=(0,U.k)();if(!(0,q.o)()||!t)return null;switch(t){case $.Cq.CheckingShippingRequirement:return{code:w.j.CheckingShippingRequirement,localizedMessage:e("notice_banner.calculating_shipping","Shipping is still being calculated. Try again in a few seconds. You haven’t been charged."),status:"critical"};case $.Cq.CalculatingTaxes:return{code:w.j.CalculatingTaxes,localizedMessage:e("notice_banner.calculating_taxes","Taxes are still being calculated. Try again in a few seconds. You haven't been charged."),status:"critical"};default:return null}}(),F=Boolean((0,c.jl)(R,l.R.ApplePay)),z=(0,r.useCallback)((({violations:e,negotiationStage:n})=>{const a=[],r=[];for(const l of e)if("ConfirmChangeViolation"===l.__typename||"UnprocessableTermViolation"===l.__typename||"RemoveTermViolation"===l.__typename)switch(l.code){case o.X.DeliveryDeliveryLineDetailChanged:"completion"===n&&a.push({...l,status:"critical",localizedMessage:t("payment.shipping_rate_updated","Available shipping methods have been updated. Confirm your choice before checking out."),localizedMessageHtml:t("payment.shipping_rate_updated","Available shipping methods have been updated. Confirm your choice before checking out."),priority:1});continue;case o.X.PaymentsUnacceptablePaymentAmount:"completion"===n&&a.push({...l,status:"critical",priority:-1});continue;case o.X.BuyerIdentityContactInfoDoesNotMatchCustomerProfile:"completion"===n&&a.push({...l,status:"critical"});continue;case o.X.NoteLengthExceedsMaximum:case o.X.ProposalLineItemLimitReached:case o.X.MerchandiseLineLimitReached:a.push({...l,status:"critical"});continue;case o.X.PaymentManualPaymentsNotAllowedForB2B:r.push({...l,status:"warning"});continue;case o.X.BuyerIdentityCurrencyNotSupportedByShop:case o.X.MerchandiseCartUpdatedBasedOnCountry:a.push(l);continue;case o.X.PaymentsWalletPaypalExpressAddressInvalid:a.push({...l,localizedMessage:t("wallets.errors.terminal",{walletName:t("brand.paypal","PayPal")},"There was an issue with {{walletName}}. Please use a different payment method."),status:"critical"});continue;case o.X.ProposalSessionIdentifierNotUnique:a.push({...l,localizedMessageHtml:t("session_errors.session_not_unique","There was a problem processing your order. Refresh this page to return to the store."),localizedMessage:t("session_errors.session_not_unique","There was a problem processing your order. Refresh this page to return to the store."),status:"critical"});continue;case o.X.ProposalSessionAlreadyFinished:a.push({...l,localizedMessageHtml:t("session_errors.session_already_finished","This order has already been submitted. You can return to the store to start a new order."),localizedMessage:t("session_errors.session_already_finished","This order has already been submitted. You can return to the store to start a new order."),status:"critical"});continue;case o.X.ValidationCustom:case o.X.MerchandiseLineTransformersRunError:case o.X.CartCheckoutValidationRuntimeError:continue;case o.X.PaymentsShippingMustMatchBilling:if(!F)continue;a.push({...l,status:"critical"});continue;case o.X.DiscountsCurrentlyInactive:case o.X.DiscountsNoEntitledLineItems:case o.X.DiscountsUsageLimitReached:case o.X.DiscountsCustomerNotEligible:case o.X.DiscountsCustomerUsageLimitReached:if(!F)continue;a.push({...l,localizedMessageHtml:t("discount_errors.generic_error","Your order couldn't be processed because your discount code is no longer available. Review your order total and try again."),localizedMessage:t("discount_errors.generic_error","Your order couldn't be processed because your discount code is no longer available. Review your order total and try again."),status:"critical"});continue;default:continue}if(a.length>=1){const e=0,t=a.map((t=>t.priority??e)).reduce(((e,t)=>e>t?e:t)),n=a.filter((n=>(n.priority??e)>=t));return r.concat(n)}return r.concat(a)}),[t,F]);return(0,r.useEffect)((()=>{L.value&&P(z({violations:L.value}))}),[z]),(0,s.od)((t=>{if("complete"===t.type||"invalid"===t.type||"failed"===t.type||!e.current)return;const{violations:n,negotiationStage:a}=t;P(z({violations:n,negotiationStage:a}))})),[...n,...N?[N]:[],...M?[M]:[],...A?[A]:[],...I?[I]:[],...x?[x]:[],...D,...T?[T]:[],...B?[B]:[]].filter(function(e){const t=new Set;return n=>{const a=t.has(n[e]);return t.add(n[e]),!a}}("localizedMessage"))}},5599:(e,t,n)=>{n.d(t,{e:()=>r});var a=n(15299);const r=({violations:e,noticeType:t,noticeTitle:n,noticeHeader:r,noticeFooter:l})=>0===e.length?null:{code:t,status:"critical",localizedTitle:n,localizedMessage:a.default.createElement(a.default.Fragment,null,r,a.default.createElement("ul",{style:{listStyle:"inside"}},e.map((e=>a.default.createElement("li",{key:e.code},e.localizedMessageHtml?a.default.createElement("span",{dangerouslySetInnerHTML:{__html:e.localizedMessageHtml}}):e.localizedMessage||e.nonLocalizedMessage)))),l)}},98951:(e,t,n)=>{n.d(t,{j:()=>a});let a=function(e){return e.TaxExemption="TaxExemption",e.SellingPlanDigest="SellingPlanDigest",e.CompanyLocationChanged="CompanyLocationChanged",e.ShippingAddressIsMissing="ShippingAddressIsMissing",e.PaymentsViolations="PaymentViolations",e.DeliveryViolations="DeliveryViolations",e.ReductionViolations="ReductionViolations",e.TipsViolations="TipsViolations",e.OtherViolations="OtherViolations",e.PaymentSheetViolations="PaymentSheetViolations",e.CheckingShippingRequirement="CheckingShippingRequirement",e.CalculatingTaxes="CalculatingTaxes",e}({})},90089:(e,t,n)=>{n.d(t,{wC:()=>C,Gm:()=>S,Wd:()=>b});var a=n(58168),r=n(15299),l=n(84506),o=n(86222),i=n(40776),s=n(47359),d=n(13788),c=n(34399),u=n(86883),m=n(33519),p=n(63290),f=n(2640),h=n(26464),y=n(32485),g=n.n(y),_=n(7851);const E={Label:"H8QVc",Selected:"DLpaq"};function b(e){if((0,_.j)()||"choice"===e?.forceList){const t=function({id:e,onChange:t,selectedItems:n,children:a}){return{name:e,onChange(e){t("string"==typeof e?[e]:e)},value:1===n.length?n[0]:n,children:a}}(e);return r.default.createElement(l.a,{spacing:"none"},r.default.createElement(o.f,{border:e.hideRadioButton?"none":void 0,spacing:e.hideRadioButton?"none":void 0,padding:e.hideRadioButton?"none":void 0},r.default.createElement(i.s,(0,a.A)({},t,{hideRadioButton:e.hideRadioButton,variant:e.hideRadioButton?"group":void 0}))))}return r.default.createElement(s.m,e)}function v({children:e,padding:t,...n}){const{control:{background:l="base",cornerRadius:o="base"}}=(0,d.x)(),{value:i}=(0,c.dl)(),s=i===n.id;return r.default.createElement(u.S,{padding:t??"small100",cornerRadius:o,className:g()("transparent"!==l&&s&&[E.Selected,(0,m.Fo)({colorLayer:"controlSelected"})])},r.default.createElement(p.G,(0,a.A)({detailsPadding:"none"},n),r.default.createElement(u.S,{className:E.Label},e)))}function C(e){return(0,_.j)()||"choice"===e?.forceList?r.default.createElement(v,(0,a.A)({},e,{padding:e.padding})):r.default.createElement(f.c$,e)}function S(e){return(0,_.j)()?r.default.createElement(u.S,{padding:["small100","none","small100","none"]},e.children):r.default.createElement(h.g,e)}},27922:(e,t,n)=>{n.d(t,{D:()=>g});var a=n(15299),r=n(36675),l=n(18012),o=n(77491),i=n(62344),s=n(98913),d=n(96241),c=n(99399),u=n(9520),m=n(76882),p=n(85630),f=n(63292),h=n(92996);let y=function(e){return e.Incremented="INCREMENTED",e.Decremented="DECREMENTED",e.Removed="REMOVED",e.Returned="RETURNED",e.ReturnLineItemRemoved="RETURN_LINE_ITEM_REMOVED",e}({});function g(){const e=(0,m.W)(),t=(0,p.a)(),{value:n}=(0,f.UM)(),u=(0,h.Te)(),y=(0,h.qk)().filter((e=>e.quantityChange&&e.quantityChange.delta));if(!n||y&&y.length<=0)return null;const g=t(n.amount,{currency:n.currencyCode,form:"short"});return a.default.createElement(r.l,{title:e("payment.order_edit_banner_title",{amount_owed:g},"Payment of {{amount_owed}} is needed"),collapsible:!0},a.default.createElement(l.E,null,e("payment.order_edit_banner_subtitle",{order_number:u?`#${u}`:""},"Your order {{order_number}} was updated. Review these changes, then pay to confirm your order.")),a.default.createElement(o.S,{spacing:"base"}),a.default.createElement(i.c,null),a.default.createElement(s.jF,{title:e("payment.order_edit_banner_updated_order_label","Updated order"),titleHidden:!0,border:"inner",spacing:"none"},a.default.createElement(s.Og,{hidden:!0},a.default.createElement(s.F2,{hidden:!0},e("order_summary.product_image_label","Product image")),a.default.createElement(s.F2,{hidden:!0},e("order_summary.description_label","Description")),a.default.createElement(s.F2,{hidden:!0},e("order_summary.quantity_label","Quantity"))),y.map((({quantity:e,quantityChange:t,image:n,title:r,variantTitle:o})=>a.default.createElement(d.K,{key:`${r}${o?`-${o}`:""}`,blockPadding:"base"},a.default.createElement(d.Z,{inlineAlignment:"start"},a.default.createElement(c.s,{accessibilityLabel:n?.altText??r,size:"base",source:n?.url})),a.default.createElement(d.Z,{primary:!0},a.default.createElement(l.E,{size:"base",emphasis:"bold"},r),o&&a.default.createElement(l.E,{appearance:"subdued",size:"small"},o)),a.default.createElement(d.Z,{inlineAlignment:"center"},t&&t.delta&&t.type&&a.default.createElement(_,{remainingQuantity:e,delta:t.delta,type:t.type})))))))}function _({remainingQuantity:e,delta:t,type:n}){const r=(0,m.W)();if(0===t)return null;const l=0===e,o=e+t;let i;switch(n){case y.Incremented:i=r("payment.order_edit_banner_items_added",{count:t},{one:"Added",other:"%{count} added"});break;case y.Decremented:i=r("payment.order_edit_banner_items_removed.with_quantities",{quantity:o,delta:t},"{{delta}} of {{quantity}} removed");break;case y.Removed:i=r("payment.order_edit_banner_items_removed.in_full","Removed");break;case y.Returned:i=l?r("payment.order_edit_banner_items_returned.in_full","Returned"):r("payment.order_edit_banner_items_returned.with_quantities",{quantity:o,delta:t},"{{delta}} of {{quantity}} returned");break;case y.ReturnLineItemRemoved:i=l?r("payment.order_edit_banner_items_return_line_item_removed.in_full","Removed from return"):r("payment.order_edit_banner_items_return_line_item_removed.with_quantities",{delta:t},"{{delta}} removed from return");break;default:return null}return a.default.createElement(u.V,{emphasis:"bold",size:"small",inlineAlignment:"end"},i.toUpperCase())}},73534:(e,t,n)=>{n.d(t,{V:()=>ne});var a=n(58168),r=n(15299),l=n(76882),o=n(54740),i=n(13788),s=n(84506),d=n(98913),c=n(62344),u=n(18012),m=n(13614),p=n(81930),f=n(64106),h=n(36125),y=n(56784),g=n(66126),_=n(59208),E=n(96241),b=n(99399),v=n(82199),C=n(86883),S=n(22245),k=n(32485),w=n.n(k),P=n(3185);const A={Line:"bua0H"};var I=n(9520),x=n(85630),M=n(80469);function T({unitPrice:e}){const[t]=(0,y.Z)([g.Bx]),n=(0,x.a)();if(!t||null===e)return null;const a=`${n(e.price.amount,{currency:e.price.currencyCode,form:"short"})}/${e.measurement.referenceValue}${e.measurement.referenceUnit.toLowerCase()}`;return r.default.createElement(I.V,{size:"small",appearance:"subdued"},a)}function N({unitPrice:e,itemPrice:t,quantity:n}){const a=(0,M.N)(),o=Boolean(a)&&!e&&n>1&&t,i=(0,l.W)(),s=(0,x.a)();return e?r.default.createElement(T,{unitPrice:e}):o?r.default.createElement(r.default.Fragment,null,r.default.createElement(I.V,{size:"small",appearance:"subdued"},r.default.createElement("span",{"aria-hidden":!0},i("order_summary.price_per_item.label",{price:s(t.amount,{currency:t.currencyCode,form:"short"})},"%{price}/ea")),r.default.createElement(u.E,{visibility:"hidden"},i("order_summary.price_per_item.accessibility_label",{price:s(t.amount,{currency:t.currencyCode,form:"short"})},"%{price} per item")))):null}var L=n(23743),D=n(1304);const R={DiscountCode:"vGZhc"};function B({discount:e,amount:t}){const n=(0,x.a)();if((0,y.a)(g.WE)&&0===t.amount)return null;const a=t.amount>0?` (${n(-t.amount,{currency:t.currencyCode,form:"short"})})`:null;return r.default.createElement(L.C,{blockAlignment:"center",spacing:"small400",key:e.title,columns:["auto","fill"]},r.default.createElement(D.In,{source:"discount",size:"small",display:"inline"}),r.default.createElement("span",{className:R.DiscountCode},r.default.createElement(I.V,{size:"small",appearance:"subdued"},e.title.toUpperCase(),a)))}var F=n(27534),z=n(59754),V=n(41985),O=n(77491),W=n(60001),q=n(29664);function $({components:e,id:t}){const[n,a]=(0,r.useState)(e.length<=10),o=(0,l.W)(),{lineItems:{inlinePadding:c,blockPadding:p,optionsTypographyStyle:f,optionsAppearance:h="subdued",optionsEmphasis:y,titleTypographyStyle:g}}=(0,i.x)(),C={size:"small",appearance:"base"===h?void 0:h,emphasis:"base"===y?void 0:y,style:f},S=(0,m.w9)("Checkout::CartLineDetails::RenderLineComponents"),k=(0,q.i)();if(0===e.length)return null;if(t&&S.length>0){const e={stableId:t};return r.default.createElement(s.a,{overflow:"hidden"},r.default.createElement(_.N,{extensions:S,options:e}))}const w=e.reduce(((e,{quantity:t})=>e+t),0),P=n?o("order_summary.collapse_component_information",{count:w},{one:"Hide %{count} item",other:"Hide %{count} items"}):o("order_summary.expand_component_information",{count:w},{one:"Show %{count} item",other:"Show %{count} items"});return r.default.createElement(r.default.Fragment,null,r.default.createElement(s.a,{spacing:"small400"},r.default.createElement(F.$,{appearance:"monochrome",kind:"plain",textDecoration:"none",inlineAlignment:"start",onPress:()=>{a(!n)}},r.default.createElement(u.E,{appearance:"subdued",size:"small"},P),r.default.createElement(z.c,{spacing:"extraTight"}),r.default.createElement(D.In,{source:n?"chevronUp":"chevronDown",size:"extraSmall",display:"inline"})),r.default.createElement(V.e,{open:n,id:"collapsed-components"},r.default.createElement(d.jF,{spacing:"small100"},e.map((({stableId:e,merchandise:{title:t,subtitle:n,image:a,sellingPlan:l},quantity:i,properties:s})=>{const d=o("order_summary.component_quantity_title",{quantity:i,product_title:t},"%{quantity} × %{product_title}");return r.default.createElement(E.K,{key:e,spacing:"small300",inlinePadding:c,blockPadding:p},r.default.createElement(E.Z,{inlineAlignment:"start"},r.default.createElement(b.s,{size:"small",source:a?v.OF.default(a.one).when({resolution:1},a.one).when({resolution:2},a.two).when({resolution:4},a.four):void 0,accessibilityLabel:a?.altText??t})),r.default.createElement(E.Z,{primary:!0},r.default.createElement(u.E,{style:g,size:"small"},d),n&&r.default.createElement(u.E,C,n),l&&r.default.createElement(u.E,C,l.name),s&&!k&&r.default.createElement(W.Z,{properties:s})))}))))),r.default.createElement(O.S,{spacing:"small400"}))}function U({totalAmountBeforeReductions:e,totalAmountAfterDiscounts:t}){const n=(0,x.a)(),a=(0,l.W)(),o=t.amount>0?n(t.amount,{currency:t.currencyCode,form:"short"}):a("order_summary.free_total_label","Free");return r.default.createElement(r.default.Fragment,null,r.default.createElement(u.E,{size:"small",appearance:"subdued",accessibilityRole:"deletion"},n(e.amount,{currency:e.currencyCode,form:"short"})),r.default.createElement(I.V,null,o))}function H({totalAmountBeforeReductions:e,totalAmountAfterLineDiscounts:t,presentationLevel:n,hasDeferredAmount:a}){const o=(0,l.W)(),i=(0,x.a)();if((0,y.a)(g.w2)&&e.amount>t.amount)return r.default.createElement(U,{totalAmountAfterDiscounts:t,totalAmountBeforeReductions:e});if(e.amount>t.amount&&"LINE"===n)return r.default.createElement(U,{totalAmountAfterDiscounts:t,totalAmountBeforeReductions:e});const s=0===e.amount&&!a;return r.default.createElement(u.E,{translate:s},s?o("order_summary.free_total_label","Free"):i(e.amount,{currency:e.currencyCode,form:"short"}))}function j({id:e,quantity:t,itemPrice:n,unitPrice:a,lineDiscounts:l,deferredAmount:o,totalPrice:s,sellingPlan:d,options:c,recurringTotal:m,title:p,subtitle:f,image:h,properties:y,totalAmountBeforeReductions:g,totalAmountAfterLineDiscounts:_,components:k}){const{lineItems:{quantityPosition:I="thumbnailBadge",inlinePadding:x,itemDivider:M,itemSpacing:T,blockPadding:L,hideQuantityWhenSingleItem:D}}=(0,i.x)(),R=D&&1===t||"thumbnailBadge"!==I?void 0:t;return r.default.createElement(r.default.Fragment,null,r.default.createElement(E.K,{divider:M,spacing:T,inlinePadding:x,blockPadding:L},r.default.createElement(E.Z,{inlineAlignment:"start"},r.default.createElement(b.s,{source:h?v.OF.default(h.one).when({resolution:1},h.one).when({resolution:2},h.two).when({resolution:4},h.four):void 0,accessibilityLabel:h?.altText??p,badge:R})),r.default.createElement(E.Z,{primary:!0},r.default.createElement(P.I,{id:e,title:p,subtitle:f,quantity:t,properties:y,sellingPlan:d,options:c,recurringTotal:m,totalPrice:s,deferredAmount:o},r.default.createElement(N,{unitPrice:a,itemPrice:n,quantity:t}),l.length>0||k.length>0?r.default.createElement(r.default.Fragment,null,l.map((e=>r.default.createElement(B,{key:e.id,discount:e.discount,amount:e.amount}))),r.default.createElement($,{components:k,id:e})):null)),r.default.createElement(E.Z,{hidden:"inline"!==I},r.default.createElement(u.E,null,t,r.default.createElement(C.S,{accessibilityVisibility:"hidden"}," x"))),r.default.createElement(E.Z,{inlineAlignment:"start"},r.default.createElement(C.S,{className:w()([A.Line]),minBlockSize:S.M.base.boxSize,inlineAlignment:"end",blockAlignment:"center"},r.default.createElement(H,{totalAmountBeforeReductions:g,totalAmountAfterLineDiscounts:_,presentationLevel:0===l.length?"CART":"LINE",hasDeferredAmount:Boolean(o?.amount)})))))}var Y=n(92996),G=n(35240);function X(){const e=(0,Y.qk)().filter((e=>(e?.quantity??-1)>0));return 0===e.length?null:r.default.createElement(r.default.Fragment,null,e.map(((e,t)=>r.default.createElement(j,{key:`${t}${e.title}`,title:e.title,properties:e.properties,image:Q(e.image),totalAmountAfterLineDiscounts:e.priceAfterDiscounts,totalAmountBeforeReductions:e.price,quantity:e.quantity,subtitle:e.variantTitle,lineDiscounts:e.appliedDiscounts.filter(Z).map((e=>J(e,t))),components:[]}))))}const Z=e=>"LINE"===e.presentationLevel,Q=e=>e?{...e,altText:e.altText||""}:null,J=(e,t)=>({id:`allocation-${t}-${(0,G.Yv)(e.title)}`,discount:{type:"applied",title:e.title,presentationLevel:e.presentationLevel},amount:e.amountDiscounted});var K=n(98841);const ee=e=>r.default.createElement(o.w,null,e);function te(e){return e.quantity>0}const ne=(0,r.memo)((function({withDivider:e,groupProductsByType:t=!1}){const n=(0,l.W)(),E=(0,f.Bl)(),{currentDetour:b}=(0,h.Wm)(),v=(0,y.a)(g.hD),{lineItems:{border:C,borderStyle:S,spacing:k}}=(0,i.x)(),w=(0,r.useMemo)((()=>v&&"thankYou"===b?.type?{dynamicRender:"Checkout::ThankYou::Dynamic::Render",cartLinesRenderAfter:"Checkout::ThankYou::CartLines::RenderAfter"}:{dynamicRender:"Checkout::Dynamic::Render",cartLinesRenderAfter:"Checkout::CartLines::RenderAfter"}),[b?.type,v]),P=(0,m.w9)(w.dynamicRender,p._.OrderSummary1),A=(0,m.w9)(w.dynamicRender,p._.OrderSummary2),I=(0,m.w9)(w.cartLinesRenderAfter),{oneTimePurchaseLines:x,subscriptionPurchaseLines:M,hasOneTimeAndSubscriptionLines:T}=(0,K.C)(),N=E?x.filter(te):x,L=E?M.filter(te):M;return r.default.createElement(s.a,{spacing:"large200"},r.default.createElement(_.N,{extensions:P,render:ee}),r.default.createElement(o.w,null,r.default.createElement(d.jF,{border:C,borderStyle:S,spacing:k,title:n("order_summary.shopping_cart_label","Shopping cart"),titleHidden:!0},r.default.createElement(d.Og,{hidden:!0},r.default.createElement(d.F2,{hidden:!0},n("order_summary.product_image_label","Product image")),r.default.createElement(d.F2,{hidden:!0},n("order_summary.description_label","Description")),r.default.createElement(d.F2,{hidden:!0},n("order_summary.quantity_label","Quantity")),r.default.createElement(d.F2,{hidden:!0},n("order_summary.price_label","Price"))),N.map((({key:e,...t})=>r.default.createElement(j,(0,a.A)({key:e},t)))),r.default.createElement(X,null),T&&t&&r.default.createElement(r.default.Fragment,null,r.default.createElement(c.c,null),r.default.createElement(u.E,{appearance:"subdued"},n("order_summary.subscriptions","Subscriptions"))),L.map((({key:e,...t})=>r.default.createElement(j,(0,a.A)({key:e},t)))))),r.default.createElement(_.N,{extensions:I,render:ee}),r.default.createElement(_.N,{extensions:A,spacing:"large200",render:ee}),e&&r.default.createElement(c.c,null))}))},98841:(e,t,n)=>{n.d(t,{C:()=>p});var a=n(15299),r=n(94973),l=n(31374),o=n(63292),i=n(38482),s=n(35240),d=n(826),c=n(41598),u=n(64106),m=n(36125);function p(){const e=(0,u.Bl)(),{value:t}=(0,o.Ek)(),{value:n}=(0,o.JZ)(),{currentDetour:i}=(0,m.Wm)(),{merchandiseLines:d}=(0,l.C)(),p=(0,r.md)(d),[h]=(0,a.useState)(p);return function(e,t,n,a){const r=(0,c.Nt)(t,a),l=n.filter((({quantity:e,stableId:t})=>e>0&&!r.has(t))),o=(0,c.jl)(t,n,a).map((({proposed:e,negotiated:t})=>t??e)),i=void 0===l||0===l.length&&o.length>0,d=i?o:l,u=(0,s.ON)(d),m=f((0,s.le)(d),t,i,e);return{oneTimePurchaseLines:m,subscriptionPurchaseLines:f(u,t,i,e),hasOneTimeAndSubscriptionLines:(0,s.DG)(d)&&m.length>0}}(e,"stockProblems"===i?.type?h:p,t?.lines??[],n??[])}function f(e,t,n,a){return e.flatMap((e=>{const r=t.find((({stableId:t})=>t===e.stableId)),l=n&&r?r.lineAllocations:e.lineAllocations;return(0,d.ON)({...e,lineAllocations:l}).map((({lineAllocation:t,...n})=>({key:`${n.stableId}-${t.stableId}`,id:t.stableId,image:n.image,title:n.title,subtitle:n.subtitle,components:n.lineComponents.map(h),quantity:t.quantity,properties:n.properties,options:n.options,itemPrice:e.itemPrice,unitPrice:t.unitPrice,totalAmountBeforeReductions:t.checkoutPriceBeforeReductions,totalAmountAfterLineDiscounts:t.totalAmountAfterLineDiscounts,deferredAmount:n.deferredAmount,totalPrice:t.totalAmountBeforeReductions,sellingPlan:n.sellingPlan??null,recurringTotal:a?n.recurringTotal:null,lineDiscounts:t.allocations.filter(y).map((e=>g(e,t.stableId)))})))}))}const h=e=>({properties:e.properties,quantity:e.lineAllocation.quantity,stableId:e.lineAllocation.stableId,totalAmountBeforeReductions:e.lineAllocation.checkoutPriceBeforeReductions,merchandise:{deferredAmount:e.deferredAmount,digest:e.digest,giftCard:e.giftCard,image:e.image,options:e.options,itemPrice:e.itemPrice,productType:e.productType,productId:e.productId,vendor:e.vendor,requiresShipping:e.requiresShipping,sellingPlan:e.sellingPlan,subtitle:e.subtitle,title:e.title,variantId:e.variantId}}),y=e=>(0,i.n4)(e.discountDetails.discount)&&"LINE"===e.discountDetails.discount.presentationLevel,g=(e,t)=>({id:`allocation-${t}-${(0,s.Yv)(e.discountDetails.title)}`,discount:e.discountDetails.discount,amount:e.amount})},51080:(e,t,n)=>{n.d(t,{Q:()=>s});var a=n(15299),r=n(70681),l=n(18871),o=n(15947);const i=(0,r.m)({load:()=>(0,l.P)((()=>n.e(378).then(n.bind(n,25452)))),id:()=>25452});function s(e){const t="venmo"===e.fundingSource?"Venmo":"PayPal";return a.default.createElement(o.r,{id:t},a.default.createElement(i,e))}},33607:(e,t,n)=>{n.d(t,{j7:()=>_,rO:()=>g});var a=n(15299),r=n(76882),l=n(85630),o=n(58238),i=n(18012),s=n(86883),d=n(85013),c=n(38482),u=n(57511),m=n(89557),p=n(41813),f=n(63292),h=n(74251),y=n(33294);function g({paymentLine:e,showAmount:t=!1}){const n=(0,r.W)(),s=(0,l.a)(),d=(0,p.YU)(),{value:m}=(0,f.mu)(),{value:h}=(0,f.oo)(),y=t&&e.cost?s(e.cost.amount,{form:"short",currency:e.cost.currencyCode}):void 0,g=function(e){if(e)return a.default.createElement(i.E,{key:"paymentTerms",emphasis:"bold"},e)}(h?.translatedName);switch(e.method.type){case"giftCard":return a.default.createElement(_,{label:n("order_summary.gift_card_label","Gift card"),icon:a.default.createElement(o.k,{name:"gift_card"}),amount:y,details:n("payment.ends_with_label",{last_digits:e.method.code.slice(-4).toUpperCase()},"ending with %{last_digits}")});case"redeemable":return e.method.redemptionSource===u.D.StoreCredit?a.default.createElement(_,{label:n("payment.store_credit.label","Store credit"),icon:a.default.createElement(o.k,{name:"store_credit"}),details:n("payment.store_credit.label","Store credit"),amount:y}):null;case c.NK.CreditCard:{const t=m?.find((t=>t.type===c.NK.CreditCard&&e.method.type===c.NK.CreditCard&&t.token===e.method.token)),r=t?.brand||"generic",l=t?n("payment.ends_with_label",{last_digits:t.displayLastDigits},"ending with %{last_digits}"):void 0;return g?a.default.createElement(_,{label:r,icon:a.default.createElement(o.k,{name:r}),details:[l,l?" · ":null,g],amount:y}):a.default.createElement(_,{label:r,icon:a.default.createElement(o.k,{name:r}),details:l,amount:y})}case"direct":{if(d){const e=n("brand.paypal","PayPal");return a.default.createElement(_,{label:e,icon:a.default.createElement(o.k,{name:"paypal"}),details:e,amount:y})}const t=e.method.brand??"generic",r=e.method.creditCardLastFourDigits?n("payment.ends_with_label",{last_digits:e.method.creditCardLastFourDigits},"ending with %{last_digits}"):void 0,l=r?[r,g?" · ":null,g]:g;return a.default.createElement(_,{label:t,icon:a.default.createElement(o.k,{name:t}),details:l,amount:y})}case"wallet":return a.default.createElement(E,{name:e.method.name,paymentMethods:m});case"offsite":case"customOnsite":return a.default.createElement(_,{label:e.method.name,icon:a.default.createElement(o.k,{name:"generic"})});case"paymentOnDelivery":return a.default.createElement(_,{label:n("payment_gateway.cash_on_delivery_label","Cash on Delivery (COD)")});case"manualPayment":case"customManualPayment":return a.default.createElement(_,{label:e.method.name});case"deferred":{const e=m?.find((e=>"deferred"===e.type));return a.default.createElement(_,{details:[e?.displayName??n("payment_gateway.deferred_payment_label","Choose payment method later"),g?" · ":null,g]})}case"local":{const{name:t}=e.method;return a.default.createElement(_,{label:t,icon:a.default.createElement(o.k,{name:t})})}default:return null}}function _({icon:e,label:t,details:n,amount:r,spacing:l="base"}){return a.default.createElement(d.o,{spacing:l},e,t?e?a.default.createElement(s.S,{visibility:"hidden"},t):a.default.createElement(i.E,null,t):null,n&&a.default.createElement(i.E,null,n),r&&a.default.createElement(i.E,{emphasis:"bold"},r))}function E({name:e,paymentMethods:t}){const n=(0,r.W)(),[l]=(0,h.SY)(),i=(0,p.Ji)();switch(e){case m.R.PaypalExpress:{const e=i?n("brand.venmo","Venmo"):n("brand.paypal","PayPal"),t=i?a.default.createElement(o.k,{name:"venmo"}):a.default.createElement(o.k,{name:"paypal"});return a.default.createElement(_,{label:e,icon:t,details:e})}case m.R.GooglePay:{const e=l,t=a.default.createElement(o.k,{name:"google_pay"}),r=e?.description??n("brand.google_pay","Google Pay");return a.default.createElement(_,{label:n("brand.google_pay","Google Pay"),icon:t,details:r})}case m.R.ApplePay:return a.default.createElement(b,{paymentMethods:t});default:return null}}function b({paymentMethods:e}){const t=e?.find((e=>"wallet"===e.type&&e.name===m.R.ApplePay));(0,y.$6)({supportedNetworks:t?.supportedNetworks});const n=(0,r.W)(),l=a.default.createElement(o.k,{name:"apple_pay"}),i=n("brand.apple_pay","Apple Pay");return a.default.createElement(_,{label:i,icon:l,details:i})}},30782:(e,t,n)=>{n.d(t,{l:()=>l});var a=n(15299);const r={Content:"xHqxM"};function l({children:e}){return a.default.createElement("div",{className:r.Content},e)}},22201:(e,t,n)=>{n.d(t,{U:()=>i});var a=n(15299),r=n(85013),l=n(9520),o=n(80934);function i({pickupLocation:e}){return e.carrierCode?a.default.createElement(r.o,{spacing:"extraTight",blockAlignment:"center"},a.default.createElement("img",{src:(0,o.jJ)(e),alt:e.carrierName,height:"18"}),e.fromDeliveryOptionGenerator&&a.default.createElement(l.V,{size:"small"},e.carrierName)):null}},80934:(e,t,n)=>{n.d(t,{jJ:()=>i,bH:()=>l,Zl:()=>o,Yj:()=>r});const a={colissimo:{mapLogo:n.p+"1e7271e4849a261ddaab.svg",fullLogo:n.p+"d369c28f6e488feb3e0e.svg",pin:n.p+"f40918fc61b5a04d4a7a.svg"},mondial_relay:{mapLogo:n.p+"4978e813462243e8b8d5.svg",fullLogo:n.p+"e36d79825c7c19fe161e.svg",pin:n.p+"9251f5243a4b210a5be0.svg"},chronopost:{mapLogo:n.p+"c4e55806e7bf639ac3c8.svg",fullLogo:n.p+"be400a0f65e8839494a9.svg",pin:n.p+"e7f47a364ae2db94c7bb.svg"}};function r(e){return Boolean(l(e))}function l(e){return a[e]?.mapLogo}function o(e){return a[e]?.pin}function i(e){return!r(e.carrierCode)||e.fromDeliveryOptionGenerator?e.carrierLogoUrl:(t=e.carrierCode,a[t]?.fullLogo);var t}},9205:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(15299),r=n(32485),l=n.n(r),o=n(50190),i=n(39629),s=n(39122),d=n(15694),c=n(55081),u=n(17141);const m=10;const p={Popper:"Pf2ss"};function f({children:e,offset:t,arrowOffset:n,contentWidth:r,contentHeight:l,placement:o="inlineEnd",activator:i,open:s}){const d=function(e){const[t,n]=(0,a.useState)(null),r=(0,a.useCallback)((()=>{null!==e&&n(e.getBoundingClientRect())}),[e]);return(0,a.useLayoutEffect)((()=>(r(),window.addEventListener("resize",r),window.addEventListener("scroll",r),()=>{window.removeEventListener("resize",r),window.removeEventListener("scroll",r)})),[r]),t}(i??null),[c,f]=function(){const[e,t]=(0,a.useState)(null);return[e,(0,a.useCallback)((e=>{null!==e&&t(e.getBoundingClientRect())}),[])]}(),{offsets:h,spacing:y}=(0,a.useMemo)((()=>s?function(e,t,n,a,{offset:r=0,arrowOffset:l=0}={}){let o={x:0,y:0},i={left:0,right:0},s=0;if(!t&&!n)return{offsets:o,spacing:s};if(!a){const{clientWidth:e,clientHeight:a}=document.documentElement;return o={x:e/2-t/2,y:a/2-n/2},{offsets:o,spacing:s}}switch(e){case"blockEnd":o={x:"rtl"===(document?.dir??"ltr")?a.left:a.right-t,y:a.bottom+r};break;case"inlineEnd":o={x:"rtl"===(document?.dir??"ltr")?a.left-t-r:a.right+r,y:a.top+a.height/2-l}}return i=function(e,t){const n=document.documentElement.clientWidth,a=e.x+t;let r={left:0,right:0};return a>n&&(r={...r,right:n-a}),e.x<0&&(r={...r,left:-e.x}),r}(o,t),i.right&&!i.left?(o.x+=i.right,s=-m):!i.right&&i.left&&(o.x=0,s=m),{offsets:o,spacing:s}}(o,(r||c?.width)??0,(l||c?.height)??0,d,{offset:t,arrowOffset:n}):{offsets:{x:0,y:0},spacing:0}),[t,n,o,c,d,s,r,l]),{x:g,y:_}=(0,a.useMemo)((()=>s?function({x:e,y:t}){const n=window.devicePixelRatio||1;return{x:Math.round(e*n)/n||0,y:Math.round(t*n)/n||0}}({x:h.x+y+(window.scrollX||window.pageXOffset),y:h.y+(window.scrollY||window.pageYOffset)}):{x:0,y:0}),[h,y,s]),E=(0,a.useMemo)((()=>s?(window.devicePixelRatio||1)<2?`translate(${g}px, ${_}px)`:`translate3d(${g}px, ${_}px, 0)`:"none"),[s,g,_]);return a.default.createElement(u.Z,null,a.default.createElement("div",{className:p.Popper,style:{...c&&{transform:E,MozTransform:E,WebkitTransform:E}},ref:f,"aria-hidden":!s},e))}const h={Backdrop:"xMIj4","Backdrop-visible":"VLxei",BackdropLinearGradient:"HL3Ni",Popover:"yw5IT",Content:"sBT8I",PopoverArrow:"tcSqP",PopoverOpen:"cmmgp","Popover-placementInlineEnd":"x9acH","Popover-placementBlockEnd":"mPjCY",Bumper:"bCw1T"},y=(0,i.W)("Popover");function g({children:e,activator:t,open:n,placement:r="inlineEnd",contentWidth:i,contentHeight:u,onClose:m}){const p=(0,a.useRef)(null),g=(0,a.useRef)(null),_=(0,a.useRef)(null),E=(0,d.B)(void 0,y),b=(0,c.ts)(),v=(0,a.useCallback)((()=>{"BUTTON"===t?.tagName&&(t?.setAttribute("aria-controls",E),t?.setAttribute("aria-expanded",String(n)))}),[t,n,E]),C=(0,a.useCallback)((e=>{m?.(e)}),[m]),S=(0,a.useCallback)((e=>{e.target instanceof Node&&!t?.contains(e.target)&&document.contains(e.target)&&!_.current?.contains(e.target)&&n&&C(e)}),[C,t,n,_]),k=(0,a.useCallback)((e=>{if(n)switch(e.key){case"Escape":case"Esc":C(),t?.focus()}}),[C,t,n]);(0,a.useEffect)((()=>(document.addEventListener("click",S),()=>{document.removeEventListener("click",S)})),[S]),(0,a.useEffect)((()=>(n&&document.addEventListener("keydown",k,!1),()=>{document.removeEventListener("keydown",k,!1)})),[n,k]),(0,a.useEffect)((()=>{v()})),(0,a.useLayoutEffect)((()=>{n&&_.current?.focus({preventScroll:!0})}),[n]);const w=e=>{const t=_.current;if(t){const n=e?(0,s.ag)(t):(0,s.KB)(t);n?n.focus():t.focus()}},P=l()(h.Popover,h[(0,o.N)("Popover-placement",r)],n&&h.PopoverOpen,t&&h.PopoverArrow);return a.default.createElement(a.default.Fragment,null,a.default.createElement(f,{activator:t,placement:r,offset:15,arrowOffset:30,open:n,contentWidth:i,contentHeight:u},n&&a.default.createElement("button",{className:h.Bumper,ref:p,"aria-hidden":"true",onFocus:()=>w(!1)}),a.default.createElement("div",{className:P,id:E,ref:_},a.default.createElement("div",{className:h.Content},e)),n&&a.default.createElement("button",{className:h.Bumper,ref:g,"aria-hidden":"true",onFocus:()=>w(!0)})),a.default.createElement("div",{className:l()(h.Backdrop,n&&h["Backdrop-visible"],n&&b&&h.BackdropLinearGradient)}))}},76035:(e,t,n)=>{n.d(t,{x:()=>i});var a=n(15299),r=n(18012),l=n(90992),o=n(76882);function i({link:e}){const t=(0,o.W)();return a.default.createElement(r.E,null,a.default.createElement(l.c,null,a.default.createElement("span",{dangerouslySetInnerHTML:{__html:t("shop_pay_remember_me.description_html","Next time you check out here or on other stores powered by Shopify, you’ll receive a code by text message to securely purchase with Shop Pay.")}})," ",e))}},19011:(e,t,n)=>{n.d(t,{H:()=>d});var a=n(76882),r=n(15299),l=n(18012),o=n(90992),i=n(53008),s=n(1304);function d(){const e=(0,a.W)();return r.default.createElement(l.E,{size:"small",appearance:"subdued"},r.default.createElement(o.c,null,e("shop_pay_remember_me.terms_and_privacy_html",{privacy_href:r.default.createElement(r.default.Fragment,null,r.default.createElement(i.N,{external:!0,to:"https://www.shopify.com/legal/privacy/app-users",appearance:"monochrome",accessibilityLabel:e("shop_pay_remember_me.new_window_disclaimer","(opens a new window)")},e("shop_pay_remember_me.privacy_policy","Privacy Policy"),r.default.createElement(s.In,{source:"external",size:"small",display:"inline",appearance:"monochrome"}))),terms_href:r.default.createElement(r.default.Fragment,null,r.default.createElement(i.N,{external:!0,to:"https://shop.app/terms-of-service",appearance:"monochrome",accessibilityLabel:e("shop_pay_remember_me.new_window_disclaimer","(opens a new window)")},e("shop_pay_remember_me.terms_of_service","Terms of Service"),r.default.createElement(s.In,{source:"external",size:"small",display:"inline"})))},{options:{dangerouslySetInnerHTML:!0}},"By continuing, you agree to Shop Pay’s %{privacy_href} and %{terms_href}.")))}},77745:(e,t,n)=>{n.d(t,{X:()=>o});var a=n(15299),r=n(54732),l=n(73963);function o({sectionId:e,children:t}){const n=(0,r.P)("simulated"),{sectionRef:o}=(0,l.Q8)(e);return n?a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{ref:o,style:{display:"none"}}),t):a.default.createElement(a.default.Fragment,null,t)}},73963:(e,t,n)=>{n.d(t,{Q8:()=>c,hq:()=>d});var a=n(15299),r=n(73896),l=n(94973),o=n(54732);const i=(0,r.qW)({defaultValue:{},initial:{}}),s=(0,r.MN)({});function d(){const[e]=(0,l.fp)(s);return(0,a.useMemo)((()=>({sections:e})),[e])}function c(e){const t=(0,o.P)("simulated"),n=(0,a.useRef)(null),[r,d]=(0,l.fp)(i({sectionId:e})),c=(0,l.QN)();return(0,a.useEffect)((()=>{if(t&&n?.current){if(!r.rendered&&n?.current){d({rendered:!0});const{value:t}=c.read(s);c.write(s,{...t,[e]:!0})}return()=>{if(r.rendered){d({rendered:!1});const{value:t}=c.read(s);c.write(s,(()=>{const n={...t};return e in n&&delete n[e],n}))}}}}),[t,n,r,d,e,c]),(0,a.useMemo)((()=>({sectionRef:n})),[n])}},30698:(e,t,n)=>{n.d(t,{pp:()=>k});var a=n(58168),r=n(15299),l=n(23743),o=n(29047),i=n(37981),s=n(13788),d=n(18012),c=n(86883),u=n(53008),m=n(48642),p=n(1304),f=n(84506),h=n(41985),y=n(96090),g=n(32485),_=n.n(g),E=n(76882),b=n(7851);const v={Summary:"rnc39",SummaryTextContainer:"qPZD5",StaticSummary:"oNWCA",CollapsibleContainer:"rZ__v",Button:"ZfMWZ",Label:"sJxop",Logo:"U7qmp",Icon:"EtXTf"},C=["base","none"],S=["base","none","large200","none"];function k({id:e,label:t,logo:n,summary:l,error:o,to:i,action:s,...d}){const c="children"in d&&r.Children.count(d.children)>0;return"onToggle"in d&&c&&void 0!==d.onToggle&&!i&&!s?r.default.createElement(b.R.Provider,{value:!0},r.default.createElement(T,(0,a.A)({id:e,label:t,logo:n,summary:l,error:o},d))):r.default.createElement(b.R.Provider,{value:!0},r.default.createElement(P,{id:e,label:t,logo:n,summary:l,to:i,action:s}))}function w({layoutStyle:e,...t}){return"inline"===e?r.default.createElement(l.C,(0,a.A)({blockAlignment:"start",columns:["1fr","3fr","auto"],spacing:"base"},t)):r.default.createElement(o.g,(0,a.A)({blockAlignment:"center",rows:["fill","auto"],spacing:"small400",padding:"none"},t))}function P({label:e,logo:t,summary:n,to:a,action:o}){const m=(0,i.t)({base:!1,medium:!0}),p=(0,E.W)(),{rollup:{layoutStyle:f}}=(0,s.x)(),h="string"==typeof e?r.default.createElement(d.E,{appearance:"subdued"},e):e,y=t&&r.default.createElement("span",{className:_()({[v.Logo]:m})},t),g=t&&"inline"===f,b=!t||g,S=r.default.createElement(r.default.Fragment,null,b&&h,!g&&y),k=C;return r.default.createElement(c.S,{padding:k},r.default.createElement("h2",{className:v.Button},r.default.createElement(w,{layoutStyle:f,inlineAlignment:a?void 0:"start"},a?r.default.createElement(l.C,{columns:["fill","auto"]},h,r.default.createElement(u.N,{to:a},p("vaulted.change_button","Change"))):r.default.createElement(c.S,{minInlineSize:"fill"},r.default.createElement(l.C,{columns:["fill","auto"],spacing:"base",blockAlignment:"center",inlineAlignment:"start"},S,o)),r.default.createElement(c.S,{minInlineSize:"fill",maxInlineSize:"fill"},g&&y,n?r.default.createElement(c.S,{className:v.StaticSummary},"string"==typeof n?r.default.createElement(d.E,null,n):n):null))))}function A({layoutStyle:e,icon:t,label:n,logo:o,children:i,transition:s,...d}){const u=!o||"inline"===e;let m=[];return m="inline"===e?"exited"===s?["fill","1fr","auto"]:["1fr","3fr","auto"]:["fill","auto"],r.default.createElement(r.default.Fragment,null,r.default.createElement(l.C,(0,a.A)({columns:m,spacing:"base",blockAlignment:"inline"===e?"start":"center",inlineAlignment:"start"},d),u&&n,"inline"===e?r.default.createElement(c.S,{minInlineSize:"fill"},o,i):o,t),"inline"!==e&&i)}const I=["exit","exiting","exited"],x=["enter","entering","entered",...I],M=["exited","enter"];function T({id:e,label:t,logo:n,summary:a,error:l,open:o,onToggle:u,children:g}){const E=Boolean(l),b=r.default.isValidElement(l),k=`${e}-collapsible`,w=`${k}-control`,P=o||E,T=(0,y.p)(!P,"fast"),[N,L]=(0,r.useState)(0),D=(0,r.useRef)(null),R=(0,i.t)({base:!1,medium:!0}),{rollup:{layoutStyle:B}}=(0,s.x)(),F=P?S:C,[z,V]=(0,r.useState)(F),O=(0,r.useCallback)((()=>{u?.(P)}),[u,P]);(0,r.useLayoutEffect)((()=>{D?.current&&D?.current?.clientHeight>0&&L(D?.current?.clientHeight)}),[D,T]),(0,r.useLayoutEffect)((()=>{"inline"===B&&("exited"!==T&&"entered"!==T||V(P?S:C))}),[P,T,B]);const W="exit"===T||"exiting"===T||"exited"===T;return r.default.createElement(c.S,{padding:z},r.default.createElement("h2",{className:v.Button},r.default.createElement(m.o,{padding:"none",display:"block",expanded:P,id:k,disabled:E,controlId:w,accessibilityRole:"expandableControl",minInlineSize:"fill",onPress:O},r.default.createElement(A,{layoutStyle:B,label:r.default.createElement("span",{className:v.Label},r.default.createElement(d.E,{appearance:"subdued"},t)),transition:T,logo:n&&r.default.createElement("span",{className:_()({[v.Logo]:R})},n),icon:r.default.createElement("div",{className:_()({[v.Icon]:R})},r.default.createElement(p.In,{size:"extraSmall",appearance:"accent",source:P?"chevronUp":"chevronDown"}))},a?r.default.createElement(f.a,{spacing:"none",inlineAlignment:"start"},r.default.createElement("div",{className:_()(v.Summary),style:{opacity:W?0:1,transitionDelay:"block"===B||void 0===B||"exited"===T?"0ms":"250ms",height:("inline"===B?M:I).includes(T)?0:"auto"}},r.default.createElement("div",{className:_()(v.SummaryTextContainer),ref:D,style:{paddingTop:"inline"===B?0:void 0}},"string"==typeof a?r.default.createElement(d.E,null,a):a))):null)),r.default.createElement("div",{style:{height:("inline"===B?M:I).includes(T)?`${N}px`:"0px",transitionDuration:"block"===B||void 0===B||W?"0ms":"250ms"}})),b&&r.default.createElement("div",{style:{marginTop:`calc(-${N}px + var(--x-spacing-small-100)`}},l),r.default.createElement("div",{className:_()(v.CollapsibleContainer),style:{marginTop:b?0:`-${N}px`,paddingBottom:("inline"===B?M:x).includes(T)?"0px":`${N}px`,minHeight:("inline"===B?M:x).includes(T)?`${N}px`:"0px",opacity:W?1:0,pointerEvents:W?"auto":"none",transitionDelay:"inline"===B&&W?"75ms":"0ms"}},r.default.createElement(h.e,{id:w,open:W,duration:"fast"},r.default.createElement(c.S,{padding:["small100","none","none","none"]},g))))}},59208:(e,t,n)=>{n.d(t,{N:()=>P});var a=n(86883),r=n(84506),l=n(15299),o=n(94530),i=n(2162),s=n(56764),d=n(55180),c=n(70524),u=n(78316),m=n(13614),p=n(66242),f=n(34839),h=n(43520),y=n(70212),g=n(35247),_=n(56784),E=n(66126);function b(){const[e]=(0,_.Z)([E.tJ]);return e?l.default.createElement(g.D,{inlineSize:"fill",blockSize:123}):l.default.createElement(a.S,{inlineAlignment:"center"},l.default.createElement(y.y,null))}const v=1e3,C=5e3;function S({options:e,extension:t,components:n,render:a}){const r=(0,p.W)(),y=(0,f.Fo)(),g=(0,l.useMemo)((()=>{const e=n??(0,c.L)({extension:t,notifyError(e){r.notify(e,{metadata:{extension:{id:t.extensionId,extensionPoint:t.extensionPoint.target,placementReference:t.placementReference,type:t.type},source:{type:y.type}}})}});return(0,s.d)(e)}),[]),_=(0,l.useRef)(null),E=(0,h.y7)(),{mounted:S,receiver:k,renderer:w}=function(e,t){const n=(0,m.s1)().get(e,t);(0,l.useEffect)((()=>n.render()),[n]);const a=(0,l.useMemo)((()=>({getCurrentValue:()=>({mounted:n.mounted,receiver:n.receiver,renderer:n}),subscribe(e){const t=n.on("mount",e),a=n.on("restart",e);return()=>{t(),a()}}})),[n]);return(0,o.useSubscription)(a)}(t,e);(0,l.useLayoutEffect)((()=>{if(S){const e=()=>{const{extensionId:e,placementReference:n,extensionPoint:a,appId:r}=t,{innerHeight:l,innerWidth:o}=window,i=_.current?.offsetWidth,s=_.current?.offsetHeight,d={extension:{extensionId:e,extensionPoint:a,placementReference:n,type:t.type,registrationId:"persisted"===t.type?t.registrationId:void 0,appId:r},extensionWidth:i,extensionHeight:s,viewportWidth:o,viewportHeight:l,timestamp:new Date};E("extensionDimensions",d)};e();const n=setTimeout((()=>{e()}),v),a=setTimeout((()=>{e()}),C),r=()=>{clearTimeout(n),clearTimeout(a)};return w.on("remove",(()=>{r()})),w.on("destroy",(()=>{r()})),w.on("restart",(()=>{r()})),()=>{r()}}}),[S]);const{root:P}=k.attached,{children:A}=(0,d.S)(k,P);if(!S)return l.default.createElement(b,null);if(0===A.length)return null;const{renderComponent:I,renderText:x}=g.renderer,M=l.default.createElement(u.L.Provider,{value:t},l.default.createElement("div",{ref:_},A.map((e=>{switch(e.kind){case i.rC:return I({parent:P,component:e,receiver:k,controller:g,key:e.id});case i.x7:return x({parent:P,text:e,receiver:k,key:e.id});default:return null}}))));return a?a(M):M}const k=e=>l.default.createElement(a.S,null,e),w=({spacing:e,children:t,condition:n})=>e&&n?l.default.createElement(r.a,{spacing:e},t):l.default.createElement(l.default.Fragment,null,t);function P({extensions:e,spacing:t,options:n,components:a,render:r=k}){return 0===e.length?null:l.default.createElement(w,{spacing:t,condition:e.length>1},e.map((e=>l.default.createElement(S,{key:e.id,options:n,components:a,extension:e,render:r}))))}},37607:(e,t,n)=>{n.d(t,{f:()=>l});var a=n(70681),r=n(18871);const l=(0,a.m)({load:()=>(0,r.P)((()=>n.e(839).then(n.bind(n,27520)))),id:()=>27520})},22711:(e,t,n)=>{n.d(t,{E:()=>d,p:()=>s});var a=n(18012),r=n(9520),l=n(15299),o=n(80779),i=n(3811);function s(e,t){return l.default.createElement(l.default.Fragment,null,e," · ",t)}function d({methodTitle:e,brandedPromise:t,inlineLogo:n,typographyStyle:r,asyncShopPromise:s=!1,price:d,showInterpunct:u=!1,sellingPlan:m,shippingTime:p}){const f=t&&!s?l.default.createElement(i.C,{logoUrl:t.logoUrl,name:t.name,methodTitle:e,inlineLogo:n}):e;return p?c(r,l.default.createElement(a.E,{emphasis:"bold"},p),u&&o.f,f,u&&o.f,d):d&&u&&m?c(r,f,o.f,d,l.default.createElement(a.E,{emphasis:"bold"},m)):u&&d?c(r,f,o.f,d):c(r,f)}function c(e,...t){const n=t.filter(Boolean).flatMap(((e,t,n)=>t<n.length-1?[e," "]:e));return l.default.createElement(r.V,{style:e},n)}},3811:(e,t,n)=>{n.d(t,{C:()=>u});var a=n(15299),r=n(3299),l=n(59754),o=n(77491),i=n(58168);const s=e=>a.createElement("svg",(0,i.A)({xmlns:"http://www.w3.org/2000/svg",width:52,height:16,fill:"none"},e),a.createElement("rect",{width:52,height:16,fill:"#5433EB",rx:4}),a.createElement("path",{fill:"#fff",d:"M4.185 5.156C4.74 4.77 5.548 4.5 6.406 4.5c2.289 0 3.938 1.548 3.938 3.651 0 1.97-1.43 3.349-3.416 3.349C5.228 11.5 4 10.356 4 8.825c0-1.044.623-1.801 1.498-2.104l.706 1.212c-.488.218-.656.538-.656.942 0 .656.555 1.127 1.363 1.127.993 0 1.767-.774 1.767-1.834 0-1.228-.976-2.17-2.289-2.17a2.8 2.8 0 0 0-1.464.42zm12.847-.601h-2.688v6.754h1.061V8.69h1.65c1.49 0 2.28-.836 2.28-2.1-.022-1.288-.813-2.034-2.303-2.034zm-.204 3.118h-1.445V5.549h1.4c.971 0 1.446.407 1.446 1.062s-.452 1.062-1.4 1.062zm3.162 3.637V6.813h.995v.859c.293-.61.903-.904 1.784-.904v.949c-1.016 0-1.784.27-1.784 1.084v2.507h-.994zm3.095-2.26c0-1.4.971-2.371 2.327-2.371s2.326.994 2.326 2.371-.97 2.395-2.326 2.395c-1.355 0-2.327-.994-2.327-2.395m3.637 0c0-.88-.542-1.513-1.31-1.513s-1.288.632-1.288 1.513.542 1.514 1.288 1.514c.745 0 1.31-.633 1.31-1.514m1.762 2.26V6.813H29.5v.723c.316-.52.813-.858 1.559-.858.745 0 1.265.316 1.49.948.407-.632.994-.948 1.74-.948 1.107 0 1.649.677 1.649 1.987v2.643H34.92V8.712c0-.723-.361-1.175-.971-1.175-.745 0-1.22.632-1.22 1.513v2.26H31.69V8.711c0-.723-.339-1.175-.971-1.175-.745 0-1.22.632-1.22 1.513v2.26h-1.016zm8.222-5.828c0-.384.293-.678.7-.678s.7.294.7.678a.685.685 0 0 1-.7.677c-.407 0-.7-.293-.7-.677m.18 5.827V6.814h1.017v4.495zm1.853-1.423h.994c.022.52.474.813 1.129.813.587 0 .926-.27.926-.632 0-1.062-2.914-.09-2.914-1.965 0-.859.746-1.446 1.988-1.446 1.13 0 1.852.61 1.92 1.581h-.971c-.023-.52-.407-.836-1.04-.836-.564 0-.903.272-.903.656 0 1.016 2.914.045 2.914 1.987 0 .859-.745 1.4-1.988 1.4s-2.033-.587-2.055-1.558m4.721-.836c0-1.4.903-2.371 2.258-2.371 1.13 0 2.056.858 2.056 2.326v.362h-3.276c.068.745.452 1.242 1.22 1.242.565 0 .926-.316.994-.655h1.017c-.136.858-.926 1.49-2.01 1.49-1.356 0-2.26-.993-2.26-2.394zm3.297-.384c-.045-.655-.451-1.129-1.061-1.129-.7 0-1.062.452-1.175 1.13h2.236z"}));var d=n(87039);const c={InlineLogo:"yhO35"};function u({methodTitle:e,logoUrl:t,name:n,inlineLogo:i}){const u=(0,d.yO)()?a.default.createElement(s,null):a.default.createElement(r._,{source:t,accessibilityDescription:n});return void 0===e?a.default.createElement("div",{className:c.InlineLogo},u):i?a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:c.InlineLogo},u),a.default.createElement(l.c,{spacing:"small300"}),e):a.default.createElement(a.default.Fragment,null,e,a.default.createElement(o.S,{spacing:"extraTight"}),u)}},99295:(e,t,n)=>{n.d(t,{PA:()=>re});var a=n(58168),r=n(15299),l=n(76882),o=n(13788),i=n(86883),s=n(77491),d=n(19787),c=n(2640),u=n(9520),m=n(23743),p=n(70212),f=n(84506),h=n(32485),y=n.n(h),g=n(50190),_=n(63292),E=n(84030),b=n(13614),v=n(38530),C=n(36125),S=n(50191),k=n(91287),w=n(52110);const P=(e,t)=>[...t].sort(((t,n)=>{let a=0,r=0;for(;0===a&&r<e.length;)a=e[r](t,n),r+=1;return a})),A=(e,t)=>(n,a)=>{const r=e.map((e=>e[t])),l=r.indexOf(n[t]),o=r.indexOf(a[t]);return-1===l&&-1!==o?1:-1!==l&&-1===o?-1:l-o};var I=n(80125),x=n(22711),M=n(59208),T=n(90089),N=n(64106),L=n(68810),D=n(56784),R=n(66126),B=n(50996),F=n(38743),z=n(63667),V=n(87455),O=n(41969),W=n(32193),q=n(27534);function $({displayAddInstructionsButton:e,onPress:t}){const n=(0,N.Bl)(),a=(0,l.W)();return n?e?r.default.createElement(q.$,{kind:"plain",onPress:t},a("shipping.add_delivery_instructions","Add delivery instructions")):null:r.default.createElement(u.V,null,a("shipping.shipping_line_delivery_phone","You may be contacted with updates on your delivery."))}function U(){const e=(0,N.Bl)(),t=(0,l.W)();return e?null:r.default.createElement(r.default.Fragment,null,r.default.createElement(s.S,{spacing:"small400"}),r.default.createElement(u.V,null,t("shipping.shipping_line_delivery_instructions","Enter necessary information like door codes or drop-off instructions.")))}var H=n(91924),j=n(73595),Y=n(30913),G=n(68999);const X={LoadingOption:"m9pRo",LoadingOptionBorderNone:"NRvtp",LoadingOptionBorderFull:"iuEQ3"};var Z=n(94973),Q=n(6773),J=n(77979),K=n(38482);const ee=new Set([J.X.DeliveryOptionsPhoneNumberRequired,J.X.DeliveryOptionsPhoneNumberDoesNotMatchExpectedPattern]),te=new Set([J.X.DeliveryOptionsInstructionsInvalid]),ne=(e,t)=>{if("error"===e.type)for(const n of e.violations)if("UnprocessableTermViolation"===n.__typename&&t.has(n.code))return n.localizedMessage??n.nonLocalizedMessage},ae=255;function re({id:e,type:t=k.z.OneTimePurchase,methods:n,loadingAdditionalShippingRates:f=!1,phoneField:h,instructionsField:I}){const{asyncDeliveryPromiseExperienceEnabled:q}=(0,B.q)(),J=(0,r.useRef)([]),re=(0,l.W)(),{negotiate:ie}=(0,C.T4)(),{geolocation:se}=(0,S.u)(),{value:de}=(0,_.CL)(),ce=(0,E.aR)(),{deliveryExpectationLines:ue,deliveryExpectationLinesLoading:me,status:pe,pollCount:fe}=(0,L.H)(),he=(0,V.o)(),[ye,ge]=(0,D.Z)([R.u_,R.HP]),{asyncDeliveryPromiseExperienceEnabled:_e}=(0,B.q)(),Ee=(0,b.w9)("Checkout::ShippingMethodDetails::RenderAfter"),be=(0,b.w9)("Checkout::ShippingMethodDetails::RenderExpanded"),[ve]=(0,v.lr)(t,e),[Ce,Se]=(0,v.Mr)(t,e),{setInverseGroupDeliveryMethodHandle:ke,getInverseGroupDeliveryMethodHandle:we}=(0,v.Sx)(n,t),Pe=n.find((e=>e.handle===Ce));let Ae=function(e,t=k.z.OneTimePurchase,n){const a=(0,l.W)(),o=(0,Z.QN)(),i=(0,Q.NX)(),s=(0,v.FA)(t,n);return(0,C.od)((0,r.useCallback)((e=>{const t=ne(e,ee);t&&o.write(i,t)}),[i,o])),(0,Q.pW)(s,i,(t=>{const n=(0,Q.CJ)(t);if(e&&e.phoneRequired)return n?void 0:a("field_errors.shipping_line_phone_invalid","Enter a valid phone number")}),K.RE.InvalidDeliveryMethodPhoneNumber),(0,Q.j8)(s,i)}(Pe,t,e);h&&(Ae=h);let Ie=function(e=k.z.OneTimePurchase,t){const n=(0,Z.QN)(),a=(0,Q.NX)(),l=(0,v.MI)(e,t);return(0,C.od)((0,r.useCallback)((e=>{const t=ne(e,te);t&&n.write(a,t)}),[a,n])),(0,Q.j8)(l,a)}(t,e);I&&(Ie=I);const xe=(0,N.Bl)(),[Me,Te]=(0,r.useState)(!xe||void 0!==Ie?.value),Ne=q&&ye;let Le=n;ve.includes(w.y.PickupPoint)&&(Le=Le.filter((e=>"PickupPointLocation"===e.pickupLocation?.type&&"PickupPointLocation"===Pe?.pickupLocation?.type&&e.pickupLocation?.handle===Pe?.pickupLocation?.handle))),(0,r.useEffect)((()=>{!Ae.value&&de?.phone&&!h&&Ae.onChange(de?.phone)}),[]);const De=(0,r.useCallback)((()=>{Ae.clearError(),Ie.clearError()}),[Ae,Ie]),{optionList:{typographyStyle:Re,border:Be="full"}}=(0,o.x)(),Fe=(0,r.useCallback)((([t])=>{if(De(),Se(t),ce&&null==e){const e=we(t);ke(e)}ie(void 0,{include:["email","shippingAddress","merchandiseLines","deliveryLines"]})}),[De,Se,ce,e,ie,we,ke]);(0,r.useEffect)((()=>{J.current=ze}));const ze=P([A(J.current,"handle")],Le),Ve=(e,t,n)=>{const l=t||n,o=be.length>0;return l||o?r.default.createElement(r.default.Fragment,null,l&&r.default.createElement(oe,{handle:e},r.default.createElement(O.H,null,t&&r.default.createElement(i.S,null,r.default.createElement(W.P,(0,a.A)({label:re("shipping.shipping_line_delivery_phone_label","Mobile phone number"),countryCode:se.country.code,prefillCountryCode:!0},Ae)),r.default.createElement(s.S,{spacing:"small400"}),r.default.createElement($,{displayAddInstructionsButton:n&&!Me,onPress:()=>Te(!0)})),n&&Me&&r.default.createElement(i.S,null,r.default.createElement(d.A_,(0,a.A)({autoFocus:!0,multiline:!0,maxLength:ae,label:re("shipping.optional_shipping_line_delivery_instructions_label","Delivery instructions (optional)")},Ie)),r.default.createElement(U,null))),o&&r.default.createElement(M.N,{extensions:be,options:{handle:e}})),!l&&o&&r.default.createElement(M.N,{extensions:be,options:{handle:e},render:t=>r.default.createElement(oe,{handle:e},t)})):null},Oe=e?`_${(0,F.ee)(e)}`:"",We=t===k.z.OneTimePurchase?`shipping_methods${Oe}`:`${t.toLowerCase()}_shipping_methods${Oe}`,qe=Ee.length>0,$e=1===ze.length;return r.default.createElement(r.default.Fragment,null,r.default.createElement(T.Wd,{id:We,title:re("general.choose_shipping_method","Choose a shipping method"),titleHidden:!0,selectedItems:Ce?[Ce]:[],onChange:Fe,controlHidden:1===ze.length,hideRadioButton:$e},ze.map((e=>{const{showEstimatedDeliveryLabel:t,deliveryExpectationDateTime:n,estimatedDeliveryLabelTitle:a,minDeliveryDate:l,maxDeliveryDate:o,brandedPromise:i}=(0,z.r2)(e,he,Boolean(_e),ge,ue,me,pe),{handle:s,description:d,cost:m,costAfterDiscounts:p,pickupLocation:f,estimatedTimeInTransit:h,phoneRequired:y,acceptsInstructions:g}=e,_=ue?.find((e=>e.deliveryStrategyHandle===s)),E=(0,z.kn)({deliveryMethod:e,localDelivery:e.methodType===w.y.Local?re("shipping.local_delivery","Local delivery"):void 0});return r.default.createElement(T.wC,{id:s,key:s,label:E,details:Ve(s,y,g),padding:$e?["small100","none","small100","small100"]:void 0},r.default.createElement(c.xV,null,r.default.createElement(r.default.Fragment,null,!Ne&&!me&&n&&r.default.createElement(H.W,{deliveryDateText:a,typographyStyle:Re,brandedPromise:i,id:s}),r.default.createElement(x.E,{methodTitle:E,brandedPromise:i,typographyStyle:Re,asyncShopPromise:_e}),Ne&&r.default.createElement(j.w,{deliveryMethod:e,deliveryExpectationLine:_,animateOnShow:fe>1}),!Ne&&t&&!n&&r.default.createElement(Y.n,{timeInTransit:h,minDeliveryDateTime:l,maxDeliveryDateTime:o,title:a}),d&&!Ne&&r.default.createElement(u.V,{appearance:"subdued"},d),"PickupInStoreLocation"===f?.type&&r.default.createElement(le,{pickupLocation:f}))),r.default.createElement(c.PE,null,r.default.createElement(G.$,{cost:m,costAfterDiscounts:p})),qe&&r.default.createElement(c.bc,null,r.default.createElement(M.N,{extensions:Ee,options:{handle:s}})))})),f?r.default.createElement("div",{className:y()([X.LoadingOption,X[(0,g.N)("LoadingOptionBorder",Be)]])},r.default.createElement(m.C,{columns:["auto","fill"],blockAlignment:"center",spacing:"base"},r.default.createElement(i.S,null,r.default.createElement(p.y,null)),r.default.createElement(u.V,{appearance:"subdued",size:"small",style:Re},re("shipping.loading_progressive_rates","Searching for more rates…")))):null))}function le({pickupLocation:e}){const t=(0,I.IL)(e.address,{hiddenFields:["firstName","lastName","phone","company","countryCode","postalCode"]});return r.default.createElement(r.default.Fragment,null,r.default.createElement(u.V,{appearance:"subdued",size:"small"},t),r.default.createElement(u.V,{appearance:"subdued",size:"small"},e.instructions))}function oe({handle:e,children:t}){return r.default.createElement(T.Gm,{controlledBy:e,renderChildrenWhenCollapsed:!0},r.default.createElement(f.a,{spacing:"large200"},t))}},73595:(e,t,n)=>{n.d(t,{w:()=>p});var a=n(15299),r=n(9520),l=n(61599),o=n(85013),i=n(3299);function s({show:e,children:t,from:n={opacity:0},to:r={opacity:1},options:l={duration:500,fill:"forwards"},onStart:o,onEnd:i,animateOnShow:s=!0,animateOnHide:d=!0,unmountOnHide:c=!0}){const u=(0,a.useRef)(null),[m,p]=(0,a.useState)(e),f=()=>{p(!1),i?.()},h={duration:500,fill:"forwards",...l};return(0,a.useLayoutEffect)((()=>{if(m&&s){const e=u.current;e?.animate([n,r],h)}}),[m,s]),(0,a.useEffect)((()=>{const t=u.current;if(e)o?.(),p(!0);else if(d&&t){const e=t.animate([r,n],h);e&&(e.onfinish=f)}else f()}),[e,d]),m||!c?a.default.createElement("div",{ref:u},t):null}var d=n(56784),c=n(66126),u=n(87455);const m={ShopPromiseWrapper:"sa2k0",ShopPromiseContainer:"QtA71"};function p({deliveryMethod:e,deliveryExpectationLine:t,animateOnShow:n=!0}){const{shopPromiseDeliveryTitle:p,shopPromisePlaceholderDeliveryTitle:f}=function(e,t){const{deliveryPromisePresentmentTitle:n,description:a}=e,{deliveryExpectationPresentmentTitle:r}=t||{},l=(0,d.a)(c.HP),o=(0,u.o)(),i=n?.short||a;return l?{shopPromiseDeliveryTitle:r?.short,regularDeliveryTitle:n?.short,shopPromisePlaceholderDeliveryTitle:i}:{shopPromiseDeliveryTitle:o?r?.short:r?.long,regularDeliveryTitle:o?n?.short:n?.long,shopPromisePlaceholderDeliveryTitle:i}}(e,t),[h,y]=(0,a.useState)(Boolean(p));return a.default.createElement("div",{className:m.ShopPromiseWrapper},a.default.createElement(s,{show:!p,options:{duration:n?300:0},onEnd:()=>y(!0),animateOnShow:!1},a.default.createElement(r.V,{appearance:"subdued"},a.default.createElement(l.P,null,f))),a.default.createElement(s,{animateOnShow:n,show:h,from:{opacity:0,transform:"translateX(-10px)"},to:{opacity:1,transform:"translateX(0)"}},a.default.createElement("div",{className:m.ShopPromiseContainer},a.default.createElement(o.o,{spacing:"small200",blockAlignment:"center"},a.default.createElement(r.V,{appearance:"inherit"},p),a.default.createElement(i._,{source:t?.brandedPromise?.logoUrl||""})))))}},30913:(e,t,n)=>{n.d(t,{n:()=>s});var a=n(15299),r=n(9520),l=n(64106),o=n(83101);const i=(0,a.memo)((function({timeInTransit:e,price:t}){const n=(0,o.hp)()(e);return null===n?null:a.default.createElement(r.V,{appearance:"subdued"},t?`(${n}) · ${t}`:n)})),s=(0,a.memo)((function({timeInTransit:e,minDeliveryDateTime:t,maxDeliveryDateTime:n,title:o,price:s}){return t&&n?function({title:e,price:t}){const n=(0,l.Bl)();return e||t?!e&&t?a.default.createElement(r.V,{appearance:"subdued"},t):a.default.createElement(r.V,{appearance:"subdued",size:n?void 0:"small"},t?`(${e}) · ${t}`:e):null}({title:o,price:s}):e?a.default.createElement(i,{timeInTransit:e,price:s}):s?a.default.createElement(r.V,{appearance:"subdued"},s):null}))},68999:(e,t,n)=>{n.d(t,{$:()=>d});var a=n(15299),r=n(85630),l=n(76882),o=n(13788),i=n(18012),s=n(84506);function d({cost:e,costAfterDiscounts:t,inlineDiscount:n}){const d=(0,r.a)(),c=(0,l.W)(),{optionList:{typographyStyle:u}}=(0,o.x)(),{amount:m}=e,{amount:p}=t,f=0===t.amount?a.default.createElement(i.E,{emphasis:"bold",style:u},c("shipping.free_rate_label","Free")):a.default.createElement(i.E,{emphasis:"bold",translate:!1,style:u},d(p,{currency:t.currencyCode}));if(m>p){const t=a.default.createElement(i.E,{accessibilityRole:"deletion",appearance:"subdued",translate:!1,size:n?"base":"small"},d(m,{currency:e.currencyCode}));return n?a.default.createElement(a.default.Fragment,null,t," ",f):a.default.createElement(s.a,{spacing:"small400",inlineAlignment:"end"},t,f)}return f}},91924:(e,t,n)=>{n.d(t,{W:()=>f});var a=n(15299),r=n(9520),l=n(94973),o=n(3811),i=n(74654),s=n(31374);const d={ShopLogo:"f5f5k",reveal:"TcWGN",IE11:"DU2OU",Wrapper:"p_Jb2",infiniteSpin:"vvo1v"};function c(){return a.default.createElement("svg",{className:d.Wrapper,"data-testid":"animatedShopLogo",width:25,height:25,viewBox:"0 0 52 58",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("title",null,"Shop App Logo Spinner"),a.default.createElement("path",{className:d.ShopLogo,d:"M3 13C5 11.75 10.4968 6.92307 21.5 6.4999C34.5 5.99993 42 13 45 23C48.3 34 42.9211 48.1335 30.5 51C17.5 54 6.6 46 6 37C5.46667 29 10.5 25 14 23",stroke:"#5A31F4",strokeWidth:"11"}))}const u={FadeIn:"ZdJCe",wipeInFadeInLeft:"aFcam"},m=910,p=new Set;function f({id:e,deliveryDateText:t,typographyStyle:n,brandedPromise:d}){const{shippingAddress:f}=(0,s.C)(),h=(0,l.QN)(),[y,g]=(0,a.useState)(!1),[_,E]=(0,a.useState)(!p.has(`${h.read(f).revision}-${e}`)),[b,v]=(0,a.useState)(!_);return(0,a.useEffect)((()=>{const e=setTimeout((()=>{v(!0)}),10);return()=>{clearTimeout(e)}}),[]),(0,a.useEffect)((()=>{if(_&&b){const e=setTimeout((()=>{E(!1),g(!0)}),m);return()=>{clearTimeout(e)}}}),[_,b]),(0,a.useEffect)((()=>{y&&p.add(`${h.read(f).revision}-${e}`)}),[e,y]),a.default.createElement(i.x,null,b&&a.default.createElement("div",{style:{height:d?"43px":"28px"}},_?a.default.createElement(c,null):a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:y?u.FadeIn:void 0},a.default.createElement(r.V,{style:n},t)),d&&a.default.createElement("div",{className:y?u.FadeIn:void 0},a.default.createElement(o.C,{logoUrl:d.logoUrl,name:d.name,methodTitle:"",inlineLogo:!0})))))}},17594:(e,t,n)=>{n.d(t,{w:()=>d});var a=n(15299),r=n(9520),l=n(76882),o=n(85630),i=n(82444),s=n(58482);function d({deliveryMethod:e}){return e.priceBreakdown?a.default.createElement(a.default.Fragment,null,e.priceBreakdown.map(((t,n,{length:r})=>{const l=t.targetMerchandiseLines[0].sellingPlan;if(l?.subscriptionDetails)return a.default.createElement(u,{key:l.id,priceBreakdown:t,showProductSubtitle:r>1,sellingPlan:l,subscriptionDetails:l.subscriptionDetails,discountedShippingPrice:e.costAfterDiscounts,methodTitle:e.title})}))):null}const c=({title:e,deliveryDetail:t})=>a.default.createElement("div",{className:"rdnj3"},a.default.createElement(r.V,{emphasis:"bold"},e),a.default.createElement(r.V,null,t)),u=({priceBreakdown:e,showProductSubtitle:t,sellingPlan:n,subscriptionDetails:d,discountedShippingPrice:u,methodTitle:p})=>{const f=(0,i.u)(),h=(0,s.x1)(),{targetMerchandiseLines:y}=e,g=f(y.map((function(e){return[e.title,t&&e.subtitle?`(${e.subtitle})`:null].filter(Boolean).join(" ")}))),_=function({priceBreakdown:e,sellingPlan:t,subscriptionDetails:n,discountedShippingPrice:r}){const i=(0,l.W)(),d=(0,o.a)(),c=(0,s.ZS)(),{amount:u,discountRecurringCycleLimit:p,excludeFromDeliveryOptionPrice:f}=e,h=(S=u.amount,k=t.deliveriesPerBillingCycle,Math.ceil(100*S/k)/100),y=d(u.amount,{currency:u.currencyCode}),g=d(h,{currency:u.currencyCode}),_=i("shipping.subscription_delivery_description.multiple_subscriptions_shipping_price_label",{shipping_price:g},"%{shipping_price} per delivery"),E=c(n.deliveryInterval,n.billingIntervalCount),b=`${y} ${E}`,v=`${y} ${c(n.deliveryInterval,n.deliveryIntervalCount)}`,C=function(){const e=(0,l.W)();return(0,a.useCallback)(((t=0,n)=>[e("shipping.subscription_delivery_description.first_n_order_free",{count:t},{one:"First order free",other:"First %{count} orders free"}),e("shipping.subscription_delivery_description.recurring_order_shipping_price",{recurring_order_shipping_price:n},"followed by %{recurring_order_shipping_price}")].filter((e=>""!==e.trim())).join(", ")),[e])}();var S,k;if(0===e.amount.amount)return i("shipping.free_rate_label","Free");if(t.prepaid){if(!n.billingMaxCycles||n.billingMaxCycles>1){if(m({discountedShippingPrice:r,discountRecurringCycleLimit:p}))return C(p,b);if(f){const e=d(u.amount-h,{currency:u.currencyCode}),n=i("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:t.deliveriesPerBillingCycle-1},{one:"for %{count} delivery",other:"for %{count} deliveries"});return i("shipping.subscription_delivery_description.first_order_different_shipping_price",{first_order_shipping_price:`${e} ${n}`,per_delivery_price:g,recurring_order_shipping_price:`${y} ${E}`},"%{first_order_shipping_price} (%{per_delivery_price} per delivery), followed by %{recurring_order_shipping_price}")}return`${y} ${i("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:t.deliveriesPerBillingCycle},{one:"for %{count} delivery",other:"for %{count} deliveries"})} (${_}), ${E}`}return m({discountedShippingPrice:r,discountRecurringCycleLimit:p})?i("shipping.free_rate_label","Free"):f?`${d(u.amount-h,{currency:u.currencyCode})} ${i("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:t.deliveriesPerBillingCycle-1},{one:"for %{count} delivery",other:"for %{count} deliveries"})} (${_})`:`${y} ${i("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:t.deliveriesPerBillingCycle},{one:"for %{count} delivery",other:"for %{count} deliveries"})} (${_})`}if(m({discountedShippingPrice:r,discountRecurringCycleLimit:p}))return C(p,v);if(f)return i("shipping.subscription_delivery_description.first_order_shipping_price_included",{recurring_order_shipping_price:v},"First order included, followed by %{recurring_order_shipping_price}");if(1===t.subscriptionDetails.billingMaxCycles){if(!n.billingMaxCycles||n.billingMaxCycles>1){if(m({discountedShippingPrice:r,discountRecurringCycleLimit:p}))return C(p,b);if(f){const e=d(u.amount-h,{currency:u.currencyCode}),n=i("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:t.deliveriesPerBillingCycle-1},{one:"for %{count} delivery",other:"for %{count} deliveries"});return i("shipping.subscription_delivery_description.first_order_different_shipping_price",{first_order_shipping_price:`${e} ${n}`,per_delivery_price:g,recurring_order_shipping_price:`${y} ${E}`},"%{first_order_shipping_price} (%{per_delivery_price} per delivery), followed by %{recurring_order_shipping_price}")}return`${y} ${i("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:t.deliveriesPerBillingCycle},{one:"for %{count} delivery",other:"for %{count} deliveries"})} (${_}), ${E}`}return m({discountedShippingPrice:r,discountRecurringCycleLimit:p})?i("shipping.free_rate_label","Free"):f?`${d(u.amount-h,{currency:u.currencyCode})} ${i("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:t.deliveriesPerBillingCycle-1},{one:"for %{count} delivery",other:"for %{count} deliveries"})} (${_})`:`${y} ${i("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:t.deliveriesPerBillingCycle},{one:"for %{count} delivery",other:"for %{count} deliveries"})} (${_})`}return v}({priceBreakdown:e,showProductSubtitle:t,sellingPlan:n,subscriptionDetails:d,discountedShippingPrice:u});if(h){const e=`${p} · ${_}`;return a.default.createElement(r.V,null,e)}return a.default.createElement(c,{title:g,deliveryDetail:_})};function m({discountedShippingPrice:e,discountRecurringCycleLimit:t}){return 0===e.amount&&void 0!==t}},68810:(e,t,n)=>{n.d(t,{H:()=>d});var a=n(15299),r=n(40874),l=n(63292),o=n(70083),i=n(35699),s=n(50996);function d(){const{value:e,loading:t}=(0,l.Z7)(),{value:n,loading:d}=(0,l.FC)(),{asyncDeliveryPromiseExperienceEnabled:c}=(0,s.q)(),u=(0,o.S)(),m=(0,a.useRef)(),p=(0,a.useRef)(0);return(0,a.useEffect)((()=>{if(d?p.current=0:p.current++,!t&&"filled"===n?.status&&"filled"===e?.status&&m.current&&(m.current(),m.current=void 0),"filled"===n?.status&&t){const e=(0,r.tB)();m.current=()=>{const t=(0,r.tB)()-e;u.distribution(i.J.DeliveryExpectationsLoadingDuration,{value:t})}}}),[e?.status,n?.status,d,t,u]),{deliveryExpectationLines:(()=>{if("filled"===e?.status&&c)return e?.deliveryExpectationLines})(),deliveryExpectationLinesLoading:void 0===e,status:e?.status,pollCount:p.current}}},46792:(e,t,n)=>{n.d(t,{L$:()=>o,Qo:()=>r,Wu:()=>i,es:()=>l,hD:()=>s,m6:()=>a});const a="shopify_pay",r=":";let l=function(e){return e.Closed="closed",e.EmailChanged="emailChanged",e.Error="error",e.Hidden="hidden",e.Loaded="loaded",e.LoggedIn="loggedIn",e.Ready="ready",e.RedirectWithEmailOnly="redirectWithEmailOnly",e.Resized="resized",e.ShareCaptchaToken="shareCaptchaToken",e}({}),o=function(e){return e.AllowNoInitialEmail="allowNoInitialEmail",e.Create="create",e.Hidden="hidden",e.OriginChanged="originChanged",e.Ready="ready",e}({}),i=function(e){return e.ShopifyPayUserNotFound="shopify_pay_user_not_found",e}({}),s=function(e){return e.FraudGuard="fraud_guard",e.InvalidEmail="invalid_email",e.InvalidPhone="invalid_phone",e.LimitExceeded="limit_exceeded",e.PhoneBlocked="phone_blocked",e.RecordNotFound="record_not_found",e}({})},54986:(e,t,n)=>{n.d(t,{d:()=>l});var a=n(15299),r=n(46792);function l({hostname:e,targetId:t,onLoaded:n,onClosed:l,onHidden:o,onError:i,onLoggedIn:s,onReady:d,onResized:c,onRedirectUserWithEmailOnly:u,onShareCaptchaToken:m,onEmailChange:p}){const f=(0,a.useCallback)((e=>{switch(e.action){case r.es.Closed:return l?.();case r.es.Hidden:return o?.();case r.es.Error:return i?.(e.message,e.apiError,e.email);case r.es.Loaded:return n?.();case r.es.LoggedIn:return s?.(e.token,e.in_checkout_profile_preview,e.shop_pay_external_jwt);case r.es.Ready:return d?.(e.phoneNumber);case r.es.Resized:return c?.(parseInt(e.height,10));case r.es.RedirectWithEmailOnly:return u?.(e.email);case r.es.ShareCaptchaToken:return m?.(e.token);case r.es.EmailChanged:return p?.(e.email,e.isUserFound)}}),[l,o,i,n,s,d,c,u,m,p]);(0,a.useEffect)((()=>{const n=({data:n,origin:a})=>{if(a!==`https://${e}`||!n||"string"!=typeof n||!n.includes(r.Qo))return;const[l,...o]=n.split(r.Qo);if(l===r.m6)try{const e=JSON.parse(o.join(r.Qo));(t&&e.targetId===t||!t)&&f(e)}catch(i){}};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}}),[f,e,t])}},41004:(e,t,n)=>{n.d(t,{n:()=>a});let a=function(e){return e.Normal="normal",e.CustomerAccount="customer_account",e.AccountsSameStore="accounts_same_store",e.AccountsCrossStore="accounts_cross_store",e}({})},71693:(e,t,n)=>{n.d(t,{L:()=>r});var a=n(46792);function r(e,t){e&&e.contentWindow?.postMessage(function(e){return function(e,t={delimiter:a.Qo,messageKey:a.m6}){return[t.messageKey,t.delimiter,JSON.stringify(e)].join("")}(e)}(t),"*")}},277:(e,t,n)=>{n.d(t,{C:()=>c});var a=n(15299),r=n(32485),l=n.n(r),o=n(87039);const i={xsmall:"guTuY",small:"Pffz4",medium:"P3VGi",large:"ed67Y",inline:"jOOgt"};var s=n(58168);const d=e=>a.createElement("svg",(0,s.A)({xmlns:"http://www.w3.org/2000/svg",fill:"inherit","aria-hidden":"true",preserveAspectRatio:"xMidYMid",viewBox:"0 0 341 80.035"},e),a.createElement("path",{fillRule:"evenodd",d:"M227.297 0c-6.849 0-12.401 5.472-12.401 12.223v55.59c0 6.75 5.552 12.222 12.401 12.222h101.06c6.849 0 12.401-5.472 12.401-12.222v-55.59c0-6.75-5.552-12.223-12.401-12.223zm17.702 55.892v-14.09h8.994c8.217 0 12.586-4.542 12.586-11.423s-4.369-11-12.586-11h-14.788v36.513zm0-31.084h7.664c5.319 0 7.932 2.154 7.932 5.758s-2.518 5.758-7.695 5.758h-7.901zm31.796 31.833c4.417 0 7.314-1.92 8.644-5.196.38 3.65 2.613 5.523 7.457 4.26l.048-3.886c-1.948.187-2.328-.515-2.328-2.528v-9.55c0-5.617-3.752-8.94-10.686-8.94-6.84 0-10.782 3.37-10.782 9.08h5.32c0-2.714 1.947-4.353 5.367-4.353 3.609 0 5.272 1.545 5.224 4.214v1.217l-6.127.655c-6.887.749-10.686 3.324-10.686 7.818 0 3.698 2.659 7.209 8.549 7.209m1.187-4.213c-2.992 0-4.179-1.592-4.179-3.184 0-2.153 2.47-3.136 7.314-3.698l3.8-.421c-.238 4.12-3.04 7.303-6.935 7.303m32.555 5.29c-2.422 5.804-6.317 7.536-12.396 7.536h-2.613V60.48h2.803c3.324 0 4.939-1.03 6.697-3.979l-10.782-24.95h5.984l7.695 18.21 6.839-18.21h5.842z",clipRule:"evenodd"}),a.createElement("path",{d:"M29.514 35.18c-7.934-1.697-11.469-2.36-11.469-5.374 0-2.834 2.392-4.246 7.176-4.246 4.207 0 7.283 1.813 9.546 5.363.171.274.524.369.812.222l8.927-4.447a.616.616 0 0 0 .256-.864c-3.705-6.332-10.55-9.798-19.562-9.798-11.843 0-19.2 5.752-19.2 14.898 0 9.714 8.96 12.169 16.904 13.865 7.944 1.697 11.49 2.36 11.49 5.374s-2.584 4.435-7.742 4.435c-4.763 0-8.297-2.15-10.433-6.321a.63.63 0 0 0-.843-.274L6.47 52.364a.623.623 0 0 0-.278.843c3.535 7.006 10.785 10.947 20.47 10.947 12.334 0 19.787-5.658 19.787-15.088s-9.001-12.169-16.935-13.865zM77.353 16.036c-5.062 0-9.536 1.77-12.75 4.92-.203.19-.534.053-.534-.221V.622a.62.62 0 0 0-.63-.622h-11.17a.62.62 0 0 0-.63.622v62.426a.62.62 0 0 0 .63.621h11.17a.62.62 0 0 0 .63-.621V35.664c0-5.289 4.11-9.345 9.653-9.345 5.542 0 9.557 3.972 9.557 9.345v27.384a.62.62 0 0 0 .63.621h11.17a.62.62 0 0 0 .63-.621V35.664c0-11.505-7.646-19.618-18.356-19.618zM118.389 14.255c-6.065 0-11.767 1.823-15.847 4.467a.62.62 0 0 0-.202.833l4.922 8.292c.182.295.566.4.865.22a19.8 19.8 0 0 1 10.262-2.78c9.749 0 16.914 6.785 16.914 15.75 0 7.64-5.734 13.297-13.006 13.297-5.926 0-10.037-3.403-10.037-8.207 0-2.75 1.185-5.005 4.271-6.596a.607.607 0 0 0 .246-.864l-4.645-7.754a.63.63 0 0 0-.759-.264c-6.225 2.276-10.593 7.755-10.593 15.109 0 11.126 8.981 19.428 21.507 19.428 14.629 0 25.147-9.998 25.147-24.338 0-15.372-12.237-26.603-29.066-26.603zM180.098 15.952c-5.649 0-10.689 2.054-14.373 5.678a.313.313 0 0 1-.534-.22v-4.363a.62.62 0 0 0-.63-.621H153.68a.62.62 0 0 0-.63.621v62.331a.62.62 0 0 0 .63.622h11.169a.62.62 0 0 0 .631-.622v-20.44c0-.274.331-.41.533-.231 3.674 3.371 8.532 5.342 14.096 5.342 13.102 0 23.321-10.463 23.321-24.054 0-13.592-10.23-24.054-23.321-24.054zm-2.103 37.54c-7.454 0-13.103-5.848-13.103-13.582 0-7.733 5.638-13.58 13.103-13.58s13.091 5.752 13.091 13.58-5.553 13.581-13.102 13.581z"}));function c({color:e="white",inline:t,size:n="medium",className:r}){const s="branded"===e?o.ui.toRgb():e;return a.default.createElement(d,{className:l()({[i.inline]:t},i[n],r),style:{fill:s}})}},519:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te});var a=n(15299),r=n(18905),l=n(56784),o=n(66126),i=n(37981),s=n(76882),d=n(94973),c=n(46845),u=n(34839),m=n(41889),p=n(9210),f=n(28540),h=n(12237),y=n(38909),g=n(99548),_=n(27767),E=n(6211),b=n(54493),v=n(7395),C=n(70234),S=n(70083),k=n(35699),w=n(9205),P=n(54986),A=n(71693),I=n(46792);var x=n(41004),M=n(63292),T=n(41813),N=n(29845),L=n(76386),D=n(61022),R=n(58389),B=n(69618);class F extends Error{constructor(...e){super(...e),this.name="ShopPayError"}}function z({email:e,skipVerifyOnLoad:t,iframeReady:n,iframeRef:r,dismissedModalKey:l,readyToDismiss:o,onReadyToDismiss:i,showPopover:s,showToggle:c,popoverActivator:p}){const f=(0,M.rZ)(),[g]=(0,T.c5)(),{guestDismissedModalKey:_}=(0,N.N)(),{checkoutSessionIdentifier:E}=(0,u.Fo)(),[,b]=(0,d.fp)(C.N),v=(0,d.QN)(),S=(0,D.QV)(R.Z.ShopPayVerification,{scope:B.e5});return(0,a.useEffect)((()=>{if(t.current&&n)return void(t.current=!1);const a=f&&(0,m.Ri)(l),o=e&&(0,h.B9)(e),i="connected"===g.status,s=f&&function(){const e=sessionStorage.getItem(y.eQ);if(!e)return!1;const t=Number.parseInt(e,10);return!isNaN(t)&&Date.now()<t}();!n||!o||a||i||s||(v.read(S).value!==L.Vp.Verified?(0,A.L)(r?.current,{action:I.L$.Create,email:e,flow:x.n.Normal,disableAutoFocus:Boolean(sessionStorage.getItem(_))}):v.write(S,void 0))}),[e,n]),{onShow:function(){if(!E)throw new F("Checkout token is undefined");f&&(0,m.Ri)(l)||e&&(0,h.B9)(e)&&(o||i(),(0,m.TV)(y.Sl,escape(E)),(0,m.TV)(y.GH,"false"),window.dispatchEvent(new Event("shop_pay_user_identified_cookie_set")),v.write(S,L.Vp.Pending),sessionStorage.getItem(_)?c?.(!0):(s(!0,e),c?.(!1)))},onHidden:function(){o&&(v.write(S,L.Vp.Dismissed),f&&(0,m.TV)(l,"true"),p?.current?.focus(),s(!1),c?.(!0))},onLoggedIn:function(){(0,h.NW)(),v.write(S,L.Vp.Verified),b("none")}}}var V=n(57355),O=n(12227),W=n(22947),q=n(49270),$=n(98815),U=n(7821);class H extends Error{constructor(...e){super(...e),this.name="ShopPayError"}}const j=[I.hD.FraudGuard,I.hD.InvalidPhone,I.hD.LimitExceeded,I.hD.PhoneBlocked];function Y({email:e,onSetEmail:t,skipVerifyOnLoad:n,iframeReady:l,iframeRef:o,readyToDismiss:i,onReadyToDismiss:s,showPopover:c,popoverActivator:m,origin:p,open:f}){const{checkoutSessionIdentifier:y}=(0,u.Fo)(),{openModal:g}=(0,O.$)(),{exchangeSessionTokenForCookie:_}=(0,W.H)(),[,E]=(0,d.fp)(C.N),b=(0,a.useRef)(null),v=(0,a.useRef)(!1),S=(0,q.oO)(),[,k]=(0,$.j1)(),w=(0,$.Bk)(),P=(0,V.ci)({lookup:!0}),M=P&&V.v4.includes(P),T=(0,a.useCallback)((()=>{o.current&&(0,A.L)(o.current,{action:I.L$.Create,email:"",flow:x.n.Normal})}),[o]);return(0,a.useEffect)((()=>{o.current&&l&&p===r.K.C1ModalShopPaySignIn&&((0,A.L)(o.current,{action:I.L$.AllowNoInitialEmail}),T(),(0,A.L)(o.current,{action:I.L$.Ready}))}),[l,o,p,T]),(0,a.useEffect)((()=>{f&&(b.current=null)}),[f]),(0,a.useEffect)((()=>{v.current&&o.current&&l&&(v.current=!1,T())})),(0,a.useEffect)((()=>{function e(){t&&(S.set({email:"",userStatus:q.$_.None}),t(""),m?.current?.focus()),v.current=!0}return window.addEventListener("shop_pay_verification_reset",e),()=>{window.removeEventListener("shop_pay_verification_reset",e)}}),[m,c,t,o,S]),(0,a.useEffect)((()=>{if(!l)return;if(n.current)return void(n.current=!1);const t=e&&(0,h.B9)(e);if(M){if(k(null),!t)return;const n=S.get();return n.email!==e?(S.set({email:e,userStatus:q.$_.Loading}),void(0,A.L)(o?.current,{action:I.L$.Create,email:e,flow:x.n.Normal})):void(n.userStatus===q.$_.Found&&c(!0,e))}t&&p!==r.K.C1ModalShopPaySignIn?(S.set({email:e,userStatus:q.$_.Loading}),(0,A.L)(o?.current,{action:I.L$.Create,email:e,flow:x.n.Normal})):p!==r.K.C1ModalShopPaySignIn&&(T(),S.set({email:"",userStatus:q.$_.None}))}),[e,M,l,n,o,p,S,T,c,k]),{onShow:function(){if(!y)throw new H("Checkout token is undefined");p===r.K.C1ModalShopPay&&e&&(0,h.B9)(e)&&(i||s(),S.set({email:e,userStatus:q.$_.Found}),c(!0,e))},onHidden:function(){if(p===r.K.C1ModalShopPay&&!i)return;if(M){const{userStatus:e}=S.get();return k(e===q.$_.Found?w():null),m?.current?.focus(),void c(!1)}const n=b.current;null!=t&&null!=n&&(n.userStatus!==q.$_.Found||p===r.K.C1ModalShopPay||!e)&&(t(n.email),S.set(n),m?.current?.focus()),S.get().userStatus===q.$_.Found?g({type:U.W.ContinueWithShopPay,email:S.get().email}):m?.current?.focus(),c(!1),b.current=null},onEmailChange:function(e,n){M?e||(t?.(""),m?.current?.focus(),c(!1),T(),S.set({email:"",userStatus:q.$_.None})):e?(b.current||S.get().email!==e)&&(b.current={email:e,userStatus:n?q.$_.Found:q.$_.New}):b.current={email:"",userStatus:q.$_.None}},onError:function(e,t,n){if((!n||n===S.get().email)&&(e===I.Wu.ShopifyPayUserNotFound&&j.includes(t)&&(c(!1),g({type:U.W.Generic})),n)){const e=t===I.hD.InvalidEmail;S.set({email:n,userStatus:e?q.$_.Invalid:q.$_.New})}},onLoggedIn:async function(e,t){(0,h.NW)(),E("none"),e&&(await _({token:e,origin:p,in_checkout_profile_preview:t}),window.location.reload())}}}var G=n(94012),X=n(66242);function Z({email:e,onSetEmail:t,open:n,popoverActivator:l,showPopover:o,showToggle:x,urlOrigin:M=r.K.C1Modal,updatedOrigin:T=M}){const N=(0,i.t)({base:"blockEnd",medium:"inlineEnd"}),[L,D]=(0,a.useState)(!1),[R,B]=(0,a.useState)(300),[F,V]=(0,a.useState)(!1),O=(0,S.S)(),W=(0,a.useMemo)((()=>(0,c.S)()),[]),q=(0,a.useMemo)((()=>(0,c.S)()),[]),$=(0,a.useRef)(!0),U=(0,s.W)(),{checkoutSessionIdentifier:H}=(0,u.Fo)(),j=(0,a.useRef)(null),{alternate:Z}=(0,E.ft)(),Q=Z,[J,K]=(0,a.useState)(!1),[,ee]=(0,d.fp)(C.N),te=(0,d.md)(p.D?.flow)===f.p.UnauthenticatedUser,ne=(0,_.d7)(e,200),ae=`${H}-${e.replace(/[^a-zA-Z0-9]/g,"")}`,re=(0,g.Q)(),le=(0,a.useRef)(re),{onShow:oe,onHidden:ie,onError:se,onEmailChange:de,onLoggedIn:ce}=function(e){const t=(0,X.W)(),n=(0,a.useRef)(e),r=n.current,l=e===n.current?void 0:`Callback hook changed from ${n.current.name} to ${e.name} between renders.`;return(0,a.useEffect)((()=>{l&&t.notify(new G.BS(`${l} Only the original hook is called.`),{severity:"warning",errorClass:"ShopPay::ShopPayVerification::useStableHook"})}),[l,t]),r}(te?Y:z)({email:ne,onSetEmail:t,skipVerifyOnLoad:le,iframeReady:L,iframeRef:j,dismissedModalKey:ae,readyToDismiss:F,onReadyToDismiss:()=>{setTimeout((()=>V(!0)),1e3)},showPopover:o,showToggle:x,popoverActivator:l,origin:T,open:n});(0,P.d)({hostname:Q,targetId:M,onReady:oe,onClosed:function(){K(!0)},onLoggedIn:ce,onHidden:ie,onError:function(e,t,n){se?.(e,t,n),e===I.Wu.ShopifyPayUserNotFound&&(0,m.TV)(y.Sl,"false"),(0,m.TV)(y.GH,t===I.hD.LimitExceeded?H||"":"false"),window.dispatchEvent(new Event("shop_pay_user_identified_cookie_set"))},onResized:function(e){!isNaN(e)&&e&&B(e)},onLoaded:()=>{D(!0)},onEmailChange:de}),(0,a.useEffect)((()=>{(0,A.L)(j?.current,{action:I.L$.OriginChanged,origin:T})}),[T]),(0,a.useEffect)((()=>{const e=n?I.L$.Ready:I.L$.Hidden;(0,A.L)(j?.current,{action:e}),ee(n?"shopPayVerification":"none"),j.current&&n&&j.current.focus()}),[n,ee]);const ue=(0,v.X)(M);return(0,a.useEffect)((()=>()=>{D(!1)}),[ue]),(0,a.useEffect)((()=>{(0,h.B9)(e)&&(W.mark("start"),$.current=!0)}),[W,e]),(0,a.useEffect)((()=>{if(n&&$.current&&W.marks.start){W.mark("loaded");const e=Math.round(W.marks.loaded-W.marks.start);$.current=!1,O.distribution(k.J.ShopPayVerificationTimeToInteractive,{value:e,tags:{isC1:!0}})}}),[n,O,W]),(0,a.useEffect)((()=>{q.mark("start")}),[q]),(0,a.useEffect)((()=>{if(L&&q.marks.start){q.mark("loaded");const e=Math.round(q.marks.loaded-q.marks.start);O.distribution(k.J.ShopPayVerificationIframeReadyDuration,{value:e,tags:{isC1:!0}})}}),[L,O,q]),ue?a.default.createElement(w.A,{activator:l?.current??void 0,open:n,onClose:ie,placement:N,contentWidth:320,contentHeight:R},a.default.createElement(b.R,{active:J||!L,size:"large"},a.default.createElement("iframe",{key:ue,id:"shop-pay-verification-iframe",title:U("shop_pay.verification.title","Shop Pay Quick Checkout"),ref:j,src:ue,height:R,width:320,className:"hRbIp",allow:"publickey-credentials-get *",referrerPolicy:"origin"}))):null}var Q=n(61086),J=n(65442);function K({open:e,popoverActivator:t,showToggle:n}){const r=(0,a.useMemo)((()=>(0,E.Lx)()),[]),l=t?.current,o=l?.id?`#${l.id}`:"",i=(0,a.useRef)(null),s=(0,X.W)(),[d,c]=(0,a.useState)(!1),m=(0,J.W)(y.C8.ShopPayVerificationModal),{checkoutSessionIdentifier:p}=(0,u.Fo)();return(0,a.useEffect)((()=>{!d&&l&&async function(){try{await async function(){await(0,Q.k)(r)}(),function(){const e=i.current;e?.listenToInput(l)}(),function(){const e=i.current;e?.addEventListener("completed",(()=>{window.location.assign(m)})),e?.addEventListener("modalclosed",(()=>{n?.(!0)})),e?.addEventListener("error",(()=>{}))}(),c(!0)}catch(e){s.notify(new ee(`Error loading Shop JS for Verification Modal. Details: ${e}`))}}()}),[i,s,r,d,l,n,m]),(0,a.useEffect)((()=>{if(e){const e=i.current;e?.requestShow(l.value)}}),[l,e]),a.default.createElement("shop-login-button",{action:"default","analytics-context":"loginWithShopCheckoutModal","anchor-to":o,"disable-sign-up":!0,"hide-button":!0,ref:i,version:"2","response-type":"code","redirect-type":"iframe","checkout-version":"checkout_one","checkout-token":p})}class ee extends Error{constructor(...e){super(...e),this.name="ShopJSLoadError"}}const te=({email:e,onSetEmail:t,open:n,popoverActivator:i,showPopover:s,showToggle:d,urlOrigin:c=r.K.C1Modal,updatedOrigin:u=r.K.C1Modal})=>Boolean((0,l.a)(o.hZ))?a.default.createElement(K,{popoverActivator:i,open:n,showToggle:d}):a.default.createElement(Z,{popoverActivator:i,email:e,onSetEmail:t,open:n,showPopover:s,showToggle:d,urlOrigin:c,updatedOrigin:u})},74654:(e,t,n)=>{n.d(t,{x:()=>d});var a=n(49577),r=n(9366),l=n(15299);const o={Wrapper:"yblnR"},i={duration:(s=a.L.transitionDuration.base,Number(s.replace(/\D/g,""))),easing:a.L.transitionTimingFunction.easeOut};var s;function d({children:e}){const t=(0,l.useRef)(null),n=(0,l.useRef)(),a=(0,r.j)(),s=(0,l.useMemo)((()=>{if("undefined"!=typeof window&&window.ResizeObserver)return new ResizeObserver((([e])=>{n.current=e.contentRect.height}))}),[]),d=(0,l.useMemo)((()=>{if("undefined"!=typeof window&&window.MutationObserver)return new MutationObserver((()=>{if(!t.current)return;const{height:e}=t.current.getBoundingClientRect(),a=n.current;if(null==a||e===a)return;const r={height:`${a}px`},l={height:`${e}px`};t.current.animate([r,l],i)}))}),[]);return(0,l.useEffect)((()=>{if(!a&&t.current&&s&&d)return s.observe(t.current),d.observe(t.current,{childList:!0}),()=>{s.disconnect(),d.disconnect()}}),[s,d,a]),l.default.createElement("div",{ref:t,className:o.Wrapper},e)}},14869:(e,t,n)=>{n.d(t,{T:()=>v});var a=n(58168),r=n(15299),l=n(76882),o=n(70097),i=n(17586);const s={xxsmall:"bqgda",xsmall:"YzqaK",small:"Iy0qq",medium:"GeSb3",large:"GxkfW"},d=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 126 50"},e),r.createElement("g",{fillRule:"evenodd",clipPath:"url(#gpay-logo-light_svg__a)",clipRule:"evenodd"},r.createElement("path",{fill:"#fff",d:"M59.62 7.342v12.636h7.793q2.785 0 4.605-1.872c1.247-1.244 1.872-2.73 1.872-4.447q0-2.525-1.872-4.401-1.82-1.918-4.605-1.919H59.62zm0 17.083v14.657h-4.654V2.895h12.348q4.7 0 7.99 3.132 3.343 3.133 3.343 7.632c0 3.066-1.115 5.629-3.343 7.68-2.157 2.059-4.824 3.083-7.993 3.083h-7.69zm23.73 7.078q0 1.818 1.545 3.033c1.027.804 2.234 1.21 3.615 1.21 1.959 0 3.7-.724 5.236-2.17 1.538-1.451 2.302-3.153 2.302-5.106q-2.176-1.718-6.072-1.718c-1.887 0-3.466.458-4.728 1.368-1.266.91-1.897 2.034-1.897 3.383Zm6.023-17.996q5.16.002 8.148 2.754 2.982 2.758 2.984 7.558v15.263h-4.454v-3.435h-.2q-2.887 4.244-7.694 4.246-4.096-.002-6.855-2.427-2.757-2.427-2.758-6.065 0-3.843 2.91-6.116 2.909-2.274 7.767-2.274c2.76 0 5.042.504 6.827 1.516v-1.064q0-2.426-1.922-4.116a6.6 6.6 0 0 0-4.502-1.693c-2.6 0-4.655 1.092-6.174 3.287l-4.098-2.581q3.392-4.852 10.02-4.853m36.683.81L110.519 50h-4.806l5.769-12.484-10.219-23.198h5.06l7.387 17.791h.099l7.186-17.794z"}),r.createElement("path",{fill:"#4285F4",d:"M40.81 21.267c0-1.464-.123-2.878-.359-4.228H20.818v8.01h11.247a9.62 9.62 0 0 1-4.16 6.319v5.199h6.713c3.93-3.62 6.192-8.975 6.192-15.3"}),r.createElement("path",{fill:"#34A853",d:"M20.819 41.585c5.62 0 10.348-1.841 13.799-5.016l-6.713-5.203c-1.866 1.257-4.27 1.99-7.087 1.99-5.428 0-10.039-3.658-11.685-8.584H2.219v5.357a20.82 20.82 0 0 0 18.6 11.46"}),r.createElement("path",{fill:"#FABB05",d:"M9.133 24.771a12.5 12.5 0 0 1 0-7.96v-5.356H2.219A20.7 20.7 0 0 0 0 20.788c0 3.358.805 6.53 2.219 9.337l6.914-5.357z"}),r.createElement("path",{fill:"#E94235",d:"M20.818 8.229c3.07 0 5.818 1.052 7.985 3.12v.002l5.942-5.935C31.142 2.06 26.438 0 20.82 0A20.82 20.82 0 0 0 2.222 11.457l6.914 5.357c1.646-4.927 6.257-8.585 11.685-8.585"})),r.createElement("defs",null,r.createElement("clipPath",{id:"gpay-logo-light_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h126v50H0z"})))),c=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 126 50"},e),r.createElement("g",{fillRule:"evenodd",clipPath:"url(#gpay-logo_svg__a)",clipRule:"evenodd"},r.createElement("path",{fill:"#5F6368",d:"M59.62 7.342v12.636h7.793q2.785 0 4.605-1.872c1.247-1.244 1.872-2.73 1.872-4.447q0-2.525-1.872-4.401-1.82-1.918-4.605-1.919H59.62zm0 17.083v14.657h-4.654V2.895h12.348q4.7 0 7.99 3.132 3.343 3.133 3.343 7.632c0 3.066-1.115 5.629-3.343 7.68-2.157 2.059-4.824 3.083-7.993 3.083h-7.69zm23.73 7.078q0 1.818 1.545 3.033c1.027.804 2.234 1.21 3.615 1.21 1.959 0 3.7-.724 5.236-2.17 1.538-1.451 2.302-3.153 2.302-5.106q-2.176-1.718-6.072-1.718c-1.887 0-3.466.458-4.728 1.368-1.266.91-1.897 2.034-1.897 3.383Zm6.023-17.996q5.16.002 8.148 2.754 2.982 2.758 2.984 7.558v15.263h-4.454v-3.435h-.2q-2.887 4.244-7.694 4.246-4.096-.002-6.855-2.427-2.757-2.427-2.758-6.065 0-3.843 2.91-6.116 2.909-2.274 7.767-2.274c2.76 0 5.042.504 6.827 1.516v-1.064q0-2.426-1.922-4.116a6.6 6.6 0 0 0-4.502-1.693c-2.6 0-4.655 1.092-6.174 3.287l-4.098-2.581q3.392-4.852 10.02-4.853m36.683.81L110.519 50h-4.806l5.769-12.484-10.219-23.198h5.06l7.387 17.791h.099l7.186-17.794z"}),r.createElement("path",{fill:"#4285F4",d:"M40.81 21.267c0-1.464-.123-2.878-.359-4.228H20.818v8.01h11.247a9.62 9.62 0 0 1-4.16 6.319v5.199h6.713c3.93-3.62 6.192-8.975 6.192-15.3"}),r.createElement("path",{fill:"#34A853",d:"M20.819 41.585c5.62 0 10.348-1.841 13.799-5.016l-6.713-5.203c-1.866 1.257-4.27 1.99-7.087 1.99-5.428 0-10.039-3.658-11.685-8.584H2.219v5.357a20.82 20.82 0 0 0 18.6 11.46"}),r.createElement("path",{fill:"#FABB05",d:"M9.133 24.771a12.5 12.5 0 0 1 0-7.96v-5.356H2.219A20.7 20.7 0 0 0 0 20.788c0 3.358.805 6.53 2.219 9.337l6.914-5.357z"}),r.createElement("path",{fill:"#E94235",d:"M20.818 8.229c3.07 0 5.818 1.052 7.985 3.12v.002l5.942-5.935C31.142 2.06 26.438 0 20.82 0A20.82 20.82 0 0 0 2.222 11.457l6.914 5.357c1.646-4.927 6.257-8.585 11.685-8.585"})),r.createElement("defs",null,r.createElement("clipPath",{id:"gpay-logo_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h126v50H0z"})))),u=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1686 455"},e),r.createElement("g",{fill:"none",strokeWidth:2},r.createElement("path",{stroke:"#f3f4f4",strokeOpacity:.953,d:"M312.96 103.5c-.55.23-.93.33-1.51.04-14.88-7.36-32.61-10.96-49.08-11.72-3.14-.15-6.64-.78-9.43-.8q-17.34-.07-101.16-.01c-11.63.01-19.59 2.63-21.57 15.24q-3.29 21.05-19.26 121.99-.73 4.63.34 7.26",vectorEffect:"non-scaling-stroke"}),r.createElement("path",{stroke:"#dddede",strokeOpacity:.839,d:"M111.29 235.5q-1.82 3.1-2.52 7.5-9.49 59.87-18.9 119.76a1.41.88 86 0 1-.44.83q-.4.29-.93.37",vectorEffect:"non-scaling-stroke"})),r.createElement("path",{fill:"#fff",d:"M67.31 0h144c42.18 1.15 90.11 15.82 101 62.62 3.16 13.6 2.37 27.02.65 40.88-.55.23-.93.33-1.51.04-14.88-7.36-32.61-10.96-49.08-11.72-3.14-.15-6.64-.78-9.43-.8q-17.34-.07-101.16-.01c-11.63.01-19.59 2.63-21.57 15.24q-3.29 21.05-19.26 121.99-.73 4.63.34 7.26-1.82 3.1-2.52 7.5-9.49 59.87-18.9 119.76a1.41.88 86 0 1-.44.83q-.4.29-.93.37-36.93.07-73.86.04c-7.43 0-12.26-1.06-14.64-8.31v-6.5q25.63-161.4 51.02-322.84C53.2 12.47 53.74 3.85 67.31 0"}),r.createElement("path",{fill:"#e6e7e7",fillOpacity:.906,d:"M312.96 103.5v.5q-.92 2.49-1.77 7.47-4.78 28.02-19.35 53.86c-24.64 43.71-73.07 61.28-121.34 61.7q-19.73.17-39.45.24c-9.04.02-14.69 1.17-19.76 8.23q-1.07-2.63-.34-7.26 15.97-100.94 19.26-121.99c1.98-12.61 9.94-15.23 21.57-15.24q83.82-.06 101.16.01c2.79.02 6.29.65 9.43.8 16.47.76 34.2 4.36 49.08 11.72.58.29.96.19 1.51-.04"}),r.createElement("path",{fill:"#acadad",fillOpacity:.678,d:"M312.96 104c25 13.44 35.07 38.85 33.75 66.25-1.46 29.98-10.41 60.88-29.27 84.68-18.86 23.81-49.58 36.41-79.63 39.48q-12.21 1.25-31.31.99c-11.1-.16-16.22 6.89-17.81 16.91q-9.95 62.49-12.94 81.69c-1.89 12.14-9.5 15.26-20.73 15.26q-28.7-.02-57.4 0c-9.97 0-15.01-3.16-13.38-13.61q2.43-15.52 4.92-31.03a.66.37-77.7 0 0-.2-.64q-.18-.07-.46-.02.53-.08.93-.37a1.41.88 86 0 0 .44-.83q9.41-59.89 18.9-119.76.7-4.4 2.52-7.5c5.07-7.06 10.72-8.21 19.76-8.23q19.72-.07 39.45-.24c48.27-.42 96.7-17.99 121.34-61.7q14.57-25.84 19.35-53.86.85-4.98 1.77-7.47"}),r.createElement("path",{fill:"#fff",d:"M497.46 393.58q-4.25-3.08-3.41-8.36 18.57-116.42 36.93-232.87c1.53-9.69 4.51-15.08 14.79-15.09q44.21-.03 88.43 0c34.77.01 73.86 8.1 82.36 48.18 4.74 22.38-.59 48.27-9.47 68.99-11.12 25.99-30.89 42.28-57.64 49.84-20.64 5.84-37.4 4.79-63.24 4.76-11.08-.01-15.75 2.82-17.47 13.64q-4.54 28.66-9.04 57.31c-1.63 10.35-4.92 14.96-15.58 14.99q-21.07.07-42.34.02-2.39-.01-4.32-1.41m98.79-204.55c-3 .02-6.74 2.26-7.25 5.43q-4.99 31-9.82 62.04a.62.62-85.1 0 0 .6.72c32.94.36 66.84 3.49 68.66-40.7 1.29-31.18-32.12-27.64-52.19-27.49m567 205.95c-6.33-.01-8.48-5.16-7.62-10.65q18.62-118 37.22-236.01c1.3-8.21 7.43-11.04 15.29-11.05q47.3-.07 94.61.01c42.59.07 78.49 19.96 76.71 67.71-1.51 40.61-18.77 80.21-58.48 95.97-23.65 9.38-46.56 8.2-77.23 8.02-8.61-.05-12.46 5.63-13.73 13.61q-5.2 32.45-10.27 64.92c-.88 5.65-5.61 7.45-11.1 7.46q-22.7.07-45.4.01m88.06-202.6q-1.02 1.48-1.32 3.37l-9.65 61.01a.45.38 4.5 0 0 .45.44c14.51.19 30.42 1.13 44.37-2.81 12.35-3.49 19.2-12.14 22.67-24.52q2.55-9.09 1.86-17.83c-2.09-26.26-32.95-23.12-51.43-23.03-3.29.02-5.17.77-6.95 3.37M1686 142.81v4.75q-18.65 116.96-37 233.97c-1.49 9.46-5.85 13.43-15.34 13.45q-16.7.04-33.39.02c-7.25 0-11.62-2.53-10.4-10.28q18.93-120.49 37.87-240.97c.75-4.81 4.53-6.48 9.26-6.49q19.98-.02 39.96-.01c4.63 0 7.43 1.3 9.04 5.56M838.83 374.65c-22.53 21.73-53.91 29.06-84.14 21.59-33.9-8.37-51.3-40.44-50.4-73.49 1.88-69.15 63.05-119.38 131.7-99.76q15.31 4.38 23.68 17.8.58.93.76-.15c1.3-7.98-.07-17.63 11.26-17.64q20.34-.01 40.69.01c6.91 0 10.63 3.11 9.52 10.14q-11.89 75.34-23.79 150.67c-1.39 8.87-7.91 11.14-16.33 11.16q-17.15.04-34.31.02c-14.11-.01-9.31-11.2-8.34-20.19q.06-.5-.3-.16m-71.45-44.25c6.81 19.35 29.09 24.11 46.76 19.89q26.37-6.3 35.8-31.69c5.7-15.37 3.62-34.82-10.04-45.05-17.51-13.11-44.26-7.87-59.27 6.35-12.93 12.24-19.33 33.22-13.25 50.5m732.69 44.5q-30 27.22-69.6 23.81c-67.37-5.81-77.96-78.03-51.06-127.53 14.09-25.94 39.52-45.26 68.82-50.72 20.37-3.8 56.17-2.52 69.81 16.4q1.5 2.08 3.14 4.05.32.4.4-.11c1.06-6.36.42-17.79 9.85-17.8h41.89c7.1 0 10.95 2.89 9.8 10.2q-11.68 74.14-23.41 148.28c-1.5 9.47-5.77 13.47-15.29 13.49q-17.84.05-35.67.03c-13.91-.01-9.57-10.93-8.38-19.95q.07-.49-.3-.15M1427.7 305c-5.54 22.4 4.89 43.93 29.48 46.28q28.03 2.68 45.11-17.16c9.63-11.19 14.2-28.14 10.61-42.35-6.46-25.64-36.55-30.86-57.49-21.14q-21.71 10.08-27.71 34.37M999.94 455h-48q-5.43-1.47-6.19-6.5c-.57-3.79 1.47-6.02 3.56-8.96q21.79-30.85 43.68-61.63a.98.97 53.2 0 0 .12-.89q-23.9-70.21-47.84-140.4c-1.73-5.09-2.63-9.25 2.03-12.36q1.87-1.24 5.35-1.24 20.04-.03 40.09-.03c8.38 0 13.13 2.25 15.53 10.25q12.82 42.61 25.53 85.26.16.53.47.07 30.89-45.53 61.9-91.15c2.04-3 6.89-4.41 10.83-4.41l42.17-.02c8.65-.01 12.04 6.59 7.1 13.72q-73.83 106.57-147.68 213.13-2.82 4.07-8.65 5.16"})),m=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 196 50"},e),r.createElement("g",{clipPath:"url(#paypal-logo_svg__a)"},r.createElement("path",{fill:"#253B80",fillRule:"evenodd",d:"M62.268 11.182h10.816c3.62 0 6.346 1 7.884 2.893 1.4 1.723 1.863 4.183 1.379 7.315-1.074 7.157-5.186 10.769-12.31 10.769h-3.425c-.738 0-1.37.563-1.483 1.33l-1.18 7.837c-.116.767-.745 1.33-1.485 1.33H57.3c-.555 0-.979-.516-.892-1.09l4.375-29.055c.115-.766.745-1.33 1.485-1.33Zm5.634 14.678c2.867 0 5.833 0 6.424-4.066.217-1.428.043-2.462-.525-3.158-.952-1.166-2.794-1.166-4.748-1.166h-.748c-.442 0-.822.338-.89.797L66.27 25.86zM100.235 21.664h5.179c.554 0 .976.518.887 1.09l-2.799 18.571c-.117.767-.743 1.33-1.485 1.33h-4.665c-.552 0-.976-.516-.89-1.093l.232-1.507s-2.558 3.106-7.17 3.106c-2.686 0-4.945-.812-6.523-2.76-1.721-2.12-2.425-5.158-1.93-8.336.952-6.37 5.84-10.912 11.564-10.912 2.496 0 4.996.57 6.118 2.275l.362.55.23-1.517a.91.91 0 0 1 .89-.797m-7.884 15.74c2.996 0 5.344-2.08 5.844-5.18.226-1.501-.087-2.863-.876-3.839-.788-.966-1.984-1.478-3.454-1.478-2.95 0-5.338 2.15-5.804 5.223-.244 1.507.047 2.86.812 3.812.772.958 1.974 1.463 3.478 1.463Z",clipRule:"evenodd"}),r.createElement("path",{fill:"#253B80",d:"M132.999 21.663h-5.204c-.497 0-.963.259-1.245.69l-7.179 11.079-3.042-10.646c-.192-.666-.779-1.123-1.443-1.123h-5.114c-.622 0-1.054.636-.856 1.25l5.733 17.625-5.39 7.97c-.424.629.003 1.492.736 1.492h5.198c.493 0 .955-.252 1.235-.676l17.312-26.178c.414-.626-.011-1.483-.741-1.483"}),r.createElement("path",{fill:"#179BD7",fillRule:"evenodd",d:"M139.415 11.182h10.818c3.62 0 6.345 1 7.88 2.893 1.4 1.723 1.867 4.183 1.381 7.315-1.075 7.157-5.186 10.769-12.312 10.769h-3.423c-.738 0-1.369.563-1.483 1.33l-1.242 8.237c-.08.537-.521.93-1.037.93h-5.551c-.552 0-.976-.516-.889-1.09l4.375-29.055c.115-.766.744-1.33 1.483-1.33Zm5.642 14.678c2.869 0 5.835 0 6.425-4.066.216-1.428.044-2.462-.524-3.158-.952-1.166-2.796-1.166-4.748-1.166h-.748c-.444 0-.821.338-.889.797l-1.146 7.593zM177.383 21.663h5.176c.555 0 .979.52.894 1.09l-2.801 18.572c-.116.767-.745 1.33-1.484 1.33h-4.664c-.555 0-.979-.516-.892-1.093l.231-1.508s-2.557 3.107-7.169 3.107c-2.687 0-4.942-.812-6.524-2.76-1.72-2.12-2.421-5.158-1.928-8.336.953-6.37 5.84-10.912 11.563-10.912 2.496 0 4.995.57 6.116 2.275l.364.55.229-1.518a.91.91 0 0 1 .889-.797m-7.881 15.742c2.995 0 5.347-2.081 5.844-5.181.229-1.501-.084-2.863-.877-3.84-.787-.965-1.983-1.477-3.454-1.477-2.949 0-5.334 2.149-5.804 5.222-.24 1.508.048 2.862.813 3.813.772.957 1.977 1.463 3.478 1.463",clipRule:"evenodd"}),r.createElement("path",{fill:"#179BD7",d:"m188.67 11.979-4.44 29.588c-.087.573.337 1.09.889 1.09h4.463c.742 0 1.371-.563 1.485-1.33l4.378-29.055c.087-.573-.337-1.092-.889-1.092h-4.998c-.441.002-.82.34-.888.799"}),r.createElement("path",{fill:"#253B80",d:"m11.493 48.304.827-5.504-1.842-.045H1.68L7.794 2.141a.54.54 0 0 1 .17-.318.5.5 0 0 1 .327-.126h14.834c4.925 0 8.324 1.073 10.098 3.193.832.994 1.362 2.032 1.618 3.176.27 1.2.274 2.632.011 4.38l-.019.128v1.12l.832.494c.7.39 1.258.835 1.685 1.345.711.85 1.172 1.93 1.366 3.211.2 1.317.134 2.885-.194 4.66-.38 2.04-.994 3.818-1.822 5.273-.763 1.34-1.734 2.452-2.887 3.314-1.1.818-2.408 1.44-3.887 1.837-1.433.391-3.067.588-4.859.588h-1.154c-.826 0-1.628.312-2.257.87a3.7 3.7 0 0 0-1.177 2.2l-.087.496-1.46 9.7-.067.357c-.018.112-.048.169-.092.207a.24.24 0 0 1-.152.058z"}),r.createElement("path",{fill:"#179BD7",d:"M36.451 12.703q-.066.445-.152.911c-1.956 10.523-8.65 14.158-17.197 14.158h-4.353c-1.045 0-1.926.795-2.089 1.876l-2.228 14.805L9.8 48.65c-.106.709.416 1.349 1.099 1.349h7.72c.913 0 1.69-.696 1.834-1.64l.076-.412 1.453-9.662.094-.53c.142-.948.92-1.644 1.834-1.644h1.155c7.479 0 13.334-3.181 15.045-12.387.715-3.845.345-7.056-1.547-9.314-.572-.681-1.283-1.246-2.113-1.707Z"}),r.createElement("path",{fill:"#222D65",d:"M34.4 11.847a15 15 0 0 0-1.902-.442c-1.173-.199-2.459-.293-3.836-.293H17.034c-.286 0-.558.068-.802.19-.536.27-.934.802-1.03 1.453l-2.475 16.413-.07.479c.162-1.08 1.043-1.876 2.089-1.876h4.352c8.548 0 15.241-3.637 17.197-14.158q.087-.466.152-.91a10 10 0 0 0-1.608-.712 15 15 0 0 0-.438-.144Z"}),r.createElement("path",{fill:"#253B80",d:"M15.205 12.756a1.93 1.93 0 0 1 1.031-1.451c.245-.123.516-.19.802-.19h11.627c1.378 0 2.663.094 3.837.292a15 15 0 0 1 2.342.585q.867.3 1.609.711c.582-3.889-.005-6.536-2.012-8.934C32.228 1.13 28.235 0 23.125 0H8.29C7.247 0 6.356.795 6.195 1.877L.015 42.91c-.121.812.477 1.544 1.258 1.544h9.159l2.3-15.284z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"paypal-logo_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h195.456v50H0z"})))),p=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 264 50"},e),r.createElement("g",{clipPath:"url(#venmo-logo-light_svg__a)"},r.createElement("path",{fill:"#fff",d:"M239.393 37.3c-2.934 0-4.184-2.751-4.184-7.197.002-5.86 1.336-17.315 7.839-17.315 2.937 0 3.917 2.664 3.917 6.572 0 5.86-1.425 17.94-7.572 17.94M244.918.176c-18.438 0-26.453 14.124-26.453 29.22 0 11.456 4.631 20.604 18.616 20.604 18.883 0 26.811-15.452 26.811-30.372 0-11.28-5.078-19.452-18.974-19.452m-42.147 0c-6.143 0-10.599 1.868-15.318 5.24-1.696-3.02-5.079-5.24-10.245-5.239-5.968 0-10.419 2.401-13.714 4.796l-.445-3.996h-14.166l-7.569 47.868h16.564l5.258-33.568c1.424-.712 3.559-1.688 5.698-1.688 1.601 0 2.939.532 2.939 2.933 0 .619-.177 1.595-.264 2.395l-4.72 29.927h16.477l5.253-33.567c1.517-.8 3.564-1.689 5.609-1.689 1.608 0 2.945.533 2.945 2.933 0 .62-.183 1.595-.27 2.395l-4.72 29.928h16.48l5.073-31.972c.269-1.684.539-4.26.539-6.035 0-6.397-2.943-10.661-11.404-10.661m-75.549 0c-6.321 0-10.776 2.401-14.16 4.621l-.181-3.82h-14.34l-7.57 47.867h16.569l5.253-33.567c1.425-.713 3.564-1.689 5.699-1.689 1.607 0 2.943.532 2.943 2.664 0 .888-.27 2.489-.358 3.284l-4.631 29.308h16.476L138 16.872c.269-1.684.539-4.26.539-6.035 0-6.397-2.943-10.661-11.317-10.66ZM65.306 20.335c.446-5.328 4.538-9.054 7.657-9.054 1.783 0 3.295 1.063 3.295 3.195 0 4.44-7.838 5.859-10.952 5.859M74.569.175c-17.636 0-26.19 15.277-26.19 29.665 0 11.1 5.259 19.98 19.952 19.98 5.792 0 11.76-1.244 15.59-3.108l2.046-13.852c-5.434 2.752-9.616 3.816-13.983 3.816-4.01 0-7.035-2.127-7.035-7.548 9.087-.088 24.76-3.816 24.759-15.984 0-7.548-5.43-12.968-15.14-12.968ZM27.966 3.109c.98 2.045 1.606 4.527 1.606 8.173 0 6.66-4.725 16.427-8.554 22.642l-4.097-32.86L0 2.665l7.75 46.18h19.325c8.46-11.1 18.885-26.908 18.885-39.076 0-3.816-.803-6.836-2.585-9.768z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"venmo-logo-light_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h263.892v50H0z"})))),f=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 264 50"},e),r.createElement("g",{clipPath:"url(#venmo-logo_svg__a)"},r.createElement("path",{fill:"#008CFF",d:"M239.393 37.3c-2.934 0-4.184-2.751-4.184-7.197.002-5.86 1.336-17.315 7.839-17.315 2.937 0 3.917 2.664 3.917 6.572 0 5.86-1.425 17.94-7.572 17.94M244.918.176c-18.438 0-26.453 14.124-26.453 29.22 0 11.456 4.631 20.604 18.616 20.604 18.883 0 26.811-15.452 26.811-30.372 0-11.28-5.078-19.452-18.974-19.452m-42.147 0c-6.143 0-10.599 1.868-15.318 5.24-1.696-3.02-5.079-5.24-10.245-5.239-5.968 0-10.419 2.401-13.714 4.796l-.445-3.996h-14.166l-7.569 47.868h16.564l5.258-33.568c1.424-.712 3.559-1.688 5.698-1.688 1.601 0 2.939.532 2.939 2.933 0 .619-.177 1.595-.264 2.395l-4.72 29.927h16.477l5.253-33.567c1.517-.8 3.564-1.689 5.609-1.689 1.608 0 2.945.533 2.945 2.933 0 .62-.183 1.595-.27 2.395l-4.72 29.928h16.48l5.073-31.972c.269-1.684.539-4.26.539-6.035 0-6.397-2.943-10.661-11.404-10.661m-75.549 0c-6.321 0-10.776 2.401-14.16 4.621l-.181-3.82h-14.34l-7.57 47.867h16.569l5.253-33.567c1.425-.713 3.564-1.689 5.699-1.689 1.607 0 2.943.532 2.943 2.664 0 .888-.27 2.489-.358 3.284l-4.631 29.308h16.476L138 16.872c.269-1.684.539-4.26.539-6.035 0-6.397-2.943-10.661-11.317-10.66ZM65.306 20.335c.446-5.328 4.538-9.054 7.657-9.054 1.783 0 3.295 1.063 3.295 3.195 0 4.44-7.838 5.859-10.952 5.859M74.569.175c-17.636 0-26.19 15.277-26.19 29.665 0 11.1 5.259 19.98 19.952 19.98 5.792 0 11.76-1.244 15.59-3.108l2.046-13.852c-5.434 2.752-9.616 3.816-13.983 3.816-4.01 0-7.035-2.127-7.035-7.548 9.087-.088 24.76-3.816 24.759-15.984 0-7.548-5.43-12.968-15.14-12.968ZM27.966 3.109c.98 2.045 1.606 4.527 1.606 8.173 0 6.66-4.725 16.427-8.554 22.642l-4.097-32.86L0 2.665l7.75 46.18h19.325c8.46-11.1 18.885-26.908 18.885-39.076 0-3.816-.803-6.836-2.585-9.768z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"venmo-logo_svg__a"},r.createElement("path",{fill:"#fff",d:"M0 0h263.892v50H0z"})))),h=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 226 50"},e),r.createElement("g",{fillRule:"evenodd",clipPath:"url(#apay-logo-light_svg__a)",clipRule:"evenodd"},r.createElement("path",{fill:"#F90",d:"M88.522 40.975c-8.244 6.084-20.195 9.32-30.487 9.32-14.423 0-27.412-5.333-37.241-14.208-.771-.697-.084-1.649.844-1.11 10.604 6.172 23.72 9.888 37.263 9.888 9.137 0 19.18-1.897 28.423-5.817 1.394-.59 2.563.919 1.198 1.927"}),r.createElement("path",{fill:"#F90",d:"M91.954 37.057c-1.055-1.35-6.97-.639-9.627-.32-.805.097-.93-.607-.205-1.116 4.719-3.315 12.452-2.358 13.35-1.248.905 1.119-.239 8.872-4.66 12.57-.68.57-1.328.266-1.025-.484.995-2.486 3.222-8.05 2.167-9.402"}),r.createElement("path",{fill:"#fff",d:"M82.513 12.206v-3.22a.795.795 0 0 1 .816-.815l14.435-.001c.461 0 .833.334.833.812v2.761c-.005.464-.396 1.068-1.087 2.027l-7.478 10.677c2.775-.065 5.711.35 8.233 1.768.57.32.722.793.766 1.257v3.436c0 .474-.518 1.021-1.064.737-4.442-2.328-10.337-2.582-15.25.028-.502.268-1.027-.273-1.027-.747v-3.267c0-.522.01-1.417.537-2.213l8.662-12.428h-7.542c-.461 0-.832-.33-.834-.812M29.86 32.321h-4.392a.826.826 0 0 1-.786-.741l.004-22.54c0-.45.379-.81.848-.81h4.09c.427.02.77.344.797.756v2.942h.083c1.066-2.846 3.074-4.174 5.78-4.174 2.745 0 4.468 1.328 5.697 4.174 1.066-2.846 3.485-4.174 6.066-4.174 1.846 0 3.854.76 5.083 2.467 1.394 1.898 1.108 4.648 1.108 7.067l-.005 14.223c0 .449-.377.81-.846.81h-4.385c-.443-.027-.789-.376-.789-.808l-.001-11.95c0-.947.082-3.318-.124-4.219-.327-1.519-1.31-1.946-2.58-1.946-1.067 0-2.174.712-2.626 1.849-.45 1.14-.409 3.035-.409 4.317V31.51c0 .449-.379.81-.847.81H37.24c-.441-.027-.789-.376-.789-.808l-.005-11.95c0-2.513.411-6.21-2.704-6.21-3.157 0-3.033 3.603-3.033 6.21l-.003 11.948c0 .449-.379.81-.846.81ZM111.062 12.355c-3.237 0-3.442 4.41-3.442 7.16 0 2.752-.04 8.633 3.403 8.633 3.402 0 3.567-4.742 3.567-7.635 0-1.897-.084-4.174-.658-5.976-.491-1.566-1.476-2.182-2.87-2.182m-.039-4.6c6.517 0 10.042 5.598 10.042 12.711 0 6.875-3.894 12.33-10.042 12.33-6.396 0-9.88-5.597-9.88-12.567 0-7.02 3.525-12.475 9.88-12.475ZM129.518 32.321h-4.377c-.438-.027-.787-.376-.787-.808l-.008-22.547c.038-.413.402-.735.845-.735l4.073-.002c.384.02.7.28.781.631v3.447h.082c1.231-3.083 2.951-4.553 5.984-4.553 1.967 0 3.894.712 5.124 2.657 1.148 1.802 1.148 4.836 1.148 7.018v14.183c-.048.4-.407.71-.842.71h-4.402a.83.83 0 0 1-.782-.71V19.376c0-2.467.288-6.073-2.746-6.073-1.065 0-2.05.712-2.541 1.802-.616 1.377-.698 2.752-.698 4.27v12.136c-.008.449-.387.81-.854.81M75.432 32.266c-.29.26-.707.278-1.036.102-1.458-1.212-1.72-1.772-2.517-2.927-2.41 2.456-4.118 3.192-7.24 3.192-3.697 0-6.573-2.282-6.573-6.844 0-3.565 1.932-5.99 4.683-7.177 2.383-1.046 5.71-1.236 8.258-1.521v-.57c0-1.048.082-2.282-.535-3.185-.534-.809-1.56-1.141-2.464-1.141-1.676 0-3.163.858-3.53 2.636-.077.396-.365.789-.762.809l-4.257-.462c-.36-.082-.759-.37-.656-.918.966-5.092 5.513-6.68 9.646-6.722h.326c2.115.026 4.817.606 6.463 2.185 2.137 1.997 1.93 4.658 1.93 7.558v6.84c0 2.06.855 2.962 1.657 4.07.282.4.344.875-.014 1.168-.897.752-2.49 2.136-3.366 2.917zm-4.425-10.707c0 1.711.04 3.137-.822 4.658-.699 1.235-1.808 1.996-3.04 1.996-1.684 0-2.67-1.283-2.67-3.185 0-3.74 3.355-4.42 6.532-4.42zM17.868 32.266c-.291.26-.71.278-1.038.102-1.46-1.212-1.721-1.772-2.517-2.927-2.412 2.456-4.118 3.192-7.24 3.192C3.376 32.633.5 30.351.5 25.79c0-3.565 1.93-5.989 4.683-7.177 2.383-1.046 5.71-1.236 8.257-1.521v-.57c0-1.048.083-2.281-.534-3.185-.534-.809-1.562-1.141-2.464-1.141-1.676 0-3.166.858-3.53 2.636-.076.396-.365.789-.763.809l-4.256-.461c-.36-.082-.76-.37-.656-.919.964-5.092 5.512-6.679 9.646-6.722h.326c2.116.027 4.817.607 6.463 2.185 2.136 1.997 1.93 4.658 1.93 7.559v6.84c0 2.059.855 2.961 1.657 4.07.28.4.344.874-.013 1.167-.898.752-2.492 2.136-3.368 2.917zM13.44 21.559c0 1.711.041 3.137-.822 4.659-.698 1.234-1.807 1.995-3.04 1.995-1.684 0-2.67-1.283-2.67-3.185 0-3.74 3.356-4.42 6.532-4.42zM202.413 40.407V38.75c0-.471.231-.796.723-.767.917.13 2.215.26 3.136.07 1.203-.25 2.066-1.103 2.577-2.272a51 51 0 0 0 1.496-3.843L201.21 9.31c-.155-.385-.2-1.098.567-1.098h3.193c.61 0 .857.387.994.766l6.623 18.383 6.323-18.383c.128-.376.387-.766.992-.766h3.011c.762 0 .719.712.567 1.097l-9.062 23.338c-1.173 3.106-2.735 8.054-6.253 8.913-1.764.461-3.989.294-5.296-.253-.33-.165-.456-.608-.456-.9M198.151 30.942a.77.77 0 0 1-.768.766h-2.252a.88.88 0 0 1-.881-.766l-.226-1.532a13.2 13.2 0 0 1-3.682 2.18c-2.649 1.03-5.702 1.2-8.291-.39-1.871-1.148-2.864-3.394-2.864-5.71 0-1.793.552-3.57 1.776-4.86 1.634-1.763 4.003-2.628 6.862-2.628 1.728 0 4.2.203 5.998.79v-3.084c0-3.137-1.32-4.494-4.802-4.494-2.661 0-4.697.402-7.531 1.283-.453.015-.719-.33-.719-.75v-1.76c0-.422.36-.83.751-.954 2.023-.882 4.889-1.432 7.936-1.533 3.972 0 8.693.896 8.693 7.005zm-4.328-4.503v-4.655c-1.511-.413-4.012-.585-4.98-.585-1.529 0-3.204.361-4.078 1.303-.654.69-.949 1.68-.949 2.639 0 1.238.428 2.48 1.429 3.095 1.163.79 2.966.693 4.661.212 1.629-.463 3.158-1.28 3.917-2.01ZM164.948 11.284c4.997 0 6.358 3.929 6.358 8.428.027 3.033-.53 5.737-2.101 7.285-1.175 1.159-2.488 1.475-4.465 1.475-1.759 0-4.073-.918-5.801-2.195V13.413c1.799-1.382 4.095-2.13 6.009-2.13Zm-6.775 29.93h-3.017a.77.77 0 0 1-.767-.766V9.018a.77.77 0 0 1 .767-.766h2.309c.485 0 .818.351.88.766l.242 1.646c2.163-1.92 4.947-3.15 7.599-3.15 7.43 0 9.873 6.122 9.873 12.487 0 6.81-3.737 12.282-10.057 12.282-2.662 0-5.15-.982-7.063-2.688v10.853a.77.77 0 0 1-.766.766"})),r.createElement("defs",null,r.createElement("clipPath",{id:"apay-logo-light_svg__a"},r.createElement("path",{fill:"#fff",d:"M.5 0h225v50H.5z"})))),y=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 226 50"},e),r.createElement("g",{fillRule:"evenodd",clipPath:"url(#apay-logo_svg__a)",clipRule:"evenodd"},r.createElement("path",{fill:"#F90",d:"M88.522 40.975c-8.244 6.084-20.195 9.32-30.487 9.32-14.423 0-27.412-5.333-37.241-14.208-.771-.697-.084-1.649.844-1.11 10.604 6.172 23.72 9.888 37.263 9.888 9.137 0 19.18-1.897 28.423-5.817 1.394-.59 2.563.919 1.198 1.927"}),r.createElement("path",{fill:"#F90",d:"M91.954 37.057c-1.055-1.35-6.97-.639-9.627-.32-.805.097-.93-.607-.205-1.116 4.719-3.315 12.452-2.358 13.35-1.248.905 1.119-.239 8.872-4.66 12.57-.68.57-1.328.266-1.025-.484.995-2.486 3.222-8.05 2.167-9.402"}),r.createElement("path",{fill:"#333E47",d:"M82.513 12.206v-3.22a.795.795 0 0 1 .816-.815l14.435-.001c.461 0 .833.334.833.812v2.761c-.005.464-.396 1.068-1.087 2.027l-7.478 10.677c2.775-.065 5.711.35 8.233 1.768.57.32.722.793.766 1.257v3.436c0 .474-.518 1.021-1.064.737-4.442-2.328-10.337-2.582-15.25.028-.502.268-1.027-.273-1.027-.747v-3.267c0-.522.01-1.417.537-2.213l8.662-12.428h-7.542c-.461 0-.832-.33-.834-.812M29.86 32.321h-4.392a.826.826 0 0 1-.786-.741l.004-22.54c0-.45.379-.81.848-.81h4.09c.427.02.77.344.797.756v2.942h.083c1.066-2.846 3.074-4.174 5.78-4.174 2.745 0 4.468 1.328 5.697 4.174 1.066-2.846 3.485-4.174 6.066-4.174 1.846 0 3.854.76 5.083 2.467 1.394 1.898 1.108 4.648 1.108 7.067l-.005 14.223c0 .449-.377.81-.846.81h-4.385c-.443-.027-.789-.376-.789-.808l-.001-11.95c0-.947.082-3.318-.124-4.219-.327-1.519-1.31-1.946-2.58-1.946-1.067 0-2.174.712-2.626 1.849-.45 1.14-.409 3.035-.409 4.317V31.51c0 .449-.379.81-.847.81H37.24c-.441-.027-.789-.376-.789-.808l-.005-11.95c0-2.513.411-6.21-2.704-6.21-3.157 0-3.033 3.603-3.033 6.21l-.003 11.948c0 .449-.379.81-.846.81ZM111.062 12.355c-3.237 0-3.442 4.41-3.442 7.16 0 2.752-.04 8.633 3.403 8.633 3.402 0 3.567-4.742 3.567-7.635 0-1.897-.084-4.174-.658-5.976-.491-1.566-1.476-2.182-2.87-2.182m-.039-4.6c6.517 0 10.042 5.598 10.042 12.711 0 6.875-3.894 12.33-10.042 12.33-6.396 0-9.88-5.597-9.88-12.567 0-7.02 3.525-12.475 9.88-12.475ZM129.518 32.321h-4.377c-.438-.027-.787-.376-.787-.808l-.008-22.547c.038-.413.402-.735.845-.735l4.073-.002c.384.02.7.28.781.631v3.447h.082c1.231-3.083 2.951-4.553 5.984-4.553 1.967 0 3.894.712 5.124 2.657 1.148 1.802 1.148 4.836 1.148 7.018v14.183c-.048.4-.407.71-.842.71h-4.402a.83.83 0 0 1-.782-.71V19.376c0-2.467.288-6.073-2.746-6.073-1.065 0-2.05.712-2.541 1.802-.616 1.377-.698 2.752-.698 4.27v12.136c-.008.449-.387.81-.854.81M75.432 32.266c-.29.26-.707.278-1.036.102-1.458-1.212-1.72-1.772-2.517-2.927-2.41 2.456-4.118 3.192-7.24 3.192-3.697 0-6.573-2.282-6.573-6.844 0-3.565 1.932-5.99 4.683-7.177 2.383-1.046 5.71-1.236 8.258-1.521v-.57c0-1.048.082-2.282-.535-3.185-.534-.809-1.56-1.141-2.464-1.141-1.676 0-3.163.858-3.53 2.636-.077.396-.365.789-.762.809l-4.257-.462c-.36-.082-.759-.37-.656-.918.966-5.092 5.513-6.68 9.646-6.722h.326c2.115.026 4.817.606 6.463 2.185 2.137 1.997 1.93 4.658 1.93 7.558v6.84c0 2.06.855 2.962 1.657 4.07.282.4.344.875-.014 1.168-.897.752-2.49 2.136-3.366 2.917zm-4.425-10.707c0 1.711.04 3.137-.822 4.658-.699 1.235-1.808 1.996-3.04 1.996-1.684 0-2.67-1.283-2.67-3.185 0-3.74 3.355-4.42 6.532-4.42zM17.868 32.266c-.291.26-.71.278-1.038.102-1.46-1.212-1.721-1.772-2.517-2.927-2.412 2.456-4.118 3.192-7.24 3.192C3.376 32.633.5 30.351.5 25.79c0-3.565 1.93-5.989 4.683-7.177 2.383-1.046 5.71-1.236 8.257-1.521v-.57c0-1.048.083-2.281-.534-3.185-.534-.809-1.562-1.141-2.464-1.141-1.676 0-3.166.858-3.53 2.636-.076.396-.365.789-.763.809l-4.256-.461c-.36-.082-.76-.37-.656-.919.964-5.092 5.512-6.679 9.646-6.722h.326c2.116.027 4.817.607 6.463 2.185 2.136 1.997 1.93 4.658 1.93 7.559v6.84c0 2.059.855 2.961 1.657 4.07.28.4.344.874-.013 1.167-.898.752-2.492 2.136-3.368 2.917zM13.44 21.559c0 1.711.041 3.137-.822 4.659-.698 1.234-1.807 1.995-3.04 1.995-1.684 0-2.67-1.283-2.67-3.185 0-3.74 3.356-4.42 6.532-4.42zM202.413 40.407V38.75c0-.471.231-.796.723-.767.917.13 2.215.26 3.136.07 1.203-.25 2.066-1.103 2.577-2.272a51 51 0 0 0 1.496-3.843L201.21 9.31c-.155-.385-.2-1.098.567-1.098h3.193c.61 0 .857.387.994.766l6.623 18.383 6.323-18.383c.128-.376.387-.766.992-.766h3.011c.762 0 .719.712.567 1.097l-9.062 23.338c-1.173 3.106-2.735 8.054-6.253 8.913-1.764.461-3.989.294-5.296-.253-.33-.165-.456-.608-.456-.9M198.151 30.942a.77.77 0 0 1-.768.766h-2.252a.88.88 0 0 1-.881-.766l-.226-1.532a13.2 13.2 0 0 1-3.682 2.18c-2.649 1.03-5.702 1.2-8.291-.39-1.871-1.148-2.864-3.394-2.864-5.71 0-1.793.552-3.57 1.776-4.86 1.634-1.763 4.003-2.628 6.862-2.628 1.728 0 4.2.203 5.998.79v-3.084c0-3.137-1.32-4.494-4.802-4.494-2.661 0-4.697.402-7.531 1.283-.453.015-.719-.33-.719-.75v-1.76c0-.422.36-.83.751-.954 2.023-.882 4.889-1.432 7.936-1.533 3.972 0 8.693.896 8.693 7.005zm-4.328-4.503v-4.655c-1.511-.413-4.012-.585-4.98-.585-1.529 0-3.204.361-4.078 1.303-.654.69-.949 1.68-.949 2.639 0 1.238.428 2.48 1.429 3.095 1.163.79 2.966.693 4.661.212 1.629-.463 3.158-1.28 3.917-2.01ZM164.948 11.284c4.997 0 6.358 3.929 6.358 8.428.027 3.033-.53 5.737-2.101 7.285-1.175 1.159-2.488 1.475-4.465 1.475-1.759 0-4.073-.918-5.801-2.195V13.413c1.799-1.382 4.095-2.13 6.009-2.13Zm-6.775 29.93h-3.017a.77.77 0 0 1-.767-.766V9.018a.77.77 0 0 1 .767-.766h2.309c.485 0 .818.351.88.766l.242 1.646c2.163-1.92 4.947-3.15 7.599-3.15 7.43 0 9.873 6.122 9.873 12.487 0 6.81-3.737 12.282-10.057 12.282-2.662 0-5.15-.982-7.063-2.688v10.853a.77.77 0 0 1-.766.766"})),r.createElement("defs",null,r.createElement("clipPath",{id:"apay-logo_svg__a"},r.createElement("path",{fill:"#fff",d:"M.5 0h225v50H.5z"})))),g=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",width:88,height:21,fill:"none"},e),r.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M57.213 8.393q.732 0 1.078-.487t.347-1.539q0-1.064-.34-1.551-.34-.488-1.085-.488-.68 0-1.281.347v3.372q.575.346 1.28.346m-2.863 3.912q-.17 0-.248-.071t-.079-.25V3.43q0-.18.079-.25.078-.07.248-.07h.941q.3 0 .366.281l.092.334q.392-.372.947-.59.556-.218 1.131-.218 1.268 0 2.007.91.738.91.738 2.462 0 1.065-.366 1.86t-.993 1.224-1.438.43q-.536 0-1.02-.167a2.5 2.5 0 0 1-.823-.461v2.808q0 .18-.072.25t-.255.07zM62.179 9.663q-.17 0-.249-.077-.078-.076-.078-.244V3.431q0-.18.078-.25.079-.07.249-.07h.94q.301 0 .367.281l.17.693q.522-.564.986-.802a2.14 2.14 0 0 1 .988-.237h.183q.182 0 .261.07.078.071.078.25v1.078q0 .166-.072.243t-.254.077q-.092 0-.236-.013a4 4 0 0 0-.366-.012q-.3 0-.732.083a3.7 3.7 0 0 0-.732.212v4.308q0 .168-.071.244-.072.077-.256.077zM67.402 9.663q-.17 0-.249-.077t-.078-.244V3.431q0-.18.078-.25.08-.07.249-.07h1.255q.183 0 .255.07.071.07.072.25v5.911q0 .167-.072.244t-.255.077zm.627-7.566q-.497 0-.797-.27-.3-.268-.3-.73t.3-.731q.3-.27.797-.27.496 0 .798.27.3.27.3.73 0 .463-.3.732-.301.27-.797.27M70.929 9.663q-.171 0-.249-.077-.078-.076-.078-.244V3.431q0-.18.078-.25t.249-.07h.94q.301 0 .367.281l.105.346q.692-.448 1.248-.634.555-.186 1.144-.186 1.176 0 1.66.82.666-.435 1.255-.628a3.9 3.9 0 0 1 1.215-.192q.915 0 1.418.5.504.5.503 1.398v4.526q0 .168-.07.244-.073.077-.256.077h-1.255q-.17 0-.249-.077-.078-.076-.078-.244V5.226q0-.872-.797-.872-.706 0-1.425.333v4.655q0 .168-.072.244-.072.077-.255.077h-1.255q-.17 0-.248-.077-.078-.076-.079-.244V5.226q0-.872-.797-.872-.732 0-1.438.346v4.642q0 .168-.072.244-.072.077-.255.077zM84.889 5.829q.666 0 .967-.2.3-.198.3-.608 0-.808-.98-.808-1.255 0-1.451 1.513.523.103 1.164.103m.431 4.026q-1.62 0-2.49-.872-.87-.871-.87-2.5 0-1.667.89-2.616.888-.95 2.47-.95 1.216 0 1.902.578.687.577.687 1.539 0 .96-.74 1.455-.738.495-2.175.494a5.2 5.2 0 0 1-1.295-.141q.079.86.53 1.23.45.373 1.366.373.364 0 .712-.045a9 9 0 0 0 1.039-.218 1 1 0 0 1 .065-.007q.222 0 .223.295v.59q0 .205-.06.289a.5.5 0 0 1-.228.147 5.7 5.7 0 0 1-2.026.359M84.636 16.866C80.909 19.565 75.505 21 70.85 21c-6.521 0-12.394-2.365-16.838-6.302-.35-.309-.038-.73.382-.492 4.794 2.738 10.724 4.386 16.848 4.386 4.131 0 8.673-.841 12.851-2.58.63-.262 1.159.407.542.854",clipRule:"evenodd"}),r.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M86.187 15.13c-.477-.6-3.151-.285-4.353-.143-.364.043-.42-.27-.092-.495 2.133-1.47 5.63-1.046 6.035-.554.41.496-.107 3.935-2.106 5.576-.308.252-.6.118-.464-.215.45-1.103 1.457-3.57.98-4.17",clipRule:"evenodd"}),r.createElement("path",{fill:"#fff",d:"M.533 9.387V.803h3.09q1.242 0 2 .632.768.63.769 1.647 0 .632-.298 1.09-.286.446-.856.694.794.236 1.204.78.422.533.422 1.313 0 1.115-.832 1.772-.832.656-2.234.656zm1.762-3.74v2.415H3.76q1.267 0 1.267-1.19 0-1.226-1.354-1.226zm0-3.519v2.255h1.08q1.205 0 1.205-1.115 0-1.14-1.105-1.14zm10.178 7.26-.174-.67q-1.105.855-2.309.855-.844 0-1.316-.496-.471-.507-.472-1.387V3.057h1.813v4.125q0 1.005.869 1.004.645 0 1.266-.397V3.057h1.812v6.33zm4.91.098-2.507-6.429H16.8l1.415 4.732 1.341-4.732h1.875l-2.682 7.185q-.36.978-.881 1.412t-1.316.434q-.62 0-1.204-.199v-1.226q.397.037.707.037.522 0 .807-.248.285-.234.485-.83zm13.393-.099L29.684 4.94l-1.105 4.447h-1.75l-2.024-6.33h1.912l1.055 4.571 1.142-4.57h1.627l1.166 4.583.993-4.584h1.863l-2.036 6.33zm4.778 0v-6.33h1.812v6.33zm.906-7.308q-.471 0-.757-.26-.285-.261-.286-.706 0-.447.286-.707.285-.26.757-.26t.757.26.286.707-.286.706-.757.26m6.467 7.147q-.67.26-1.502.26-1.055 0-1.564-.495-.497-.496-.497-1.536v-3.06h-.956V3.28l1.006-.198.273-1.734h1.49v1.71h1.713v1.337h-1.713v2.973q0 .396.198.557.2.162.67.161.385 0 .882-.074zm5.184.161v-4.15q0-.507-.224-.743-.224-.235-.683-.235-.683 0-1.353.421v4.707H44.04V.221h1.812v3.406q1.068-.756 2.235-.756.88 0 1.353.484.484.47.484 1.35v4.682z"})),_=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",width:88,height:21,fill:"none"},e),r.createElement("path",{fill:"#4896F7",fillRule:"evenodd",d:"M57.213 8.393q.732 0 1.078-.487t.347-1.539q0-1.064-.34-1.551-.34-.488-1.085-.488-.68 0-1.281.347v3.372q.575.346 1.28.346m-2.863 3.912q-.17 0-.248-.071t-.079-.25V3.43q0-.18.079-.25.078-.07.248-.07h.941q.3 0 .366.281l.092.334q.392-.372.947-.59.556-.218 1.131-.218 1.268 0 2.007.91.738.91.738 2.462 0 1.065-.366 1.86t-.993 1.224-1.438.43q-.536 0-1.02-.167a2.5 2.5 0 0 1-.823-.461v2.808q0 .18-.072.25t-.255.07zM62.179 9.663q-.17 0-.249-.077-.078-.076-.078-.244V3.431q0-.18.078-.25.079-.07.249-.07h.94q.301 0 .367.281l.17.693q.522-.564.986-.802a2.14 2.14 0 0 1 .988-.237h.183q.182 0 .261.07.078.071.078.25v1.078q0 .166-.072.243t-.254.077q-.092 0-.236-.013a4 4 0 0 0-.366-.012q-.3 0-.732.083a3.7 3.7 0 0 0-.732.212v4.308q0 .168-.071.244-.072.077-.256.077zM67.402 9.663q-.17 0-.249-.077t-.078-.244V3.431q0-.18.078-.25.08-.07.249-.07h1.255q.183 0 .255.07.071.07.072.25v5.911q0 .167-.072.244t-.255.077zm.627-7.566q-.497 0-.797-.27-.3-.268-.3-.73t.3-.731q.3-.27.797-.27.496 0 .798.27.3.27.3.73 0 .463-.3.732-.301.27-.797.27M70.929 9.663q-.171 0-.249-.077-.078-.076-.078-.244V3.431q0-.18.078-.25t.249-.07h.94q.301 0 .367.281l.105.346q.692-.448 1.248-.634.555-.186 1.144-.186 1.176 0 1.66.82.666-.435 1.255-.628a3.9 3.9 0 0 1 1.215-.192q.915 0 1.418.5.504.5.503 1.398v4.526q0 .168-.07.244-.073.077-.256.077h-1.255q-.17 0-.249-.077-.078-.076-.078-.244V5.226q0-.872-.797-.872-.706 0-1.425.333v4.655q0 .168-.072.244-.072.077-.255.077h-1.255q-.17 0-.248-.077-.078-.076-.079-.244V5.226q0-.872-.797-.872-.732 0-1.438.346v4.642q0 .168-.072.244-.072.077-.255.077zM84.889 5.829q.666 0 .967-.2.3-.198.3-.608 0-.808-.98-.808-1.255 0-1.451 1.513.523.103 1.164.103m.431 4.026q-1.62 0-2.49-.872-.87-.871-.87-2.5 0-1.667.89-2.616.888-.95 2.47-.95 1.216 0 1.902.578.687.577.687 1.539 0 .96-.74 1.455-.738.495-2.175.494a5.2 5.2 0 0 1-1.295-.141q.079.86.53 1.23.45.373 1.366.373.364 0 .712-.045a9 9 0 0 0 1.039-.218 1 1 0 0 1 .065-.007q.222 0 .223.295v.59q0 .205-.06.289a.5.5 0 0 1-.228.147 5.7 5.7 0 0 1-2.026.359M84.636 16.866C80.909 19.565 75.505 21 70.85 21c-6.521 0-12.394-2.365-16.838-6.302-.35-.309-.038-.73.382-.492 4.794 2.738 10.724 4.386 16.848 4.386 4.131 0 8.673-.841 12.851-2.58.63-.262 1.159.407.542.854",clipRule:"evenodd"}),r.createElement("path",{fill:"#4896F7",fillRule:"evenodd",d:"M86.187 15.13c-.477-.6-3.151-.285-4.353-.143-.364.043-.42-.27-.092-.495 2.133-1.47 5.63-1.046 6.035-.554.41.496-.107 3.935-2.106 5.576-.308.252-.6.118-.464-.215.45-1.103 1.457-3.57.98-4.17",clipRule:"evenodd"}),r.createElement("path",{fill:"#4896F7",d:"M.533 9.387V.803h3.09q1.242 0 2 .632.768.63.769 1.647 0 .632-.298 1.09-.286.446-.856.694.794.236 1.204.78.422.533.422 1.313 0 1.115-.832 1.772-.832.656-2.234.656zm1.762-3.74v2.415H3.76q1.267 0 1.267-1.19 0-1.226-1.354-1.226zm0-3.519v2.255h1.08q1.205 0 1.205-1.115 0-1.14-1.105-1.14zm10.178 7.26-.174-.67q-1.105.855-2.309.855-.844 0-1.316-.496-.471-.507-.472-1.387V3.057h1.813v4.125q0 1.005.869 1.004.645 0 1.266-.397V3.057h1.812v6.33zm4.91.098-2.507-6.429H16.8l1.415 4.732 1.341-4.732h1.875l-2.682 7.185q-.36.978-.881 1.412t-1.316.434q-.62 0-1.204-.199v-1.226q.397.037.707.037.522 0 .807-.248.285-.234.485-.83zm13.393-.099L29.684 4.94l-1.105 4.447h-1.75l-2.024-6.33h1.912l1.055 4.571 1.142-4.57h1.627l1.166 4.583.993-4.584h1.863l-2.036 6.33zm4.778 0v-6.33h1.812v6.33zm.906-7.308q-.471 0-.757-.26-.285-.261-.286-.706 0-.447.286-.707.285-.26.757-.26t.757.26.286.707-.286.706-.757.26m6.467 7.147q-.67.26-1.502.26-1.055 0-1.564-.495-.497-.496-.497-1.536v-3.06h-.956V3.28l1.006-.198.273-1.734h1.49v1.71h1.713v1.337h-1.713v2.973q0 .396.198.557.2.162.67.161.385 0 .882-.074zm5.184.161v-4.15q0-.507-.224-.743-.224-.235-.683-.235-.683 0-1.353.421v4.707H44.04V.221h1.812v3.406q1.068-.756 2.235-.756.88 0 1.353.484.484.47.484 1.35v4.682z"})),E=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 118 50"},e),r.createElement("path",{fill:"#fff",d:"M22.276 6.448c1.388-1.736 2.33-4.066 2.082-6.448-2.032.101-4.51 1.34-5.946 3.077-1.289 1.488-2.43 3.916-2.132 6.198 2.28.197 4.559-1.14 5.996-2.827M24.332 9.72c-3.312-.197-6.128 1.88-7.71 1.88s-4.003-1.78-6.623-1.733c-3.409.05-6.572 1.978-8.302 5.044-3.558 6.133-.94 15.23 2.521 20.225 1.68 2.471 3.706 5.192 6.374 5.095 2.521-.1 3.51-1.633 6.574-1.633s3.953 1.633 6.622 1.583c2.768-.05 4.498-2.472 6.178-4.946 1.928-2.817 2.717-5.537 2.767-5.686-.05-.05-5.337-2.078-5.386-8.16-.05-5.093 4.151-7.515 4.349-7.665-2.373-3.509-6.08-3.905-7.364-4.004M53.166 2.828c7.198 0 12.21 4.962 12.21 12.185 0 7.25-5.115 12.237-12.39 12.237h-7.97v12.673H39.26V2.828h13.907Zm-8.15 19.588h6.607c5.013 0 7.867-2.698 7.867-7.377 0-4.678-2.854-7.352-7.84-7.352h-6.633v14.73ZM66.88 32.237c0-4.73 3.625-7.635 10.052-7.995l7.403-.437v-2.082c0-3.008-2.03-4.807-5.423-4.807-3.214 0-5.22 1.542-5.707 3.959H67.96c.309-4.885 4.473-8.484 11.157-8.484 6.555 0 10.745 3.47 10.745 8.894v18.638h-5.321v-4.447h-.128c-1.568 3.008-4.987 4.91-8.535 4.91-5.296 0-8.998-3.29-8.998-8.15Zm17.455-2.442V27.66l-6.658.411c-3.316.232-5.192 1.697-5.192 4.01 0 2.365 1.953 3.908 4.935 3.908 3.882 0 6.915-2.674 6.915-6.195ZM94.886 49.872v-4.5c.41.103 1.336.103 1.799.103 2.57 0 3.959-1.08 4.807-3.855 0-.052.489-1.645.489-1.671l-9.769-27.07h6.015l6.839 22.006h.102l6.839-22.006h5.86l-10.129 28.458C105.426 47.892 102.752 50 97.148 50c-.463 0-1.852-.052-2.262-.128"})),b=e=>r.createElement("svg",(0,a.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",preserveAspectRatio:"xMidYMid",viewBox:"0 0 118 50"},e),r.createElement("path",{fill:"#000",d:"M22.276 6.448c1.388-1.736 2.33-4.066 2.082-6.448-2.032.101-4.51 1.34-5.946 3.077-1.289 1.488-2.43 3.916-2.132 6.198 2.28.197 4.559-1.14 5.996-2.827M24.332 9.72c-3.312-.197-6.128 1.88-7.71 1.88s-4.003-1.78-6.623-1.733c-3.409.05-6.572 1.978-8.302 5.044-3.558 6.133-.94 15.23 2.521 20.225 1.68 2.471 3.706 5.192 6.374 5.095 2.521-.1 3.51-1.633 6.574-1.633s3.953 1.633 6.622 1.583c2.768-.05 4.498-2.472 6.178-4.946 1.928-2.817 2.717-5.537 2.767-5.686-.05-.05-5.337-2.078-5.386-8.16-.05-5.093 4.151-7.515 4.349-7.665-2.373-3.509-6.08-3.905-7.364-4.004M53.166 2.828c7.198 0 12.21 4.962 12.21 12.185 0 7.25-5.115 12.237-12.39 12.237h-7.97v12.673H39.26V2.828h13.907Zm-8.15 19.588h6.607c5.013 0 7.867-2.698 7.867-7.377 0-4.678-2.854-7.352-7.84-7.352h-6.633v14.73ZM66.88 32.237c0-4.73 3.625-7.635 10.052-7.995l7.403-.437v-2.082c0-3.008-2.03-4.807-5.423-4.807-3.214 0-5.22 1.542-5.707 3.959H67.96c.309-4.885 4.473-8.484 11.157-8.484 6.555 0 10.745 3.47 10.745 8.894v18.638h-5.321v-4.447h-.128c-1.568 3.008-4.987 4.91-8.535 4.91-5.296 0-8.998-3.29-8.998-8.15Zm17.455-2.442V27.66l-6.658.411c-3.316.232-5.192 1.697-5.192 4.01 0 2.365 1.953 3.908 4.935 3.908 3.882 0 6.915-2.674 6.915-6.195ZM94.886 49.872v-4.5c.41.103 1.336.103 1.799.103 2.57 0 3.959-1.08 4.807-3.855 0-.052.489-1.645.489-1.671l-9.769-27.07h6.015l6.839 22.006h.102l6.839-22.006h5.86l-10.129 28.458C105.426 47.892 102.752 50 97.148 50c-.463 0-1.852-.052-2.262-.128"}));function v({size:e="medium",wallet:t}){const n=(0,l.W)(),v={className:s[e],role:"img"},C=(0,o.b)().isStandard(),S=(0,i.U)()&&C;switch(t){case"googlePay":{const e=S?d:c;return r.default.createElement(e,(0,a.A)({},v,{"aria-label":n("brand.google_pay","Google Pay")}))}case"payPal":{const e=S?u:m;return r.default.createElement(e,(0,a.A)({},v,{"aria-label":n("brand.paypal","PayPal")}))}case"venmo":{const e=S?p:f;return r.default.createElement(e,(0,a.A)({},v,{"aria-label":n("brand.venmo","Venmo")}))}case"amazonPay":{const e=S?h:y;return r.default.createElement(e,(0,a.A)({},v,{"aria-label":n("brand.amazon_pay","Amazon Pay")}))}case"buyWithPrime":{const e=S?g:_;return r.default.createElement(e,(0,a.A)({},v,{"aria-label":"Optimus"}))}case"applePay":{const e=S?E:b;return r.default.createElement(e,(0,a.A)({},v,{"aria-label":n("brand.apple_pay","Apple Pay")}))}}}},19874:(e,t,n)=>{n.d(t,{uL:()=>i,yn:()=>s});var a=n(15299),r=n(43520),l=n(65802);const o=(0,a.createContext)(null);function i(){const e=(0,a.useContext)(o);return t=>n=>{if(n&&e)if(n instanceof HTMLAnchorElement||n instanceof HTMLButtonElement)e.set(n,t);else if(n instanceof Element){const a=n.querySelector("button, a");if(!a)throw new c("Could not find a button or anchor element in the provided ref");e.set(a,t)}}}function s({section:e,children:t}){const n=(0,r.y7)(),l=(0,a.useRef)(null),i=(0,a.useMemo)((()=>new WeakMap),[]);return a.default.createElement(o.Provider,{value:i},a.default.createElement("div",{ref:l,onFocusCapture:function(t){const a=t.target.closest("a, button, input, select");if(!a)return;const{element:r,shouldCaptureEvent:l}=d(a,e,i);l&&n("dom_input_focused",{element:r,timestamp:new Date})},onBlurCapture:function(t){const a=t.target.closest("a, button, input, select");if(!a)return;const{element:r,shouldCaptureEvent:l}=d(a,e,i);l&&n("dom_input_blurred",{element:r,timestamp:new Date})},onClickCapture:function(t){if(!(t.target instanceof Element))return;const a=t.target.closest("a, button"),r=t.target.closest("input, select"),l=a??r;if(!l)return;const{element:o,shouldCaptureEvent:s}=d(l,e,i);s&&n("dom_clicked",{element:o,timestamp:new Date})},onChangeCapture:function(t){const a=t.target?.closest("a, button, input, select");if(!a)return;const{element:r,shouldCaptureEvent:l}=d(a,e,i);l&&n("dom_input_changed",{element:r,timestamp:new Date})}},t))}function d(e,t,n){const a=e instanceof HTMLAnchorElement||e instanceof HTMLButtonElement;let r=`${t}_`,o=null,i=null;"href"in e&&(i=e.href);let s=!0;if(a){const t=n?.get(e);t?r+=t:s=!1}else"radio"===e.type?(r+=e.name.replace(/[A-Z]/g,((e,t)=>`${0===t?"":"_"}${e.toLowerCase()}`)),o=e.id.split("-").slice(-1)[0].toLowerCase()):(r+=e.name.replace(/[A-Z]/g,((e,t)=>`${0===t?"":"_"}${e.toLowerCase()}`)),o=(0,l.mX)(e));return r=r.replace(/-/g,"_"),{element:{id:r,tagName:e.tagName,type:e.type,value:o,...i&&{href:i},name:null},shouldCaptureEvent:s}}class c extends Error{constructor(...e){super(...e),this.name="ButtonOrAnchorNotFoundError"}}},65802:(e,t,n)=>{function a(e){return Array.from(e.labels||[]).map((e=>e.textContent)).join("")}function r(e){return e instanceof HTMLInputElement&&("checkbox"===e.type||"radio"===e.type)?e.checked.toString():e.value}function l(e){if(e.target instanceof HTMLInputElement||e.target instanceof HTMLSelectElement){try{if(e.target.closest("*:-webkit-autofill")===e.target)return"native"}catch(t){}if(!e.isTrusted)return"other"}}n.d(t,{O0:()=>l,l8:()=>a,mX:()=>r})},45559:(e,t,n)=>{n.d(t,{y:()=>l});var a=n(15299),r=n(43520);function l({impressionType:e,impressionFeatures:t,children:n}){const l=function({impressionType:e,impressionFeatures:t}){const n=(0,r.y7)(),l=(0,a.useRef)(null),o=(0,a.useRef)({impressionType:e,impressionFeatures:t});return o.current={impressionType:e,impressionFeatures:t},(0,a.useEffect)((()=>{if(!window.IntersectionObserver)return;const e=new IntersectionObserver((a=>{const r=a.some((({isIntersecting:e})=>e));t&&r&&(e.unobserve(t),n("impression",{...o.current,timestamp:new Date}))}),{threshold:1}),t=l.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}}),[n]),l}({impressionType:e,impressionFeatures:t});return a.default.createElement("div",{ref:l},n)}},31533:(e,t,n)=>{n.d(t,{J:()=>d,M:()=>s});var a=n(70097),r=n(56784),l=n(66126),o=n(60118),i=n(36125);function s(){const e=(0,a.b)(),{contact:t,delivery:n,payment:i}=(0,o.R4)(),s=t&&n&&i;return Boolean((0,r.a)(l.ps)&&e.isStandard()&&s)}function d(){const e=s(),[t]=(0,o.$_)(),n="shopPay"===t,{currentStep:a}=(0,i.Wm)();return Boolean(e&&("oneStep"===a?.id||"review"===a?.id)&&!n)}},85342:(e,t,n)=>{n.d(t,{Dh:()=>p,H:()=>f,L1:()=>u,Ro:()=>m,Yn:()=>c});var a=n(47472),r=n(39178),l=n(34839),o=n(50996),i=n(38743);function s(e){const{id:t}=(0,o.q)(),n=(0,l.Fo)(),r=(0,a.K)("session-token");return{type:e,source:n,shopId:parseInt((0,i.ee)(t),10),sessionToken:r,interactionEndAtRender:!0}}function d(e){return{...s(e),button:r.ej.Unknown,interactionEndAtRender:!1}}function c(){return e=r.J8.Information,t=r.ej.ContinueToShipping,{...s(e),button:t,interactionEndAtRender:!1};var e,t}function u(){return d(r.J8.StockProblems)}function m(){return s(r.J8.Processing)}function p(){return s(r.J8.ThankYou)}function f(){return d(r.J8.PostPurchase)}},28350:(e,t,n)=>{n.d(t,{B9:()=>E,UQ:()=>v,KA:()=>b});var a=n(15299),r=n(11635);function l(e,t=!0,n=null){const l=(0,r.g)(),o=(0,a.useRef)(e),i=(0,a.useRef)(n);(0,a.useEffect)((()=>{o.current=e}),[e]),(0,a.useEffect)((()=>{i.current=n}),[n]),(0,a.useEffect)((()=>{t&&(l?.record(o.current),i.current?.())}),[t,l])}var o=n(23708),i=n(50996),s=n(67331),d=n(14856),c=n(39178),u=n(67551),m=n(41889);const p=6e5,f="unique_interaction_id";function h(){const e=new Date;return e.setTime(e.getTime()+p),e}function y(){(0,m.Yj)(f)}function g(){return(0,m.Ri)(f)||function(){const e=(0,u.u)();return(0,m.TV)(f,e,{expiry:h()}),e}()}function _(e,t,n){return{schemaId:e,payload:{type:t.type,checkoutOne:!0,shopId:t.shopId,sessionToken:t.sessionToken,checkoutToken:t.source.checkoutSessionIdentifier,sourceId:t.source.sourceId,sourceType:t.source.type,eventTime:Date.now(),uniqueInteractionId:n}}}function E(e,t){const n=(0,r.g)(),{emailMarketing:l,smsMarketing:u}=(0,i.q)(),{state:m,parts:p}=(0,o.c$)(),f=t.shopId,h=t.sessionToken??"",y=t.source.checkoutSessionIdentifier??"",g=t.source.sourceId,_=t.source.type;(0,a.useEffect)((()=>{if(e)return;const t=l===s.N.Off||e?void 0:m.read(p.acceptEmailMarketing).value||m.read(p.acceptMarketing).value,a=u===d.q.Off||e?void 0:m.read(p.acceptSmsMarketing).value;n.record(function(e,t,n,a,r,l,o){return{schemaId:c.$D.CheckoutEmailAndSmsConsent,payload:{emailMarketingConsentGiven:l,smsMarketingConsentGiven:o,checkoutOne:!0,shopId:e,sessionToken:t,checkoutToken:n,sourceId:a,sourceType:r,eventTime:Date.now()}}}(f,h,y,g,_,t,a))}),[n,m,l,u,p.acceptMarketing,p.acceptEmailMarketing,p.acceptSmsMarketing,e,f,h,y,g,_])}function b(e,t){const n=(0,r.g)();return(0,a.useCallback)((async()=>{const a=g();(function(e){return e.button===c.ej.Unknown})(e)||(y(),n.record(function(e,t=g()){return{schemaId:c.$D.ButtonPressed,payload:{button:e.button,checkoutOne:!0,shopId:e.shopId,sessionToken:e.sessionToken,checkoutToken:e.source.checkoutSessionIdentifier,sourceId:e.source.sourceId,sourceType:e.source.type,eventTime:Date.now(),uniqueInteractionId:t}}}(e)));const r=Date.now();await t();const l=Date.now()-r;n.record(function(e,t,n=g()){return{schemaId:c.$D.FrontendNetworkTime,payload:{type:t.type,processingTime:e,checkoutOne:!0,shopId:t.shopId,sessionToken:t.sessionToken,checkoutToken:t.source.checkoutSessionIdentifier,sourceId:t.source.sourceId,sourceType:t.source.type,eventTime:Date.now(),uniqueInteractionId:n}}}(l,e,a))}),[e,t,n])}function v(e,{pageInteractive:t=!0,pageWasPainted:n=!0}={}){l("undefined"==typeof window?null:function(e,t=g()){return _(c.$D.PageFirstContentfulPaint,e,t)}(e),n),l("undefined"==typeof window?null:function(e,t=g()){return _(c.$D.PageInteractive,e,t)}(e),n&&t,e.interactionEndAtRender?y:null)}},89168:(e,t,n)=>{n.r(t),n.d(t,{OnePageShell:()=>Xb,default:()=>Gb});var a=n(15299),r=n(174),l=n(44985),o=n(94973),i=n(68206);function s({children:e}){const t=(0,o.QN)();return a.default.createElement(i._.Provider,{value:(e,n,a,r)=>{function l(){t.write(n,void 0)}return{onInput:function(n){const{value:r}=t.read(e);(r||n)&&(t.write(a,!0),l())},clearError:l,onChange:function(n){const{value:a}=t.read(e);(a||n)&&t.write(e,n)},onBlur:function(){const l=t.read(e),{value:o}=t.read(a);o&&function(a){if(!r)return;const{value:l}=t.read(e),{value:o}=t.read(n);if(o&&a&&a===l)return;const i=r(a);t.write(n,i?{message:i,origin:"client",type:"inline-validation"}:void 0)}(l.value)},touched:t.read(a).value}}},e)}var d=n(54444),c=n(57355),u=n(63696),m=n(2408),p=n(36125),f=n(37981),h=n(86883),y=n(82199),g=n(32485),_=n.n(g),E=n(76882),b=n(31928),v=n(39122),C=n(34839),S=n(25082),k=n(22947),w=n(48120),P=n(50996),A=n(6211),I=n(63292),x=n(23381),M=n(67551),T=n(66264),N=n(83612),L=n(70097),D=n(94012),R=n(71693),B=n(46792),F=n(54986);const z={LoginIframe:"aKqIE"},V="shop-pay-login-iframe",O="100%",W="c1_login",q=250;function $(){const[e,t]=(0,a.useState)(!0),[n,r]=(0,a.useState)(q),l=(0,m.OL)(),{progress:o}=(0,p.T4)(),i=(0,E.W)(),s=(0,b.Y)(),{checkoutSessionIdentifier:d}=(0,C.Fo)(),{myshopifyDomain:u}=(0,P.q)(),{transaction_params:f,authorization:h}=(0,S.I)(),y=(0,a.useRef)(null),g=(0,I.rZ)(),_=(0,A.af)().alternate,{exchangeSessionTokenForCookie:$}=(0,k.H)(),U=(0,x.sG)(),{sessionStorageEmail:H,startEmailOnlySignUp:j,skipAutomaticCustomerLoginAttempt:Y,setSkipAutomaticCustomerLoginAttempt:G,setSharedHCaptchaToken:X}=(0,w.Y)(),Z=(0,T.dg)(),Q=(0,L.b)(),J=(0,a.useMemo)((()=>(0,M.u)()),[]),K=(0,c.ci)({lookup:!0});(0,m.M3)(e);const ee=(0,a.useCallback)((()=>{(0,R.L)(y?.current,{action:B.L$.Ready}),y.current?.contentDocument?.body&&(0,v.ag)(y.current.contentDocument.body)?.focus()}),[]),te=(0,a.useCallback)((async(e,t)=>{e&&await $({token:e,origin:W,analytics_trace_id:J,in_checkout_profile_preview:t}),G(!1),o()}),[J,o,$,G]),ne=(0,a.useCallback)((e=>{r(e)}),[]),ae=(0,a.useCallback)((e=>{j(e),G(!1),o()}),[o,j,G]),re=(0,a.useCallback)((e=>{X(e)}),[X]);(0,a.useEffect)((()=>{H&&l>0&&(G(!1),o())}),[H,o,G,l]),(0,F.d)({hostname:_,onLoaded:ee,onLoggedIn:te,onResized:ne,onRedirectUserWithEmailOnly:ae,onShareCaptchaToken:re});const le=(0,a.useMemo)((()=>{if(!d)throw new D.BS("Checkout token is undefined");const e={shopify_domain:u,checkout_token:d,origin:W,locale:s,transaction_params:f,authorization:h,isPointOfSale:U,analytics_trace_id:J,shop_pay_new_signup_login_variant:K};!Y&&g?.email&&(e.storefront_account_email=g.email),Z&&(e[T.rB]=Q.isPartner()?N.ob.Partner:N.ob.Merchant,e[T.by]=N.Sx.Dark);const t=Object.entries(e).map((e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(e[1]||"")}`)).join("&");return`https://${_}/pay/authentication/login-seamless?${t}`}),[d,u,s,f,h,U,J,Y,g?.email,Z,_,Q,K]);return K?a.default.createElement(a.default.Fragment,null,a.default.createElement("iframe",{ref:y,id:V,title:i("shop_pay.verification.title","Shop Pay Quick Checkout"),src:le,onLoad:()=>t(!1),height:n,width:O,className:z.LoginIframe,allow:"publickey-credentials-get *"})):null}var U=n(16505),H=n(75389),j=n(41533),Y=n(40874),G=n(7704),X=n(43520),Z=n(65802);function Q({section:e,children:t}){const{currentFocus:n}=(0,p.Wm)(),r=(0,X.y7)(),i=(0,G._p)(),s=(0,X.m9)(),d=(0,a.useRef)(null),c=(0,o.QN)(),u=(0,b.Y)(),{currentUrl:{pathname:m}}=(0,l.r)(),f=(0,Y.jo)(u,m);return a.default.createElement("div",{ref:d,onFocusCapture:function(t){const a=c.read(n).value;if(c.write(n,e),t.target instanceof HTMLInputElement){const{name:e}=t.target;"email"!==e&&s(f)}a!==e&&(r("sectionInteraction",{section:e,timestamp:new Date}),i({type:"section_interaction",section:e}))},onBlurCapture:function(t){if(t.target instanceof HTMLInputElement||t.target instanceof HTMLSelectElement){const{name:n,tagName:a,type:l}=t.target,o=(0,Z.l8)(t.target);s(f),r("change",{element:{...o&&{label:o},...n&&{name:n},tagName:a,type:l,value:(0,Z.mX)(t.target)},section:e,timestamp:new Date})}},onClickCapture:function(t){if(!(t.target instanceof Element))return;const n=t.target.closest("a, button"),a=t.target.closest("input, select");if((n??a)&&n){const{tagName:t,textContent:a,id:l}=n;let o;l?.endsWith("collapsible")&&(o=n.querySelector("span")?.textContent);const i=((o||a)??"").trim()||l;s(f),r("click",{element:{tagName:t,textContent:i??void 0},section:e,timestamp:new Date})}},onKeyUpCapture:function(e){e.target instanceof HTMLInputElement&&s(f)},onChangeCapture:function(t){if(t.target instanceof HTMLInputElement||t.target instanceof HTMLSelectElement){const{id:n,name:a,tagName:l,type:o}=t.target;let i=(0,Z.l8)(t.target);0===i.length&&(i=n);const s=(0,Z.O0)(t);s&&r("autofill",{source:s,element:{...i&&{label:i},...a&&{name:a},tagName:l,type:o,value:(0,Z.mX)(t.target)},timestamp:new Date,section:e})}}},t)}var J=n(53008),K=n(55081);function ee(){const e=(0,K.ts)(),t=(0,E.W)()("checkout_sdk.use_another_payment_method","Use another payment method"),{checkout_as_guest_url:n}=(0,S.I)();return e?a.default.createElement(h.S,{padding:"base",inlineAlignment:"center"},a.default.createElement(J.N,{to:n},t)):null}const te={ShopPayLogin:"u45yE"};var ne=n(33558),ae=n(36273),re=n(11635),le=n(39178),oe=n(27634),ie=n(87039),se=n(95410),de=n(41889),ce=n(87084);const ue=n.p+"9c2d090f1827a998d0fc.png";function me(){(0,se.i)(ue);const{redirect_source:e}=(0,S.I)(),{recordImmediately:t,pageLoadId:n}=(0,oe.v)(),r=(0,re.g)(),l=(0,x.Qw)(ce.ed.SHOP_PAY_LOGIN),o=(0,x.sG)();(0,ne.F)({stage:ae.B.Complete,id:"ShopPayLogin"});const{checkoutSessionIdentifier:i="checkout_identifier_undefined"}=(0,C.Fo)();(0,a.useEffect)((()=>{(0,ie.Mx)()&&t({schemaId:le.$D.ShopWebDestinationPageLoad,payload:{pageType:"pay_checkout_login",userToken:(0,de.Ri)("_shopify_y")||"",sessionToken:(0,de.Ri)("_shopify_s")||"",experimentFlags:"",pageValue:i}}),t({schemaId:le.$D.PayPageLoad,payload:{pageType:"checkout_login",clientTimestampMs:Date.now(),pageLoadId:n,redirectSource:e}}),o&&r?.record({schemaId:le.$D.PayRetail,payload:l})}),[n,t,e,r,l,o,i])}function pe(){me();const e=(0,f.t)({base:!0,medium:!1});return a.default.createElement(U.K,null,a.default.createElement(H.wn,{padding:"none",hideDivider:!e},a.default.createElement(h.S,{padding:y.OF.default("none").when({viewportInlineSize:{min:"small"}},["none","none","extraLoose","none"]),maxInlineSize:y.OF.default(432).when({viewportInlineSize:{min:"small"}},425),className:_()(te.ShopPayLogin)},a.default.createElement(H.wn,{padding:"none",border:y.OF.when({viewportInlineSize:{min:"small"}},"base"),cornerRadius:y.OF.when({viewportInlineSize:{min:"small"}},"base"),hideDivider:!0},a.default.createElement($,null)))),a.default.createElement(Q,{section:"summary"},e&&a.default.createElement(H.wn,{hideDivider:!0},a.default.createElement(j.x,null))),a.default.createElement(ee,null))}var fe=n(47168),he=n(77491),ye=n(58168),ge=n(63939),_e=n(84030),Ee=n(69574),be=n(50191),ve=n(31374),Ce=n(52274),Se=n(41813),ke=n(52027),we=n(82911),Pe=n(77979),Ae=n(75635),Ie=n(6773),xe=n(9210),Me=n(28540),Te=n(70212),Ne=n(48642),Le=n(1304),De=n(58396),Re=n(54732),Be=n(38909);function Fe(){const{shopPay:e}=(0,_e.GH)(),t=(0,ge.m)(),n=(0,Re.P)("simulated"),{checkoutSessionIdentifier:r=""}=(0,C.Fo)(),[l]=(0,o.fp)(De.XB),i=t.searchParams.get(Be.HZ);return(0,a.useEffect)((()=>{(0,de.TV)(Be.GH,i?r:"false")}),[]),(0,a.useMemo)((()=>Boolean(!n&&!l&&e()&&!i)),[n,l,e,i])}var ze=n(49270),Ve=n(98815),Oe=n(18905),We=n(16335);function qe({emailInput:e,email:t,isShopPayUnauthenticatedUser:n}){const r=(0,a.useRef)(""),l=n?Oe.K.C1ModalShopPay:void 0,[i,s]=(0,a.useState)(l),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[p,f]=(0,o.fp)(xe.D?.shopPayVerificationTrigger),h=t.trim(),y=(0,a.useCallback)(((e,t)=>{t&&(r.current=t),n||m(!e),c(e)}),[n,r]);return(0,a.useEffect)((()=>{p&&(y(!0),f(null),n&&[We.j.LoginLink,We.j.ErrorModalClearEmail].includes(p.source)&&(s(Oe.K.C1ModalShopPaySignIn),p.source===We.j.ErrorModalClearEmail&&window.dispatchEvent(new Event("shop_pay_verification_reset"))))}),[p]),(0,a.useEffect)((()=>{h!==r.current&&(m(!1),c(!1))}),[h,r]),(0,a.useEffect)((()=>{m(!1)}),[e]),{modalUrlOrigin:l,modalUpdatedOrigin:i,shopPayVerificationVisible:d,showShopPayVerificationToggle:u,showShopPayVerification:y,setModalUpdatedOrigin:s,setShowShopPayVerificationToggle:m}}var $e=n(97435);const Ue="/set_tracking_consent.json";var He=n(27534);const je={MobilePhoneIcon:"tfJbE",wobble:"FUooI","scale-up-bounce":"iy7RR"};function Ye({onPress:e}){const t=(0,E.W)();return a.default.createElement(He.$,{accessibilityLabel:t("shop_pay.verification_toggle","Activate Shop Pay SMS input to checkout with Shop Pay"),onPress:e},a.default.createElement("div",{className:je.MobilePhoneIcon},a.default.createElement(Le.In,{source:"mobile",size:"fill"})))}var Ge=n(70681),Xe=n(18871);const Ze=(0,Ge.m)({load:()=>(0,Xe.P)((()=>Promise.resolve().then(n.bind(n,519)))),id:()=>519});function Qe({addressType:e="shipping",disabled:t,label:n,onInputValueChange:r,caretPosition:l,inputMode:i,type:s="email",violationMessage:d,autoFocus:c=!1,onInlineValidation:u,isShopPayUnauthenticatedUser:m,contactInfoOption:p}){const f=(0,E.W)(),h=Fe(),y=(0,we.u)(d,u,p),[g,_]=(0,a.useState)(y.value??""),{userStatus:b}=(0,ze.nQ)(),v=(0,a.useRef)(null),[C]=(0,Ve.j1)(),S=(0,a.useCallback)((e=>{y.onInput(e),y.onChange(e),_(e)}),[y]),{modalUrlOrigin:k,modalUpdatedOrigin:w,shopPayVerificationVisible:P,showShopPayVerificationToggle:A,showShopPayVerification:I,setModalUpdatedOrigin:x,setShowShopPayVerificationToggle:M}=qe({emailInput:g,email:y.value,isShopPayUnauthenticatedUser:m});(0,a.useEffect)((()=>{void 0!==l&&v.current&&y?.value&&l<y.value.length&&v.current.setSelectionRange(l,l)}),[y.value,l]),function(){const{email:e}=(0,ve.C)();(0,o.GI)(e,(e=>{if("invalid"===(0,$e.U)(e,"invalid"))return null;if(!function(){const e=document.cookie.includes("_tracking_consent="),t=document.cookie.includes("_cmp_a=");return e&&t}())return null;const t={headers:{"content-type":"application/json"},body:JSON.stringify({sync_consent:{email:e}}),method:"POST"};fetch(Ue,t).catch((()=>{}))}))}();const T=(0,a.useCallback)((()=>{y.clearError(),S(""),v.current?.focus()}),[y,S]);return{textFieldProps:{label:n??f("contact.email_label","Email"),id:"email",name:"email",type:s,ref:v,autocomplete:{field:"email",group:e},disabled:t,autoFocus:c,inputMode:i,...y,onInput:async e=>{const t=e.trim();y.onInput(t),_(t),m&&x(Oe.K.C1ModalShopPay),r&&r(t,v?.current?.selectionStart||0)},error:C?C.error:y.error,protectedInput:!0,autoCapitalize:"text"===s?"off":void 0,accessory:b===ze.$_.Loading?a.default.createElement(Te.y,{size:"small"}):C?a.default.createElement(Ne.o,{onPress:T},a.default.createElement(Le.In,{source:"errorFill"})):void 0},insideElement:h&&A?a.default.createElement(Ye,{onPress:()=>{I(!0),m&&x(Oe.K.C1ModalShopPay)}}):void 0,afterElement:h?a.default.createElement(Ze,{popoverActivator:v,email:g,onSetEmail:S,open:P,showPopover:I,showToggle:M,urlOrigin:k,updatedOrigin:w}):void 0}}var Je=n(38419),Ke=n(32193);function et({onInputTypeChange:e,onInlineEmailValidation:t,onInlinePhoneValidation:n}){const{shippingRequired:r}=(0,_e.kG)(),[l]=(0,Se.c5)(),i=(0,L.b)(),{getContactInfoOptions:s}=(0,P.q)(),d=(0,o.md)(xe.D?.flow)===Me.p.UnauthenticatedUser,{geolocation:c}=(0,be.u)(),u=(0,E.W)(),m=(0,_e.PW)(),{email:f,phone:h,shippingAddress:y}=(0,ve.C)(),g=(0,o.md)(y.fields.countryCode),[_]=(0,o.fp)(h),[b]=(0,o.fp)(f),[v,C]=(0,a.useState)(""===_||""!==b&&b||d?Ee.C.Email:Ee.C.Phone),[S,k]=(0,a.useState)(0),w=(0,o.QN)(),A=u("contact.email_or_phone_label","Email or mobile phone number"),I=u("field_errors.email_or_phone_invalid","Enter a valid email or a mobile phone number"),x=function(e,t,n=Ee.C.Phone){const{phone:a}=(0,ve.C)(),r=(0,o.QN)();return(0,p.od)((t=>{if(n!==Ee.C.Email&&"error"===t.type)for(const n of t.violations)if("UnprocessableTermViolation"===n.__typename&&we.x.has(n.code))if(n.code===Pe.X.BuyerIdentityEmailRequired){const e=n.localizedMessage??n.nonLocalizedMessage;r.write(Ae.bh,e)}else{const t=e||(n.localizedMessage??n.nonLocalizedMessage);r.write(Ae.bh,t),r.write(Ae.Bu,void 0)}})),(0,Ie.j8)(a,Ae.bh,n===Ee.C.Phone?t:void 0)}(I,n,v),M=async(e,t)=>{D(e),void 0!==t&&k(t)},T=s(g),N=m||d||!T.includes(Ee.C.Phone),D=(0,a.useCallback)((async e=>{if(""===e)return;const t=N||/([A-Za-z]|\.|@)/.test(e);t&&v!==Ee.C.Email?(C(Ee.C.Email),w.write(h,""),w.write(f,e)):t||v===Ee.C.Phone||(C(Ee.C.Phone),w.write(f,""),w.write(h,e))}),[N,v,w,h,f]);(0,a.useEffect)((()=>{e&&e(v)}),[e,v]),(0,a.useEffect)((function(){(!T.includes(Ee.C.Phone)||d)&&v!==Ee.C.Email&&(C(Ee.C.Email),""===b&&""!==_&&(w.write(h,""),w.write(f,_)))}),[T]),(0,Ce.D3)((async({reason:e,parts:t})=>"progression"!==e?{behavior:"allow"}:{behavior:"allow",perform(){""!==w.read(t.phone).value&&w.read(t.deliveryLines).value.forEach((e=>{w.write(e,{...w.read(e).value,deliveryMethodOptions:{...w.read(e).value.deliveryMethodOptions,phone:w.read(t.phone).value}})}))}}));const R=(0,ge.m)(),B=(0,ke.j9)(),F=!R.pathname.includes(B.stockProblems())&&!i.isStandard(),z=(0,a.useMemo)((()=>c.default?.code??g??c.country.code),[c,g]),V=(0,Ke.A)({autoFocus:F,countryCode:z,label:A,onInputValueChange:M,caretPosition:S,inputMode:"text",disableFormatting:!0,...x}),O=N?void 0:{label:A,onInputValueChange:M,violationMessage:I,type:"text",caretPosition:S,inputMode:"text"},W=Qe({autoFocus:F,addressType:r?"shipping":"billing",disabled:"loading"===l.status,...O,isShopPayUnauthenticatedUser:d,onInlineValidation:v===Ee.C.Phone?tt:t,contactInfoOption:v});return a.default.createElement(Je.o,(0,ye.A)({},v===Ee.C.Phone?V:W,{afterElement:W.afterElement}))}function tt(){}function nt(){me();const e=(0,E.W)();return a.default.createElement(U.K,null,a.default.createElement(H.wn,null,a.default.createElement(fe.D,{level:1},e("contact.contact_method_title","Contact")),a.default.createElement(he.S,null),a.default.createElement(et,null)),a.default.createElement(Q,{section:"summary"},a.default.createElement(H.wn,{hideDivider:!0},a.default.createElement(j.x,null))),a.default.createElement(ee,null))}function at(){const e=(0,c.ci)(),t=!!e&&c.Jg.includes(e),n=null==e||t;(0,m.M3)(n);const r=(0,d.c)(),{progress:l}=(0,p.T4)(),[o,i]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{t&&(r?.usable(),i(!0))}),[t,r,l]),(0,a.useEffect)((()=>{o&&l()}),[l,o]),n?null:e===u.k.LoginWithModal?a.default.createElement(nt,null):a.default.createElement(pe,null)}var rt=n(69358);const lt=(0,Ge.m)({load:()=>Promise.all([n.e(736),n.e(359),n.e(624)]).then(n.bind(n,89042)),id:()=>89042}),ot=(0,Ge.m)({load:()=>(0,Xe.P)((()=>Promise.all([n.e(359),n.e(994)]).then(n.bind(n,95606)))),id:()=>95606}),it=(0,Ge.m)({load:()=>(0,Xe.P)((()=>n.e(340).then(n.bind(n,90043)))),id:()=>90043}),st=(0,Ge.m)({load:()=>(0,Xe.P)((()=>n.e(463).then(n.bind(n,94392)))),id:()=>94392});var dt=n(50190),ct=n(33519),ut=n(94504),mt=n(18775),pt=n(55666),ft=n(59754),ht=n(85013),yt=n(41985),gt=n(99716),_t=n(53281);const Et="checkout-main";var bt=n(32148),vt=n(64106);function Ct(e){return 0===[e].flat(9).filter(Boolean).length}var St=n(19874),kt=n(13614);function wt({visibleTargets:e,children:t}){return a.default.createElement(kt.eb.Provider,{value:new Set(e)},t)}const Pt={Shell:"f1jux","Config-Footer-positionInline":"kZBua","Config-Footer-positionEnd":"uQAgm","Config-Main-inlineSizeFill":"pSFy6","Config-OrderSummary-inlineSizeFill":"IIykW","Config-Header-positionStart":"fc8Jc","Shell-variantOnePageCheckout":"mB_Id",MainContent:"ETRXz",MainContentPrimary:"jvQbN",Footer:"mZR1U","Shell-blockSizeSDK":"nQgiW","Shell-blockSizeAppLayout":"fKiXY","Shell-colorSchemeInherit":"WYAhd",Header:"JPw09",Main:"cLGHj","Header-colorSchemeInherit":"m5m6Z",HeaderContent:"k1Dlb","Header-containerContent":"jv8X_","Header-positionStart":"REIwn","Config-Header-positionInline":"o9LNI","Header-positionInline":"QX9Ag","Config-Header-positionInlineSecondary":"kdsYY","Header-positionInlineSecondary":"LbV5Y","Header-divided":"KVQTQ","Header-hasBackgroundImage":"EUxqK",BuyerJourney:"JWCkw",BuyerJourneyContent:"bEWHa","BuyerJourney-containerContent":"Rf5IC",Disclosure:"U6oc4",DisclosureButton:"b20QW",DisclosureDetails:"nn63l","Config-Shell-hasBackgroundImage":"GzYpQ","DisclosureDetails-colorSchemeInherit":"scpzv",DisclosureDetailsContentDivider:"JQebs",DisclosureButtonContent:"IfmSL",DisclosureDetailsContent:"uA_RC","DisclosureDetails-containerContent":"JiQeF","DisclosureButton-containerContent":"hlEEt",Content:"sooyq","Content-containerContent":"NKlJT","Main-colorSchemeInherit":"qVVgQ","Main-inlineSizeFill":"x0SAx",OrderSummary:"jCic4",OrderSummaryContent:"blA7b","OrderSummary-colorSchemeInherit":"wlXvI","OrderSummary-inlineSizeFill":"mgFus","Footer-colorSchemeInherit":"PSiog",FooterContent:"TfwLd","Footer-positionEnd":"zgRw8","Footer-containerContent":"jf9pp"},At={none:"0",small500:"var(--x-spacing-small-500)",small400:"var(--x-spacing-small-400)",small300:"var(--x-spacing-small-300)",small200:"var(--x-spacing-small-200)",small100:"var(--x-spacing-small-100)",base:"var(--x-spacing-base)",large100:"var(--x-spacing-large-100)",large200:"var(--x-spacing-large-200)",large300:"var(--x-spacing-large-300)",large400:"var(--x-spacing-large-400)",large500:"var(--x-spacing-large-500)"},It="disclosure_details";function xt({header:e,buyerJourney:t,disclosure:n,footer:r,main:l,orderSummary:o,blockSize:i,demo:s}){const d=(0,bt.kV)(),c=(0,vt.Bl)();return a.default.createElement("div",{className:_()(Pt.Shell,"fill"===d.main.inlineSize&&Pt["Config-Main-inlineSizeFill"],"fill"===d.orderSummary.inlineSize&&Pt["Config-OrderSummary-inlineSizeFill"],d.header.position&&Pt[(0,dt.N)("Config-Header-position",d.header.position)],d.shell.backgroundImage&&Pt["Config-Shell-hasBackgroundImage"],d.footer.position&&Pt[(0,dt.N)("Config-Footer-position",d.footer.position)],c&&Pt["Shell-variantOnePageCheckout"],s&&Pt.outlineDemo,"inherit"===d.shell.colorScheme&&Pt["Shell-colorSchemeInherit"],(0,ct.Fo)({colorLayer:"base",colorScheme:d.shell.colorScheme}),i&&Pt[(0,dt.N)("Shell-blockSize",i)]),style:{...Vt("shell",d.shell.padding),...Ot("shell",d.shell.spacing),...Wt("shell",d.shell.backgroundImage),...zt("main",d.main.inlineSize),...Vt("main",d.main.padding),...zt("order-summary",d.orderSummary.inlineSize),...Vt("order-summary",d.orderSummary.padding),...Wt("order-summary",d.orderSummary.backgroundImage),...zt("header",d.header.inlineSize),...Vt("header",d.header.padding),...Wt("header",d.header.banner?.image),...zt("footer",d.footer.inlineSize),...Vt("footer",d.footer.padding),...zt("buyer-journey",d.buyerJourney.inlineSize),...Vt("buyer-journey",d.buyerJourney.padding),...zt("disclosure",d.disclosure.inlineSize)}},a.default.createElement(Mt,{position:"start"},e,"header"===d.buyerJourney.position&&a.default.createElement(Tt,null,t)),a.default.createElement(Nt,{details:a.default.createElement(ut.zp,{style:d.orderSummary.section},o)},n),a.default.createElement(Lt,null,a.default.createElement(Dt,null,"inline"===d.header.position&&a.default.createElement(Mt,null,e,"header"===d.buyerJourney.position&&a.default.createElement(Tt,null,t)),"inline"===d.buyerJourney.position&&a.default.createElement(Tt,null,t),a.default.createElement(ut.zp,{style:d.main.section},a.default.createElement("main",{className:Pt.MainContentPrimary,id:Et},l)),"inline"===d.footer.position&&a.default.createElement(Bt,null,r)),a.default.createElement(Rt,null,"inlineSecondary"===d.header.position&&a.default.createElement(Mt,null,e,"header"===d.buyerJourney.position&&a.default.createElement(Tt,null,t)),a.default.createElement(ut.zp,{style:d.orderSummary.section},a.default.createElement("aside",{className:Pt.OrderSummaryContentPrimary},o)))),"end"===d.footer.position&&a.default.createElement(Bt,null,r))}function Mt({children:e,position:t}){const{header:{position:n="inline",container:r="fill",colorScheme:l="inherit",banner:o,divided:i=!0}={}}=(0,bt.kV)();if(Ct(e))return null;const s=t??n;return a.default.createElement("header",{role:"banner",className:_()(Pt.Header,Pt[(0,dt.N)("Header-position",s)],Pt[(0,dt.N)("Header-container",r)],i&&Pt["Header-divided"],o?.image&&Pt["Header-hasBackgroundImage"],"inherit"===l&&Pt["Header-colorSchemeInherit"],(0,ct.Fo)({colorLayer:"base",colorScheme:l}))},a.default.createElement("div",{className:Pt.HeaderContent},a.default.createElement(mt.y,null,a.default.createElement(Q,{section:"header"},a.default.createElement(St.yn,{section:"header"},e)))))}function Tt({children:e}){const{buyerJourney:{position:t="inline",container:n="fill",visibility:r}={}}=(0,bt.kV)();return Ct(e)||"hidden"===r?null:a.default.createElement("div",{className:_()(Pt.BuyerJourney,Pt[(0,dt.N)("BuyerJourney-position",t)],Pt[(0,dt.N)("BuyerJourney-container",n)])},a.default.createElement("div",{className:Pt.BuyerJourneyContent},e))}function Nt({children:e,details:t}){const{disclosure:{container:n="fill"}={},orderSummary:{backgroundImage:r,colorScheme:l}={}}=(0,bt.kV)(),o=(0,pt.M)(),i=(0,vt.Bl)(),{key:s}=(0,ge.m)(),d=(0,E.W)(),[c,u]=(0,a.useState)(!1);if((0,a.useEffect)((()=>{u(!1)}),[s]),Ct(e))return null;const m=r?{backgroundImage:`url(${JSON.stringify(r)})`}:void 0,p=c?d("order_summary.collapse_order_summary","Hide order summary"):d("order_summary.expand_order_summary","Show order summary"),f=a.default.createElement("span",null,p,a.default.createElement(ft.c,{spacing:"small200"}),a.default.createElement(Le.In,{source:c?"chevronUp":"chevronDown",size:"extraSmall",display:"inline",appearance:"monochrome"})),h=i?f:a.default.createElement(ht.o,{spacing:"small200",blockAlignment:"center"},a.default.createElement(Le.In,{source:"cart",appearance:"monochrome"}),f);return a.default.createElement("div",{className:Pt.Disclosure},a.default.createElement("button",{className:_()(Pt.DisclosureButton,Pt[(0,dt.N)("DisclosureButton-container",n)]),onClick:()=>{u(!c)},"aria-pressed":c,"aria-controls":It,"aria-expanded":c,tabIndex:o?-1:void 0},a.default.createElement("span",{className:Pt.DisclosureButtonContent},h,a.default.createElement("span",null,e))),t&&a.default.createElement(yt.e,{open:c,id:It},a.default.createElement("div",{className:_()(Pt.DisclosureDetails,Pt[(0,dt.N)("DisclosureDetails-container",n)],"inherit"===l&&Pt["DisclosureDetails-colorSchemeInherit"],(0,ct.Fo)({colorLayer:"base",colorScheme:l})),style:m},a.default.createElement("div",{className:Pt.DisclosureDetailsContent},a.default.createElement("div",{className:Pt.DisclosureDetailsContentDivider}),a.default.createElement(mt.y,null,a.default.createElement(qt,{condition:i},t))))))}function Lt({children:e}){const{content:{container:t="fill"}={}}=(0,bt.kV)();return Ct(e)?null:a.default.createElement("div",{className:_()(Pt.Content,Pt[(0,dt.N)("Content-container",t)])},e)}function Dt({children:e}){const{main:{colorScheme:t="inherit",inlineSize:n,backgroundImage:r}={}}=(0,bt.kV)(),{parent:l}=(0,gt.U)(),o=(0,a.useMemo)((()=>"inherit"===t?l:t),[t,l]),i=(0,a.useMemo)((()=>({parent:o})),[o]);if(Ct(e))return null;const s=r?{backgroundImage:`url(${JSON.stringify(r)})`}:void 0;return a.default.createElement("div",{className:_()(Pt.Main,"fill"===n&&Pt["Main-inlineSizeFill"],"inherit"===t&&Pt["Main-colorSchemeInherit"],(0,ct.Fo)({colorLayer:"base",colorScheme:t})),style:s},a.default.createElement("div",{className:Pt.MainContent},a.default.createElement(gt.i.Provider,{value:i},a.default.createElement(mt.y,null,e))))}function Rt({children:e}){const t=(0,E.W)(),{orderSummary:{colorScheme:n="scheme2",inlineSize:r,backgroundImage:l}={}}=(0,bt.kV)(),{parent:o}=(0,gt.U)(),i=(0,a.useMemo)((()=>"inherit"===n?o:n),[n,o]),s=(0,a.useMemo)((()=>({parent:i})),[i]);if(Ct(e))return null;const d=l?{backgroundImage:`url(${JSON.stringify(l)})`}:void 0;return a.default.createElement("div",{className:_()(Pt.OrderSummary,"fill"===r&&Pt["OrderSummary-inlineSizeFill"],"inherit"===n&&Pt["OrderSummary-colorSchemeInherit"],(0,ct.Fo)({colorLayer:"base",colorScheme:n})),style:d},a.default.createElement("div",{className:Pt.OrderSummaryContent},a.default.createElement(gt.i.Provider,{value:s},a.default.createElement(mt.y,null,a.default.createElement("div",{className:(0,ct.Fo)({screenReaders:"only"})},a.default.createElement(fe.D,null,t("order_summary.title","Order summary"))),a.default.createElement(mt.y,null,e)))))}function Bt({children:e}){const{footer:{position:t="inline",container:n="fill",colorScheme:r="inherit"}={}}=(0,bt.kV)();return Ct(e)?null:a.default.createElement("footer",{role:"contentinfo",className:_()(Pt.Footer,Pt[(0,dt.N)("Footer-position",t)],Pt[(0,dt.N)("Footer-container",n)],"inherit"===r&&Pt["Footer-colorSchemeInherit"],(0,ct.Fo)({colorLayer:"base",colorScheme:r}))},a.default.createElement("div",{className:Pt.FooterContent},a.default.createElement(mt.y,null,a.default.createElement(St.yn,{section:"footer"},e))))}function Ft(e){return t=>t?e[t]:void 0}function zt(e,t){return isNaN(Number(t))||0===Number(t)?"main"!==e&&"order-summary"!==e&&"fill"===t?{[`--config-${e}-inline-size`]:"100%"}:void 0:{[`--config-${e}-inline-size`]:(0,_t.D0)(Number(t))}}function Vt(e,t){return t&&{[`--config-${e}-padding`]:Ft(At)(t)}}function Ot(e,t){return t&&{[`--config-${e}-spacing`]:Ft(At)(t)}}function Wt(e,t){return t&&{[`--config-${e}-background-image`]:`url(${JSON.stringify(t)})`}}function qt({condition:e,children:t}){return e?a.default.createElement(wt,{visibleTargets:["purchase.checkout.cart-line-item.render-after"]},t):a.default.createElement(a.default.Fragment,null,t)}var $t=n(38743),Ut=n(87455),Ht=n(73896),jt=n(23708),Yt=(n(44114),n(91287)),Gt=n(52110),Xt=n(42064),Zt=n(38530),Qt=n(83101),Jt=n(32877),Kt=n(58482),en=n(38482),tn=n(77447),nn=n(99377),an=n(36675),rn=n(23743),ln=n(9520),on=n(2640),sn=n(89557),dn=n(86766),cn=n(90089),un=n(77745);function mn(e,t){return t.some((t=>e.includes(t)))}function pn({options:e,selected:t,select:n}){const r=(0,E.W)(),l=(0,Re.P)("simulated"),{value:o,loading:i}=(0,I.FC)(),s=(0,dn.Me)(o,Yt.z.OneTimePurchase),d=(0,vt.Bl)(),c=(0,I.Dr)()?.value?.lines,u=!(void 0!==(0,dn.jl)(c,sn.R.ApplePay))&&"available"===s?.status&&!i&&s?.hasDeliveryLineChange;return a.default.createElement(a.default.Fragment,null,u?a.default.createElement(an.l,{status:"critical",title:r("shipping_errors.shipping_method","The shipping options have changed for your order. Review your selection and try again.")}):null,l&&e.map((e=>a.default.createElement(un.X,{sectionId:`deliveryMethods-${e.id}`,key:e.id}))),a.default.createElement(cn.Wd,{id:"delivery_strategies",title:r("general.choose_delivery_strategy","Choose a delivery method"),titleHidden:!0,selectedItems:t,onChange:n},e.map((e=>a.default.createElement(cn.wC,{id:e.id,key:e.id,label:e.label},d?a.default.createElement(a.default.Fragment,null,a.default.createElement(rn.C,{columns:["1fr","auto"]},a.default.createElement(ln.V,null,e.label),a.default.createElement(Le.In,{source:e.icon,appearance:mn(t,e.value)?"accent":void 0}))):a.default.createElement(ht.o,{blockAlignment:"center"},a.default.createElement(Le.In,{source:e.icon}),a.default.createElement(on.xV,null,a.default.createElement(ln.V,null,e.label))))))))}const fn=(e,t)=>{const n=(0,a.useRef)(),r=(0,re.g)(),l=(0,C.Fo)(),{id:o}=(0,P.q)(),i=(0,Ut.o)(),s=(0,I.rZ)(),d=(0,_e.h)(),c=e||d?.selectedDeliveryMethodHandle,u=t||d?.methods;(0,a.useEffect)((()=>{const{locationId:e,selectedLocationRank:t}=((e,t)=>{const n=t=>t.handle===e,a=t?.findIndex(n),r=t?.find(n)?.originLocation?.id;return{locationId:r,selectedLocationRank:a}})(c,u);e&&c!==n.current&&(n.current=c,r.record({schemaId:"local_pickup_checkout/3.1",payload:{eventType:"checkout_pickup_location_selected",checkoutToken:l.checkoutSessionIdentifier||"",shopId:parseInt((0,$t.ee)(o),10),locationId:(0,$t.ee)(e),selectedLocationRank:t,userId:s?.id?parseInt((0,$t.ee)(s.id),10):void 0,numberLocationsFound:u?.length||0,checkoutSurface:i?"shop_pay":"guest_checkout"}}))}),[s?.id,i,u,r,c,l.checkoutSessionIdentifier,o])},hn=()=>{const e=(0,re.g)(),t=(0,C.Fo)(),{id:n}=(0,P.q)(),r=(0,I.rZ)(),{negotiating:l,method:o}=(0,Qt.iz)(),i=(0,_e.h)(),s=(0,Ut.o)();(0,a.useEffect)((()=>{l||o!==Gt.y.PickUp||e.record({schemaId:"local_pickup_checkout/3.1",payload:{checkoutToken:t.checkoutSessionIdentifier||"",eventType:"checkout_pickup_tab_selected",shopId:parseInt((0,$t.ee)(n),10),numberLocationsFound:i?.methods.length,userId:r?.id?parseInt((0,$t.ee)(r.id),10):void 0,checkoutSurface:s?"shop_pay":"guest_checkout"}})}),[r?.id,s,i?.methods.length,o,e,l,t.checkoutSessionIdentifier,n])};function yn(){return hn(),fn(),null}var gn=n(81948);let _n=function(e){return e.Truck="truck",e.Store="store",e.Marker="marker",e}({});const En=(0,Ht.MN)(!1),bn=(0,Ht.MN)(0),vn=(0,Ht.MN)(0);function Cn({children:e}){const t=(0,o.QN)(),n=(0,a.useContext)(Jt.G)?.dispatch,{negotiate:r}=(0,p.T4)(),{loading:l}=(0,jt.c$)(),i=(0,E.W)(),{enabledDeliveryMethods:s,sameBillingAndShippingAddress:d}=(0,P.q)(),c=(0,_e.p8)(),{correctShippingAddress:u}=function(){const[,e]=(0,o.fp)((0,ve.C)().shippingAddress),t=(0,gn.FI)().isRequired("phone"),n=(0,o.QN)(),r=(0,Ut.o)(),l=(0,a.useCallback)((()=>{const a=n.read(xe.D.selectedShippingAddress).value;if(!a?.address)return;const r=n.read(xe.D.phoneNumber).value;e({...a?.address,phone:t&&!a?.address.phone?r:a?.address.phone})}),[t,e,n]);return{correctShippingAddress:(0,a.useCallback)((e=>{r&&e.includes(Gt.y.Shipping)&&l()}),[l,r])}}(),{clearBillingAddress:m}=(0,tn.rr)(),f=(0,Ut.o)(),{setProposedPickupPoint:h}=(0,nn.H)(),{pickupPoint:y,billingAddressOption:g}=(0,ve.C)(),_=(0,Kt.x1)(),b=(0,Zt.dV)(),{value:v}=(0,I.FC)(),[C,S]=(0,o.fp)(En),[,k]=(0,o.fp)(g),[w]=(0,Zt.lr)(Yt.z.OneTimePurchase),[A,x]=(0,Zt.tF)(),M=(0,Zt.d0)(),T=_||b?A:w,N=(0,a.useMemo)((()=>{const e=T.filter((e=>e!==Gt.y.Local));return!e.includes(Gt.y.Shipping)&&T.includes(Gt.y.Local)&&e.push(Gt.y.Shipping),e}),[T]),L=(0,a.useCallback)((e=>{const a=N.includes(Gt.y.Shipping);f||a||!e.includes(Gt.y.Shipping)||(m(),k(d?"shipping":"custom")),e.includes(Gt.y.PickupPoint)&&(k("custom"),h({pickupPoint:t.read(y).value})),u(e),x(e),M(void 0),S(!0),n?.("deliveryMethodChanged"),r(void 0,{include:["deliveryLines","merchandiseLines"],onComplete:e=>{const n=t.read(l).value.has("deliveryNext");if("stale"===e.status&&n){const e=t.subscribe(l,(({value:t})=>{t.has("deliveryNext")||(S(!1),e())}))}else S(!1)}})}),[N,f,u,x,M,S,n,r,m,k,d,h,t,y,l]),D=s.includes(Gt.y.Local),R=(0,_e.Xe)(Xt.e.Delivery,en.W2.SelectedDeliveryStrategy),B=(()=>{const e=[];if(!s)return e;const t=s.includes(Gt.y.PickupPoint)&&!c;return s.includes(Gt.y.Shipping)&&e.push({id:Gt.y.Shipping,value:D?[Gt.y.Shipping,Gt.y.Local]:[Gt.y.Shipping],label:t?i("delivery_options.ship_to_address","Ship to address"):i("delivery_options.ship","Ship"),icon:_n.Truck}),s.includes(Gt.y.PickUp)&&e.push({id:Gt.y.PickUp,value:[Gt.y.PickUp],label:t?i("delivery_options.pick_up_from_store","Pick up from store"):i("delivery_options.pick_up","Pick up"),icon:_n.Store}),t&&e.push({id:Gt.y.PickupPoint,value:[Gt.y.PickupPoint],label:i("delivery_options.pickup_point_method_definition","Ship to pickup point"),icon:_n.Marker}),R?e.filter((e=>N.includes(e.id))):e})();(0,a.useEffect)((()=>{const e=[];"filled"===v?.status&&v.lines.forEach((t=>{if("available"===t.status){const n=t.methods.map((e=>e.methodType));e.push(...n)}}));const t=new Set(e);if(B.length>=1&&"filled"!==v?.status||"filled"===v?.status&&!N.every((e=>t.has(e)))){const e=B.find((e=>JSON.stringify(e.value)===JSON.stringify(N)));L(e?e?.value:B[0].value)}}),[]);const F=B.length>1&&a.default.createElement(pn,{options:B,selected:N,select:e=>{const t=B.find((t=>t.id===e[0]));t&&L(t.value)}}),z=(0,a.useMemo)((()=>({negotiating:C,method:N[0]})),[C,N]);return a.default.createElement(Qt.ie.Provider,{value:z},a.default.createElement(yn,null),a.default.createElement(Qt.o5.Provider,{value:F||void 0},e))}var Sn=n(66242),kn=n(80125),wn=n(90984),Pn=n(74051),An=n(27767),In=n(20484),xn=n(39979),Mn=n(63667);const Tn=["phone","company","firstName","lastName"];function Nn(e,t,n){const a=new Map;for(const[r,l]of t)if("coordinates"!==r&&"name"!==r&&e.includes(r)){if(Tn.includes(r)&&(!n[r]||0===n[r]?.length))continue;a.set(r,l)}return a}const Ln=e=>{const t=new Map;for(const[n,a]of Object.entries(wn.kx)){const r=e.read(a).value;(0,wn.ux)(r)&&"error"===r.type&&t.set(n,r.textValue)}return t},Dn={initial:{addressInvalid:"empty",addressComplete:"loading",addressReplaced:"loading",countryChanged:"resetting"},empty:{addressComplete:"loading",addressReplaced:"loading",countryChanged:"resetting"},resetting:{reset:"initial"},loading:{addressComplete:"loading",addressInvalid:"empty",negotiationResolved:"negotiated",countryChanged:"resetting",addressReplaced:"loading"},negotiated:{addressComplete:"loading",addressInvalid:"loading",addressReplaced:"loading",countryChanged:"resetting",addressReset:"resetting",deliveryMethodChanged:"initial"}};class Rn extends Error{constructor(...e){super(...e),this.name="ShippingMethodTimeoutError"}}function Bn({children:e}){const t=(0,o.QN)(),{current:n}=(0,jt.c$)(),[r,l]=(0,o.fp)(bn),[i,s]=(0,o.fp)(vn),d=(0,Kt.V_)(),c=(0,a.useMemo)((()=>{const e=t.read(n.fields.deliveryNext).value;return a="filled"===e?.status?"negotiated":"initial",(0,Ht.Q4)(((e,t)=>{const n=Dn[e.status][t];if(n)return{status:n}}),{status:a});var a}),[n.fields.deliveryNext,t]),u=(0,a.useCallback)((e=>{t.write(c,e)}),[c,t]);!function(e,t){const n=(0,o.QN)(),{parts:r}=(0,jt.c$)(),{shippingAddress:l}=r,{shippingCountries:i}=(0,Pn.UR)(),s=(0,Ut.o)(),d=(0,xn.f)(),c=s?d:void 0,u=(0,o.md)(l.fields.countryCode),m=(0,kn.Z7)(u,i,c),{loading:f}=(0,Pn.S0)(u),{negotiate:h}=(0,p.T4)(),{setAddressError:y}=(0,kn.qo)(wn.kx),g=(0,a.useMemo)((()=>(0,wn.ec)()),[]),{resetAddressSuggestions:_}=(0,kn.qU)(g,wn.kx),{activeWalletSessionAtom:E}=(0,In.b)(),b=function(e){const t=(0,o.DD)(),n=(0,o.QN)();return(0,o.ab)(e,(({action:e})=>{n.write(t,e)})),t}(e),v=(0,Kt.ju)(),C=(0,a.useMemo)((()=>(0,Ht.MN)((e=>{const t=v({countryCode:e(l.fields.countryCode),zoneCode:e(l.fields.zoneCode)});return(0,Mn.vN)(t)}))),[v,l.fields.countryCode,l.fields.zoneCode]),S=(0,a.useRef)();(0,a.useEffect)((()=>{f||(S.current?.(),S.current=void 0)}),[f]);const k=(0,An.YQ)((()=>{const e=n.read(l).value;if(f)return void(S.current=()=>k());const a=m(e),r=Nn(n.read(C).value,a,e);"addressReplaced"!==n.read(b).value&&(0===r.size?t("addressComplete"):t("addressInvalid"))}),150);(0,Kt.Ki)(l,(()=>{t("countryChanged"),n.write(l.fields.postalCode,void 0),n.write(l.fields.zoneCode,void 0),n.write(l.fields.city,void 0),n.write(l.fields.address1,void 0),n.write(l.fields.address2,void 0),t("reset")}));const w=(0,a.useMemo)((()=>(0,Ht.MN)((e=>e(C).filter((e=>"countryCode"!==e)).map((t=>{const n=e(l.fields[t]);if(n)return"postalCode"===t?n.replace(/[^a-z0-9]/gi,"").toLowerCase():n.toLowerCase()})).join("_")))),[l.fields,C]);(0,a.useEffect)((()=>{const t=n.read(e).value.status;return"initial"!==t&&"empty"!==t||k(),n.subscribe(w,(()=>{n.read(E).value||"addressReplaced"===n.read(b).value||"resetting"===n.read(e).value.status||k()}))}),[E,k,e,b,l,n,w]),(0,o.ab)(e,(({prevState:a,action:r,nextState:o})=>{if("initial"===o.status&&k(),"reset"===r){const e=n.read(l).value;for(const t of Object.keys(e))"phone"!==t&&y(t,void 0);_()}const i=n.read(e).revision;("addressComplete"===r||"addressInvalid"===r&&"negotiated"===a.status||"reset"===r||"addressReplaced"===r)&&h(void 0,{include:["shippingAddress"],silenceValidations:!0,fieldsToResolve:["deliveryNext"],onComplete(a){if(i===n.read(e).revision)if("stale"!==a.status&&"invalid"!==a.status){if("reset"!==r&&a&&("success"===a.status||"error"===a.status)&&"violations"in a){const e="filled"===a.negotiated.deliveryNext?.status;if("addressReplaced"!==r){const a=Ln(n);if(Nn(n.read(C).value,a,n.read(l).value).size>0)return t(e?"negotiationResolved":"addressInvalid")}const o=(0,wn.oD)("shipping_address",a.violations),i="addressReplaced"===r?o:Nn(n.read(C).value,o,n.read(l).value);for(const[t,a]of i)void 0===n.read(wn.kx[t])?.value&&y(t,a);e||0===i.size?t("negotiationResolved"):t("addressInvalid")}}else t("negotiationResolved")}})}))}(c,u);const m=(0,a.useMemo)((()=>(0,Ht.MN)((e=>{const t=e(c).status;if("negotiated"===t){const t=e(n.fields.deliveryNext);return t?"unavailable"===t.status||"filled"===t.status&&!t.lines.some(Mn.t9)?{status:"error"}:{status:"filled",deliveryLines:t.lines}:{status:"empty"}}return"resetting"===t?{status:"empty"}:{status:t}}))),[c,n.fields.deliveryNext]);(0,Kt.lX)(m);const f=(0,Sn.W)(),h=(0,a.useRef)();(0,a.useEffect)((()=>()=>{h.current&&clearTimeout(h.current)}),[]),(0,o.GI)(m,(e=>{if(h.current&&(clearTimeout(h.current),h.current=void 0),"loading"===e.status&&(h.current=setTimeout((()=>{f.notify(new Rn)}),3e4),0===r&&l(Date.now())),"filled"===e.status){const t=e.deliveryLines;if("available"===t[0]?.status){const e=t[0].methods[0]?.deliveryPromiseProviderApiClientId;if(e&&r>0){const t=(0,$t.ee)(e),n=Date.now()-r;d(n,Number(t)),0===i&&s(n)}}}"error"!==e.status&&"filled"!==e.status||l(0)}));const y=(0,a.useMemo)((()=>({uiStateAtom:m,dispatch:u})),[u,m]);return a.default.createElement(Jt.G.Provider,{value:y},e)}var Fn=n(16787);const zn=["GooglePay","PayPal","Venmo","FacebookPay"];function Vn({id:e}){return(0,Fn._E)({id:e,stage:({pendingComponents:e})=>zn.some((t=>e.has(t)))?ae.B.Usable:ae.B.Complete}),null}const On={SkipToContentLink:"Xo_dq"};function Wn(){const e=(0,E.W)();return a.default.createElement("a",{href:`#${Et}`,className:On.SkipToContentLink},e("general.skip_to_content","Skip to content"))}var qn=n(16676),$n=n(85630);function Un(){const{value:e}=(0,I.u_)(),t=(0,E.W)(),n=(0,$n.a)(),r=e?t("order_summary.total_updated_label_with_price",{totalPrice:n(e.amount,{currency:e?.currencyCode,form:"explicit"})},"Updated total price: %{totalPrice}"):null;return(0,a.useEffect)((()=>{if(r)return(0,qn.u)({content:r})}),[r]),null}var Hn=n(84506),jn=n(18012);function Yn(){const e=(0,I.XP)(),t=(0,_e.$v)(),n=(0,$n.a)();if(!t||!e)return null;const r=n(t.amount,{currency:t.currencyCode,form:"short"}),l=Boolean(e?.value&&t.amount<e.value.amount);return a.default.createElement(Gn,{condition:Boolean(l&&e.value)},a.default.createElement(Hn.a,{spacing:"none",inlineAlignment:"end"},l&&e.value?a.default.createElement(jn.E,{size:"small",appearance:"subdued",accessibilityRole:"deletion",translate:!1},n(e.value.amount,{currency:e.value.currencyCode,form:"short"})):null,t?a.default.createElement(ln.V,{appearance:"base",emphasis:"bold",size:"large",translate:!1},r):null))}function Gn({condition:e,children:t}){return e?a.default.createElement("div",{style:{margin:"-0.675em 0"}},t):a.default.createElement(a.default.Fragment,null,t)}var Xn=n(13130),Zn=n(50256),Qn=n(52322),Jn=n(52818),Kn=n(59208),ea=n(27376),ta=n(13788),na=n(49577),aa=n(57125),ra=n(60118);function la(){const e=(0,ta.D)(),t=(0,ke.j9)(),n=(0,l.r)(),{recordImmediately:r}=(0,oe.v)(),o=(0,X.y7)(),i=(0,E.W)(),s=(0,Re.P)("simulated"),d=(0,St.uL)(),{header:{cartLink:{contentType:c="icon",image:u}={}}}=(0,bt.kV)(),m=(0,ea.x)(),p=n.currentUrl.normalizedPath===t.shopPayLogin(),f=(0,ra.VH)({shopPay:()=>{s||r({schemaId:p?"shopify_pay_login_page_ui_interaction/1.2":"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:p?"back_to_referrer":"return_to_cart"}})}})??(()=>{o("click",{element:{tagName:"a",textContent:h},section:"header",timestamp:new Date,transmitImmediately:!0})}),h=i("general.cart","Cart");let y;if("text"===c)y=h;else if("image"===c&&u){const t=Number(e.configuration.typographyScale.base)||(0,_t.ir)(na.L.fontSize.base),n=aa.ak*t;y=a.default.createElement("img",{src:u,alt:h,height:n,className:_()((0,ct.Fo)({display:"block"}))})}else y=a.default.createElement(Le.In,{source:"bag",appearance:"monochrome",size:"large"});return a.default.createElement("span",{ref:d("cart")},a.default.createElement(J.N,{to:m,id:"cart-link",onPress:f,accessibilityLabel:"icon"===c?h:void 0},y))}function oa(){const e=(0,P.q)(),{currentUrl:t}=(0,l.r)(),{header:{alignment:n="start",logo:{visibility:r,maxWidth:o}={}}}=(0,bt.kV)(),i=(0,E.W)(),s=(0,ea.T)(),d=(0,kt.w9)("purchase.checkout.header.render-after"),c=(0,kt.w9)("purchase.thank-you.header.render-after"),u=d.length>0||c.length>0,m="hidden"!==r||(0,ie.Mx)(t.search),p=a.default.createElement(fe.D,{level:1},m?a.default.createElement(Jn.b,{width:o}):a.default.createElement(jn.E,{visibility:"hidden"},e.name)," ",a.default.createElement(jn.E,{visibility:"hidden"},i("general.page_title","Checkout"))),f={start:{columns:s?["1fr","auto"]:["1fr"],markup:a.default.createElement(a.default.Fragment,null,p,s&&a.default.createElement(la,null))},center:{columns:s?["auto","1fr","auto"]:["1fr"],markup:a.default.createElement(a.default.Fragment,null,s&&a.default.createElement(la,null),a.default.createElement(h.S,{inlineAlignment:"center"},p),s&&a.default.createElement("div",{style:{visibility:"hidden"}},a.default.createElement(la,null)))},end:{columns:s?["auto","1fr"]:["1fr"],markup:a.default.createElement(a.default.Fragment,null,s&&a.default.createElement(la,null),a.default.createElement(h.S,{inlineAlignment:"end"},p))}};return a.default.createElement(a.default.Fragment,null,a.default.createElement(Hn.a,{spacing:"large100"},a.default.createElement(Qn.xA,{columns:f[n].columns,minInlineSize:"fill",blockAlignment:"center",spacing:"large500",accessibilityRole:"header"},f[n].markup),u&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Kn.N,{extensions:d,spacing:"base"}),a.default.createElement(Kn.N,{extensions:c,spacing:"base"}))))}var ia=n(3299);const sa=()=>{const{header:{logo:e}}=(0,bt.kV)(),t=(0,P.q)(),n=e?.image,r=a.default.createElement(fe.D,{level:1},t.name);return n?a.default.createElement(rn.C,{columns:[28,"fill"],spacing:"small200",blockAlignment:"center"},a.default.createElement(ia._,{source:n,accessibilityDescription:t.name}),r):a.default.createElement(a.default.Fragment,null,r)};var da=n(97100),ca=n(31533),ua=n(48371),ma=n(47359),pa=n(26464),fa=n(60293),ha=n(15271),ya=n(93922),ga=n(80266),_a=n(59876),Ea=n(24806),ba=n(10124),va=n(77799);const Ca="0";var Sa=n(62925);function ka({label:e}){const t=(0,St.uL)();return a.default.createElement(Sa.f,{id:Ca,ref:t("tipping_none")},a.default.createElement(h.S,{inlineAlignment:"center",blockAlignment:"center",minBlockSize:"fill"},a.default.createElement(ln.V,{emphasis:(0,vt.Bl)()?void 0:"bold"},e)))}var wa=n(74826);function Pa({tipOption:e}){const{amount:t,percentage:n}=e,r=(0,$n.a)(),l=(0,wa.s)().numberFormatter({style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),o=(0,St.uL)();return a.default.createElement(Sa.f,{id:t.amount.toString(),ref:o(`tipping_percent_${n}`)},a.default.createElement(h.S,{inlineAlignment:"center",blockAlignment:"center",minBlockSize:"fill"},a.default.createElement(ln.V,null,l.format(n)),a.default.createElement(ln.V,{size:"small",appearance:"subdued"},r(t.amount,{currency:t.currencyCode,form:"short"}))))}function Aa({tipOptions:e,onChange:t,proposedTip:n}){const r=(0,E.W)();return a.default.createElement("div",{style:(0,Ea.D)({[ba.f.toggleButtonGroup.blockPadding]:ba.f.spacing.small200})},a.default.createElement(va.W,{value:n?.amount?.amount?.toString()??Ca,onChange:t},a.default.createElement(ha.Y,{columns:e.map((()=>"fill")),spacing:"none"},e.map((e=>e.amount.amount>0?a.default.createElement(Pa,{key:e.amount.amount.toString(),tipOption:e}):a.default.createElement(ka,{key:"zero-amount",label:r("tips.no_tip_label","None")}))))))}function Ia(e,t){switch(t.type){case"NEGOTIATION_START":return{...e,loading:!0};case"INPUT":return{...e,customTip:t.payload,dirty:(n=t.payload,a=e.negotiatedTip,!(!a&&n.amount===Ca)&&parseFloat(n.amount)!==a?.amount.amount),error:void 0};case"NEGOTIATION_ERROR":return{...e,loading:!1,dirty:!1,...t.payload};case"NEGOTIATION_FINISH":return{...e,customTip:t.payload.customTip,loading:!1,dirty:!1,negotiatedTip:t.payload.negotiatedTip};case"CLEAR":return{...e,customTip:t.payload};default:return e}var n,a}function xa(e){if("success"===e.status||"error"===e.status)return e.negotiated.tipLines?.lines?.[0]}function Ma(e,t,n){return t&&e&&e.some((e=>e.amount.amount===t.amount.amount))||!t?"":n(t.amount.amount,{currency:t.amount.currencyCode,form:"plain"})}function Ta(e,t){return String(e)===Ca?[]:[{amount:{amount:Number(e),currencyCode:t}}]}function Na({currencyCode:e,tipOptions:t}){return`currency: ${e}, tipOptions: ${JSON.stringify(t)}`}const La="tipping_list_options",Da=[];function Ra(){return a.default.createElement(v.c_,null,a.default.createElement(Fa,null))}function Ba({amount:{amount:e}}){return e>0}function Fa(){const{name:e,showTipPayments:t}=(0,P.q)(),n=function(){const{currencyCode:e}=(0,P.q)(),{value:t}=(0,I.VS)(),{value:n}=(0,I.jO)();return t?.presentmentCurrency??n?.currencyCode??e}(),{symbol:r,prefixed:l}=(0,ua.f)(n),i=(0,E.W)(),{value:s=Da}=(0,I.zl)(),{state:d,negotiatedTip:c,proposedTip:u,onChange:m,onInput:h,onSubmit:y,clear:g}=function(e,t){(0,a.useDebugValue)({currencyCode:e,tipOptions:t},Na);const{value:n}=(0,I.kf)(),r=n?.lines?.[0],l=(0,$n.a)(),i=Ma(t,r,l),{tipLines:s}=(0,ve.C)(),[d,c]=(0,o.fp)(s),u=d?.[0],{negotiate:m}=(0,p.T4)(),f=(0,v.Hy)(),[h,y]=(0,a.useReducer)(Ia,{loading:!1,dirty:!1,negotiatedTip:r,customTip:{amount:i,currencyCode:e}}),g=(0,a.useCallback)((()=>{y({type:"CLEAR",payload:{amount:"",currencyCode:e}})}),[e]),_=(0,a.useCallback)((async e=>{const n=t?.find((({amount:t})=>t.amount===Number(e)));if(!n)return;const a=Ta(n.amount.amount,n.amount.currencyCode),r={amount:e,currencyCode:n.amount.currencyCode};c(a),await m(void 0,{onComplete:e=>{const t=xa(e);y({type:"NEGOTIATION_FINISH",payload:{customTip:r,negotiatedTip:t}}),g()}})}),[g,t,c,m]),E=(0,a.useCallback)((async()=>{y({type:"NEGOTIATION_START"});const n=Ta(h.customTip.amount,e);c(n),await m(void 0,{onComplete:n=>{const a=function(e){return"success"===e.status||"error"===e.status?e.violations.find((e=>"ConfirmChangeViolation"===e.__typename))?.localizedMessage??null:null}(n),r={amount:Ma(t,xa(n),l),currencyCode:e},o=xa(n),i=a?{type:"NEGOTIATION_ERROR",payload:{customTip:r,error:a}}:{type:"NEGOTIATION_FINISH",payload:{customTip:r,negotiatedTip:o}};a&&f(),y(i)}})}),[l,f,m,t,e,h.customTip.amount,c]),b=(0,a.useCallback)((t=>{y({type:"INPUT",payload:{amount:"undefined"===t?Ca:t,currencyCode:e}})}),[e]),C=(0,a.useCallback)((async()=>{c([]),await m(void 0,{onComplete:g})}),[g,m,c]);return(0,a.useEffect)((()=>{""===i&&y({type:"CLEAR",payload:{amount:"",currencyCode:e}})}),[i,e]),{state:h,negotiatedTip:r,proposedTip:u,onChange:_,onInput:b,onSubmit:E,clear:C}}(n,s),b=c??u,C=b&&b.amount.amount>0,{loading:S,dirty:k,customTip:w,error:A}=d,[x,M]=(0,a.useState)(t||C?[La]:[]),T=l?{prefix:r}:{suffix:r},N=(0,f.t)({base:!0,small:!1}),{textField:{errorTypographyStyle:L}}=(0,ta.x)(),D="TipsInput",R=(0,a.useCallback)((e=>{M(e),0===e.length&&g()}),[g]),B=(0,St.uL)();return a.default.createElement(ma.m,{controlHidden:t,allowMultiple:!0,id:"tipping_list",selectedItems:x,onChange:R},a.default.createElement(on.c$,{id:La,label:i("tips.description",{shop_name:e},"Show your support for the team at %{shop_name}"),details:a.default.createElement(pa.g,{controlledBy:La},a.default.createElement(Hn.a,null,(F=s,Boolean(F?.some(Ba))&&a.default.createElement(Aa,{tipOptions:s,onChange:m,proposedTip:u})),a.default.createElement(fa.l,{onSubmit:y},a.default.createElement(ha.Y,{columns:N?[]:["fill","auto"]},a.default.createElement(ya.C,(0,ye.A)({label:i("tips.custom_label","Custom tip"),onInput:e=>h(String(e)),value:parseFloat(w.amount)||void 0},T,{id:D,error:Boolean(A),name:"tipping_custom"})),a.default.createElement(He.$,{accessibilityRole:"submit",loading:S,disabled:!k,ref:B("tipping_custom_submit")},c&&c.amount.amount>0?i("tips.update_tip","Update tip"):i("tips.add_tip","Add tip"))),A&&a.default.createElement("span",{className:_()(L&&ga.A[L])},a.default.createElement(_a.W,{controlID:D},A))),a.default.createElement(jn.E,null,i("tips.message","Thank you, we appreciate it."))))}));var F}var za=n(30698),Va=n(25387),Oa=n(40381),Wa=n(98913),qa=n(96241),$a=n(99399),Ua=n(35247),Ha=n(47969),ja=n(3185);function Ya({quantity:e,previousQuantity:t}){const n=(0,E.W)(),{lineItems:{titleTypographyStyle:r,optionsTypographyStyle:l,optionsAppearance:o="subdued",optionsEmphasis:i}}=(0,ta.x)(),s={size:"small",appearance:"base"===o?void 0:o,emphasis:"base"===i?void 0:i,style:l};return a.default.createElement(Hn.a,{spacing:"none",inlineAlignment:"end"},a.default.createElement(jn.E,(0,ye.A)({},s,{appearance:"subdued",accessibilityRole:"deletion"}),n("stock.item_label",{count:t},{one:"{{count}} item",other:"{{count}} items"})),a.default.createElement(jn.E,{style:r},n("stock.item_label",{count:e},{one:"{{count}} item",other:"{{count}} items"})))}var Ga=n(96552);const Xa={OutOfStockLabel:"wzGo2"};function Za({merchandiseIssueType:e}){const t=(0,E.W)();return a.default.createElement(rn.C,{columns:"auto",spacing:"extraTight",blockAlignment:"center"},a.default.createElement(Le.In,{size:"small",source:"disabled",appearance:"critical",display:"inline"})," ",a.default.createElement(jn.E,{emphasis:"bold",size:"small",appearance:"critical"},a.default.createElement("span",{className:Xa.OutOfStockLabel},(()=>{switch(e){case Ga.P.Unavailable:return t("contextual_availability.unavailable_label","Unavailable");case Ga.P.Unpurchasable:case Ga.P.UnpurchasableB2B:return t("stock.unpurchasable_product.status_column_header","Not available");case Ga.P.Unshippable:return t("stock.unpurchasable_product_generic.status_column_header","Not available");default:return t("stock.sold_out_label","Sold out")}})())))}function Qa({price:e,previousPrice:t}){const n=(0,$n.a)();return a.default.createElement(Hn.a,{spacing:"none",inlineAlignment:"end"},t&&a.default.createElement(jn.E,{size:"small",appearance:"subdued",accessibilityRole:"deletion",translate:!1},n(t.amount,{currency:t.currencyCode})),e&&a.default.createElement(jn.E,{translate:!1},n(e.amount,{currency:e.currencyCode})))}function Ja(e){const{line:t,problem:n}=e,{image:r,title:l}=e.line;return a.default.createElement(qa.K,e,a.default.createElement(qa.Z,null,a.default.createElement($a.s,{source:r?y.OF.default(r.one).when({resolution:1},r.one).when({resolution:2},r.two).when({resolution:4},r.four):void 0,accessibilityLabel:l})),a.default.createElement(qa.Z,{primary:!0},a.default.createElement(ja.I,{id:null,deferredAmount:t.deferredAmount,options:t.options,properties:t.properties,quantity:t.quantity,recurringTotal:t.recurringTotal,sellingPlan:t.sellingPlan,subtitle:t.subtitle,title:l,totalPrice:t.totalPrice})),a.default.createElement(qa.Z,null,a.default.createElement(Ka,{problem:n})))}function Ka(e){const{problem:t}=e;return function(e){return e.type===Ga.P.PriceChange}(t)?a.default.createElement(Qa,{price:t.negotiatedPrice,previousPrice:t.proposedPrice}):function(e){return e.type===Ga.P.QuantityChange}(t)?a.default.createElement(Ya,{quantity:t.negotiatedQuantity??0,previousQuantity:t.proposedQuantity??0}):a.default.createElement(Za,{merchandiseIssueType:t.type})}function er(e){return a.default.createElement(qa.K,e,a.default.createElement(qa.Z,null,a.default.createElement(Ua.D,{inlineSize:64,blockSize:64})),a.default.createElement(qa.Z,{primary:!0},a.default.createElement(Ha.r,{inlineSize:"base"})),a.default.createElement(qa.Z,{inlineAlignment:"center"},a.default.createElement(Ha.r,{inlineSize:"small"})))}function tr(e){const{stockProblemsLineItems:{border:t,borderStyle:n,spacing:r,itemDivider:l,itemSpacing:o,inlinePadding:i,blockPadding:s}}=(0,ta.x)(),d={divider:l,spacing:o,inlinePadding:i,blockPadding:s};return a.default.createElement(Wa.jF,{border:t,borderStyle:n,spacing:r},e.lineItems.map((({line:t,problem:n})=>e.loading?a.default.createElement(er,(0,ye.A)({key:t.stableId},d)):a.default.createElement(Ja,(0,ye.A)({},d,{key:`${n.type}-${t.stableId}`,problem:n,line:t})))))}var nr=n(71949);const ar=(0,nr.R)("FeatureComponents");function rr(){return(0,nr.i)(ar)}var lr=n(81772),or=n(69516);function ir(e){return/[0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\uff10-\uff19]/.test(e)}var sr=n(54493),dr=n(90319),cr=n(66630),ur=n(75784),mr=n(50172);const pr="c2zzy10",fr=({suggestion:e,field:t,onClick:n,countryOptions:r,withConcernMessage:l=!1})=>{const o=(0,E.W)();let i;if("zoneCode"===t)i=`${e.address.zone}`;else if("countryCode"===t){const t=r.find((t=>t.value===e.address.countryCode));t&&(i=`${t.label}`)}else i=`${e.address[t]}`;return i?a.default.createElement(a.default.Fragment,null,l&&`${e.message}. `,o("field_errors.address_suggestion_did_you_mean_html",{html:a.default.createElement("button",{"aria-label":o("field_errors.address_suggestion_did_you_mean_html",{html:i},"Did you mean %{html}?"),className:pr,onClick:n},i)},{options:{noWrapElementReplacements:!0}},"Did you mean %{html}?")):a.default.createElement(a.default.Fragment,null,e.message)},hr={WarningIconWrapper:"TkcBT"};function yr({address:e,addressErrors:t,addressSuggestions:n,suggestion:r,field:l,addressType:i,validationId:s,availableCountries:d}){const c=(0,o.md)(e),u=function(e,t){const n=(0,o.QN)();return a=>{const{address1:r,address2:l,city:o,zoneCode:i,postalCode:s,countryCode:d}=t.fields,c=a[e]??"";switch(e){case"address1":n.write(r,c);break;case"address2":n.write(l,c);break;case"city":n.write(o,c);break;case"zoneCode":n.write(i,c);break;case"postalCode":n.write(s,c);break;case"countryCode":n.write(d,c)}}}(l,e),{resetAddressFieldSuggestions:m}=(0,kn.qU)(n,t),{resetAddressFieldErrors:p}=(0,kn.qo)(t),f=function(){const e=(0,re.g)(),t=(0,ur.QB)(),n=(0,C.Fo)(),{id:r}=(0,P.q)(),l=(0,b.Y)();return(0,a.useCallback)(((a,o,i,s,d)=>{if(e){const c=t?.value?.defaultAttributes?.uniqToken||"",u={schemaId:le.$D.AddressValidationSuggestionAcceptance,payload:{shopId:parseInt((0,$t.ee)(r),10),checkoutToken:n.checkoutSessionIdentifier||"",uniqueToken:c,locale:l,country:a,validationId:o,suggestionId:i,acceptedField:s,context:"shipping"===d?"Shipping address":"Billing address"}};e.record(u)}}),[l,e,n.checkoutSessionIdentifier,r,t?.value?.defaultAttributes?.uniqToken])}(),h=()=>{r.address&&(f(c.countryCode||"",s,r.id,l,i),u({...c,...r.address}),m(l),p(l))},y=r.type;return a.default.createElement(a.default.Fragment,null,"warning"===y?a.default.createElement(rn.C,{columns:["auto","fill"],spacing:"small300"},a.default.createElement("div",{className:hr.WarningIconWrapper},a.default.createElement(Le.In,{source:"info"})),a.default.createElement(jn.E,null,a.default.createElement(fr,{suggestion:r,field:l,onClick:h,countryOptions:d}))):a.default.createElement(fr,{suggestion:r,field:l,onClick:h,countryOptions:d,withConcernMessage:!0}))}const gr=e=>({origin:"validation-api",...e});function _r({fieldValidationResult:e,address:t,addressErrors:n,suggestions:r,state:l,addressType:o,availableCountries:i}){e.forEach(((e,s)=>{if("validation-api"===e.source)if(e.suggestion){const{id:d,suggestion:c,type:u}=e,m=a.default.createElement(yr,{validationId:d,address:t,addressErrors:n,addressSuggestions:r,suggestion:c,field:s,addressType:o,availableCountries:i});l.write(n[s],gr({value:m,type:u,textValue:"Invalid address"})),l.write(r[s],c)}else e.error&&("warning"===e.type?(l.write(n[s],gr({value:a.default.createElement(rn.C,{columns:["auto","fill"],spacing:"small300"},a.default.createElement(Le.In,{source:"info"}),a.default.createElement(jn.E,null,e.error)),type:"warning",textValue:"Invalid address"})),l.write(r[s],{type:"warning",message:e.error})):l.write(n[s],gr({type:"error",value:e.error,textValue:e.error})));else l.write(n[s],{message:e.error,origin:"client",type:"on-submit"})}))}class Er extends Error{constructor(...e){super(...e),this.name="AddressValidationError"}}function br(e){switch(e){case"address1":return"address1";case"address2":return"address2";case"country_code":case"countryCode":case"country":return"countryCode";case"zip":return"postalCode";case"province":case"province_code":case"provinceCode":return"zoneCode";case"city":return"city";case"phone":return"phone";default:throw new Er(`Unknown Address Component - ${e}`)}}function vr(e,t){switch(e){case"address_zip_invalid_for_country":return"shipping"===t?Pe.X.DeliveryInvalidPostalCodeForCountry:Pe.X.PaymentsInvalidPostalCodeForCountry;case"address_zip_blank":return"shipping"===t?Pe.X.DeliveryPostalCodeRequired:Pe.X.PaymentsPostalCodeRequired;case"address_zip_invalid_for_country_and_province":return"shipping"===t?Pe.X.DeliveryInvalidPostalCodeForZone:Pe.X.PaymentsInvalidPostalCodeForZone;case"address_zip_contains_emojis":return"shipping"===t?Pe.X.DeliveryPostalCodeContainsEmojis:Pe.X.PaymentsPostalCodeContainsEmojis}return"shipping"===t?"DELIVERY_POSTAL_CODE_BLANK":"PAYMENTS_POSTAL_CODE_BLANK"}class Cr extends Error{constructor(e){super("AddressValidationServiceError"),this.name="AddressValidationServiceError",this.errors=void 0;const t=["Not allowed"];this.errors=e.map((e=>e.message)).filter((e=>!t.includes(e)))}}var Sr=n(97184);class kr extends Error{constructor(...e){super(...e),this.name="ApiTimeoutError"}}const wr=["address1","zoneCode","countryCode","postalCode","city"];function Pr({countryCode:e,countries:t,addressSettings:n}){const r=function(){const e=(0,b.Y)(),t=(0,Sn.W)(),n=(0,a.useMemo)((()=>new Map),[]),{id:r}=(0,P.q)(),l=(0,C.Fo)(),{validation:o}=(0,Sr.E)();return(0,a.useCallback)((async({address1:a,address2:i,zoneCode:s,countryCode:d,postalCode:c,city:u,phone:m},p)=>{const f=((...e)=>e.join(""))(a,i,u,s,c,d,m,p);try{const t=n.get(f)||((e,t)=>{const n=new Promise(((e,n)=>{setTimeout((()=>{n(new kr(`Request took too long. Max timeout ${t} reached`))}),t)}));return Promise.race([e,n])})(o({address1:a,address2:i,countryCode:d,provinceCode:s,zip:c,city:u,phone:m},e,p,{shopId:(0,$t.ee)(r),sourceId:l.sourceId||""}),1e3);n.clear(),n.set(f,t);const h=await t;if(h instanceof Error)throw h;const y=h.errors||[];if(y.length>0)throw new Cr(y);return h.data}catch(h){return h instanceof Cr?h.errors.length>0&&t.leaveBreadcrumb("AddressValidation service failed",{errors:h.errors}):h instanceof Error&&t.leaveBreadcrumb("AddressValidation service failed",{error:h.message}),{id:"",concerns:[],suggestions:[],locale:e,validationScope:[],fields:[]}}}),[n,o,e,r,l.sourceId,t])}(),l=(0,kn.Z7)(e,t,n),o=(0,a.useCallback)((({addressType:e,errors:t})=>"shipping"===e&&!wr.some((e=>void 0!==t.get(e)))),[]),i=(({countries:e})=>(t,n)=>t.filter((t=>((t,n)=>{if(!e||0===e.length)return!0;if("address_unknown"===t.code||"missing_building_number"===t.code)return!1;if("country_invalid_for_zip"!==t.code)return!0;const a=e.map((e=>e.value)),r=n.find((e=>t.suggestionIds.includes(e.id)));return!r||!r.countryCode||a.includes(r.countryCode)})(t,n))))({countries:t,countryCode:e}),s=function(){const e=(0,re.g)(),t=(0,ur.QB)(),n=(0,C.Fo)(),{id:r}=(0,P.q)(),l=(0,b.Y)(),o=(0,vt.Bl)(),i=(0,a.useMemo)((()=>new Map),[]);return(0,a.useCallback)(((a,s,d,c,u,m)=>{const p=((...e)=>e.join(""))(JSON.stringify(s),JSON.stringify(u),m,d,c,a);if(e&&!i.has(p)){i.set(p,{address:s,suggestion:u,addressType:m,concern:d,matchingStrategy:c});const f=t?.value?.defaultAttributes?.uniqToken||"",h={schemaId:le.$D.AddressValidation,payload:{checkoutToken:n.checkoutSessionIdentifier||"",shopId:parseInt((0,$t.ee)(r),10),uniqueToken:f,locale:l,address1:s.address1,address2:s.address2,city:s.city,zip:s.postalCode,zone:s.zoneCode,country:s.countryCode||"",validationId:a,address1Suggested:u?.address.address1,address2Suggested:u?.address.address2,citySuggested:u?.address.city,zipSuggested:u?.address.postalCode,zoneSuggested:u?.address.zoneCode,countrySuggested:u?.address.countryCode||"",errorFields:d.fieldNames||[],errorCodes:[d.code],errorType:d.type,matchingStrategy:c,suggestionsCount:d.suggestionIds.length||0,checkoutView:o?"Single page":"Multi page",context:"shipping"===m?"Shipping address":"Billing address"}};e.record(h)}}),[e,i,t?.value?.defaultAttributes?.uniqToken,n.checkoutSessionIdentifier,r,l,o])}(),d=(0,a.useCallback)(((e,t)=>{if(!e.suggestionIds||0===e.suggestionIds.length)return;const n=t.find((t=>t.id===e.suggestionIds[0]));return n?{address:(a=n,void 0===a?{}:{address1:a.address1??void 0,address2:a.address2??void 0,city:a.city??void 0,zoneCode:a.provinceCode??void 0,zone:a.province??void 0,postalCode:a.zip??void 0,countryCode:a.countryCode??void 0}),message:e.message,code:e.code,type:e.type,id:e.suggestionIds[0]}:void 0;var a}),[]);return(0,a.useCallback)((async({addressType:e,address:t,matchingStrategy:n,action:a})=>{const c=new Map,u=l(t,e);if("submit"===a&&u.forEach(((e,t)=>{c.set(t,{error:e,type:"error",source:void 0,matchingStrategy:n})})),o({addressType:e,errors:u})){const a=await r(function(e){const{address1:t,address2:n,zoneCode:a,countryCode:r,postalCode:l,city:o,phone:i}=e;return{address1:t,address2:n,zoneCode:a,countryCode:r,postalCode:l,city:o,phone:i}}(t),n),l=a.concerns.map((e=>({...e,type:e.type.toLowerCase()})));l.forEach((r=>{const l=d(r,a.suggestions);s(a.id,t,r,n,l,e)})),function(e){const t=new Map([["countryCode",0],["coordinates",2],["zoneCode",4],["postalCode",8],["address1",16],["address2",32],["city",64]]),n=(e,n)=>e|(t.get(br(n))??0),a=e.reduce(((e,t)=>{if(null==t.fieldNames)return[];const a=t.fieldNames.reduce(n,0);return e[a]=((e,t)=>{if(!e&&t)return t;if(e&&!t)return e;if(e.type!==t.type)return"error"===e.type?e:t;switch(e.type){case"error":return e.typeLevel<t.typeLevel?e:t;case"warning":return e.typeLevel>t.typeLevel?e:t}})(e[a]??void 0,t),e}),{});return[...new Set(Object.values(a))]}(i(l,a.suggestions)).forEach((t=>{const r=br(t.fieldNames[0]),l=d(t,a.suggestions);c.set(r,{id:a.id,error:t.message,suggestion:l,concernCode:"postalCode"===r?vr(t.code||"",e):t.code,type:t.type,concern:t,source:"validation-api",matchingStrategy:n}),u.set(r,t.message)}))}return c}),[d,l,o,r,i,s])}var Ar=n(80568),Ir=n(80469),xr=n(41969),Mr=n(72242),Tr=n(74267);function Nr({address:e,addressOptions:t,inPaymentContext:n=!1,disabled:r=!1}){const l=(0,o.md)(e),i=(0,E.W)(),s=function(e){const t=(0,o.QN)();return n=>{const{firstName:a,lastName:r,company:l,address1:o,address2:i,city:s,countryCode:d,postalCode:c,zoneCode:u,phone:m,coordinates:p}=e.fields;t.write(a,n.firstName),t.write(r,n.lastName),t.write(l,n.company),t.write(o,n.address1),t.write(i,n.address2),t.write(s,n.city),t.write(d,n.countryCode),t.write(c,n.postalCode),t.write(u,n.zoneCode),t.write(m,n.phone),t.write(p,n.coordinates)}}(e),d=t.find((e=>(0,wn.o)(l,e.address)))?.value,c=(0,a.useRef)(!1),u=(0,a.useMemo)((()=>[...t,{label:i("contact.new_address_label","Use a new address"),value:`${t.length}`,address:(0,Tr.Qh)({countryCode:e.fields.countryCode.init,zoneCode:e.fields.zoneCode.init})}]),[t,i,e.fields.countryCode.init,e.fields.zoneCode.init]),m=u[u.length-1].value,[p,f]=(0,a.useState)(d&&!n?d:m);if(n&&!c.current){const e=u[parseInt(p,10)].address;s(e)}return(0,a.useEffect)((()=>{const e=t.find((e=>(0,wn.o)(l,e.address)))?.value;f(e||m)}),[l,t,m]),(0,a.useEffect)((()=>{c.current=!0}),[]),a.default.createElement(Mr.l,{value:p,label:i("contact.stored_addresses_label","Saved addresses"),options:u,onChange:e=>{const t=u[parseInt(e,10)].address;s(t),f(e)},disabled:r})}const Lr={tabindex:"-1",label:"",ariaHidden:!0,ariaLabel:"no-label",type:"text"},Dr=(0,a.memo)((function({address:e,addressType:t,availableCountries:n,country:r,onAutofillCaptured:l}){const i=(0,o.md)(e),s=(0,gn.FI)(),d=(0,o.QN)(),c=t=>({currentTarget:{value:n}})=>{d.write(e.fields[t],n),l?.()},u=()=>({currentTarget:{value:t}})=>{d.write(e.fields.zoneCode,t)};return a.default.createElement(h.S,{visibility:"hidden"},a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_firstName",name:"firstName",autoComplete:m(t,"given-name"),onChange:c("firstName"),value:i.firstName})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_lastName",name:"lastName",autoComplete:m(t,"family-name"),onChange:c("lastName"),value:i.lastName})),s.isVisible("company")&&a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_company",name:"company",autoComplete:m(t,"organization"),onChange:c("company"),value:i.company})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_address1",name:"address1",autoComplete:m(t,s.isVisible("address2")?"address-line1":"street-address"),onChange:c("address1"),value:i.address1})),s.isVisible("address2")&&a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_address2",name:"address2",autoComplete:m(t,"address-line2"),onChange:c("address2"),value:i.address2})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_city",name:"city",autoComplete:m(t,"address-level2"),onChange:c("city"),value:i.city})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_country",name:"country",autoComplete:m(t,"country"),onChange:({currentTarget:{value:t}})=>{const a=n.find((e=>e.value===t||e.label.toLowerCase()===t.toLowerCase()));a&&d.write(e.fields.countryCode,a.value)},value:i.countryCode})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_zone",name:"zone",autoComplete:m(t,"address-level1"),onChange:u(),value:i.zoneCode})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_address_level1",name:"address-level1",autoComplete:m(t,"address-level1"),onChange:u(),value:i.zoneCode})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_province",name:"province",autoComplete:m(t,"address-level1"),onChange:u(),value:i.zoneCode})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_postalCode",name:"postalCode",autoComplete:m(t,"postal-code"),onChange:c("postalCode"),value:i.postalCode})),s.isVisible("phone",r.code)&&a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_phone",name:"phone",autoComplete:m(t,"tel"),onChange:c("phone"),value:i.phone})));function m(e,t){return e?`${e} ${t}`:t}})),Rr=(0,a.memo)((function({address:e,addressType:t,availableCountries:n,country:r,onAutofillCaptured:l}){const i=(0,gn.FI)(),s=(0,o.QN)(),d=t=>({currentTarget:{value:n}})=>{s.write(e.fields[t],n),l?.()};return a.default.createElement(h.S,{visibility:"hidden"},i.isVisible("address2")&&a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_collapsed_address2",name:"address2",autoComplete:c(t,"address-line2"),onChange:d("address2")})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_collapsed_city",name:"city",autoComplete:c(t,"address-level2"),onChange:d("city")})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_collapsed_zone",name:"zone",autoComplete:c(t,"address-level1"),onChange:({currentTarget:{value:t}})=>{s.write(e.fields.zoneCode,t)}})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_collapsed_address_level1",name:"address-level1",autoComplete:c(t,"address-level1"),onChange:({currentTarget:{value:t}})=>{s.write(e.fields.zoneCode,t)}})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_postal_collapsed_postalCode",name:"postalCode",autoComplete:c(t,"postal-code"),onChange:d("postalCode")})),i.isVisible("phone",r.code)&&a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill__collapsed_phone",name:"phone",autoComplete:c(t,"tel"),onChange:d("phone")})),a.default.createElement("input",(0,ye.A)({},Lr,{id:"autofill_collapsed_country",name:"country",autoComplete:c(t,"country"),onChange:({currentTarget:{value:t}})=>{const a=n.find((e=>e.value===t||e.label.toLowerCase()===t.toLowerCase()));a&&s.write(e.fields.countryCode,a.value)}})));function c(e,t){return e?`${e} ${t}`:t}}));var Br=n(19787);function Fr({address:e,addressErrors:t,addressType:n,addressSettings:r,loading:l,editDisabled:o,required:i}){const s=(0,E.W)(),d=r.isRequired("firstName")||i,c=(0,a.useCallback)((e=>{if(d&&!(0,Ie.CJ)(e))return s("field_errors.address_first_name_blank","Enter a first name")}),[d,s]),u=(0,Ie.j8)(e.fields.firstName,t.firstName,c);return a.default.createElement(Br.A_,(0,ye.A)({protectedInput:!0,name:"firstName",label:d?s("contact.first_name_label","First name"):s("contact.optional_first_name_label","First name (optional)"),required:d,autocomplete:{group:n,field:"given-name"},readonly:l||o},u))}var zr=n(56784),Vr=n(66126);function Or({address:e,addressType:t,addressErrors:n,addressSettings:r,loading:l,editDisabled:o,businessCustomerProfile:i}){const s=(0,E.W)(),[d]=(0,zr.Z)([Vr._2]),c=r.isRequired("lastName"),u=(0,a.useCallback)((e=>{if(c&&!(0,Ie.CJ)(e))return s("field_errors.address_last_name_blank","Enter a last name")}),[c,s]),m=(0,Ie.j8)(e.fields.lastName,n.lastName,u),p=c?s("contact.last_name_label","Last name"):s("contact.optional_last_name_label","Last name (optional)");return a.default.createElement(Br.A_,(0,ye.A)({name:"lastName",protectedInput:!0,label:i&&!d?s("contact.optional_recipient_label","Attention (optional)"):p,required:c,autocomplete:{group:t,field:"family-name"},readonly:l||o},m))}function Wr({addressType:e,address:t,addressErrors:n,addressSettings:r,loading:l,editDisabled:o,businessCustomerProfile:i}){const s=(0,E.W)(),[d]=(0,zr.Z)([Vr._2]),c=r.isRequired("company"),u=(0,a.useCallback)((e=>{if(c&&!(0,Ie.CJ)(e))return s("field_errors.address_company_blank","Enter a company name")}),[c,s]),m=(0,Ie.j8)(t.fields.company,n.company,u),p=c?s("contact.company_label","Company"):s("contact.optional_company_label","Company (optional)"),f=c?s("contact.company_attention_label","Company/Attention"):s("contact.optional_company_attention_label","Company/Attention (optional)");return a.default.createElement(Br.A_,(0,ye.A)({name:"company",label:i&&d?f:p,required:c,autocomplete:{group:e,field:"organization"},readonly:l||o},m))}var qr=n(95635);const $r=(0,Ge.m)({load:()=>(0,Xe.P)((()=>n.e(429).then(n.bind(n,84087)))),id:()=>84087,renderLoading:e=>a.default.createElement(Br.A_,e)}),Ur={"Field-sizeSmall":"Vob8N","Input-AccessoryOffset":"R5Ptu"};function Hr(e){const{country:t,address:n,addressRef:r,addressType:l,addressErrors:i,addressSettings:s,loading:d,editDisabled:c,missingBuildingNumberInAddress2:u,autocompleteDisabled:m,resetAddressSuggestions:p}=e,f=(0,E.W)(),[,h]=(0,o.fp)(n.fields.coordinates),y=(0,o.md)(n.fields.address1),g=(0,o.md)(n.fields.address2),[v,S]=(0,a.useState)(!ir(y||"")),k=(0,o.QN)(),w=(0,re.g)(),A=(0,C.Fo)(),{id:I}=(0,P.q)(),x=(0,ur.QB)(),M=(0,b.Y)(),T=k.read(n).value,N=(0,a.useCallback)((e=>{if(!(0,Ie.CJ)(e))return f("field_errors.address_address1_blank","Enter an address")}),[f]),L=(0,Ie.j8)(n.fields.address1,i.address1,N),D=e=>{e!==L.value&&(h(void 0),L.onChange(e),p?.(),ir(e)||S(!0))},R=e=>{ir(e)&&S(!1),L.onInput(e)},B=s.isVisible("address2")?"address-line1":"street-address",F=!m&&(0,qr.Az)(t,s),z={group:l,field:B};let V=!1;t.buildingNumberRequired&&(V=Boolean(v&&y),t.buildingNumberMayBeInAddress2&&(V=Boolean(v&&u&&(y||g))));const O=(0,a.useRef)(V);O.current!==V&&(V&&function(){if(x.value.defaultAttributes&&w){const e=x.value.defaultAttributes?.uniqToken||"",n={schemaId:le.$D.BuildingNumberNudge,payload:{checkoutToken:A.checkoutSessionIdentifier||"",shopId:parseInt((0,$t.ee)(I),10),uniqueToken:e,address1:T.address1||"",address2:T.address2||"",city:T.city||"",zone:T.zoneCode||"",zip:T.postalCode||"",territory:t.code,promptType:"missing_street_number",locale:M,context:"shipping"===l?"Shipping address":"Billing address"}};w?.record(n)}}(),O.current=V);const W=V?{type:"warning",value:a.default.createElement(ht.o,{blockAlignment:"center",spacing:"small400"},a.default.createElement(Le.In,{source:"info"}),a.default.createElement(jn.E,null,f("contact.civic_number_warning","Add a house number if you have one")))}:void 0,q=L.error??W,$=F?a.default.createElement(jr,(0,ye.A)({},e,L,{onChange:D,onInput:R,error:q,autocomplete:z})):a.default.createElement(Br.A_,(0,ye.A)({ref:r,name:"address1",label:f("contact.address1_label","Address"),required:!0,autocomplete:z,readonly:d||c},L,{error:q,onChange:D,onInput:R,protectedInput:!0})),U=_()(Ur["Field-sizeSmall"],{[Ur["Input-AccessoryOffset"]]:F});return a.default.createElement("div",{className:U},a.default.createElement(Hn.a,{spacing:"small200"},$))}function jr({value:e,error:t,onInput:n,onChange:r,onAddressAutoComplete:l,loading:i,editDisabled:s,address:d,autocomplete:c,addressType:u,onBlur:m,resetAddressSuggestions:p}){const f=(0,E.W)(),h=(0,o.md)(d.fields.countryCode),y=pl(d,h,l,p);return a.default.createElement($r,{id:`${u}-address1`,name:"address1",field:"address1",label:f("contact.address1_label","Address"),accessory:a.default.createElement(Le.In,{source:"magnify"}),countryCode:h,onSelect:y,required:!0,autocomplete:c,readonly:i||s,value:e,error:t,onChange:r,onInput:n,addressType:u,onBlur:m,protectedInput:!0})}var Yr=function(e){return e.Focused="focused",e.Visible="visible",e.Hidden="hidden",e}(Yr||{});function Gr({address:e,addressType:t,addressErrors:n,addressSettings:r,loading:l,editDisabled:o,setMissingBuildingNumberInAddress2:i,resetAddressSuggestions:s}){const d=(0,E.W)(),c=(0,vt.Bl)(),u=(0,a.useRef)(null),m=r.isRequired("address2"),p=(0,a.useCallback)((e=>{if(m&&!(0,Ie.CJ)(e))return d("field_errors.address_address2_blank","Enter an apartment, suite, etc.")}),[m,d]),f=(0,Ie.j8)(e.fields.address2,n.address2,p),y=Boolean(f.value?.length),g=!c||m||y?Yr.Visible:Yr.Hidden,[_,b]=(0,a.useState)(g);(0,a.useEffect)((()=>{_===Yr.Focused&&u.current?.focus()}),[_]),(0,a.useEffect)((()=>{_===Yr.Hidden&&y&&b(Yr.Visible)}),[_,y]);const v=(0,St.uL)();return _===Yr.Hidden?a.default.createElement(h.S,{padding:["none","none","none","small100"]},a.default.createElement("span",{ref:v("address2_add_button")},a.default.createElement(J.N,{textDecoration:"none",onPress:()=>{b(Yr.Focused)}},a.default.createElement(ht.o,{spacing:"small400",blockAlignment:"center"},a.default.createElement(Le.In,{source:"plus",size:"extraSmall",appearance:"monochrome"}),d("shipping.address2_add_label","Add apartment, suite, etc."))))):a.default.createElement(Br.A_,(0,ye.A)({name:"address2",label:m?d("contact.address2_label","Apartment, suite, etc."):d("contact.optional_address2_label","Apartment, suite, etc. (optional)"),required:m,autocomplete:{group:t,field:"address-line2"},readonly:l||o},f,{ref:u,onChange:e=>{f.onChange(e),s?.(),ir(e)||i?.(!0)},onInput:e=>{f.onInput(e),ir(e)&&i?.(!1)}}))}var Xr=n(27052);const Zr={"Field-sizeSmall":"ii1aN"},Qr=new Map([[lr.O.Au,/^(?!2899|679[89])(\d{4})$/],[lr.O.Ca,/^[A-Za-z]\d[A-Za-z]\s*\d[A-Za-z]\d$/],[lr.O.De,/^(DE?-?)?\d{5}$/],[lr.O.Fr,/^((FR?( |-)?)?([0-8]\d{4})|([0-9][01234569]\d{3}))$/],[lr.O.Gb,/^[A-Za-z]{1,2}\d{1,2}(?:[A-Za-z])?\s?\d[A-Za-z]{2}$/],[lr.O.Nz,/^\d{4}$/],[lr.O.Us,/^\d{5}(?:[-\s]?\d{4})?$/]]),Jr=new Map([["postal_code_label","postal_code"],["zip_code_label","zip_code"],["postcode_label","postcode"],["pincode_label","pincode"]]);function Kr(e){const{country:t,address:n,addressType:r,addressErrors:l,addressSettings:i,loading:s,editDisabled:d,resetAddressSuggestions:c}=e,u=(0,E.W)(),m=(0,a.useCallback)((e=>{if(!(0,Ie.CJ)(e))return u("field_errors.address_zip_blank","Enter a ZIP / postal code")}),[u]),p=(0,kn.gQ)(t.localizationKeys.postalCode??"postal_code_label",t.labels.postalCode,Jr)("label"),f=(0,Ie.j8)(n.fields.postalCode,l.postalCode,m),[h,y]=(0,a.useState)(f.value);(0,o.GI)(n.fields.postalCode,(e=>{e!==h&&y(e)}));const[,g]=(0,o.fp)(n.fields.coordinates),_=t.autocompletionField===Xr.s.PostalCode&&i.autocompleteEnabled&&(0,qr.TX)(t.code),b=e=>{e!==f.value&&(g(void 0),f.onChange(e),c?.())},v=Qr.get(t.code),C=_?a.default.createElement(tl,(0,ye.A)({},e,f,{onChange:b,label:p})):a.default.createElement(Br.r_,(0,ye.A)({name:"postalCode",label:p,required:!0,inputMode:el(t),autocomplete:{group:r,field:"postal-code"},autoCapitalize:"characters",readonly:s||d},f,{onInput:function(e){const t=e.toLocaleUpperCase();f.onInput(t),y(t),v&&v.test(t)&&b(t)},onChange:b,controlledValue:h}));return a.default.createElement("div",{className:Zr["Field-sizeSmall"]},C)}function el(e){const{pureNumericPostalCode:t}=e;return t?"numeric":"text"}function tl({label:e,value:t,error:n,onInput:r,onChange:l,onAddressAutoComplete:i,loading:s,editDisabled:d,address:c,addressType:u,onBlur:m,resetAddressSuggestions:p}){const f=(0,o.md)(c.fields.countryCode),h=pl(c,f,i,p);return a.default.createElement($r,{name:"postalCode",field:"postalCode",label:e,countryCode:f,onSelect:h,required:!0,autocomplete:{group:u,field:"postal-code"},readonly:s||d,value:t,error:n,onChange:l,onInput:r,addressType:u,onBlur:m})}function nl({address:e,addressType:t,addressErrors:n,loading:r,editDisabled:l,resetAddressSuggestions:i}){const s=(0,E.W)(),d=(0,a.useCallback)((e=>{if(!(0,Ie.CJ)(e))return s("field_errors.address_city_blank","Enter a city")}),[s]),c=(0,Ie.j8)(e.fields.city,n.city,d),[,u]=(0,o.fp)(e.fields.coordinates);return a.default.createElement(Br.A_,(0,ye.A)({name:"city",label:s("contact.city_label","City"),required:!0,autocomplete:{group:t,field:"address-level2"},readonly:r||l},c,{onChange:e=>{e!==c.value&&(u(void 0),c.onChange(e),i?.())}}))}const al=new Map([["province_label","province"],["county_label","county"],["state_label","state"],["region_label","region"],["prefecture_label","prefecture"],["governorate_label","governorate"],["emirate_label","emirate"],["state_and_territory_label","state_and_territory"]]);function rl({country:e,address:t,addressType:n,addressErrors:r,loading:l,editDisabled:i,resetAddressSuggestions:s}){const d=(0,E.W)(),c=(0,a.useCallback)((e=>{if(!(0,Ie.CJ)(e))return d("field_errors.address_province_blank","Select a state / province")}),[d]),u=(0,kn.gQ)(e.localizationKeys.zone??"province_label",e.labels.zone,al),m=u("label"),p=u("placeholder"),f=(0,Ie.j8)(t.fields.zoneCode,r.zoneCode,c),[,h]=(0,o.fp)(t.fields.coordinates),[,y]=(0,o.fp)(r.postalCode),g=f.value,_=g?.toLowerCase(),b=e.zones.find((e=>e.code===g||e.name.toLowerCase()===_||e.nameWithAlternates?.some((e=>e.toLocaleLowerCase()===_))));return b&&f.onChange(b.code),a.default.createElement(Mr.l,(0,ye.A)({name:"zone",label:m,placeholder:p,options:(v=e.zones,v.map((e=>{const{name:t,code:n,nameWithAlternates:a}=e;return{label:t,value:n,alternateValues:a}}))),required:!0,autocomplete:{group:n,field:"address-level1"},readonly:l||i},f,{onChange:e=>{e!==f.value&&(h(void 0),y(void 0),s?.(),f.onChange(e))}}));var v}function ll({address:e,addressType:t,addressErrors:n,availableCountries:r,loading:l,editDisabled:i,resetAddressSuggestions:s}){const d=(0,E.W)(),c=(0,Ie.j8)(e.fields.countryCode,n.countryCode),u=(0,Ie.j8)(e.fields.zoneCode,n.zoneCode),m=(0,vt.Bl)(),[,p]=(0,o.fp)(e.fields.coordinates),[,f]=(0,o.fp)(n.postalCode),[,h]=(0,o.fp)(n.zoneCode),y=(0,re.g)(),g=(0,C.Fo)(),{id:_}=(0,P.q)(),v=(0,ur.QB)(),S=(0,b.Y)(),k=(0,a.useCallback)(((e,n)=>{if(v.value.defaultAttributes&&y){const a=v.value.defaultAttributes?.uniqToken||"",r={schemaId:le.$D.CountrySelection,payload:{checkoutToken:g.checkoutSessionIdentifier||"",shopId:parseInt((0,$t.ee)(_),10),uniqueToken:a,territoryCode:n,selectionMethod:e,context:"shipping"===t?"Shipping address":"Billing address",locale:S}};y?.record(r)}}),[v.value.defaultAttributes,y,t,S,g.checkoutSessionIdentifier,_]);return(0,a.useEffect)((()=>{k("auto-selected",c.value)}),[v.value.defaultAttributes?.uniqToken,y]),a.default.createElement(Mr.l,(0,ye.A)({name:"countryCode",label:d("contact.country_label","Country/Region"),options:r,required:!0,autocomplete:{group:t,field:"country"},readonly:l||i},c,{onChange:e=>{m||u.onChange(void 0),e!==c.value&&(c.onChange(e),s?.(),p(void 0),h(void 0),f(void 0),k("user-input",e))}}))}var ol=n(79858),il=n(88098);function sl({country:e,addressType:t,addressErrors:n,addressSettings:r,addressFormSettings:l,address:i,loading:s,editDisabled:d}){const{code:c}=e,u=(0,E.W)(),m=r.isRequired("phone",c),{validatePhoneNumber:p}=(0,il.X)(),{setAddressError:f}=(0,kn.qo)(n),h=u("field_errors.shipping_line_phone_invalid","Enter a valid phone number"),y=u("field_errors.phone_blank","Enter a phone number"),g=(0,o.QN)(),_=(0,a.useCallback)((e=>{const t=(0,Ie.CJ)(e);return m&&!t?y:t&&!p(e??"",c)?h:void 0}),[m,p,c,y,h]),b=(0,Ie.j8)(i.fields.phone,n.phone,_),v=u("contact.optional_phone_label","Phone (optional)"),C=u("contact.phone_label","Phone"),S=!1!==l?.phoneTooltip&&a.default.createElement(Ne.o,{overlay:a.default.createElement(ol.m_,null,u("contact.phone_tooltip","In case we need to contact you about your order"))},a.default.createElement(Le.In,{source:"question",accessibilityLabel:u("general.tooltip_accessibility_label","More information")}));return(0,a.useEffect)((()=>g.subscribe(i.fields.countryCode,(({value:e})=>{const t=g.read(i.fields.phone).value;if(t&&e){const n=p(t,e);f("phone",n?void 0:h)}}))),[i.fields.countryCode,i.fields.phone,h,f,g,p]),a.default.createElement(Ke.P,(0,ye.A)({name:"phone",countryCode:c,label:m?C:v,hideCountries:!0,required:m,autocomplete:{group:t,field:"telephone"},readonly:s||d,accessory:S||void 0},b))}const dl="I9W0A";class cl extends Error{constructor(...e){super(...e),this.name="UnexpectedFieldError"}}const ul=(0,a.memo)((function({id:e,address:t,countries:n,addressSettings:r,addressType:l,addressErrors:i,additionalFieldGroups:s,children:d,expanded:c=!0,autocompleteDisabled:u=!1,collapsible:m=!1,settings:f,loading:h=!1,onAddressAutoComplete:y,onManualAddressEntryClick:g,onAutofillCaptured:v,inPaymentContext:S,showSavedAddressSelector:k=!0,shouldSkipAddressValidation:w=!1}){const A=(0,E.W)(),{geolocation:x}=(0,be.u)(),M=(0,gn.FI)(),[T]=(0,or.$v)(),N=(0,o.md)(t.fields.countryCode),L=(0,a.useMemo)((()=>(0,wn.ec)()),[]),{resetAddressSuggestions:D}=(0,kn.qU)(L,i),{isPayUserAvailable:R}=(0,cr.M)(),B=(0,Ut.o)(),F=(0,o.QN)(),z=(0,_e.Xe)(Xt.e.Delivery,en.W2.Destination)&&"shipping"===l,{details:V,loading:O}=(0,Pn.S0)(N),W=(0,a.useMemo)((()=>r??M),[r,M]),q=(0,a.useMemo)((()=>V??x.country),[V,x.country]),$=(0,a.useMemo)((()=>!n||z?[{value:q.code,label:q.name}]:n),[n,q,z]),U=(0,I.rZ)(),H=(0,a.useMemo)((()=>"CustomerProfile"===U?.__typename?(("shipping"===l?U?.shippingAddresses:U?.billingAddresses)??[]).map((({address:e},t)=>({value:t.toString(),label:e.label,address:{...e}}))):[]),[U,l]),j=H.length>0,Y=(0,a.useMemo)((()=>(0,wn.gJ)(q,W)),[q,W]),G=(0,a.useMemo)((()=>Y.findIndex((e=>"{address1}"===e.id))+1),[Y]),{groupsBeforeCountry:X,countryGroup:Z,groupsAfterCountry:Q}=(0,a.useMemo)((()=>fl(Y)),[Y]);!function(e,t,n){const{addressType:r,addressErrors:l,suggestions:i,countryCode:s,availableCountries:d,addressSettings:c}=t,u=(0,o.QN)(),m=(0,Ht.MN)(""),{lastNegotiation:p}=(0,jt.c$)(),{resetAddressSuggestions:f}=(0,kn.qU)(i,l),{resetAddressErrors:h}=(0,kn.qo)(l),y=(0,Ar.W)(),g=Pr({countryCode:s,countries:d,addressSettings:c}),_=(0,a.useCallback)((t=>{const n=u.read(e).value;return g({address:n,addressType:r,matchingStrategy:y,action:t})}),[u,e,r,g,y]),E=(0,Sn.W)(),[b]=(0,or.$v)(),v=(0,An.YQ)((async t=>{if("progression"===u.read(m).value)return;const{revision:n}=u.read(e),a=u.read(p).revision,o=await _(),s=u.read(e).revision!==n,c=u.read(p).revision!==a;s||c?E.leaveBreadcrumb("The address revision has been modified as the negotiation responded faster than the atlas validation .",{isAddressRevisionChanged:s,isNegotiationRevisionChanged:c}):_r({fieldValidationResult:o,address:e,addressErrors:l,suggestions:i,state:u,matchingStrategy:y,addressType:r,availableCountries:d})}),150);(0,o.GI)(e,(e=>{u.write(m,""),v(e)})),(0,Ce.D3)((async({reason:t,parts:a})=>{if(u.write(m,t),n?.shouldSkipAddressValidation)return{behavior:"allow"};if("negotiation"===t)return{behavior:"allow"};if(b)return{behavior:"allow"};Object.entries(l).forEach((e=>{const t=Object.keys(l).includes(e[0])?u.read(l[e[0]]).value:"";let n;if("string"==typeof t&&(n=t),Object.keys(i).includes(e[0])&&(0,mr.zO)(t)){const t=u.read(i[e[0]]).value;n="error"===t?.type?t?.message:""}if(n)return E.leaveBreadcrumb("Blocking address error",{errorMessage:n}),{behavior:"block",reason:en.RE.InvalidAddress}}));const o=await _("submit");if("shipping"===u.read(a.billingAddressOption).value&&"billing"===r)return h(),f(),{behavior:"allow"};const s=Array.from(o,(([,e])=>e.error)).filter((e=>e)),c=Array.from(o,(([,e])=>e)).filter((e=>"error"===e?.type)).length>0,p=Array.from(o,(([,e])=>e)).filter((e=>"validation-api"!==e?.source)).length>0;return c||p?(E.leaveBreadcrumb("blocking errors",{errors:s}),{behavior:"block",reason:en.RE.InvalidAddress,perform:()=>{_r({fieldValidationResult:o,address:e,addressErrors:l,suggestions:i,state:u,matchingStrategy:y,addressType:r,availableCountries:d})}}):{behavior:"allow",perform:()=>{f()}}}))}(t,{countryCode:N,availableCountries:$,addressSettings:W,suggestions:L,addressType:l,addressErrors:i},{shouldSkipAddressValidation:w}),function(e,t,n,r,l,i,s){const d=(0,o.QN)(),c=(0,o.md)(e.fields.countryCode),u=(0,a.useMemo)((()=>t.flatMap((({fields:e})=>e))),[t]);(0,a.useEffect)((()=>{for(const e of Object.keys(n))u.includes(e)||(d.write(n[e],void 0),Object.keys(r).includes(e)&&d.write(r[e],void 0))}),[d,n,r,u]);const m=(0,re.g)(),f=(0,C.Fo)(),{id:h}=(0,P.q)(),y=(0,ur.QB)(),{details:g}=(0,Pn.S0)(c),_=(0,b.Y)(),E=(0,Ar.W)();const v=(0,a.useCallback)((e=>{if("error"!==e.type||null==s||l)return;const{violations:t}=e,a=(0,wn.oD)(s,t);let r=!1;for(const[l,o]of a)d.write(n[l],o),i.isVisible(l,c)||(r=!0);r&&window.location.reload()}),[l,i,s,n,d,c]),S=(0,dr.x)();(0,a.useEffect)((()=>{v(S)}),[S,v]),(0,p.od)((t=>{(function(t){if("error"===t.type&&null!=s&&!l){const{violations:e}=t,a=(0,wn.oD)(s,e);for(const[t,r]of a)d.write(n[t],r)}const a=[];for(const e of Object.keys(n))d.read(n[e]).value&&a.push(e);if("invalid"===t.type||"error"===t.type||"success"===t.type&&"progression"===t.negotiationStage){const n=d.read(e).value;let r;if("invalid"===t.type&&(r=t.reasons.toString()),y.value.defaultAttributes){const e=y.value.defaultAttributes?.uniqToken||"",t=g?.zones?.find((e=>e.code===n.zoneCode))?.name||n.zoneCode,l={schemaId:le.$D.AddressSubmission,payload:{checkoutToken:f.checkoutSessionIdentifier||"",shopId:parseInt((0,$t.ee)(h),10),uniqueToken:e,territory:g?.name||"",context:"shipping"===s?"Shipping address":"Billing address",address1:n.address1||"",address2:n.address2||"",city:n.city||"",zone:t||"",zip:n.postalCode||"",errorCode:r||"",errorFields:a,locale:_,matchingStrategy:E}};m?.record(l)}}})(t),v(t)}))}(t,Y,i,L,T,W,l);const[K,ee]=(0,a.useState)(!1);(0,a.useEffect)((function(){B&&!R||W.isVisible("phone",q.code)||F.write(t.fields.phone,"")}),[q,t.fields.phone,W,F,R,B]),(0,a.useEffect)((()=>{if(O||h){const e=setTimeout((()=>ee(!0)),400);return()=>clearTimeout(e)}ee(O)}),[h,O]);const te=(0,o.md)(t.fields.address2),[ne,ae]=(0,a.useState)(!ir(te||"")),oe=(0,a.useRef)(null),ie={address:t,addressErrors:i,addressType:l,addressSettings:W,addressRef:oe,addressFormSettings:f,country:q,availableCountries:$,onAddressAutoComplete:y,missingBuildingNumberInAddress2:ne,setMissingBuildingNumberInAddress2:ae,resetAddressSuggestions:D},se=(0,a.useCallback)((()=>{g?.(),setTimeout((()=>{oe.current?.focus()}))}),[g]);return a.default.createElement("div",{id:e},a.default.createElement(sr.R,{active:K},a.default.createElement(xr.H,null,U&&j&&k?a.default.createElement(Nr,{address:t,addressOptions:H,inPaymentContext:S,disabled:z}):null,m?a.default.createElement(a.default.Fragment,null,Y.slice(0,G).map((e=>a.default.createElement(ml,(0,ye.A)({key:e.id,group:e,additionalGroups:s},ie,{loading:K,autocompleteDisabled:u,editDisabled:z})))),!c&&a.default.createElement(Rr,{address:t,addressType:l,country:q,availableCountries:$,onAutofillCaptured:v}),a.default.createElement("div",{className:"_Yuii"},a.default.createElement("div",{className:dl},a.default.createElement(yt.e,{id:"collapsed-fields",open:c,renderChildrenWhenCollapsed:!0},a.default.createElement(xr.H,null,Y.slice(G).map((e=>a.default.createElement(ml,(0,ye.A)({key:e.id,group:e,additionalGroups:s},ie,{loading:K,editDisabled:z})))),d))),a.default.createElement("div",{className:_()(dl,{z4F0X:c})},a.default.createElement(Hn.a,{inlineAlignment:"start"},a.default.createElement(J.N,{"aria-controls":"collapsed-fields",onPress:se},A("shipping.enter_address_manually_label","Enter address manually")))))):a.default.createElement(a.default.Fragment,null,X.map((e=>a.default.createElement(ml,(0,ye.A)({key:e.id,group:e,additionalGroups:s},ie,{loading:K,editDisabled:z})))),a.default.createElement(ml,(0,ye.A)({key:"country",group:Z,additionalGroups:s},ie,{loading:K,editDisabled:z})),Q.map((e=>a.default.createElement(ml,(0,ye.A)({key:e.id,group:e,additionalGroups:s},ie,{loading:K,editDisabled:z})))),d)),a.default.createElement(Dr,{address:t,addressType:l,country:q,availableCountries:$,onAutofillCaptured:v})))}));function ml({addressRef:e,additionalGroups:t,autocompleteDisabled:n,group:r,...l}){const{loading:o}=l,i=t?.filter((({after:e})=>r.fields.includes(e)))??[],{firstNameRequired:s}=(0,nn.w)(),d=s(l.addressType),c=(0,Ir.N)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(xr.g,null,r.fields.map((t=>{switch(t){case"firstName":return a.default.createElement(Fr,(0,ye.A)({required:d},l));case"lastName":return a.default.createElement(Or,(0,ye.A)({businessCustomerProfile:c},l));case"company":return a.default.createElement(Wr,(0,ye.A)({},l,{businessCustomerProfile:c}));case"address1":return a.default.createElement(Hr,(0,ye.A)({},l,{addressRef:e,autocompleteDisabled:n}));case"address2":return a.default.createElement(Gr,l);case"postalCode":return a.default.createElement(Kr,l);case"city":return a.default.createElement(nl,l);case"zoneCode":return a.default.createElement(rl,l);case"countryCode":return a.default.createElement(ll,l);case"phone":return a.default.createElement(sl,l);default:throw new cl(`Unexpected field: ${t}`)}}))),i.map((e=>a.default.createElement(xr.g,{key:e.id},e.render({loading:o})))))}function pl(e,t,n,a){const r=(0,o.QN)(),{details:l,loading:i}=(0,Pn.S0)(t);return t=>{const{coordinates:o,address1:s,address2:d,city:c,zoneCode:u,countryCode:m,postalCode:p}=e.fields;r.write(o,t.coordinates),r.write(s,t.address1??""),r.write(d,t.address2??""),r.write(c,t.city);const f=l?.zones?.length&&!i;r.write(u,f?t.zoneCode:void 0),r.write(m,(e=>Object.values(lr.O).find((e=>e===t.countryCode?.toUpperCase()))??e)),r.write(p,t.postalCode),a?.(),n?.(t)}}function fl(e){const t=e.findIndex((e=>e.fields.includes("countryCode")));return{groupsBeforeCountry:e.slice(0,t),countryGroup:e[t],groupsAfterCountry:e.slice(t+1)}}var hl=n(48545),yl=n(37103),gl=n(72334);function _l(e){const t=(0,gl.If)();(0,a.useEffect)((()=>t.intercept(e)),[t,e])}var El=n(67902),bl=n(33663);function vl({message:e}){const t=({condition:e,wrapper:t,children:n})=>e?t(n):n;return e?a.default.createElement(an.l,{status:"critical"},a.default.createElement(t,{condition:Boolean(e),wrapper:e=>a.default.createElement(Hn.a,{inlineAlignment:"start",spacing:"small500"},e)},e?a.default.createElement(ln.V,null,e):null)):null}const Cl=(0,Ht.Bx)({addressModalState:{status:"idle"},addressFormLoading:!1,countries:void 0});var Sl=n(27982),kl=n(9124),wl=n(49653);function Pl(){const e=(0,E.W)(),[,t]=(0,o.fp)(Cl.addressModalState),{selectedAddress:n}=(0,yl.T)(),[r]=(0,o.fp)((0,ve.C)().shippingAddress),l=(0,Sl.s)(),i=(0,ke.j9)(),{hasViolations:s}=(0,bl.Ck)(El.WX),{hasViolations:d}=(0,bl.Ck)(El.I0),{hasViolations:c}=(0,bl.Ck)(wl.aQ),u=(0,a.useCallback)((()=>{t({status:"editing",address:(0,wn.tB)(n.address)})}),[n,t]),{to:m,onPress:p}=(0,kl.Q)();let f;const{details:h,loading:y}=(0,Pn.S0)(r.countryCode);if(d)if(l)f=a.default.createElement(a.default.Fragment,null,e("shop_pay.shop_app_not_supported",{storefront_link:a.default.createElement(J.N,{to:i.storefront()},e("shop_pay.storefront_link","merchant's website"))},"We are unable to process this order within the Shop app. Visit the %{storefront_link} to complete your purchase."));else{const t=y?r.countryCode:h?.name;f=a.default.createElement(a.default.Fragment,null,e("shop_pay.payment_method_not_supported",{country:t,checkout_as_guest_link:a.default.createElement(J.N,{to:m,onPress:p},e("shop_pay.checkout_as_guest_link","check out as guest"))},"You can't use Shop Pay for %{country}. Please %{checkout_as_guest_link} to ship to this country."))}else f=s||c?e("shop_pay.unavailable_address","Shipping not available for selected address"):n?e("shop_pay.invalid_address_with_update_link",{update_address_link:a.default.createElement(J.N,{appearance:"monochrome",onPress:u},e("shipping.address_update","Update address"))},"Selected shipping address is not valid. %{update_address_link} or select a different address"):e("shop_pay.invalid_address","Selected shipping address is not valid");return a.default.createElement(vl,{message:f})}const Al=()=>{const e=(0,E.W)();return a.default.createElement(an.l,{status:"info"},e("shop_pay.checkout.draft_order_delivery_address_reminder","You can't change your shipping address because this order has pre-arranged shipping information"))};var Il=n(78582);const xl=()=>{const{geolocation:e}=(0,be.u)(),{shippingAddress:t}=(0,ve.C)(),[n]=(0,o.fp)(t),[a]=(0,o.fp)(xe.D.signUpPhoneCountryCode);return a??n.countryCode??e.country.code},Ml=()=>{const e=(0,gn.FI)(),{shippingAddress:t}=(0,ve.C)(),[n,r]=(0,o.fp)(xe.D.signUpPhoneCountryCode),[l,i]=(0,o.fp)(xe.D.signUpPhoneNumber),s=(0,o.md)(xe.D.signUpPhoneError),d=(0,o.md)(t.fields.countryCode),c=(0,o.md)(t.fields.phone),u=(0,o.md)(wn.kx.phone),{setAddressError:m}=(0,kn.qo)(wn.kx),p=xl(),{isPhoneNumberUtilLoaded:f}=(0,il.X)(),h=(0,a.useRef)(!1),y=(0,Il.l)(p,l,!0);(0,a.useEffect)((function(){c&&!l&&i(c),d&&!n&&r(d)}),[]),(0,a.useEffect)((()=>{if(!h.current&&f&&l){const{prefix:e}=y;l.startsWith(e)||i(`${e}${l}`),h.current=!0}}),[f]),(0,Ce.D3)((async({parts:t,state:n,reason:a})=>{if("negotiation"!==a)return{behavior:"allow"};const{shippingAddress:r}=t;let l=n.read(xe.D.signUpPhoneNumber).value;l&&l!==y.prefix||(l=void 0);const o=n.read(r).value.phone||void 0;return{behavior:"allow",perform(){l!==o&&e.isVisible("phone",p)&&n.write(r.fields.phone,l)}}})),(0,a.useEffect)((function(){s!==u&&m("phone",s)}),[s,u,m])},Tl=()=>{const e=(0,E.W)(),{isPhoneNumberUtilLoaded:t,validatePhoneNumber:n}=(0,il.X)(),r=xl(),l=(0,a.useCallback)((a=>(0,Ie.CJ)(a)?t&&!n(a??"",r,!0)?e("shop_pay.mobile_phone_number.mobile_phone_invalid","Please enter a valid mobile phone number including country code"):void 0:e("field_errors.phone_blank","Enter a phone number")),[e,t,n,r]);return(0,Ie.j8)(xe.D.signUpPhoneNumber,xe.D.signUpPhoneError,l)},Nl=()=>{const[e]=(0,hl.$v)();return Boolean(e)};function Ll(e){const t=(0,E.W)(),n=xl(),r=Nl(),l=Tl(),[,i]=(0,o.fp)(xe.D.signUpPhoneCountryCode),s=(0,a.useRef)(n);Ml();const d=(0,a.useCallback)((e=>{i(e)}),[i]);return a.default.createElement(Hn.a,e,a.default.createElement(Ke.P,(0,ye.A)({name:"phone",countryCode:s.current,label:t("shop_pay.mobile_phone_number.label","Mobile phone number"),autocomplete:{group:"shipping",field:"telephone"},requireCountryCode:!0,disabled:r,onSelectedCountryChange:d},l)),a.default.createElement(ln.V,{size:"small",appearance:"subdued"},t("shop_pay.mobile_phone_number.disclaimer","On future Shop Pay purchases, you'll get a code by text message to securely tap through checkout.")))}let Dl=function(e){return e.NewDebitCard="new_debit_card_form",e}({}),Rl=function(e){return e.AddNew="credit_card_add_new",e}({}),Bl=function(e){return e.NewShipping="shipping_address_add_new",e.NewBilling="billing_address_add_new",e}({});const Fl=["firstName","lastName"],zl=["address1","address2","city","company"],Vl=["countryCode"],Ol=["zoneCode"],Wl=["phone"],ql=["postalCode"],$l=["blank","too_long","contains_emojis","contains_html_tags","contains_url","contains_mathematical_symbols"],Ul=["blank","too_long","contains_emojis","contains_html_tags","contains_mathematical_symbols"],Hl=["blank","invalid","not_supported"],jl=["blank","invalid"],Yl=["blank","contains_emojis","invalid"],Gl=["blank","invalid","too_long","not_supported","invalid_for_country","invalid_for_province","invalid_for_country_and_province","contains_emojis","contains_mathematical_symbols"],Xl=["blank","invalid"],Zl=(0,Ht.Bx)({address1:void 0,address2:void 0,city:void 0,company:void 0,coordinates:void 0,countryCode:void 0,firstName:void 0,lastName:void 0,name:void 0,phone:void 0,postalCode:void 0,zoneCode:void 0});function Ql(e){const{recordImmediately:t}=(0,oe.v)(),n=(0,o.QN)(),a=(0,E.W)(),r=(0,Sn.W)(),l=e||Zl;return[l,function(e){if(!e)return;const o=function(e){const t=new Map;for(const n of e)n.field.length>1&&("address"===n.field[0]||"billingAddress"===n.field[0])&&t.set(Jl(n.field[1]),n.message);return t}(e);if(0===o.size)return;for(const[t,s]of o)n.write(l[t],a("field_errors",{scope:Kl(t,s,r)},{address_address1_blank:"Enter an address",address_address1_contains_emojis:"Address1 cannot contain emojis",address_address1_contains_html_tags:"Address1 cannot contain HTML tags.",address_address1_contains_mathematical_symbols:"The first address line cannot contain mathematical symbols",address_address1_too_long:"The first address line is too long (maximum is 255 characters)",address_address2_blank:"Enter an apartment, suite, etc.",address_address2_contains_emojis:"Address2 cannot contain emojis",address_address2_contains_html_tags:"Address2 cannot contain HTML tags.",address_address2_contains_mathematical_symbols:"The second address line cannot contain mathematical symbols",address_address2_too_long:"The second address line is too long (maximum is 255 characters)",address_city_blank:"Enter a city",address_city_contains_emojis:"City cannot contain emojis",address_city_contains_html_tags:"City cannot contain HTML tags.",address_city_contains_mathematical_symbols:"City cannot contain mathematical symbols",address_city_too_long:"City is too long (maximum is 255 characters)",address_company_blank:"Enter a company name",address_company_contains_emojis:"Company cannot contain emojis",address_company_contains_html_tags:"Company cannot contain HTML tags.",address_company_contains_mathematical_symbols:"Company cannot contain mathematical symbols",address_company_too_long:"Company name is too long (maximum is 255 characters)",address_country_blank:"Select a country/region",address_country_invalid:"Select a country/region from the list",address_country_not_supported:"We don't ship to this country or region. Enter a new shipping address and try again.",address_first_name_blank:"Enter a first name",address_first_name_contains_emojis:"First name cannot contain emojis",address_first_name_contains_html_tags:"First name cannot contain HTML tags.",address_first_name_contains_mathematical_symbols:"First name cannot contain mathematical symbols",address_first_name_contains_url:"First name cannot contain a URL",address_first_name_too_long:"First name is too long (maximum is 255 characters)",address_generic_blank:"Required field",address_generic_error:"Field error",address_generic_invalid:"Invalid entry",address_last_name_blank:"Enter a last name",address_last_name_contains_emojis:"Last name cannot contain emojis",address_last_name_contains_html_tags:"Last name cannot contain HTML tags.",address_last_name_contains_mathematical_symbols:"Last name cannot contain mathematical symbols",address_last_name_contains_url:"Last name cannot contain a URL",address_last_name_too_long:"Last name is too long (maximum is 255 characters)",address_phone_blank:"Enter a valid phone number",address_phone_contains_emojis:"Phone number cannot contain emojis",address_phone_invalid:"Enter a valid phone number",address_province_blank:"Select a state / province",address_province_invalid:"Select a valid state / province",address_suggestion_did_you_mean_html:"Did you mean %{html}?",address_zip_blank:"Enter a ZIP / postal code",address_zip_contains_emojis:"ZIP / postal code cannot contain emojis",address_zip_contains_mathematical_symbols:"ZIP / postal code cannot contain mathematical symbols",address_zip_invalid:"Enter a valid ZIP / postal code",address_zip_invalid_for_country:"Enter a valid ZIP / postal code for %{country}",address_zip_invalid_for_country_and_province:"Enter a valid ZIP / postal code for %{province}, %{country}",address_zip_invalid_for_province:"Enter a valid ZIP / postal code for %{province}",address_zip_not_supported:"This location isn't supported.",address_zip_too_long:"ZIP / postal code is too long (maximum is 255 characters)",credit_card_expiry_invalid:"Enter a valid expiration date",credit_card_month_invalid:"Enter a valid expiration month",credit_card_name_blank:"Enter your name exactly as it’s written on your card",credit_card_name_invalid:"Enter your name exactly as it’s written on your card",credit_card_number_blank:"Enter a card number",credit_card_number_invalid:"Enter a valid card number",credit_card_start_invalid:"Enter a valid card start date",credit_card_start_month_invalid:"Enter a valid card start month",credit_card_start_year_invalid:"Enter a valid card start year",credit_card_verification_value_blank:"Enter the CVV or security code on your card",credit_card_year_invalid:"Enter a valid expiration year",delivery_line_detail_changed:"Some delivery details may have changed. Verify your shipping method and try again.",delivery_zone_not_found:"The specified zone was not found in the specified country.",email_blank:"Enter an email",email_invalid:"Enter a valid email",email_or_phone_blank:"Enter an email or phone number",email_or_phone_invalid:"Enter a valid email or a mobile phone number",gift_card_already_applied:"This gift card has already been applied to your order",gift_card_buying_gift_card:"You can't use a gift card to buy another gift card",gift_card_currency_mismatch:"Only gift cards in %{checkout_currency} can be used with this order",gift_card_depleted:"This gift card has no funds left",gift_card_disabled:"This gift card is no longer available",gift_card_expired:"This gift card has expired",gift_card_invalid:'Gift card "••••%{last_four_characters}" is no longer valid',gift_cards_not_supported_with_deferred_purchase_options:"Gift cards are not supported with deferred purchase options.",handle_email_invalid:"Enter a valid email",handle_phone_invalid:"Enter a valid phone number",payment_gateway_incompatible_with_multi_currency:"To complete this checkout in your local currency, you need to pay by credit card.",payment_gateway_needs_paid_plan_error:"This payment method isn’t available on the store right now",payment_gateway_not_in_test_mode:"isn't setup to test orders. This store can't accept real orders or real payments.",payment_gateway_unsupported_for_country:"This payment method isn't available for your shipping country.",payment_gateway_unsupported_for_deferred_purchase_options:"This payment method isn't available for deferred purchase options.",payment_gateway_unsupported_for_development_store_html:'To place a test order, you’ll need to use a test payment gateway. Learn more about <a href="%{docs_link}">testing orders in development stores</a>.',payment_gateway_unsupported_for_order_above_maximum_orders_html:'You’ve reached the limit for development store orders with this payment processor. To place another order, you’ll need to use a test payment gateway. Learn more about <a href="%{docs_link}">testing orders in development stores</a>.',payment_gateway_unsupported_for_subscriptions:"This payment method isn't available for subscription orders.",phone_blank:"Enter a phone number",physical_gift_card_duplicate_code:"Physical gift card line item contains duplicate code.",physical_gift_card_invalid_code:"Physical gift card code is invalid.",physical_gift_card_invalid_quantity:"Physical gift card line items must have a quantity that matches the number of gift card codes.",purchase_options_agreement_blank:"To continue with your purchase, agree to the deferred or recurring purchase terms.",reduction_code_code_not_found:"Enter a valid discount code or gift card",reduction_code_discount_not_found:"Enter a valid discount code",reduction_code_gift_card_code_invalid:"Enter a valid gift card",reduction_code_gift_card_unusable:"You can’t use a gift card to buy another gift card",reduction_code_gift_cards_not_supported_with_deferred_purchase_options:"Gift cards are not supported with deferred purchase options.",shipping_line_phone_blank:"Enter a phone number to use this delivery method",shipping_line_phone_invalid:"Enter a valid phone number",sms_marketing_phone_invalid:"Enter a valid phone number",thank_you_remember_me_phone_invalid:"Enter a valid phone number",tips_invalid_tip_amount:"Enter a tip less than %{amount}",vaulting_agreement_blank:"To continue, you need to save your new credit card because payment for this order will happen at a later date."}));const i=function(e){const t=[];return e.forEach((e=>{e.field.forEach((n=>{t.push({[n]:e.message})}))})),JSON.stringify(t)}(e);t({schemaId:"shopify_pay_payment_page_address_sheet_error/1.1",payload:{errors:i}})}]}function Jl(e){switch(e){case"firstName":case"first_name":return"firstName";case"lastName":case"last_name":return"lastName";case"company":case"address1":case"address2":case"city":case"zoneCode":case"phone":return e;case"postalCode":case"zip":return"postalCode";case"countryCode":case"country":return"countryCode";default:throw new D.BS(`Failed to normalize Shop Pay address field: ${e}`)}}function Kl(e,t,n){const a=function(e,t){return Fl.includes(e)?$l.includes(t)?`address_${n=e,n.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`))}_${t}`:void 0:zl.includes(e)?Ul.includes(t)?`address_${e}_${t}`:void 0:Vl.includes(e)?Hl.includes(t)?`address_country_${t}`:void 0:Ol.includes(e)?jl.includes(t)?`address_province_${t}`:void 0:Wl.includes(e)?Yl.includes(t)?`address_phone_${t}`:void 0:ql.includes(e)&&Gl.includes(t)?`address_zip_${t}`:void 0;var n}(e,t);return a||(n.notify(new D.BS(`Failed to find translation key for fieldKey ${e} and errorCode ${t}. Falling back to generic address error`),{severity:"info"}),Xl.includes(t)?`address_generic_${t}`:"address_generic_error")}const eo=new Set([...El.I0]);function to(e){const{recordImmediately:t}=(0,oe.v)(),n=(0,xn.f)(void 0,e.addressType),r=(0,o.md)(xe.D.phoneNumber),l=(0,a.useRef)(!0),i=(0,o.QN)(),[,s]=Ql(e.addressErrors),[d]=(0,hl._c)(),{saveAddress:c}=(0,yl.T)(),u=(0,_e.nK)(),[m,p]=(0,o.fp)((0,ve.C)().shippingAddress),f=(0,kn.Z7)(m.countryCode,void 0,n),[y]=(0,hl.Df)(),{hasViolations:g,clearViolations:_}=(0,bl.Ck)(eo);(0,a.useEffect)((()=>{l.current?l.current=!1:_()}),[_,m]);const{checkPayUserAvailable:E,isPayUserAvailable:b}=(0,cr.M)();return _l((async()=>{if(y||d.length)return{success:!0};if(!E()){const t=f(m,"shipping");for(const[n,a]of t)i.write(e.addressErrors[n],a);return t.size>0?{success:!1,location:"intercept_shipping_address_has_errors"}:{success:!0}}const n=await c(m,"shipping_address",!0,!0);return t({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:Bl.NewShipping}}),"success"!==n.status?(s(n.errors),{success:!1,location:"intercept_shipping_address_add_new"}):{success:!0}})),n.isRequiredByMerchant("phone",m.countryCode)&&!m.phone&&p({...m,phone:r}),a.default.createElement(a.default.Fragment,null,g&&a.default.createElement(h.S,null,a.default.createElement(Pl,null),a.default.createElement(he.S,null)),u&&a.default.createElement(h.S,null,a.default.createElement(Al,null),a.default.createElement(he.S,null)),a.default.createElement(ul,(0,ye.A)({},e,{addressSettings:n})),!b&&a.default.createElement(Ll,{padding:["base","none","none","none"]}))}var no=n(97989),ao=n(45559);const ro="shipping";function lo({additionalFieldGroups:e,children:t,settings:n}){const{recordImmediately:r}=(0,oe.v)(),{shippingAddress:l}=(0,ve.C)(),o=(0,Pn.pW)(),{expanded:i,autocompleteDisabled:s,autocompleteAvailable:d,onAddressAutocomplete:c,onManualAddressEntryClick:u}=(0,kn.nZ)(l,wn.kx,ro),m=(0,ra.VH)({shopPay:to})??ul,p=(0,a.useCallback)((()=>{r({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:"address_autocomplete"}}),c()}),[r,c]),f=(0,ra.VH)({shopPay:p})??c,h=(0,ra.VH)({businessCustomer:(0,no.z4)(ro)})??void 0;return a.default.createElement(ao.y,{impressionType:"delivery_address",impressionFeatures:[]},a.default.createElement(m,{id:"shippingAddressForm",addressType:ro,address:l,countries:o,settings:n,expanded:i,collapsible:d,autocompleteDisabled:s,addressErrors:wn.kx,additionalFieldGroups:e,onAddressAutoComplete:f,onManualAddressEntryClick:u,onAutofillCaptured:c,addressSettings:h,showSavedAddressSelector:!1},t))}var oo=n(9719),io=n(35751),so=n(99610),co=n(94294),uo=n(36397),mo=n(57511),po=n(85762),fo=n(35780),ho=n(30511),yo=n(21744);function go(){const e=(0,o.QN)(),{directPaymentErrors:t}=(0,ve.C)();return(0,a.useCallback)(((n,a)=>{Object.values(n).every((e=>null==e))&&!a||(e.write(t.number,n.number?{message:n.number,origin:"client"}:void 0),e.write(t.name,n.name?{message:n.name,origin:"client"}:void 0),e.write(t.expiry,n.expiry?{message:n.expiry,origin:"client"}:void 0),e.write(t.issueDate,n.issue_date?{message:n.issue_date,origin:"client"}:void 0),e.write(t.issueNumber,n.issue_number?{message:n.issue_number,origin:"client"}:void 0),e.write(t.verificationValue,n.verification_value?{message:n.verification_value,origin:"client"}:void 0),e.write(t.general,void 0))}),[t,e])}function _o(){const e=(0,o.QN)(),{directPaymentErrors:t}=(0,ve.C)();return(0,a.useCallback)((()=>{e.write(t.number,void 0),e.write(t.name,void 0),e.write(t.expiry,void 0),e.write(t.issueDate,void 0),e.write(t.issueNumber,void 0),e.write(t.verificationValue,void 0),e.write(t.general,void 0)}),[t,e])}function Eo(){const{directPaymentErrors:e}=(0,ve.C)();return(0,o.ET)((t=>Object.keys(e).some((n=>null!=t(e[n])))))}var bo=n(53123),vo=n(98165),Co=n(96489);let So=function(e){return e.CompanyLocationShippingAddress="company_location_shipping_address",e.OneTimeShippingAddress="one_time_shipping_address",e.CompanyLocationBillingAddress="company_location_billing_address",e.OneTimeBillingAddress="one_time_billing_address",e}({});function ko(e){return So[`CompanyLocation${"shipping"===e?"Shipping":"Billing"}Address`]}function wo(e){return So[`OneTime${"shipping"===e?"Shipping":"Billing"}Address`]}Error;const Po=(0,Ht.MN)(void 0),Ao=(0,Ht.MN)(void 0);function Io(e){const t=`${e}Address`,n=(0,Ir.N)(),{suggestedAddress:r,suggestedAddressType:l}=(0,tn.uW)(),i=(0,ve.C)(),[s,d]=(0,o.fp)(i[t]),[c,u]=(0,o.fp)("shipping"===e?Po:Ao),[m,p]=(0,o.fp)((0,ve.C)().billingAddressOption);return(0,tn.qw)(e),(0,a.useMemo)((()=>{const t=("shipping"===e?n?.shippingAddress:r)??(0,Co.wI)(),a={address:t,id:ko(e)},o="shipping"===e?!(0,wn.eB)(t,s):"custom"===m;o&&u(s);const i={address:c,id:wo(e)};return{companyLocationAddressChoice:a,differentAddressChoice:i,selectedAddressChoiceId:o?i.id:a.id,setSelectedAddress:n=>{if("billing"===e&&l){const e=(0,wn.eB)(t,n);p(e?l:"custom")}d(n)},setOneTimeAddress:u}}),[e,n?.shippingAddress,r,s,m,c,u,l,d,p])}function xo(e){const{companyLocationAddressChoice:t,differentAddressChoice:n,selectedAddressChoiceId:a,setSelectedAddress:r,setOneTimeAddress:l}=Io(e);return{createAddress:async e=>(r(e),!0),deleteAddress:()=>!!t.address&&(l(void 0),r(t.address),!0),selectedAddressChoiceId:a,setSelectedAddress:r,addresses:new Map([t,...n.address?[n]:[]].map((({id:e,address:t})=>[e,t])))}}function Mo(e){return To.get(e)??e}const To=new Map([[fo.Y.Amex,"Amex"],[fo.Y.Bogus,"Bogus"],[fo.Y.CartesBancaires,"Cartes Bancaires"],[fo.Y.Dankort,"Dankort"],[fo.Y.DinersClub,"Diners Club"],[fo.Y.Discover,"Discover"],[fo.Y.Elo,"Elo"],[fo.Y.Forbrugsforeningen,"Forbrugsforeningen"],[fo.Y.Hypercard,"HyperCard"],[fo.Y.Interac,"Interac"],[fo.Y.Jcb,"JCB"],[fo.Y.Laser,"Laser"],[fo.Y.Maestro,"Maestro"],[fo.Y.Mastercard,"Mastercard"],[fo.Y.Rupay,"RuPay"],[fo.Y.Unionpay,"UnionPay"],[fo.Y.Visa,"Visa"],[fo.Y.Visaelectron,"Visa Electron"]]),No=y.OF.default(["fill"]).when({viewportInlineSize:{min:"small"}},["fill","fill"]).when({viewportInlineSize:{min:"medium"}},["fill"]).when({viewportInlineSize:{min:"large"}},["fill","fill"]);function Lo(){const e=(0,I.mu)(),t=e.value?.filter((e=>e.type===en.NK.CreditCard&&e.expired));return t?t.length:0}function Do(){const e=(0,vt.Bl)(),{hasSavedCreditCards:t}=(0,uo.Ny)();return!!e&&!!t}function Ro(){const e=(0,E.W)();return{getAccessibilityLabel:t=>{const n="direct"===t.type?t.creditCardLastFourDigits:t.displayLastDigits;return`${Mo(t.brand)} ${e("payment.saved_credit_card_info","Last four digits")} ${n}`}}}function Bo(){const{addresses:e,setSelectedAddress:t}=xo("billing"),[,n]=(0,o.fp)((0,ve.C)().acceptPaymentVaulting);return()=>{n(!1);const a=e.get(So.CompanyLocationBillingAddress);a&&t(a)}}function Fo(){const{storeVaultGuestCvvVerificationEnabled:e}=(0,P.q)(),t=(0,zr.a)(Vr.nP);return e||t}const zo=(0,Ht.MN)(void 0),Vo=(0,Ht.MN)(!1);function Oo(){const e=Do(),[t,n]=(0,o.fp)(zo),[a,r]=(0,o.fp)(Vo),{value:l}=(0,I.Dr)(),i=l?.lines?.find((e=>"direct"===e.method.type));return e&&!a&&i&&(r(!0),t||n(i.method)),(0,o.fp)(zo)}var Wo=n(15348),qo=n(31293),$o=n(45034),Uo=n(90992),Ho=n(40639);function jo(){const e=(0,E.W)(),t=(0,o.md)((0,ve.C)().purchaseOrderNumber);if(!t)return null;const n=`${e("payment.purchase_order_number.title","PO number")} #${t}`;return a.default.createElement(ln.V,null,n)}function Yo({children:e}){const t=(0,vt.Bl)(),n=t?"large100":"large500",r=t?void 0:"base",l=t?"subdued":void 0;return a.default.createElement(h.S,{background:l,border:r,cornerRadius:"base",padding:["large100",n]},a.default.createElement(Hn.a,{spacing:"small200",inlineAlignment:t?void 0:"center"},e))}function Go({children:e}){return a.default.createElement(h.S,{maxInlineSize:64,maxBlockSize:64,inlineSize:"fill",blockAlignment:"center",inlineAlignment:"center"},e)}function Xo({children:e}){const t=(0,vt.Bl)();return a.default.createElement(ln.V,{appearance:t?"subdued":void 0,inlineAlignment:t?void 0:"center"},e)}const Zo=e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"66 -30 151 80"},e),a.createElement("path",{fill:"inherit",stroke:"inherit",strokeWidth:2,d:"M73.8-18.2c-4.4.8-7.3 4.9-6.5 9.3l7.6 43.3c.8 4.3 4.9 7.3 9.3 6.5l59.7-10.5c3.3-.6 7.4-3.3 9.1-6.1l14.4-22.5c2.4-3.7 1.5-8.9-2-11.6L144.2-26c-2.6-2-7.4-3.2-10.7-2.6 0-.1-59.7 10.4-59.7 10.4z"}),a.createElement("circle",{cx:157.2,cy:-2.9,r:3.5,fill:"inherit",stroke:"inherit",strokeWidth:2}),a.createElement("path",{fill:"inherit",stroke:"inherit",strokeWidth:2,d:"m95.9 9.1 11.5 7.4 18-24.5m31.8 5.1c23.3-7.1 31.6 22.2 57.5-13.1"})),Qo={NoPaymentRequiredWrapper:"NCnSh",FreeTagIcon:"sZMJx"};function Jo({minimal:e,reason:t,vaulted:n}){const r=(0,E.W)(),l=(0,I.Dr)(),o=(l.value?.lines.filter((e=>"giftCard"===e.method.type))??[]).length,i=e=>{switch(e){case"giftCard":return r("payment.order_covered_by_gift_cards_notice",{count:o},{one:"Your order is covered by your gift card.",other:"Your order is covered by your gift cards."});case"freeOrder":return a.default.createElement("span",{dangerouslySetInnerHTML:{__html:r("payment.free_order_notice_html","Your order is <strong>free</strong>. No payment is required.")}});case"storeCredit":return r("payment.order_covered_by_store_credit_notice","Your order is covered by your store credit.");case"redeemables":return r("payment.order_covered_by_redeemables_notice","Your order is covered.");default:(0,Ho.xb)(e)}};return n?a.default.createElement(Hn.a,{padding:["small200","none","none","none"]},a.default.createElement(Uo.c,null,i(t)),a.default.createElement(jo,null)):e?a.default.createElement(Yo,null,a.default.createElement(Xo,null,i(t))):a.default.createElement("div",{className:Qo.NoPaymentRequiredWrapper},a.default.createElement(Hn.a,{spacing:"large200",inlineAlignment:"center"},a.default.createElement(Zo,{className:Qo.FreeTagIcon,focusable:"false","aria-hidden":"true"}),a.default.createElement(Xo,null,a.default.createElement(Uo.c,null,i(t)))))}var Ko=n(51310);function ei(e){return"name"in e?e.name:e.type}function ti(e,t){if(!e||!t||e.length!==t.length)return!1;if(e===t)return!0;const n=e.sort(((e,t)=>e.orderingIndex-t.orderingIndex));return t.sort(((e,t)=>e.orderingIndex-t.orderingIndex)).every(((e,t)=>{return(a=e)===(r=n[t])||!!a&&!!r&&(0,Ko.b)(ni(a),ni(r));var a,r}))}function ni(e){const t=ei(e),{type:n,orderingIndex:a}=e;return{type:n,name:t,orderingIndex:a}}const ai=e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",height:64,"aria-hidden":"true",viewBox:"0 0 78 78"},e),a.createElement("defs",null,a.createElement("mask",{id:"payment_svg__d",width:56.242,height:32.799,x:0,y:0,fill:"#fff"},a.createElement("use",{xlinkHref:"#payment_svg__a"})),a.createElement("mask",{id:"payment_svg__e",width:56.242,height:32.799,x:0,y:0,fill:"#fff"},a.createElement("use",{xlinkHref:"#payment_svg__b"})),a.createElement("mask",{id:"payment_svg__f",width:19.919,height:19.914,x:0,y:0,fill:"#fff"},a.createElement("use",{xlinkHref:"#payment_svg__c"})),a.createElement("rect",{id:"payment_svg__a",width:56.242,height:32.799,y:5.307,rx:4.5}),a.createElement("rect",{id:"payment_svg__b",width:56.242,height:32.799,x:5.327,rx:4.5}),a.createElement("ellipse",{id:"payment_svg__c",cx:33.637,cy:16.443,rx:9.959,ry:9.957})),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("g",{stroke:"#B3B3B3",strokeWidth:4,transform:"translate(1.38 29.486)"},a.createElement("use",{xlinkHref:"#payment_svg__a",fill:"#FAFAFA",mask:"url(#payment_svg__d)"}),a.createElement("use",{xlinkHref:"#payment_svg__b",fill:"#FAFAFA",mask:"url(#payment_svg__e)"}),a.createElement("use",{xlinkHref:"#payment_svg__c",mask:"url(#payment_svg__f)"})),a.createElement("g",{transform:"translate(49 16)"},a.createElement("circle",{cx:13.094,cy:13.094,r:13.094,fill:"#FAFAFA",stroke:"#B3B3B3",strokeWidth:2}),a.createElement("path",{stroke:"#B3B3B3",strokeWidth:2,d:"M13.094 4.676v11.36"}),a.createElement("circle",{cx:13.028,cy:20.108,r:1.403,fill:"#B3B3B3"}))));function ri({error:e}){const t=(0,E.W)(),n=(0,a.useMemo)((()=>{switch(e){case"configuration":return t("payment.not_configured_error","This store can’t accept payments right now.");case"technical":return t("payment.technical_error","Payments can’t be processed right now because of a technical issue. Try again in a few minutes.");case"no_methods":case"script":return t("payment.no_method_error","This store can’t accept payments right now.")}}),[e,t]);return a.default.createElement(h.S,{background:"subdued",cornerRadius:"base",padding:["large100","large100"]},a.default.createElement(Hn.a,{spacing:"small200",inlineAlignment:"center"},a.default.createElement(Go,null,a.default.createElement(ai,null)),a.default.createElement(ln.V,{appearance:"subdued",inlineAlignment:"center"},n)))}const li=(0,nr.R)("PaymentMethodsContext");function oi(){return(0,nr.i)(li)}function ii({children:e,billingAddressInContext:t,errorBannerInContext:n,selectedPaymentMethods:r}){const l=(0,a.useMemo)((()=>({billingAddressInContext:t,errorBannerInContext:n,selectedPaymentMethods:r})),[t,n,r]);return a.default.createElement(li.Provider,{value:l},e)}var si=n(13878),di=n(83745),ci=n(5561);function ui(){const[e,t]=(0,a.useState)(!0),{loginUrl:n}=(0,si.T4)(),r=(0,di.D)(),l=(0,Ir.N)(),o=(0,E.W)(),i=(()=>{switch(r){case ci.m:return o("payment_gateway.login_prompt.no_access.message",{logIn:a.default.createElement(J.N,{appearance:"monochrome",to:n},o("payment_gateway.login_prompt.no_access.link","Log in"))},"{{logIn}} to an account with access to this location to add or use saved payment methods.");case ci.F:case void 0:return null}})();return e&&r&&l&&i?a.default.createElement(an.l,{onDismiss:function(){t(!1)},status:r===ci.F?"success":"info"},i):null}var mi=n(19256),pi=n(55886),fi=n(58238);const hi={PaymentIcons:"wAAjh",morePaymentBrandsIcon:"cb5z9"};function yi({paymentBrands:e,activeIconDisplayed:t,activePaymentBrand:n}){return a.default.createElement(a.default.Fragment,null,e.map((e=>a.default.createElement(fi.k,{name:e,key:e,disabled:t&&n!==e,active:n===e}))))}function gi({paymentBrands:e,activePaymentBrand:t,maximum:n}){const r=(0,K.ts)(),l=(0,f.t)({base:3,small:4})??3;let o=n??l;r&&(o=2);const i=o<e.length-1?e.slice(0,o):e,s=o<e.length-1?e.slice(o):[],d=!!t&&Boolean(i.includes(t)),[c,u]=(0,a.useState)(!1);return a.default.createElement("div",{className:hi.PaymentIcons},a.default.createElement(ht.o,{spacing:"small400",blockAlignment:"center"},a.default.createElement(yi,{paymentBrands:i,activeIconDisplayed:d,activePaymentBrand:t}),o&&s.length>0&&a.default.createElement(Ne.o,{overlay:a.default.createElement(ol.m_,{id:"additional-payment-brand-icons"},a.default.createElement(ht.o,{spacing:"small400",blockAlignment:"center"},a.default.createElement(yi,{paymentBrands:s,activeIconDisplayed:d,activePaymentBrand:t}))),className:hi.morePaymentBrandsIcon,inlineAlignment:"center",blockAlignment:"center",accessibilityRole:"toggle",onPress:()=>{u(!c)},pressed:c},a.default.createElement(jn.E,{emphasis:"bold",size:"small",appearance:"accent"},"+"+(e.length-o)))))}var _i=n(77154);function Ei({forceVaultingEligible:e=!1,blockNegotiations:t=!1}={}){const n=(0,E.W)(),[r,l]=(0,a.useState)(!1),i=(0,Ir.N)(),s=(0,vo.O)(),{value:d}=(0,I.oo)(),[c,u]=(0,a.useState)(),{acceptPaymentVaulting:m}=(0,ve.C)(),[p,f]=(0,o.fp)(m),{name:h}=(0,P.q)(),y=(0,_e.OL)()||e;(0,Ce.D3)((({reason:e})=>(t&&"negotiation"===e||"negotiation"!==e)&&y&&(d||s)&&!p?{behavior:"block",reason:en.RE.BlankVaultingAgreement,perform(){u(n("field_errors.vaulting_agreement_blank","To continue, you need to save your new credit card because payment for this order will happen at a later date."))}}:"completion"!==e||y?{behavior:"allow"}:{behavior:"allow",perform(){u("")}}));const{merchantPolicies:g}=(0,P.q)(),_=g?.find((e=>"subscription-policy"===e.handle));return a.default.createElement(a.default.Fragment,null,a.default.createElement(Hn.a,{border:"base",borderRadius:"base",padding:"small100"},c?a.default.createElement(an.l,{status:"critical"},c):null,a.default.createElement(_i.S,{id:"vaulting_and_subscription_agreement",name:"vaulting_and_subscription_agreement",checked:function(){if(y)return p}(),onChange:e=>{!function(e){y&&f(e),u("")}(e)},error:c?" ":void 0},i?n("payment.business_customer_vaulting_payment_label",{company:h},"Save this card upon checkout and authorize %{company} to charge this card for future purchases for this location. Any customer assigned to this location will be authorized to use this card."):n("payment.vaulting_agreement_label",{company:h},"Save my payment information with %{company} for a faster checkout."))),_&&a.default.createElement(Va.a,{open:r,title:n("shop_policies.subscription_policy","Subscription policy"),source:_.url,onClose:()=>l(!1),padding:!0}))}const bi={Container:"vNgB_",WarningIcon:"pHWG5"},vi=e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 60 60"},e),a.createElement("g",{fillRule:"evenodd"},a.createElement("path",{d:"M30 60C13.43 60 0 46.57 0 30S13.43 0 30 0s30 13.43 30 30-13.43 30-30 30m0-2c15.464 0 28-12.536 28-28S45.464 2 30 2 2 14.536 2 30s12.536 28 28 28"}),a.createElement("path",{fillRule:"nonzero",d:"M30.134 48.856a2.5 2.5 0 0 0 0-5 2.5 2.5 0 0 0 0 5"}),a.createElement("rect",{width:2,height:27,x:29,y:11,rx:1})));class Ci extends Error{constructor(...e){super(...e),this.name="CardFieldsSDKLoadError"}}function Si(){const{errors:e}=(0,mi.Z)(),t=(0,E.W)(),n=(0,l.r)(),r=(0,Sn.W)();return(0,a.useEffect)((()=>{e.sdk&&r.notify(new Ci(e.sdk,{cause:e.sdk}))}),[e.sdk,r]),a.default.createElement("div",{className:bi.Container},a.default.createElement(vi,{className:bi.WarningIcon}),a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(ln.V,null,a.default.createElement("span",{dangerouslySetInnerHTML:{__html:t("payment.card_fields_unavailable_html.one",{current_url:n.currentUrl.toString()},'Credit and debit card payments aren’t available right now.<br><a href="%{current_url}">Refresh this page</a> or try again later.')}}))))}function ki(e){const{recordImmediately:t}=(0,oe.v)(),n=(0,xn.f)(),r=(0,o.md)(xe.D.phoneNumber),l=(0,o.QN)(),[,i]=Ql(e.addressErrors),{saveAddress:s,selectedAddress:d}=(0,yl.T)("billing_address"),[c,u]=(0,o.fp)((0,ve.C)().billingAddress),m=(0,o.md)((0,ve.C)().billingAddressOption),[p]=(0,hl.Df)(),f=(0,x.sG)(),h=(0,kn.Z7)(c?.countryCode,void 0,n),{checkPayUserAvailable:y}=(0,cr.M)();return _l((async()=>{if("shipping"===m&&p?.id===d?.id&&!f)return{success:!0};if("shipping"!==m&&p?.id!==d?.id)return{success:!0};if(!y()){const t=h(c,"billing");for(const[n,a]of t)l.write(e.addressErrors[n],a);return t.size>0?{success:!1,location:"intercept_billing_address_has_errors"}:{success:!0}}const n=await s(c,"billing_address",!0);return!p?.id&&f&&await s(c,"shipping_address"),t({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:Bl.NewBilling}}),"success"!==n.status?(i(n.errors),{success:!1,location:"intercept_billing_address_add_new"}):{success:!0}})),n.isRequiredByMerchant("phone")&&!c.phone&&u({...c,phone:r}),a.default.createElement(ul,(0,ye.A)({},e,{addressSettings:n}))}function wi({settings:e,children:t,additionalFieldGroups:n,addressSettings:r,inPaymentContext:l}){const i=(0,a.useMemo)((()=>(0,wn.iK)()),[]),s=(0,a.useMemo)((()=>(0,wn.ec)()),[]),{billingAddress:d,paymentLines:c}=(0,ve.C)(),[u]=(0,o.fp)(c),m=(0,Pn.AF)(),{expanded:f,autocompleteDisabled:h,autocompleteAvailable:y,onAddressAutocomplete:g,onManualAddressEntryClick:_}=(0,kn.nZ)(d,i),{shippingRequired:E}=(0,_e.kG)(),{resetAddressErrors:b}=(0,kn.qo)(i),{resetAddressSuggestions:v}=(0,kn.qU)(s,i),C=(0,gn.WP)(),S=r??C,k=(0,o.QN)(),w=(0,ra.VH)({shopPay:ki})??ul,{negotiate:P}=(0,p.T4)();(0,Kt.Ki)(d,(()=>{k.write(d.fields.postalCode,void 0),k.write(d.fields.zoneCode,void 0),k.write(d.fields.city,void 0),k.write(d.fields.address1,void 0),k.write(d.fields.address2,void 0),b(),v(),P(void 0,{include:["billingAddress"],silenceValidations:!0,silenceViolations:["all"],progression:!1})}));const A="wallet"===u[0]?.method?.type;return a.default.createElement(a.default.Fragment,null,a.default.createElement(w,{id:"billingAddressForm",addressType:"billing",addressErrors:i,address:d,countries:m,settings:e,expanded:f,autocompleteDisabled:h,collapsible:y,additionalFieldGroups:n,inPaymentContext:l,onAddressAutoComplete:g,onManualAddressEntryClick:_,onAutofillCaptured:g,addressSettings:S,shouldSkipAddressValidation:A},t),!E&&a.default.createElement(Pi,{addressErrors:i,addressSuggestions:s}))}function Pi({addressErrors:e,addressSuggestions:t}){return function(e,t){const{negotiate:n,blocked:r}=(0,p.T4)(),l=(0,a.useRef)(),{billingAddress:i}=(0,ve.C)(),s=(0,o.md)(i),{billingCountries:d}=(0,Pn.fy)(),c=(0,kn.Z7)(s.countryCode,d),{setAddressError:u,resetAddressErrors:m}=(0,kn.qo)(e),{resetAddressSuggestions:f}=(0,kn.qU)(t,e),h=(0,a.useRef)(!1),[y]=(0,or.$v)(),g=(0,a.useMemo)((()=>c(s)),[s,c]),_=(0,a.useMemo)((()=>0===g.size),[g]);(0,a.useEffect)((function(){h.current||_&&(h.current=!0)}),[_]),(0,a.useEffect)((function(){if(h.current&&!_)for(const[e,t]of g.entries())u(e,t)}),[_,g,m,f,u]),(0,a.useEffect)((function(){r||!_||y||l.current&&(0,wn.o)(l.current,s)||(l.current=s,m(),f(),n(void 0,{include:["billingAddress"],silenceValidations:!0,silenceViolations:["non-stock"],onComplete:e=>{if(("success"===e.status||"error"===e.status)&&"violations"in e){const t=(0,wn.oD)("billing_address",e.violations);for(const[e,n]of t)u(e,n)}}}))}),[r,n,_,s,m,f,u,y])}(e,t),null}function Ai(){const e=(0,E.W)(),t=(0,tn.ro)(),[n,r]=(0,o.fp)((0,ve.C)().billingAddressOption),[l,i]=(0,o.fp)((0,ve.C)().billingAddress),[s]=(0,o.fp)((0,ve.C)().shippingAddress);return(0,tn.BY)(),a.default.createElement(h.S,null,"selector"===t?a.default.createElement(_i.S,{id:"billingAddress",name:"billingAddress",checked:"shipping"===n,onChange:e=>{i({...l,countryCode:s.countryCode}),r(e?"shipping":"custom")}},e("payment.same_billing_address_checkbox_label","Use shipping address as billing address")):null,a.default.createElement(yt.e,{id:"billingAddressDetails",open:"shipping"!==n},a.default.createElement(he.S,{spacing:"large300"}),a.default.createElement(fe.D,{level:2},e("payment.billing_address_title","Billing address")),a.default.createElement(he.S,null),a.default.createElement(wi,{inPaymentContext:!0})))}var Ii=n(87980),xi=n(78208),Mi=n(66585),Ti=n(39334),Ni=n(70083),Li=n(35699),Di=n(29551),Ri=n(79273),Bi=n(90879);const Fi="1.35rem",zi="1.1rem",Vi="2.05rem",Oi="0.55rem";function Wi(){const{textField:{blockPadding:e,inlinePadding:t}}=(0,ta.x)(),n=(0,a.useRef)(),[r,l]=(0,a.useState)({padding:{default:(0,pi.S)(`${Fi} ${zi}`),floating:(0,pi.S)(`${Vi} ${zi} ${Oi}`)}}),o=(0,a.useCallback)((e=>{if(e&&(n.current=e),!n.current)return;const t=getComputedStyle(n.current),a=t.getPropertyValue("--empty-padding-block").trim(),r=t.getPropertyValue("--filled-padding-block-start").trim(),o=t.getPropertyValue("--filled-padding-block-end").trim(),i=t.getPropertyValue("--padding-inline").trim();l({padding:{default:(0,pi.S)(`${a} ${i}`),floating:(0,pi.S)(`${r} ${i} ${o}`)}})}),[]);return(0,a.useEffect)((()=>{setTimeout((()=>{o(void 0)}),0)}),[e,t]),[r,o]}var qi=n(3231);function $i({placeholder:e,label:t,name:n,initialValue:r,onChange:l,themeStyles:i,onBlur:s=(()=>{})}){const{filled:d,focusedField:c,sdk:u,loading:m}=(0,mi.Z)(),{onBlur:f,onFocus:h,floating:y}=(0,qi.Z)(),g=(0,X.y7)(),_=(0,G._p)(),E=(0,X.m9)(),[b,v]=(0,a.useState)(c===n),C="string"==typeof r&&r.trim().length>0,{currentFocus:S}=(0,p.Wm)(),k=(0,o.QN)(),w=e??t;return(0,a.useEffect)((function(){if(c===n){E("payment"),h(),v(!0);const e=k.read(S).value;k.write(S,"payment"),"payment"!==e&&(g("sectionInteraction",{section:"payment",timestamp:new Date}),_({type:"section_interaction",section:"payment"}))}else b&&(s(),f(),E("payment"),g("change",{element:{tagName:"INPUT",type:"text",label:n},section:"payment",timestamp:new Date}),v(!1))}),[g,E,S,c,b,t,n,s,f,h,u,k,_]),(0,a.useEffect)((function(){d[n]?(l(!1),u.setPlaceholderContent(n,""),E("payment")):l(!0)}),[d,n,l,u,E]),(0,a.useEffect)((function(){u.setTranslation(n,t)}),[n,t,u]),(0,a.useEffect)((function(){y?(u.setPlaceholderContent(n,""),u.setStyles({field:n,styles:{padding:i.padding.floating}})):(u.setPlaceholderContent(n,w),u.setStyles({field:n,styles:{padding:i.padding.default}}))}),[y,w,n,i,u,m]),{hasInitialValue:C,isFilled:d[n]}}const Ui={LoadingContainer:"uG6K1",ready:"DOldf",LoadingSlider:"IesQp",loadingLTR:"nW1m7",loadingRTL:"VEAIY"};function Hi({ready:e}){const[t,n]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{e||n(!0)}),[e]),t?a.default.createElement("div",{className:_()(Ui.LoadingContainer,{[Ui.ready]:e}),onTransitionEnd:()=>n(!1)},a.default.createElement("div",{className:Ui.LoadingSlider})):null}const ji={CardFieldWrapper:"oT32G","CardFieldWrapper-backgroundTransparent":"AVQyG","CardFieldWrapper-backgroundBase":"B46er","CardFieldWrapper-borderNone":"Cy1vj","CardFieldWrapper-focusBorderFull":"IbLRo",isFocused:"BNplB",hasError:"wNZLk","CardFieldWrapper-focusBorderBlockEnd":"BkjB4","CardFieldWrapper-borderFull":"Xkh0E","CardFieldWrapper-borderBlockEnd":"doyK9"},Yi=a.default.forwardRef((({hidden:e,background:t,border:n,focusBorder:r,error:l,focused:o,loading:i,children:s},d)=>a.default.createElement("div",{"data-protected-input":!0,ref:d,hidden:e,className:_()(ji.CardFieldWrapper,t&&ji[(0,dt.N)("CardFieldWrapper-background",t)],"base"===t&&(0,ct.Fo)({colorLayer:"control"}),n&&ji[(0,dt.N)("CardFieldWrapper-border",n)],r&&ji[(0,dt.N)("CardFieldWrapper-focusBorder",r)],{[ji.hasError]:Boolean(l),[ji.isFocused]:o}),"aria-busy":i||void 0},s))),Gi={CardField:"xIN8V","CardField-hasAccessory":"F8weU",Accessory:"P7KAT","Error-errorIndentationToText":"iQfdJ"};function Xi({accessory:e,background:t,border:n,error:r,focusBorder:l,focused:o,hidden:i,label:s,loading:d,name:c,placeholder:u,onChange:m}){const p=(0,E.W)(),{sdk:f}=(0,mi.Z)(),h=u??s,y=(0,v.Xn)({active:Boolean(r)}),[g,b]=Wi(),C=(0,a.useCallback)((e=>{e&&b(e)}),[b]);$i({placeholder:u,label:s,name:c,themeStyles:g,onChange:m});const S={hidden:i,background:t,border:n,focusBorder:l,loading:d,error:r,focused:o};return a.default.createElement(Yi,(0,ye.A)({},S,{ref:C}),a.default.createElement("div",{ref:y,className:_()(Gi.CardField,{[Gi["CardField-hasAccessory"]]:Boolean(e)}),id:c,"data-card-fields":c,"data-card-field-placeholder":h,"data-card-field-prefix":p("payment.card_fields_container_prefix","Field container for:"),tabIndex:-1,onFocus:()=>{f.setFocus(c)}}),e&&a.default.createElement("div",{className:Gi.Accessory},e),a.default.createElement(Hi,{ready:!d}))}const Zi={Wrapper:"apbd6",ClearButton:"f4qJz",Flex:"COPYR",CardField:"B_pnJ","CardField-hasAccessory":"fBNHD"};function Qi(e){const{error:t,label:n,name:r,initialValue:l}=e,{control:{background:o="base",border:i,labelPosition:s="inside"},textField:{border:d,focusBorder:c="full",errorIndentation:u,errorTypographyStyle:m}}=(0,ta.x)(),p=d||i||"full",[f,h]=(0,a.useState)(!l),y=(0,a.useCallback)((e=>h(e)),[]),g={...e,background:o,border:p,focusBorder:c,onChange:y};return a.default.createElement("div",{className:_()(Zi.Wrapper,Ri.z["outside"===s?"labelOutside":"labelInside"],Ri.$[o],"base"===o&&"inside"===s&&(0,ct.Fo)({colorLayer:"control"}))},a.default.createElement(Bi.k,{label:n,htmlFor:r,empty:f,position:s},"name"===r?a.default.createElement(Ji,(0,ye.A)({},g,{initialValue:l})):a.default.createElement(Xi,g)),t&&a.default.createElement("span",{className:_()(u&&Zi[(0,dt.N)("Error-errorIndentation",u)],m&&ga.A[m])},a.default.createElement(_a.W,{controlID:r},t)))}function Ji({name:e,label:t,placeholder:n,error:r,loading:l,focused:o,hidden:i,background:s,border:d,focusBorder:c,initialValue:u,allowClear:m,onChange:p}){const f=(0,E.W)(),{setFilled:h,filled:y,sdk:g,touched:b}=(0,mi.Z)(),C=n??t,[S,k]=(0,a.useReducer)((()=>!0),!1),[w,P]=(0,a.useReducer)(((t,n)=>{switch(n.type){case"buyerModifiedField":return!S&&b.name&&k(),{status:"modified"};case"setInitialValue":return"modified"===t.status?t:n.value&&n.value.trim().length>0?(R(),{status:"prefilled",value:n.value}):{status:"empty"};case"prefillValueChanged":return"modified"===t.status?t:n.value&&n.value.trim().length>0?(B(n.value),{status:"prefilled",value:n.value}):(F(),{status:"empty"});case"clearField":return k(),F(),g.setFocus(e),{status:"modified"}}}),{status:"empty"}),A=(0,a.useCallback)((()=>{P({type:"buyerModifiedField"})}),[]),I=(0,v.Xn)({active:Boolean(r)}),[x,M]=Wi(),T=(0,a.useCallback)((e=>{e&&M(e)}),[M]),N=(0,a.useCallback)((e=>{o&&!e&&P({type:"buyerModifiedField"}),p(e)}),[p,o]),{hasInitialValue:L,isFilled:D}=$i({placeholder:n,label:t,name:e,initialValue:u,themeStyles:x,onChange:N,onBlur:A}),R=(0,a.useCallback)((()=>{h("name"),p(!1),g.setPlaceholderContent(e,""),g.setStyles({field:e,styles:{padding:x.padding.floating}})}),[e,g,x,h,p]),B=(0,a.useCallback)((e=>{g.setValue("name",e),g.setErrors({name:null}),R()}),[g,R]),F=(0,a.useCallback)((()=>{p(!0),g.clearField(e),g.setPlaceholderContent(e,C),g.setStyles({field:e,styles:{padding:x.padding.default}})}),[p,g,C,e,x]),[z,V]=(0,a.useState)(u);u!==z&&(P({type:"prefillValueChanged",value:u}),V(u)),"empty"===w.status&&L&&!y[e]&&P({type:"setInitialValue",value:u});const O=(0,a.useCallback)((()=>{P({type:"clearField"})}),[]),W={hidden:i,background:s,border:d,focusBorder:c,loading:l,error:r,focused:o},q=D&&m&&!S;return a.default.createElement(Yi,(0,ye.A)({},W,{ref:T}),a.default.createElement("div",{className:_()(Zi.CardField,{[Zi["CardField-hasAccessory"]]:q}),id:e,"data-card-fields":e,"data-card-field-placeholder":C,"data-card-field-prefix":f("payment.card_fields_container_prefix","Field container for:"),"data-card-field-name-initial-value":u,ref:I,tabIndex:-1,onFocus:()=>{g.setFocus(e)}}),q&&a.default.createElement(Ki,{onPress:O}),a.default.createElement(Hi,{ready:!l}))}function Ki({onPress:e}){const t=(0,E.W)();return a.default.createElement("div",{className:Zi.ClearButton},a.default.createElement("div",{className:Zi.Flex},a.default.createElement(He.$,{kind:"plain",accessibilityLabel:t("payment.clear","Clear"),onPress:e},a.default.createElement(h.S,{blockAlignment:"center"},a.default.createElement(Le.In,{source:"close"})))))}function es({icon:e,children:t,controlLabel:n}){return a.default.createElement(Ne.o,{overlay:a.default.createElement(ol.m_,null,t)},a.default.createElement(Le.In,{source:e||"question",accessibilityLabel:n}))}const ts={HostedFields:"jNSGe"};class ns extends Error{constructor(...e){super(...e),this.name="HostedFieldsTimeoutError"}}const as={base:"base",loose:"loose",xloose:"xLoose"},rs=new Map([["title","capitalize"],["upper","uppercase"],["lower","lowercase"],["none","none"]]);function ls({cardBrands:e,prefillCardholderName:t=!1,customHostedFields:n,cvvOnly:r=!1,isSelected:l}){const i=(0,vt.Bl)(),s=(0,E.W)(),d=(0,b.Y)(),c=(0,kn.vW)(),u=["ja","ja-jp"].includes(d.toLowerCase()),m=t&&!u?c:void 0,f=(0,a.useRef)(null),h=e.includes(fo.Y.Maestro),y=(0,Sn.W)(),{loading:g,focusedField:_,cardBrand:v,sdk:C,errors:S,subscribe:k,unsubscribe:w,emptyFields:P}=(0,mi.Z)(),A=v?(0,pi.d)(v):void 0,I=h&&A===fo.Y.Maestro,x=function(){const{directPaymentErrors:e}=(0,ve.C)();return(0,o.ET)((t=>Object.keys(e).reduce(((n,a)=>({...n,[a]:t(e[a])})),{})))}(),{global:M,control:{background:T="base"},textField:{typography:N},colors:L,typographyPrimary:D,typographySecondary:R}=(0,ta.x)(),{customProperties:B}=(0,ta.D)(),F=(0,Di.ot)(),z=(0,X.Di)(),V={extraSmall:B.fontSize?.extraSmall??na.L.fontSize.extraSmall,small:B.fontSize?.small??na.L.fontSize.small,base:B.fontSize?.base??na.L.fontSize.base,medium:B.fontSize?.medium??na.L.fontSize.medium,large:B.fontSize?.large??na.L.fontSize.large,extraLarge:B.fontSize?.extraLarge??na.L.fontSize.extraLarge,extraExtraLarge:B.fontSize?.extraExtraLarge??na.L.fontSize.extraExtraLarge},{main:{colorScheme:O="scheme1"},canvas:{colorScheme:W}}=(0,bt.kV)(),q="inherit"===O?L?.schemes?.[W]:L?.schemes?.[O],{paymentLines:$}=(0,ve.C)(),U=(0,o.md)($),H=N?.fonts,j=H?{primary:D.fonts,secondary:R.fonts}[H]:D.fonts,G=(0,Ii.b)(j)??na.L.fontFamily.base;let Z,Q;if("transparent"===T){const e=f.current&&getComputedStyle(f.current);Z=e?.getPropertyValue("--x-default-color-text"),Q=e?.getPropertyValue("--x-default-color-text-subdued")}else Z=q?.control?.text?.toRgb()??(0,xi.$m)(q?.control,"text")?.toRgb(),Q=(0,xi.f9)(q?.control,"text")?.toRgba();const J=Z??na.L.color.default.text,K=Q??na.L.color.default.textSubdued,ee=(0,pi.S)(V[N?.size??"base"]),te=na.L.lineHeight.base,ne=na.L.letterSpacing[as[N?.kerning??"base"]],ae=N?.decoration??"none",re="transparent"===T?(0,xi.f9)(q?.base,"text")?.l:(0,xi.f9)(q?.control,"text")?.l,le=re?Math.max(1,Math.min(50,Math.floor(.8475*(re-20)))):22,oe=N?.letterCase??M.typographyLetterCase,ie=oe?rs.get(oe):rs.get("none"),se=(0,a.useMemo)((()=>({"placeholder-lightness":`${le}`,"font-family":G,"font-size":ee,"letter-spacing":ne,"line-height":te,color:J,"text-decoration":ae,"text-transform":ie,"placeholder-color":K})),[le,G,ee,ne,te,J,K,ae,ie]),de=(0,a.useMemo)((()=>({transition:"padding .2s ease-out"})),[]),ce=(0,a.useMemo)((()=>{const e=[];return D?.sourceBase&&D?.fonts&&e.push({name:D.fonts,source:D.sourceBase}),R?.sourceBase&&R?.fonts&&e.push({name:R.fonts,source:R.sourceBase}),e}),[D,R]),ue=(0,Ni.S)();(0,a.useLayoutEffect)((()=>{let e,t=!1;function n(n){!t&&e&&(t=!0,ue.distribution(Li.J.HostedFieldsLoadingDuration,{value:(0,Y.tB)()-e,tags:{isTimeout:n}}))}let a,r=!1;function l(){r=!0}return window.addEventListener("blur",l,{once:!0}),async function(){f.current&&(k(),await C.setup(f.current,{styles:{...se},translations:{name:s("payment.name_on_card_placeholder","Name on card"),number:s("payment.card_number_placeholder","Card number"),expiry:s("payment.card_expiry_placeholder","Expiration date (MM / YY)"),verification_value:s("payment.card_verification_value_placeholder","Security code"),issue_date:s("payment.card_start_placeholder","Issue date (MM / YY)"),issue_number:s("payment.card_issue_number_placeholder","Issue number")},fonts:{local:ce},errorMessages:{name:s("field_errors.credit_card_name_invalid","Enter your name exactly as it’s written on your card"),number:s("field_errors.credit_card_number_invalid","Enter a valid card number"),number_blank:s("field_errors.credit_card_number_blank","Enter a card number"),expiry:s("field_errors.credit_card_expiry_invalid","Enter a valid expiration date"),verification_value:s("field_errors.credit_card_verification_value_blank","Enter the CVV or security code on your card"),issue_date:s("payment.card_fields.errors.required.issue_date","Enter a valid issue date"),issue_number:s("payment.card_fields.errors.required.issue_number","Enter a valid issue number")},validationSetting:"mixed"},(()=>{e=(0,Y.tB)(),a=setTimeout((()=>{n(!0),y.notify(new ns,{metadata:{hostedFields:{buyerLeftBrowsingContext:r}}})}),25e3)})),clearTimeout(a),n(!1))}(),()=>{window.removeEventListener("blur",l),clearTimeout(a)}}),[f,k,C,se,s,ce,ue,y,d]),(0,a.useEffect)((()=>()=>{w(),P(),C.teardown()}),[w,P,C]),(0,a.useEffect)((()=>{g||(C.setStyles({styles:{...de,...se}}),ce.length&&C.loadFonts({local:ce}))}),[g,de,se,C,ce]),(0,a.useEffect)((()=>{const e={name:x.name?s("field_errors.credit_card_name_invalid","Enter your name exactly as it’s written on your card"):null,number:function(e){return e?.number?"server"===e.number.origin?s("field_errors.credit_card_number_invalid","Enter a valid card number"):e.number.message:null}(x),expiry:x.expiry?s("field_errors.credit_card_expiry_invalid","Enter a valid expiration date"):null,verification_value:x.verificationValue?s("field_errors.credit_card_verification_value_blank","Enter the CVV or security code on your card"):null,issue_date:x.issueDate?s("payment.card_fields.errors.required.issue_date","Enter a valid issue date"):null,issue_number:x.issueNumber?s("payment.card_fields.errors.required.issue_number","Enter a valid issue number"):null};C.setErrors(e)}),[C,s,x]),(0,a.useEffect)((()=>{const{number:e,name:t,expiry:n,verificationValue:a}=x;if(x?.number||x?.name||x?.expiry||x?.verificationValue){const r={number:e?.message,name:t?.message,expiry:n?.message,verification_value:a?.message};F.log(Ti.$.Info,"[Hosted Fields] Payment blocked due to validation errors",{...z,cardFieldErrorLogs:r,origin:"progression"})}}),[x,z,F]),(0,a.useEffect)((()=>{if(S.number){const e={number:S.number};F.log(Ti.$.Info,"[Hosted Fields] Payment blocked due to validation errors",{...z,cardFieldErrorLogs:e,origin:"inline"})}}),[S.number,z,F]),(0,a.useEffect)((()=>{if(S.expiry){const e={expiry:S.expiry};F.log(Ti.$.Info,"[Hosted Fields] Payment blocked due to validation errors",{...z,cardFieldErrorLogs:e,origin:"inline"})}}),[S.expiry,z,F]),(0,a.useEffect)((()=>{if(S.verification_value){const e={verification_value:S.verification_value};F.log(Ti.$.Info,"[Hosted Fields] Payment blocked due to validation errors",{...z,cardFieldErrorLogs:e,origin:"inline"})}}),[S.verification_value,z,F]),(0,a.useEffect)((()=>{if(S.name){const e={name:S.name};F.log(Ti.$.Info,"[Hosted Fields] Payment blocked due to validation errors",{...z,cardFieldErrorLogs:e,origin:"inline"})}}),[S.name,z,F]);const me=U.some((e=>"direct"===e.method.type)),pe=null==l?me:l;(0,p.t8)({active:pe&&(g||Boolean(S.sdk))});const fe=e=>!!n&&!n.includes(e),he=a.default.createElement("div",{hidden:fe("name")},a.default.createElement(Qi,{name:"name",label:s("payment.name_on_card_label","Name on card"),placeholder:s("payment.name_on_card_placeholder","Name on card"),loading:g,focused:"name"===_,error:S.name,initialValue:m,allowClear:t,hidden:fe("name")})),ye=a.default.createElement("div",{hidden:fe("expiry")},a.default.createElement(Qi,{name:"expiry",label:s("payment.card_expiry_label","Expiration date (MM / YY)"),placeholder:s("payment.card_expiry_placeholder","Expiration date (MM / YY)"),loading:g,focused:"expiry"===_,error:S.expiry,hidden:fe("expiry")})),ge=a.default.createElement("div",{hidden:fe("issue_date")},a.default.createElement(Qi,{name:"issue_date",label:s("payment.card_start_label","Issue date (MM / YY)"),placeholder:s("payment.card_start_placeholder","Issue date (MM / YY)"),hidden:!I||fe("issue_date"),error:S.issue_date})),_e=a.default.createElement("div",{hidden:fe("issue_number")},a.default.createElement(Qi,{name:"issue_number",label:s("payment.card_issue_number_label","Issue number"),placeholder:s("payment.card_issue_number_placeholder","Issue number"),hidden:!I||fe("issue_number"),error:S.issue_number})),Ee=a.default.createElement("div",{hidden:fe("verification_value")},a.default.createElement(Qi,{name:"verification_value",label:s("payment.card_verification_value_label","Security code"),placeholder:s("payment.card_verification_value_placeholder","Security code"),loading:g,focused:"verification_value"===_,error:S.verification_value,accessory:a.default.createElement(es,{controlLabel:s("general.tooltip_accessibility_label","More information")},A?A===fo.Y.Amex?s("payment.card_verification_value_explanation_amex","4-digit security code on the front of your card"):s("payment.card_verification_value_explanation_other","3-digit security code on the back of your card"):s("payment.card_verification_value_explanation","3-digit security code usually found on the back of your card. American Express cards have a 4-digit code located on the front.")),hidden:fe("verification_value")}));if(r)return a.default.createElement("div",{ref:f,className:ts.HostedFields},Ee,a.default.createElement(Qi,{name:"name",hidden:!0,label:s("payment.name_on_card_label","Name on card")}),a.default.createElement(Qi,{name:"number",hidden:!0,label:s("payment.card_number_label","Card number")}),a.default.createElement(Qi,{name:"expiry",hidden:!0,label:s("payment.card_expiry_label","Expiration date (MM / YY)")}),a.default.createElement(Qi,{name:"issue_date",hidden:!0,label:s("payment.card_start_label","Issue date (MM / YY)")}),a.default.createElement(Qi,{name:"issue_number",hidden:!0,label:s("payment.card_issue_number_label","Issue number")}));const be=n&&1===n.filter((e=>"expiry"===e||"verification_value"===e)).length,Ce=n&&1===n.filter((e=>"issue_date"===e||"issue_number"===e)).length;return a.default.createElement("div",{ref:f,className:ts.HostedFields},a.default.createElement(Mi.H,null,a.default.createElement(Qi,{name:"number",label:s("payment.card_number_label","Card number"),placeholder:s("payment.card_number_placeholder","Card number"),loading:g,focused:"number"===_,error:S.number,accessory:a.default.createElement(Le.In,{source:"lock"})}),!i&&he,be?a.default.createElement(a.default.Fragment,null,ye,Ee):a.default.createElement(Mi.g,null,ye,Ee),a.default.createElement("div",{hidden:!I},Ce?a.default.createElement(a.default.Fragment,null,ge,_e):a.default.createElement(Mi.g,null,ge,_e)),i&&he))}const os=(0,a.createContext)({});var is=n(25787);function ss({settings:e,additionalFieldGroups:t,customAddressSettings:n}){const r=(0,a.useContext)(os),l=(0,a.useMemo)((()=>r?.addressErrors||(0,wn.iK)()),[r?.addressErrors]),o=(0,Pn.AF)(),i=(0,Pn.Z5)(),{billingAddress:s}=(0,ve.C)(),d=(0,gn.WP)(),c=(0,Ir.N)(),u=(0,no.z4)(),m=(0,is.Jj)(),p=(0,Ut.o)(),f=p?i:o,{updateCountryCodeForSPIBillingAddress:h}=(0,is.mr)(s.fields.countryCode,f),y=n||c?u:r?.addressSettings||d;return(0,a.useEffect)((()=>{p&&m.supported&&m.paymentMethodSelected&&h()}),[p,m.paymentMethodSelected,m.supported,h]),a.default.createElement(ul,{id:"billingAddressForm",addressType:"billing",addressErrors:l,address:s,countries:f,settings:e,additionalFieldGroups:t,addressSettings:y})}const ds={hiddenFields:["phone","company","firstName","lastName"],multiline:!1};function cs(){const e=(0,E.W)(),t=(0,tn.lI)(),{suggestedAddress:n,suggestedAddressType:r}=(0,tn.uW)(),{selectedAddressChoiceId:l,setSelectedAddress:i}=xo("billing"),[s]=(0,o.fp)((0,ve.C)().shippingAddress);(0,tn.BY)(),(0,tn.Vr)();const d=l===ko("billing"),c=(0,kn.IL)(n,ds),u="billing-fact"===r?e("payment.use_order_billing_address_label","Use order billing address"):"billing"===r?e("payment.use_location_billing_address_label","Use location billing address"):"shipping"===r?e("payment.use_location_shipping_address_label","Use location shipping address"):void 0;return a.default.createElement(h.S,null,"selector"===t?a.default.createElement(_i.S,{id:"billingAddress",name:"billingAddress",checked:d,onChange:e=>{i(e&&n&&r?n:(0,Co.wI)({countryCode:s.countryCode}))}},u,a.default.createElement(ln.V,{appearance:"subdued"},c)):null,null!==t&&a.default.createElement(yt.e,{id:"billingAddressDetails",open:void 0===r||!d},a.default.createElement(he.S,{spacing:"large300"}),a.default.createElement(fe.D,{level:2},e("payment.billing_address_title","Billing address")),a.default.createElement(he.S,null),a.default.createElement(ss,null)))}const us=e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",width:102,height:52,viewBox:"-270.8 371 102 52"},e),a.createElement("path",{fill:"none",stroke:"inherit",strokeMiterlimit:10,strokeWidth:2,d:"M-182 404v16.8c0 .7-.4 1.2-1 1.2h-75.7c-.7 0-1.2-.6-1.2-1.2v-47.6c0-.7.6-1.2 1.2-1.2h75.7c.7 0 1 .6 1 1.2V395m-78-14h78m-17 18h27m-3.9-4.6 4.5 4.6-4.5 4.6"}),a.createElement("circle",{cx:-255.5,cy:376.5,r:1.5,fill:"inherit"}),a.createElement("circle",{cx:-250.5,cy:376.5,r:1.5,fill:"inherit"}),a.createElement("circle",{cx:-245.5,cy:376.5,r:1.5,fill:"inherit"})),ms={Container:"dAspG",OffsiteIcon:"WUuOf"};function ps(){const e=(0,E.W)();return a.default.createElement("div",{className:ms.Container},a.default.createElement(Hn.a,{spacing:"large200"},a.default.createElement(us,{className:ms.OffsiteIcon}),a.default.createElement(ln.V,null,e("payment.no_js_credit_card_fields_redirect_hint","You will be redirected to add your payment information."))))}var fs=n(46966),hs=n(11834),ys=n(29047);function gs({id:e,brand:t,displayLastDigits:n,details:r,onEdit:l,onDelete:o,requiresVerification:i}){const s=(0,E.W)(),{closeOverlay:d}=(0,fs.e)(),c=Mo(t),u=`${c} ${s("payment.masked_digits_label",{last_digits:n},"•••• %{last_digits}")}`,m=`${c} • ${n}`,p=()=>{o&&o(e),d("actions-overlay")};return a.default.createElement(Hn.a,{spacing:"small500"},a.default.createElement(rn.C,{columns:["auto","fill","auto"],spacing:"small300",blockAlignment:"center"},a.default.createElement(fi.k,{name:t}),a.default.createElement(ln.V,null,a.default.createElement(jn.E,null,i?m:u)),!l&&o?a.default.createElement(Ne.o,{onPress:p},a.default.createElement(Le.In,{source:"delete",appearance:"subdued",size:"small",accessibilityLabel:s("payment.delete_credit_card_modal.title","Delete card")})):null,a.default.createElement(rn.C,null,i?a.default.createElement(Le.In,{source:"warning",appearance:"subdued",size:"small"}):null,l?a.default.createElement(Ne.o,{overlay:a.default.createElement(hs.A,{connector:"none",padding:"base",offset:10,id:"actions-overlay"},a.default.createElement(ys.g,{spacing:"base",inlineAlignment:"start"},l&&a.default.createElement(He.$,{kind:"plain",textDecoration:"none",onPress:()=>{l(),d("actions-overlay")}},s("payment.saved_credit_card_actions.edit","Edit")),o&&a.default.createElement(He.$,{kind:"plain",textDecoration:"none",appearance:"critical",onPress:p},s("payment.saved_credit_card_actions.delete","Delete"))))},a.default.createElement(Le.In,{source:"verticalDots"})):null)),a.default.createElement(ln.V,{appearance:"subdued"},r))}function _s({cardDetails:e}){const t=(0,Ir.N)(),{shippingAddress:n,billingAddress:r,billingAddressOption:l}=(0,ve.C)(),[i]=(0,o.fp)(n),[s]=(0,o.fp)(r),[d]=(0,o.fp)(l),c=(0,uo.HR)(),{getAccessibilityLabel:u}=Ro(),m=u(e),p="shipping"===d?i.address1:s.address1;return a.default.createElement(Qn.xA,{columns:No,spacing:"base"},a.default.createElement(va.W,{value:"session_card",onChange:()=>{}},a.default.createElement(Sa.f,{id:"session_card",key:"session_card",accessibilityLabel:m},a.default.createElement(gs,{id:"session",displayLastDigits:e.creditCardLastFourDigits,brand:e.brand,details:t?e.cardholderName:p,onDelete:()=>c()}))))}function Es({offsite:e,paymentBrands:t,sessionCard:n,customHostedFields:r,isSelected:l}){const{errors:o}=(0,mi.Z)(),i=(0,E.W)(),s=(0,vt.Bl)(),d=function(){const{sdk:e}=(0,mi.Z)(),[t,n]=a.default.useState(0),[r,l]=(0,a.useState)();return(0,a.useEffect)((()=>{(async()=>{const t=await e.getCardField("number");l(t?._iFrame)})()}),[e,t]),(0,a.useEffect)((()=>{const e=()=>{n(t+1)};return r?.addEventListener("load",e),()=>{r?.removeEventListener("load",e)}}),[t,r]),t}(),c=(0,Ir.N)(),u=Do(),m=Eo(),{errorBannerInContext:p,billingAddressInContext:f}=oi();if(o.sdk)return a.default.createElement(Si,null);if(e)return a.default.createElement(ps,null);const h=p&&m?a.default.createElement(an.l,{status:"critical"},i("payment.generic_incorrect_card_info","Your payment details couldn’t be verified. Check your card details and try again.")):null,y=n&&a.default.createElement(_s,{cardDetails:n}),g=Boolean(c)&&s?a.default.createElement(cs,null):a.default.createElement(Ai,null);return a.default.createElement(Hn.a,null,h,a.default.createElement("div",{hidden:Boolean(n)},a.default.createElement(ls,{cardBrands:t,prefillCardholderName:s,key:d,customHostedFields:r,isSelected:l})),y,!u&&f&&g)}function bs(e){const{setAddressError:t}=(0,kn.qo)(wn.mT);return n=>{(0,wn.oD)(`${e}_address`,n).forEach(((e,n)=>{t(n,e)}))}}var vs=n(65983);const Cs=JSON.parse('{"id":"2b89e843a86494f281f1aeed5979b93b3cf56953dd9f86588ade6c335d197a91","name":"PayCountries","source":"query PayCountries{shop{id billingCountries{value:code label:name __typename}__typename}}"}');function Ss(e){const[,t]=(0,o.fp)(Cl.countries),[,n]=(0,o.fp)(Cl.addressFormLoading),r=(0,E.W)(),l=(0,is.Jj)(),i=(0,Pn.Z5)(),s=(0,xn.f)(),{data:d,loading:c}=(0,vs.IT)(Cs),u=d?.shop?.billingCountries,m="billing"===e.addressType&&l.supported&&l.paymentMethodSelected,p=m?i:u,{updateCountryCodeForSPIBillingAddress:f}=(0,is.mr)(e.address.fields.countryCode,p);(0,a.useEffect)((()=>{n(c)}),[c,n]),(0,a.useEffect)((()=>{t(p)}),[p,t]),(0,a.useEffect)((()=>{m&&f()}),[m,f]);const h=(0,a.useMemo)((()=>l.supportedCountryOptions?.map((e=>e.label)).join(", ")),[l.supportedCountryOptions]);return a.default.createElement(a.default.Fragment,null,m?a.default.createElement(a.default.Fragment,null,a.default.createElement(jn.E,null,l.paymentMethodMustSupportInterestBearingLoans?h?r("shop_pay.installments_debit_cards_supported_countries",{countries:h},"Only debit cards from these supported countries can be used to pay in installments: {{countries}}"):r("shop_pay.installments_valid_debit_cards_fallback","Only debit cards can be used to pay in installments"):h?r("shop_pay.installments_cards_supported_countries",{countries:h},"Only cards from these supported countries can be used to pay in installments: {{countries}}"):r("shop_pay.installments_valid_cards_fallback","Only valid cards can be used to pay in installments")),a.default.createElement(he.S,null)):null,a.default.createElement(ul,(0,ye.A)({},e,{addressSettings:s,countries:p,loading:c})))}function ks({addressType:e,...t}){const n=(0,Pn.pW)(),r=(0,Pn.AF)(),l="shipping"===e?n:r;return a.default.createElement(ul,(0,ye.A)({addressType:e,countries:l},t))}function ws({addressType:e,...t}){const n=(0,Pn.pW)(),r=(0,Pn.AF)(),l="shipping"===e?n:r;return a.default.createElement(ul,(0,ye.A)({addressType:e,countries:l},t))}const Ps=80;function As({submitButtonAppearance:e,submitText:t,cancelText:n,loading:r,disabled:l,handleSubmit:o,handleCancel:i}){const s=(0,f.t)({base:!0,small:!1}),d=a.default.createElement(He.$,{disabled:l,inlineSize:s?"fill":void 0,loading:r,accessibilityRole:"submit",appearance:e,onPress:o},a.default.createElement(h.S,{minInlineSize:Ps,inlineAlignment:"center"},a.default.createElement(jn.E,null,t))),c=a.default.createElement(He.$,{inlineSize:s?"fill":void 0,kind:"plain",onPress:i},n);return a.default.createElement(a.default.Fragment,null,s?a.default.createElement(Hn.a,null,d,c):a.default.createElement(ht.o,{blockAlignment:"center",spacing:"large200",inlineAlignment:"end"},c,d),s&&a.default.createElement(he.S,null))}function Is({editableAddress:e,addressType:t,saveText:n,cancelText:r,onSave:l,onSuccess:i,onCancel:s,showSavedAddressSelector:d=!0,addressErrorsAtom:c,combineViolationAndValidationErrors:u=!0}){const[m,p]=(0,a.useState)(!1),h=(0,o.QN)(),y=(0,E.W)(),g=(0,f.t)({base:!0,small:!1}),_=(0,o.md)(Cl.addressModalState),[b]=Ql(c),{loading:v}=(0,I.CL)(),{loading:C}=(0,I.rr)(),S=g?Hn.a:ht.o,k="shipping"===t,w=(0,ra.VH)({shopPay:(0,xn.f)(),businessCustomer:(0,no.z4)(t)})??void 0,P=(0,o.md)(Cl.countries),A=(0,o.md)(e),x=(0,o.md)(e?.fields?.countryCode),M=(0,kn.Z7)(x,P,w),T=(0,a.useMemo)((()=>(0,wn.iK)()),[]),N=(0,ra.VH)({shopPay:b})??c??T,{resetAddressErrors:L}=(0,kn.qo)(N),D=k?El.Tg:El.G5,{violations:R,clearViolations:B}=(0,bl.Ck)(D);(0,a.useEffect)((()=>{("shipping"===t&&v||"billing"===t&&C)&&B()}),[B,t,v,C]),(0,Kt.Ki)(e,(()=>{h.write(e.fields.postalCode,void 0),h.write(e.fields.zoneCode,void 0),h.write(e.fields.city,void 0),h.write(e.fields.address1,void 0),h.write(e.fields.address2,void 0),h.write(e.fields.coordinates,void 0),L()})),(0,a.useEffect)((()=>{if("editing"!==_.status)return;const e=(0,wn.oD)(t,Array.from(R));if(0===e.size)return;const n=M(A,t),a=u?Array.from(e).concat(Array.from(n)):Array.from(n);for(const[t,r]of a)h.write(N[t],r)}),[N,_.status,t,u,A,h,M,R]),(0,a.useEffect)((()=>{if("idle"===_.status)for(const e of Object.keys(N))h.write(N[e],void 0)}),[N,_.status,h]);const F=(0,ra.VH)({shopPay:Ss,customerAccount:ks,sdkCartHints:ks,businessCustomer:ws})??ul,z=(0,ra.VH)({shopPay:a.default.createElement(S,{blockAlignment:"center",spacing:"large200"},a.default.createElement(He.$,{loading:m,inlineSize:g?"fill":void 0,accessibilityRole:"submit"},n??y("shop_pay.address_form.save","Save address")),a.default.createElement(He.$,{kind:"plain",inlineSize:g?"fill":void 0,onPress:s},r??y("shop_pay.address_form.cancel","Cancel")))})??a.default.createElement(As,{submitText:n??y("shop_pay.address_form.save","Save address"),cancelText:r??y("shop_pay.address_form.cancel","Cancel"),loading:m,handleCancel:s});return a.default.createElement(fa.l,{disabled:m,onSubmit:async()=>{p(!0);const e=M(A,t);if(e.size){for(const[t,n]of e)h.write(N[t],n);p(!1)}else await(l?.(A))&&i?.(),p(!1)}},a.default.createElement(F,{address:e,addressType:t,addressErrors:N,showSavedAddressSelector:d,addressSettings:w},z,g&&a.default.createElement(he.S,null)))}function xs({addressType:e="shipping",onSave:t,showSavedAddressSelector:n=!0,addressErrorsAtom:r,modalState:l,setModalState:i,address:s}){const d=(0,E.W)(),c="shipping"===e,u=()=>{i("idle")},m=(0,o.md)(wn.jI),p=d(c?"shipping.address_form.save":"billing.address_form.save","Save"),f=d(c?"shipping.address_form.cancel":"billing.address_form.cancel","Cancel"),h=(0,ra.VH)({businessCustomer:"shipping"===e?d("shipping.address_form.one_time_address_subtitle","Use a one-time address for this order"):void 0})??"";return a.default.createElement(a.default.Fragment,null,h&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Hn.a,null,a.default.createElement(ln.V,{appearance:"subdued"},h)),a.default.createElement(he.S,null)),a.default.createElement(Hn.a,null,m&&a.default.createElement(an.l,{status:"critical"},a.default.createElement(ln.V,null,d("shipping.address_form.generic_error","There was a problem saving your address. Please try again."))),a.default.createElement(Is,{editableAddress:s,addressType:e,saveText:p,cancelText:f,onSave:t,onSuccess:u,onCancel:u,showSavedAddressSelector:n,addressErrorsAtom:r,combineViolationAndValidationErrors:"editing"===l})))}var Ms=n(78414),Ts=n(34767);function Ns({state:e,description:t,onConfirm:n,onCancel:r}){const l=(0,E.W)(),o=(0,ra.VH)({shopPay:a.default.createElement(Qn.xA,{columns:y.OF.when({viewportInlineSize:{min:"small"}},["auto","auto"]),spacing:"large200"},a.default.createElement(He.$,{loading:"deleting"===e,kind:"primary",appearance:"critical",onPress:n},l("shipping.delete","Delete")),a.default.createElement(He.$,{kind:"plain",onPress:r},l("shipping.address_form.cancel","Cancel")))})??a.default.createElement(As,{submitText:l("shipping.delete","Delete"),cancelText:l("shipping.address_form.cancel","Cancel"),loading:"deleting"===e,handleSubmit:n,handleCancel:r,submitButtonAppearance:"critical"});return a.default.createElement(a.default.Fragment,null,a.default.createElement(ln.V,null,t),a.default.createElement(he.S,null),o)}const Ls=538,Ds=2,Rs=(0,Ht.MN)(!1);function Bs({children:e}){const[t,n]=(0,o.fp)(Rs);return(0,a.useEffect)((()=>()=>{n(!1)}),[n]),a.default.createElement(a.default.Fragment,null,e)}function Fs(){const e=(0,E.W)(),[t,n]=(0,a.useState)(!1),[r,l]=(0,o.fp)(Rs),i=_o(),[s,d]=(0,a.useState)(!1),c=(0,ve.C)(),[u,m]=(0,o.fp)(c.paymentLines),[f]=(0,o.fp)(c.billingAddress),y=(0,kn.IL)(f,ds),g=(0,uo.gj)(),{sdk:_,validate:b,resetTouched:v}=(0,mi.Z)(),[C,S]=(0,a.useState)(!1),k=(0,_e.Vk)(),w=(0,uo.gj)(),{negotiate:P}=(0,p.T4)(),[A,x]=Oo(),[M,T]=(0,a.useState)(u),N=(0,ra.VH)({businessCustomer:bs("billing")})??void 0,{addresses:L,selectedAddressChoiceId:D,createAddress:R,deleteAddress:B}=xo("billing"),F=(0,Ir.N)(),{shippingAddress:z}=F??{},V=(0,be.u)().geolocation.country.code,[O,W]=(0,a.useState)((0,wn.tB)({})),[,q]=(0,o.fp)(c.billingAddressOption),[$,U]=(0,a.useState)("idle"),[H,j]=(0,a.useState)("idle"),Y=(0,Ms.Z)(),G=Bo(),X=(0,I.Pk)(),Z="editing"===$||"adding"===$,Q="active"===H||"deleting"===H,J="editing"===$?e("billing.address_edit","Edit address"):e("billing.address_form.add_address","Add address"),K=D===ko("billing")?void 0:()=>{const e=L.get(D);e&&(U("editing"),W((0,wn.tB)(e)))},ee=D===ko("billing")?void 0:async()=>B(),te=(0,a.useCallback)((()=>{t&&Z?U("idle"):t&&Q?j("idle"):C||(i(),v(),G(),n(!1),d(!1))}),[t,Z,Q,C,G,i,v]),{BillingAddressEdit:ne,NoticeBanners:ae}=rr(),re=(0,a.useCallback)((async()=>{S(!0);const{isValid:e}=b();if(e){if(g){let e;try{e=await _.vaultCard()}catch{return void S(!1)}if(e){T(u);const t={type:"direct",sessionId:e,paymentMethodIdentifier:g.paymentMethodIdentifier},n=u.filter((e=>"giftCard"===e.method.type));m([{method:t},...X.value?.dueAt?[{method:t,dueAt:X.value.dueAt}]:[],...n])}}P(void 0,{fieldsToResolve:["paymentMethods"],onComplete(e){S(!1);const t="invalid"===e.status&&e.reasons.includes(en.RE.BlankVaultingAgreement),a=("success"===e.status||"error"===e.status)&&e.errors.some((e=>wl.Pu.has(e.code))),r=("success"===e.status||"error"===e.status)&&e.errors.some((e=>wl.MS.has(e.code)));if(a||t||r)m(M),N&&N(a?e.violations:[]);else if("success"===e.status){const t=e.negotiated.paymentLines?.lines?.find((e=>"direct"===e.method.type));t&&x(t.method),n(!1),d(!1)}}})}else S(!1)}),[g,P,X,u,M,_,N,x,m,b]);return a.default.createElement(Hn.a,{spacing:"base"},!A&&a.default.createElement(He.$,{onPress:()=>{n(!0),l(!0),i(),v()},kind:"plain",textDecoration:"none"},a.default.createElement(ht.o,{spacing:"extraTight",blockAlignment:"center",inlineAlignment:"center"},a.default.createElement(Le.In,{source:"plus",size:"small",appearance:"monochrome"}),a.default.createElement(jn.E,null,e("payment.use_different_credit_card_label","Use a different card")))),a.default.createElement(Ts.x,{padding:!0,maxInlineSize:Ls,open:t,title:Z?J:Q?e("billing.address_delete","Delete address"):e("payment.add_credit_card_modal.title","Add card"),onClose:te},a.default.createElement(h.S,{padding:["extraTight","none","none","none"]},a.default.createElement(h.S,{visibility:Z||Q?"hidden":void 0},a.default.createElement(fa.l,{onSubmit:re},a.default.createElement(Hn.a,null,a.default.createElement(Bs,null,a.default.createElement(Es,{paymentBrands:w?.paymentBrands??[]})),a.default.createElement(za.pp,{id:"billingAddress",label:e("payment.billing_address_title","Billing address"),open:s,onToggle:()=>{F||q("custom"),d((e=>!e))},summary:y},a.default.createElement(Hn.a,null,a.default.createElement(ae,{section:"payment"}),a.default.createElement(ne,{onAddAction:()=>{const e=(0,wn.tB)({countryCode:V??z?.countryCode});U("adding"),W(e)},onEditAction:K,onDeleteAction:()=>j("active"),paymentModalState:$,addressDeleteModalState:H}))),k&&a.default.createElement(Ei,{forceVaultingEligible:!0,blockNegotiations:!0}),a.default.createElement(As,{submitText:e("payment.add_credit_card_modal.save","Save"),cancelText:e("payment.add_credit_card_modal.cancel","Cancel"),loading:C,disabled:C,handleCancel:te})))),t&&Z?a.default.createElement(xs,{addressType:"billing",onSave:R,showNewAddressButton:L.size<Ds,modalState:$,setModalState:U,address:O,addressErrorsAtom:wn.mT}):null,"idle"!==H&&a.default.createElement(Ns,{state:H,description:e("billing.address_confirm","Are you sure you want to delete this address from your account?"),onConfirm:async()=>{j("deleting"),await(ee?.()),Y.current&&j("idle")},onCancel:()=>j("idle")}))))}var zs=n(62344);const Vs=JSON.parse('{"id":"9417b81347c6200d834b59ed35796bc92cda3a4c9410496ae272abe4bcb36147","name":"UpdateCustomerCreditCard","source":"mutation UpdateCustomerCreditCard($customerCreditCardModificationInput:CustomerCreditCardModificationInput!){modifyCustomerCreditCardPaymentMethod(customerCreditCardModificationInput:$customerCreditCardModificationInput){result{token billingAddress{...on StreetAddress{firstName lastName address1 address2 city zoneCode countryCode postalCode company __typename}__typename}name __typename}errors{localizedMessage __typename}__typename}}"}');function Os({creditCard:e,onModalClose:t}){const n=(0,E.W)(),{negotiate:r}=(0,p.T4)(),l=(0,a.useMemo)((()=>(0,wn.tB)(e?.billingAddress||{})),[e]),i=(0,o.md)(l),s=(0,kn.IL)(i),d=(0,a.useMemo)((()=>(0,wn.iK)()),[]),[c,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[y,g]=(0,a.useState)(!1),{onSubmit:_,error:b,resetError:v}=function(){const e=(0,E.W)(),t=(0,vs.bn)(),[n,r]=(0,a.useState)("");return{onSubmit:async({address:n,defaultPaymentMethod:a,token:l})=>{if(!l)return{token:void 0};r("");try{const{data:o,error:i}=await t.mutate(Vs,{variables:{customerCreditCardModificationInput:{token:l,defaultPaymentMethod:a,billingAddress:{streetAddress:(0,Co.dP)(n)}}}});if(!o?.modifyCustomerCreditCardPaymentMethod||i)throw Error();const{result:s,errors:d}=o.modifyCustomerCreditCardPaymentMethod;return!d.length&&s||r(d[0]?.localizedMessage||e("shipping.address_form.generic_error","There was a problem saving your address. Please try again.")),{token:s?.token}}catch(o){return r(e("shipping.address_form.generic_error","There was a problem saving your address. Please try again.")),{token:void 0}}},error:n,resetError:()=>r("")}}(),{resetAddressErrors:C,addressErrors:S}=(0,kn.qo)(d);b&&h(!1),(0,a.useEffect)((()=>{e&&g(e.defaultPaymentMethod)}),[e]);const k=()=>{t(),v(),C(),u(!1),h(!1)},w=(0,f.t)({base:!0,small:!1}),P=w?Hn.a:ht.o,A=a.default.createElement(He.$,{inlineSize:w?"fill":void 0,onPress:async()=>{h(!0);const{token:t}=await _({defaultPaymentMethod:y,address:i,token:e?.token});t&&r(void 0,{fieldsToResolve:["paymentMethods"],force:!0,onComplete(e){h(!1),"success"===e.status&&k()}})},loading:m,disabled:m},n("payment.edit_credit_card_modal.done","Done")),I=a.default.createElement(He.$,{kind:"plain",inlineSize:w?"fill":void 0,onPress:k},n("payment.edit_credit_card_modal.cancel","Cancel")),x=w?[A,I]:[I,A],M=b?a.default.createElement(Hn.a,{padding:["base","none"]},a.default.createElement(an.l,{status:"critical"},b)):null;return a.default.createElement(Va.a,{open:Boolean(e),title:n("payment.edit_credit_card_modal.title","Edit card"),onClose:k,maxInlineSize:538,padding:!0},a.default.createElement(Hn.a,{spacing:"small300"},M,a.default.createElement(xr.H,null,a.default.createElement(_i.S,{id:"default",name:"default",checked:y,onChange:e=>g(e)},n("payment.edit_credit_card_modal.fields.default","Set as default")),a.default.createElement(ln.V,{appearance:"subdued"},n("payment.edit_credit_card_modal.description","You can only modify the billing address of your card.")),a.default.createElement(Br.A_,{name:"cardNumber",label:n("payment.edit_credit_card_modal.fields.card_number","Card number"),readonly:!0,value:e?`•••• •••• •••• ${e.displayLastDigits}`:void 0,disabled:!0}),a.default.createElement(xr.g,null,a.default.createElement(Br.A_,{name:"expiryLabel",label:n("payment.edit_credit_card_modal.fields.expiry","Expiration date"),readonly:!0,value:e?(T=e.expiryMonth,N=e.expiryYear,`${T>9?T:`0${T}`}/${`${N}`.slice(2)}`):void 0,disabled:!0}),a.default.createElement(Br.A_,{name:"cardVerification",label:n("payment.edit_credit_card_modal.fields.security_code","Security code"),readonly:!0,value:"···",disabled:!0})),a.default.createElement(Br.A_,{name:"cardHolderName",label:n("payment.edit_credit_card_modal.fields.name","Name on card"),readonly:!0,value:e?.name||"",disabled:!0})),a.default.createElement(he.S,null),a.default.createElement(zs.c,null),a.default.createElement(za.pp,{id:"billingAddress",label:n("payment.edit_credit_card_modal.fields.billing","Bill to"),open:c,onToggle:()=>{u((e=>!e))},summary:s},a.default.createElement(ul,{id:"billingAddress",addressType:"billing",address:l,addressErrors:S})),a.default.createElement(he.S,null),a.default.createElement(P,{blockAlignment:"center",inlineAlignment:"end",spacing:"large200"},x),w&&a.default.createElement(he.S,null)));var T,N}function Ws(){const e=(0,E.W)(),{sdk:t,validate:n}=(0,mi.Z)(),r=(0,ve.C)(),[l,i]=(0,o.fp)(r.paymentLines);return(0,Ce.D3)((async({reason:e})=>{if("completion"===e){const{isValid:e}=n(!0);if(e){const e=await t.vaultCard();return i((t=>t.map((t=>(t.method.type===en.NK.CreditCard&&(t.method.cvvSessionId=e),t))))),{behavior:"allow"}}}return{behavior:"block",reason:en.RE.CvvFieldIsInvalid}})),a.default.createElement(h.S,null,a.default.createElement(he.S,null),a.default.createElement(zs.c,null),a.default.createElement(he.S,null),a.default.createElement(Hn.a,{spacing:"small300"},a.default.createElement(ln.V,{appearance:"subdued"},e("payment.saved_credit_card_cvv_verification","For verification purposes, please enter your card's security code.")),a.default.createElement(rn.C,{columns:["1.5fr","1fr"],spacing:"none",blockAlignment:"center"},a.default.createElement(ls,{cardBrands:[],prefillCardholderName:!1,cvvOnly:!0}))))}const qs=JSON.parse('{"id":"563e8a86083a6c9ad5bd44d3a4db471e3a9919052512d2745d267074d97420fd","name":"DeleteVaultedCreditCard","source":"mutation DeleteVaultedCreditCard($token:String!){deleteCustomerCreditCardPaymentMethod(token:$token){result{token __typename}errors{localizedMessage __typename}__typename}}"}'),$s=438;function Us({paymentToDelete:e,onClose:t,setSelected:n}){const r=(0,E.W)(),{negotiate:l}=(0,p.T4)(),{savedCreditCards:i}=(0,uo.Ny)(),[s,d]=Oo(),{clearBillingAddress:c}=(0,tn.rr)(),u=(0,I.CL)(),{billingAddress:m,billingAddressOption:f}=(0,ve.C)(),[,h]=(0,o.fp)(m),[,y]=(0,o.fp)(f),g=Bo(),[_,b]=(0,a.useState)(!1),v=(0,Ir.N)(),{onSubmit:C,error:S,resetError:k}=function(){const e=(0,E.W)(),t=(0,vs.bn)(),[n,r]=(0,a.useState)("");return{onSubmit:async n=>{if(!n)return{token:void 0};r("");try{const{data:a,error:l}=await t.mutate(qs,{variables:{token:n}});if(!a?.deleteCustomerCreditCardPaymentMethod||l)throw Error();const{result:o,errors:i}=a.deleteCustomerCreditCardPaymentMethod;return!i.length&&o||r(i[0]?.localizedMessage||e("customer_payment_methods.delete_customer_mandate.generic_error","There was an issue processing your request.")),{token:o?.token}}catch(a){return r(e("customer_payment_methods.delete_customer_mandate.generic_error","There was an issue processing your request.")),{token:void 0}}},error:n,resetError:()=>r("")}}(),w=S?a.default.createElement(Hn.a,{padding:"none"},a.default.createElement(an.l,{status:"critical"},S)):null;return a.default.createElement(Va.a,{padding:!0,maxInlineSize:$s,open:Boolean(e),title:r("payment.delete_credit_card_modal.title","Delete card"),onClose:()=>{t(),k()}},a.default.createElement(Hn.a,{padding:["base","none","large300","none"]},w,a.default.createElement(ln.V,null,a.default.createElement(jn.E,{appearance:"subdued"},r("payment.delete_credit_card_modal.confirmation",{brandName:e?.brandLabel??"",lastDigits:e?.lastDigits??""},"Are you sure you want to delete the {{brandName}} ending in {{lastDigits}}?")))),a.default.createElement(As,{submitText:r("payment.delete_credit_card_modal.delete","Delete"),cancelText:r("payment.delete_credit_card_modal.cancel","Cancel"),submitButtonAppearance:"critical",handleSubmit:async()=>{if(b(!0),e&&e.token){if(1===i.length)n(["direct"]);else{const t=i.find((({token:t})=>t!==e.token));if(t){const e=s?"direct":(0,qo.xH)(t);n([e])}}const{token:a}=await C(e.token);a&&await l(void 0,{fieldsToResolve:["paymentMethods"],force:!0,onComplete(e){"success"===e.status&&t()}})}e&&"direct"===e.id&&(d(void 0),i.length>0&&(n([(0,qo.xH)(i[0])]),g()),v||(c(),h({...u.value}),y("shipping")),t()),b(!1)},handleCancel:t,loading:_,disabled:_}))}function Hs({savedCreditCards:e,selected:t,setSelected:n,isInModal:r}){const{storeVaultEnabled:l}=(0,P.q)(),i=(0,Ir.N)(),[s]=Oo(),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),p=Do(),[f]=(0,o.fp)(Rs),h=(0,ve.C)(),[g]=(0,o.fp)(h.billingAddress),{getAccessibilityLabel:_}=Ro(),E=Fo(),b=e.find((e=>{const n=t.split("-")[1];return e.token===n})),v=b?.requiresCvvConfirmation&&!f&&!r&&E;let C=No;return r&&(C=y.OF.default(["fill"]).when({viewportInlineSize:{min:"small"}},["fill","fill"])),a.default.createElement(va.W,{value:t,onChange:e=>{n([e])}},a.default.createElement(Qn.xA,{columns:C,spacing:"base"},p&&s&&a.default.createElement(Sa.f,{id:"direct",key:"direct",accessibilityLabel:_(s)},s.brand&&s.creditCardLastFourDigits&&a.default.createElement(gs,{id:"direct",brand:s.brand,displayLastDigits:s.creditCardLastFourDigits,details:i?s.cardholderName:g.address1,onDelete:e=>{"direct"===e&&m({id:e,lastDigits:s?.creditCardLastFourDigits??"",brandLabel:s?.brand?Mo(s?.brand):""})}})),e.map((e=>a.default.createElement(Sa.f,{id:(0,qo.xH)(e),key:(0,qo.xH)(e),accessibilityLabel:_(e)},a.default.createElement(gs,{id:(0,qo.xH)(e),brand:e.brand,displayLastDigits:e.displayLastDigits,details:i?e.name||void 0:e.billingAddress.address1,requiresVerification:E&&e?.requiresCvvConfirmation,onEdit:l&&!i?()=>c(e):void 0,onDelete:l&&!i&&e.deletable?()=>m({token:e?.token,lastDigits:e.displayLastDigits,brandLabel:e?.brand?Mo(e?.brand):""}):void 0}))))),(p||l)&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Us,{setSelected:n,paymentToDelete:u,onClose:()=>{m(null)}}),a.default.createElement(Os,{onModalClose:()=>c(null),creditCard:d})),v&&a.default.createElement(Ws,null))}function js({numExpired:e}){const t=(0,E.W)();return a.default.createElement(ln.V,{size:"small",appearance:"subdued"},t("payment.expired_cards_info",{count:e},{one:"There is %{count} expired card, which you can view and edit in your account.",other:"There are %{count} expired cards, which you can view and edit in your account."}))}function Ys({savedCreditCards:e,selected:t,setSelected:n,isModalOpen:r,onModalClose:l}){const o=(0,E.W)(),i=Lo(),s=i>0,[d,c]=(0,a.useState)(t);(0,a.useEffect)((()=>{c(t)}),[t]);const u=(0,f.t)({base:!0,small:!1}),m=u?Hn.a:ht.o,p=a.default.createElement(He.$,{inlineSize:u?"fill":void 0,onPress:()=>{l(),d&&n(d)}},o("payment.saved_credit_cards_modal.done","Done")),h=a.default.createElement(He.$,{kind:"plain",inlineSize:u?"fill":void 0,onPress:l},o("payment.saved_credit_cards_modal.cancel","Cancel")),y=u?[p,h]:[h,p];return a.default.createElement(Va.a,{open:r,title:"View all saved cards",onClose:l,padding:!0},a.default.createElement(Hn.a,{spacing:"small300"},a.default.createElement(Hs,{savedCreditCards:e,selected:d,setSelected:e=>c(e[0]),isInModal:!0}),a.default.createElement(he.S,{spacing:"small500"}),s&&a.default.createElement(js,{numExpired:i}),a.default.createElement(he.S,null),a.default.createElement(m,{blockAlignment:"center",inlineAlignment:"end",spacing:"large200"},y),u&&a.default.createElement(he.S,null)))}function Gs({offsite:e=!1,paymentBrands:t,setSelected:n,customHostedFields:r,isSelected:l}){const i=(0,E.W)(),{hasSavedCreditCards:s,savedCreditCards:d}=(0,uo.Ny)(),[c,u]=(0,a.useState)(d),m=c?.length>4,[p,f]=(0,a.useState)(!1),h=Lo(),y=h>0,{paymentLines:g}=(0,ve.C)(),[_,b]=(0,o.fp)(g),v=s?function(e,t){const n=t.find((e=>e.defaultPaymentMethod)),a=e.find((e=>[en.NK.CreditCard,"direct"].includes(e.method.type)))?.method;return a?a.type===en.NK.CreditCard?(0,qo.xH)(a):a.type:(0,qo.xH)(n||t[0])}(_,c):"direct",C="direct"===v,S=(0,uo.IT)(),k=Do(),{resetTouched:w}=(0,mi.Z)(),P=_o(),A=()=>{P(),w()};return(0,a.useEffect)((()=>{u(d)}),[JSON.stringify(d)]),a.default.createElement(Hn.a,null,s&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Hs,{savedCreditCards:Xs(c),selected:v,setSelected:e=>{n(e),A()}}),a.default.createElement(Hn.a,{inlineAlignment:"start"},m&&a.default.createElement(a.default.Fragment,null,a.default.createElement(J.N,{onPress:()=>f(!0)},a.default.createElement(ht.o,{spacing:"small200",blockAlignment:"center"},a.default.createElement(Le.In,{source:"arrowUpRight",size:"small"}),i("payment.saved_credit_cards_modal.view_all_label","View all saved cards"))),a.default.createElement(Ys,{savedCreditCards:c,selected:v,setSelected:e=>{n([e]),u(function(e,t){const[n,a]=e.split("-");let r;const l=t.filter((e=>(e.token===a&&(r=e),e.token!==a)));return[r,...l]}(e,c))},isModalOpen:p,onModalClose:()=>f(!1)})),k?a.default.createElement(Fs,null):a.default.createElement(_i.S,{id:"selectDirectPaymentMethod",name:"selectDirectPaymentMethod",checked:C,onChange:e=>{A(),n(e?["direct"]:[(0,qo.xH)(c[0])])}},i("payment.use_different_credit_card_label","Use a different card")))),k&&s?null:a.default.createElement(yt.e,{id:"directPaymentMethodDetails",open:C},a.default.createElement(Es,{key:v,offsite:e,paymentBrands:t,sessionCard:S,customHostedFields:r,isSelected:l})),y&&!m&&a.default.createElement(js,{numExpired:h}))}function Xs(e){return e.slice(0,4)}function Zs({id:e,paymentBrands:t,displayName:n,extensibilityDisplayName:r,setSelected:l,paymentMethodIdentifier:i,uiExtension:s,customHostedFields:d,alternative:c=!1,isSelected:u}){const m=(0,E.W)(),{cardBrand:p,bankIdNumber:f}=(0,mi.Z)(),[,h]=(0,o.fp)((0,ve.C)().bankIdNumber);(0,a.useEffect)((()=>{h(f)}),[h,f]);const{optionList:{typographyStyle:y}}=(0,ta.x)(),g=(0,kt.IV)("Checkout::PaymentMethod::HostedFields::RenderAfter",void 0===s?[]:[s]),_=p?(0,pi.d)(p):void 0,b=c&&r||n||m("payment_gateway.credit_card_label","Credit card");return a.default.createElement(a.default.Fragment,null,a.default.createElement(on.c$,{id:e,label:b,details:a.default.createElement(pa.g,{controlledBy:e,renderChildrenWhenCollapsed:!0},a.default.createElement(Qs,{isSelected:u}),a.default.createElement(Gs,{offsite:!1,paymentBrands:t,setSelected:l,customHostedFields:d,isSelected:u}),g.length>0&&u&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Kn.N,{options:{paymentMethodIdentifier:i},extensions:g})))},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{style:y},b)),a.default.createElement(on.PE,null,a.default.createElement(gi,{paymentBrands:t,activePaymentBrand:_}))))}function Qs({isSelected:e}){return(0,uo.II)(e),null}fo.Y.Maestro;const Js=(0,Ge.m)({load:()=>(0,Xe.P)((()=>n.e(859).then(n.bind(n,32355)))),id:()=>32355,renderLoading:()=>a.default.createElement(on.c$,{id:sn.R.PaypalExpress})}),Ks=e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"-270.8 371 102 52"},e),a.createElement("path",{fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:2,d:"M-182 404v16.8c0 .7-.4 1.2-1 1.2h-75.7c-.7 0-1.2-.6-1.2-1.2v-47.6c0-.7.6-1.2 1.2-1.2h75.7c.7 0 1 .6 1 1.2V395m-78-14h78m-17 18h27m-3.9-4.6 4.5 4.6-4.5 4.6"}),a.createElement("circle",{cx:-255.5,cy:376.5,r:1.5,fill:"currentColor"}),a.createElement("circle",{cx:-250.5,cy:376.5,r:1.5,fill:"currentColor"}),a.createElement("circle",{cx:-245.5,cy:376.5,r:1.5,fill:"currentColor"})),ed=e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"-252.3 356.1 163 80.9"},e),a.createElement("path",{fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:2,d:"M-108.9 404.1v30c0 1.1-.9 2-2 2H-231c-1.1 0-2-.9-2-2v-75c0-1.1.9-2 2-2h120.1c1.1 0 2 .9 2 2v37m-124.1-29h124.1"}),a.createElement("circle",{cx:-227.8,cy:361.9,r:1.8,fill:"currentColor"}),a.createElement("circle",{cx:-222.2,cy:361.9,r:1.8,fill:"currentColor"}),a.createElement("circle",{cx:-216.6,cy:361.9,r:1.8,fill:"currentColor"}),a.createElement("path",{fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:2,d:"M-128.7 400.1H-92m-3.6-4.1 4 4.1-4 4.1"})),td={OffsiteRedirectIcon:"eHdoK"};function nd({children:e}){const t=(0,f.t)({base:!0,medium:!1})?Ks:ed;return a.default.createElement(Hn.a,{spacing:"large200",inlineAlignment:"center"},a.default.createElement(t,{className:td.OffsiteRedirectIcon}),a.default.createElement(h.S,{maxInlineSize:350},a.default.createElement(ln.V,{inlineAlignment:"center"},e)))}var ad=n(14869);function rd({label:e}){const t=(0,E.W)(),{optionList:{typographyStyle:n}}=(0,ta.x)();return a.default.createElement(on.c$,{id:sn.R.AmazonPayClassic,label:e,details:a.default.createElement(pa.g,{controlledBy:sn.R.AmazonPayClassic},a.default.createElement(nd,null,t("wallets.redirect_hint",{walletName:t("brand.amazon","Amazon")},"You will be asked to login with {{walletName}}.")))},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{style:n},e)),a.default.createElement(on.PE,null,a.default.createElement(h.S,{blockAlignment:"center"},a.default.createElement(ad.T,{wallet:"amazonPay"}))))}var ld=n(33294);function od({supportedNetworks:e}){const t=(0,E.W)(),{optionList:{typographyStyle:n}}=(0,ta.x)(),r=t("brand.apple_pay","Apple Pay");return(0,ld.$6)({supportedNetworks:e}),a.default.createElement(on.c$,{id:sn.R.ApplePay},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{style:n},r)),a.default.createElement(h.S,{blockAlignment:"center"},a.default.createElement(ad.T,{wallet:"applePay",size:"xxsmall"})))}var id=n(89689),sd=n(28921),dd=n(17586),cd=n(75090);const ud=n.p+"aa727d1354b9f1470ef9.svg",md=n.p+"1449117d8a827ed17a8c.svg",pd={ContentWrapper:"IeOO0",Subtitle:"xtP0s",TitleWrapper:"eRbE_",LogoWithValueProp:"mfI0N",Logo:"kRPVK"};var fd=n(12237),hd=n(41004),yd=n(7395);const gd=250,_d="shop-pay-as-payment-method-verification-iframe",Ed=Oe.K.C1InlineModal;function bd({id:e,onUserFound:t,onUserNotFound:n,renderWithoutInitialEmail:r}){const l=(0,ve.C)(),[i]=(0,o.fp)(l.email),s=(0,E.W)(),d=(0,a.useRef)(null),{alternate:c}=(0,A.ft)(),u=(0,yd.X)(Ed),[m,p]=(0,a.useState)(!1),{selectedPaymentMethods:f}=oi(),{checkoutSessionIdentifier:h=""}=(0,C.Fo)(),[y,g]=(0,a.useState)(gd),[_,b]=(0,a.useState)(!1),[v,S]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=i&&(0,fd.B9)(i);_&&e&&!r&&(0,R.L)(d?.current,{action:B.L$.Create,email:i,flow:hd.n.Normal})}),[i,_,r]),(0,a.useEffect)((()=>{_&&r&&(0,R.L)(d?.current,{action:B.L$.AllowNoInitialEmail})}),[_,r]),(0,a.useEffect)((()=>{_&&(0,R.L)(d?.current,{action:f?.includes(e)?B.L$.Ready:B.L$.Hidden})}),[_,f,e]),(0,F.d)({hostname:c,targetId:Ed,onClosed:function(){p(!0)},onResized:function(e){e>0&&g(Math.max(e,gd))},onReady:function(e){t?.(e),S(!0)},onError:function(e,t,a){e===B.Wu.ShopifyPayUserNotFound&&n?.(a),t!==B.hD.LimitExceeded||v||((0,de.TV)(Be.GH,h),window.dispatchEvent(new Event("shop_pay_user_identified_cookie_set")))},onLoggedIn:function(){(0,fd.NW)()}}),a.default.createElement(sr.R,{active:m,size:"large"},a.default.createElement("iframe",{id:_d,title:s("shop_pay.verification.title","Shop Pay Quick Checkout"),ref:d,src:u,onLoad:()=>b(!0),height:y,width:"100%",allow:"publickey-credentials-get *"}))}const vd={ChangeEmail:"L70v_"};function Cd({customAddressSettings:e}){const t=(0,E.W)(),n=(0,vt.Bl)(),r=(0,tn.ro)(),{billingAddressOption:l}=(0,ve.C)(),[i,s]=(0,o.fp)(l);return(0,tn.BY)(),a.default.createElement(a.default.Fragment,null,"selector"===r?a.default.createElement(a.default.Fragment,null,a.default.createElement(_i.S,{id:"billingAddress",name:"billingAddress",checked:"shipping"===i,onChange:e=>{s(e?"shipping":"custom")}},t("payment.same_billing_address_checkbox_label","Use shipping address as billing address"))):null,a.default.createElement(yt.e,{id:"billingAddressDetails",open:"shipping"!==i},n&&a.default.createElement(he.S,{spacing:"small200"}),a.default.createElement(fe.D,null,t("payment.billing_address_title","Billing address")),a.default.createElement(he.S,null),a.default.createElement(ss,{customAddressSettings:e})))}let Sd=function(e){return e.RememberMe="REMEMBER_ME",e.ShopPayPaymentMethod="SHOP_PAY_PAYMENT_METHOD",e}({});function kd({id:e,writeArtifactOnMount:t,optInEmail:n}){const r=(0,ve.C)(),{value:l}=(0,I.CL)(),{value:i}=(0,I.rr)(),{value:s}=(0,I.VS)(),d=(0,I.mu)(),{selectedPaymentMethods:c}=oi(),u=(0,E.W)(),m=(0,a.useRef)(),p=(0,a.useRef)(null),[f,h]=(0,o.fp)(r.shopPayArtifact),[y]=(0,o.fp)(r.shippingAddress),[g]=(0,o.fp)(r.phone),_=f?.optIn?.vaultPhone,b=!_?.includes("+"),{validatePhoneNumber:v}=(0,il.X)(),[C,S]=(0,a.useState)(""),[k,w]=(0,a.useState)(null),P=l?.countryCode||i?.countryCode||s?.countryCode||"";(0,Ce.D3)((({parts:e,reason:t,state:n})=>{const a=n.read(e.paymentLines).value,r=a[0]?.method,l="wallet"===r?.type&&r.name===sn.R.ShopPay;if("completion"===t&&l)try{return null!=_&&v(_,b?P:void 0)?(w(null),{behavior:"allow"}):(w(u("field_errors.address_phone_blank","Enter a valid phone number")),{behavior:"block",reason:en.RE.InvalidOptInPhone,perform:()=>{}})}catch(o){return w(u("field_errors.address_phone_blank","Enter a valid phone number")),{behavior:"block",reason:en.RE.InvalidOptInPhone,perform:()=>{}}}return{behavior:"allow"}}));const A=(0,a.useCallback)((e=>{w(null),S(e),h({optIn:{vaultPhone:e,optInSource:Sd.ShopPayPaymentMethod,vaultEmail:n}})}),[h,n]),x=(0,a.useCallback)(((e,t)=>{e?(f&&(m.current=f),h({optIn:{vaultPhone:t||C,optInSource:Sd.ShopPayPaymentMethod,vaultEmail:n}})):!e&&m.current?(h({optIn:{vaultPhone:m.current?.optIn?.vaultPhone||"",optInSource:m.current?.optIn?.optInSource,vaultEmail:m.current?.optIn?.vaultEmail}}),m.current=void 0):h(void 0)}),[C,n,h,f]);(0,a.useEffect)((()=>{const t=Boolean(c?.includes(e));null!==p.current&&(t&&!p.current?x(!0):!t&&p.current&&x(!1)),p.current=t}),[c]),(0,a.useEffect)((()=>{const e=g||y?.phone;e&&!C&&(S(e),t&&x(!0,e))}),[y,g,t]);const M=(0,a.useMemo)((()=>d.value?.filter((e=>"direct"===e.type))?.flatMap((e=>e.paymentBrands))),[d])||[],T=(0,gn.WP)(),N={...T,isVisible:e=>"phone"!==e&&T.isVisible(e)};return a.default.createElement(Hn.a,null,a.default.createElement(ls,{cardBrands:M,prefillCardholderName:!0}),a.default.createElement(Cd,{customAddressSettings:N}),a.default.createElement(Ke.P,{countryCode:P,label:u("shop_pay_remember_me.mobile_phone_number","Mobile phone number"),value:C,prefillCountryCode:Boolean(P),onInputValueChange:A,error:k}),a.default.createElement(jn.E,{appearance:"subdued"},u("payment_gateway.shop_pay.next_time","Next time you check out here or on other stores powered by Shopify, you’ll receive a code by text message to securely purchase with Shop Pay.")),a.default.createElement(jn.E,{size:"small",appearance:"subdued"},u("payment_gateway.shop_pay.terms",{privacyLink:a.default.createElement(J.N,{appearance:"monochrome",to:"https://www.shopify.com/legal/privacy"},u("payment_gateway.shop_pay.privacy_label","Privacy Policy")),termsLink:a.default.createElement(J.N,{appearance:"monochrome",to:"https://shop.app/terms-of-service"},u("payment_gateway.shop_pay.terms_label","Terms of Service"))},"By continuing, you agree to Shop Pay’s %{privacyLink} and %{termsLink}.")))}function wd({id:e,initializeWithCardEntry:t}){const n=(0,ve.C)(),r=(0,o.md)(n.email),[l,i]=(0,a.useState)(r),[s,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(Boolean(t)),[m,p]=(0,a.useState)(!1),f=(0,E.W)();(0,a.useEffect)((()=>{s&&r!==l&&(i(r),u(Boolean(t)))}),[t,s,r,l]);const y=c?{}:{inlinePadding:"none",blockPadding:"none"};return a.default.createElement(pa.g,(0,ye.A)({controlledBy:e,renderChildrenWhenCollapsed:!0},y),c?a.default.createElement(a.default.Fragment,null,Boolean(l)&&a.default.createElement(a.default.Fragment,null,a.default.createElement(h.S,{border:["none","none","base","none"]},a.default.createElement("div",{className:vd.ChangeEmail},l,a.default.createElement(J.N,{onPress:()=>u(!c)},f("payment.card_change_label","Change"))),a.default.createElement(he.S,{spacing:"base"})),a.default.createElement(he.S,{spacing:"base"})),a.default.createElement(kd,{id:e,writeArtifactOnMount:m,optInEmail:l})):a.default.createElement(bd,{id:e,onUserNotFound:e=>{e&&(i(e),d(!1)),p(!0),u(!0)},renderWithoutInitialEmail:!0}))}function Pd({id:e,onUserFound:t}){return a.default.createElement(pa.g,{controlledBy:e,renderChildrenWhenCollapsed:!0,inlinePadding:"none",blockPadding:"none"},a.default.createElement(bd,{id:e,onUserFound:t,renderWithoutInitialEmail:!1}))}function Ad({id:e,shouldShowUnrecognizedUserFlow:t,shouldShowRecognizedUserFlow:n,shouldShowUnknownUserFlow:r,onUserFound:l}){return t||r?a.default.createElement(wd,{id:e,initializeWithCardEntry:t}):n?a.default.createElement(Pd,{onUserFound:l,id:e}):null}function Id({label:e,installmentsLabel:t,installments:n}){const{origin:r,prefix:l}=(0,ge.m)(),{value:o}=(0,I._K)(),{sdk:i,validate:s}=(0,mi.Z)(),{shouldShowUnrecognizedUserFlow:d,shouldShowRecognizedUserFlow:c,shouldShowUnknownUserFlow:u}=(0,id.z)(),{variant:m,enabled:p}=(0,sd.F)(),[f,h]=(0,a.useState)(""),{selectedPaymentMethods:y}=oi(),g=(0,E.W)(),{optionList:{typographyStyle:_}}=(0,ta.x)(),b=(0,L.b)().isStandard(),v=(0,dd.U)(),{nextStep:C}=(0,cd.PL)(),{resetAddressErrors:S}=(0,kn.qo)(wn.kx);(0,Ce.D3)((async({parts:e,reason:t,state:n})=>{if("completion"===t||"progression"===t&&"review"===C.id){const t=o?.email,a=n.read(e.paymentLines).value,c=a[0]?.method,m="wallet"===c?.type&&c.name===sn.R.ShopifyInstallments,p="wallet"===c?.type&&c.name===sn.R.ShopPay;if(m){const e=new URLSearchParams;e.set("payment","shop_pay"),e.set(Be.zY,Be.C8.ShopPayInstallmentsAsPaymentMethod),t&&e.set("fast_login_email",t);const a=`${r}${l}?${e.toString()}`;return{behavior:"block",reason:en.RE.RedirectingToShopPay,perform(){n.write(Ae.Bu,void 0),n.write(Ae.bh,void 0),S(),window.location.replace(a)}}}if(p&&(d||u)){const{isValid:t}=s();if(t){const t=await i.vaultCard(),a={method:{type:"wallet",name:sn.R.ShopPay,walletContent:{...c.walletContent,sessionId:t,shopPayAsPaymentMethodOptIn:!0}}};return{behavior:"allow",perform(){n.write(e.paymentLines,(e=>(0,uo.mD)(e,a)))}}}return{behavior:"block",reason:en.RE.CardFieldInputIsInvalid,perform:()=>{}}}if(p){const e=new URLSearchParams;e.set("payment","shop_pay"),e.set(Be.zY,Be.C8.ShopPayAsPaymentMethod),t&&e.set("fast_login_email",t);const n=`${r}${l}?${e.toString()}`;return{behavior:"block",reason:en.RE.RedirectingToShopPay,perform(){window.location.replace(n)}}}}return{behavior:"allow"}}));const k=`| ${t}`,w=n?sn.R.ShopifyInstallments:sn.R.ShopPay,P=(0,a.useCallback)((e=>{h(e||"")}),[]),A=Boolean(n),x=v&&b?ud:md;return a.default.createElement(on.c$,{id:w,details:a.default.createElement(Ad,{id:w,shouldShowUnrecognizedUserFlow:d,shouldShowRecognizedUserFlow:c,shouldShowUnknownUserFlow:u,onUserFound:P})},!p||A&&m===sd.Y.Control?a.default.createElement("div",{className:pd.TitleWrapper},a.default.createElement("div",{className:pd.Logo},a.default.createElement(ia._,{source:x,accessibilityDescription:e})),A&&a.default.createElement("span",null,k)):a.default.createElement(a.default.Fragment,null,a.default.createElement(on.xV,null,a.default.createElement("div",{className:pd.ContentWrapper},a.default.createElement(jn.E,{style:_},g("payment_gateway.shop_pay.name","Shop Pay")),(e=>{switch(e){case sd.Y.PayAsPaymentMethodPhone:return f&&!y?.includes(w)?a.default.createElement(jn.E,{style:_,size:"small",appearance:"subdued"},f):null;case sd.Y.PayAsPaymentMethodShopCash:return c?a.default.createElement(jn.E,{style:_,size:"small",appearance:"subdued"},g("payment_gateway.shop_pay.earn_shop_cash","Earn 1% Shop Cash")):null;default:return null}})(m))),a.default.createElement(on.PE,null,a.default.createElement("div",{className:pd.LogoWithValueProp},a.default.createElement(ia._,{source:x,accessibilityDescription:e})))))}function xd({method:e}){const t=(0,E.W)();switch(e.name){case sn.R.PaypalExpress:return a.default.createElement(Js,{method:e});case sn.R.AmazonPayClassic:{const e=t("brand.amazon_pay","Amazon Pay");return a.default.createElement(rd,{label:e})}case sn.R.ApplePay:return a.default.createElement(od,{supportedNetworks:e.supportedNetworks});case sn.R.ShopifyInstallments:{const e=t("payment_gateway.shop_pay.name","Shop Pay"),n=t("payment_gateway.shop_pay.installments_label","Pay in full or in installments");return a.default.createElement(Id,{label:e,installmentsLabel:n,installments:!0})}case sn.R.ShopPay:{const e=t("payment_gateway.shop_pay.name","Shop Pay");return a.default.createElement(Id,{label:e})}case sn.R.GooglePay:case sn.R.FacebookPay:return null;default:(0,Ho.xb)(e)}}var Md=n(53416),Td=n(30782),Nd=n(74703),Ld=n(33607),Dd=n(82491);const Rd=new Map([["american_express","american_express"],["amex","amex"],["bogus","bogus"],["cartes_bancaires","cartes_bancaires"],["dankort","dankort"],["diners_club","diners_club"],["discover","discover"],["elo","elo"],["forbrugsforeningen","forbrugsforeningen"],["hypercard","hypercard"],["interac","interac"],["jcb","jcb"],["laser","laser"],["maestro","maestro"],["mastercard","mastercard"],["rupay","rupay"],["unionpay","unionpay"],["visa","visa"],["visaelectron","visaelectron"]]);function Bd({brand:e,descriptor:t}){const{hasError:n}=(0,Dd.e)(),r=e?.toLowerCase().replace(/\s+/g,"_")??"",l=Rd.get(r)??"generic";return a.default.createElement("div",{style:{display:"flex"}},n&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Le.In,{appearance:"critical",source:"critical"}),a.default.createElement(ft.c,{spacing:"extraTight"})),a.default.createElement(Ld.j7,{icon:a.default.createElement(fi.k,{name:l}),details:t}))}var Fd=n(39629),zd=n(15694),Vd=n(85418),Od=n(39370),Wd=n(82380);const qd=(0,Fd.W)("AmazonPayChangePaymentLinkButton");function $d(){const e=(0,Sn.W)(),t=(0,E.W)(),{inMemoryAmazonPayParts:n}=(0,In.b)(),r=(0,o.md)(n.sdkStatus),l=(0,Vd.N)(Md.lC.AmazonPay),i=(0,zd.B)(void 0,qd),s=(0,Wd.N)(),d=t("vaulted.change_button","Change");return r.status===Od.SY.Error&&e.notify(new Ud("Unable to render change payment link because BWP SDK is unavailable")),r.status!==Od.SY.Available?null:a.default.createElement(J.N,{onPress:()=>{try{r.sdk.Pay.changePaymentMethod({amazonCheckoutSessionId:l,isDeclined:s})}catch(t){e.notify(new Ud(`Error on changing buyer payment method. Details: ${t}`))}},id:i},d)}class Ud extends Error{constructor(...e){super(...e),this.name="AmazonPayChangePaymentLinkError"}}function Hd({label:e}){const{optionList:{typographyStyle:t}}=(0,ta.x)(),{descriptor:n,brand:r}=(0,Nd.CS)();return a.default.createElement(on.c$,{id:Md.lC.AmazonPay,details:a.default.createElement(pa.g,{controlledBy:Md.lC.AmazonPay},a.default.createElement(Td.l,null,a.default.createElement(Hn.a,{inlineAlignment:"center"},a.default.createElement(ht.o,null,a.default.createElement(Bd,{brand:r,descriptor:n}),a.default.createElement($d,null)))))},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{style:t},e)),a.default.createElement(h.S,{blockAlignment:"center"},a.default.createElement(ad.T,{wallet:"amazonPay",size:"large"})))}function jd({method:e}){const t=(0,E.W)(),n=(0,vt.Bl)();switch(e.name){case Md.lC.AmazonPay:{const e=t("brand.amazon_pay","Amazon Pay");return n?null:a.default.createElement(Hd,{label:e})}case Md.lC.BuyWithPrime:return null;default:(0,Ho.xb)(e.name)}return null}var Yd=n(21818);function Gd({name:e,displayName:t,additionalParameters:n}){const r=(0,E.W)(),{nextStep:l}=(0,cd.PL)(),{paymentLines:i}=(0,ve.C)(),[s,d]=(0,o.fp)(i);if(!n.length)return e===Yd.m.Multibanco?a.default.createElement(Hn.a,{spacing:"large200",inlineAlignment:"center"},a.default.createElement(ln.V,{inlineAlignment:"center"},a.default.createElement(Uo.c,null,r("payment.local_payment_method_receiver_notice",{dueDays:"7"},"After placing your order, you will receive payment details. Make the payment at an ATM or online within {{dueDays}} days.")))):a.default.createElement(nd,null,r("payment.offsite_gateway_redirect_hint",{gateway_label:t,button_label:l.label},"After clicking “%{button_label}”, you will be redirected to %{gateway_label} to complete your purchase securely."));const c=s.find((t=>"local"===t.method.type&&t.method.name===e))?.method.additionalParameters;return a.default.createElement(a.default.Fragment,null,n.map((t=>{if("IdealBankSelectionParameterConfig"===t.__typename){const{__typename:r,options:l,label:o}=t;return a.default.createElement(Mr.l,{key:r,required:!0,onChange:(n=r,"IdealBankSelectionParameterConfig"===n?t=>d((n=>n.map((n=>("local"===n.method.type&&n.method.name===e&&(n.method.additionalParameters={bank:t}),n))))):()=>{}),value:c?.bank,label:o,options:l})}return null;var n})))}const Xd={PaymentMethodLogo:"tGF8X"},Zd=new Map([[Yd.m.Bancontact,e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 254 157"},e),a.createElement("path",{fill:"#004E91",d:"M226 27.4h-78.2l-8 9L114 65.5l-8 9H28.8l7.8-9.1 3.7-4.3 7.8-9.1H12.6C6.1 52 .8 57.5.8 64.1v25.6c0 6.7 5.3 12.1 11.8 12.1h136.2c6.5 0 15.4-4.1 19.7-9l20.6-23.4z"}),a.createElement("path",{fill:"#FD0",d:"M241.7.1c6.5 0 11.8 5.5 11.8 12.1v25.6c0 6.7-5.3 12.1-11.8 12.1h-35.5l7.9-9 3.9-4.5 7.9-9h-78.2l-41.7 47H28.3l55.7-63L86.1 9c4.4-4.9 13.3-9 19.8-9h135.8z"}),a.createElement("path",{fill:"#004E91",d:"M253.5 155.4v-3.7c0-.5-.3-.8-1-.8h-2.4c-.7 0-1.2-.1-1.3-.4-.2-.3-.2-.9-.2-1.9v-14h3.9c.3 0 .5-.1.7-.3s.3-.4.3-.7v-3.9c0-.3-.1-.5-.3-.7s-.4-.3-.7-.3h-3.9v-5.1c0-.3-.1-.5-.2-.6-.2-.1-.4-.2-.6-.2h-.1l-5.8 1c-.3.1-.5.2-.7.3q-.3.3-.3.6v3.9H237c-.3 0-.5.1-.7.3s-.3.4-.3.7v3.2q0 .45.3.6c.2.2.4.3.7.4l3.9.6v14c0 1.7.2 3.1.5 4.2.4 1.1.9 1.9 1.5 2.5.7.6 1.5 1 2.5 1.2s2.2.3 3.5.3c.7 0 1.3 0 1.9-.1.5-.1 1.2-.2 1.9-.3.5 0 .8-.3.8-.8m-20.8-.5v-4.3q0-.45-.3-.6c-.2-.1-.4-.2-.6-.2h-.1c-.9.1-1.8.2-2.6.2-.8.1-1.9.1-3.3.1-.5 0-1.1-.1-1.5-.3-.5-.2-.9-.5-1.3-.9s-.6-1-.8-1.7q-.3-1.05-.3-2.7v-4q0-1.65.3-2.7c.2-.7.5-1.3.8-1.7.4-.4.8-.7 1.3-.9q.75-.3 1.5-.3c1.4 0 2.5 0 3.3.1s1.7.1 2.6.2h.1c.3 0 .5-.1.6-.2q.3-.15.3-.6v-4.3c0-.4-.1-.6-.2-.7-.2-.1-.4-.3-.8-.4-.7-.2-1.5-.3-2.6-.5s-2.3-.2-3.8-.2c-3.4 0-6.1 1-8.2 3.1-2 2.1-3.1 5.1-3.1 9.1v4c0 3.9 1 7 3.1 9.1 2 2.1 4.8 3.1 8.2 3.1 1.4 0 2.7-.1 3.8-.2 1.1-.2 2-.3 2.6-.5.4-.1.6-.2.8-.4.2-.1.2-.4.2-.7m-31.3-5.1c-.6.3-1.2.5-1.9.7q-1.05.3-2.1.3c-1 0-1.8-.1-2.3-.4s-.7-.9-.7-2v-.4c0-.6.1-1.1.2-1.5s.4-.8.7-1.1.8-.5 1.3-.7c.5-.1 1.2-.2 2.1-.2h2.7zm7.6-11.7c0-1.8-.3-3.3-.8-4.5s-1.3-2.2-2.2-3c-1-.8-2.1-1.4-3.5-1.7-1.4-.4-3-.6-4.7-.6-1.6 0-3.2.1-4.7.3s-2.7.4-3.6.7c-.6.2-.9.5-.9 1.1v3.9c0 .3.1.5.2.7.2.1.4.2.6.2h.2c.4 0 .9-.1 1.4-.1.6 0 1.2-.1 1.9-.1s1.5-.1 2.3-.1h2.3c1.1 0 2 .2 2.6.6s1 1.3 1 2.7v1.7h-2.6c-4.1 0-7.2.6-9 1.9-1.9 1.3-2.8 3.4-2.8 6.2v.4c0 1.6.2 2.9.7 3.9.5 1.1 1.1 1.9 1.9 2.6.8.6 1.6 1.1 2.6 1.4s2 .4 3.1.4c1.4 0 2.7-.2 3.7-.6s2-.9 3-1.6v.8c0 .3.1.5.3.7s.4.3.7.3h5.4c.3 0 .5-.1.7-.3s.3-.4.3-.7v-17.2zm-25.7 17.3v-3.7c0-.5-.3-.8-1-.8H180c-.7 0-1.2-.1-1.3-.4-.2-.3-.2-.9-.2-1.9v-14h3.9c.3 0 .5-.1.7-.3s.3-.4.3-.7v-3.9c0-.3-.1-.5-.3-.7s-.4-.3-.7-.3h-3.9v-5.1c0-.3-.1-.5-.2-.6-.2-.1-.4-.2-.6-.2h-.1l-5.8 1c-.3.1-.5.2-.7.3q-.3.3-.3.6v3.9h-3.9c-.3 0-.5.1-.7.3s-.3.4-.3.7v3.2q0 .45.3.6c.2.2.4.3.7.4l3.9.6v14c0 1.7.2 3.1.5 4.2.4 1.1.9 1.9 1.5 2.5s1.5 1 2.5 1.2 2.2.3 3.5.3c.7 0 1.3 0 1.9-.1.5-.1 1.2-.2 1.9-.3.4 0 .7-.3.7-.8m-21-.1v-16c0-1.5-.1-2.9-.4-4.3-.2-1.3-.7-2.5-1.3-3.5s-1.5-1.8-2.6-2.3c-1.1-.6-2.5-.9-4.3-.9-1.5 0-2.9.2-4.1.6s-2.4 1-3.8 2v-1.2c0-.3-.1-.5-.3-.7s-.4-.3-.7-.3h-5.4c-.3 0-.5.1-.7.3s-.3.4-.3.7v25.6c0 .3.1.5.3.7s.4.3.7.3h5.8c.3 0 .5-.1.7-.3s.3-.4.3-.7v-18.9c.8-.4 1.6-.8 2.4-1.1.7-.3 1.5-.4 2.2-.4s1.3.1 1.8.2.8.4 1.1.7c.3.4.4.8.5 1.4s.1 1.3.1 2.1v16c0 .3.1.5.3.7s.4.3.7.3h5.8c.3 0 .5-.1.7-.3.4-.2.5-.5.5-.7m-36.4-11.1c0 3.9-1.4 5.9-4.3 5.9-1.4 0-2.5-.5-3.2-1.5s-1.1-2.5-1.1-4.4v-3.4c0-2 .4-3.4 1.1-4.4s1.8-1.5 3.2-1.5c2.8 0 4.3 2 4.3 5.9zm7.8-3.4c0-1.9-.3-3.7-.8-5.2s-1.3-2.8-2.3-3.9-2.3-1.9-3.8-2.5-3.2-.9-5.2-.9-3.7.3-5.2.9-2.8 1.4-3.8 2.5-1.8 2.4-2.3 3.9-.8 3.3-.8 5.2v3.4c0 1.9.3 3.7.8 5.2s1.3 2.8 2.3 3.9 2.3 1.9 3.8 2.5 3.2.9 5.2.9 3.7-.3 5.2-.9 2.8-1.4 3.8-2.5 1.8-2.4 2.3-3.9.8-3.3.8-5.2zm-26.8 14.1v-4.3q0-.45-.3-.6c-.2-.1-.4-.2-.7-.2h-.1c-.9.1-1.8.2-2.6.2s-1.9.1-3.3.1c-.5 0-1.1-.1-1.5-.3-.5-.2-.9-.5-1.3-.9s-.6-1-.8-1.7q-.3-1.05-.3-2.7v-4q0-1.65.3-2.7c.2-.7.5-1.3.8-1.7.4-.4.8-.7 1.3-.9q.75-.3 1.5-.3c1.4 0 2.5 0 3.3.1s1.7.1 2.6.2h.1c.3 0 .5-.1.7-.2q.3-.15.3-.6v-4.3c0-.4-.1-.6-.2-.7-.2-.1-.4-.3-.8-.4-.7-.2-1.5-.3-2.6-.5s-2.3-.2-3.8-.2c-3.4 0-6.1 1-8.2 3.1-2 2.1-3.1 5.1-3.1 9.1v4c0 3.9 1 7 3.1 9.1 2 2.1 4.8 3.1 8.2 3.1 1.4 0 2.7-.1 3.8-.2 1.1-.2 1.9-.3 2.6-.5.4-.1.6-.2.8-.4.2-.1.2-.4.2-.7m-23.6.4v-16c0-1.5-.1-2.9-.4-4.3-.2-1.3-.7-2.5-1.3-3.5s-1.5-1.8-2.6-2.3c-1.1-.6-2.5-.9-4.3-.9-1.5 0-2.9.2-4.1.6s-2.4 1-3.8 2v-1.2c0-.3-.1-.5-.3-.7s-.4-.3-.7-.3h-5.4c-.3 0-.5.1-.7.3s-.3.4-.3.7v25.6c0 .3.1.5.3.7s.4.3.7.3h5.8c.3 0 .5-.1.7-.3s.3-.4.3-.7v-18.9c.8-.4 1.6-.8 2.4-1.1.7-.3 1.5-.4 2.2-.4s1.3.1 1.8.2.8.4 1.1.7c.3.4.4.8.5 1.4s.1 1.3.1 2.1v16c0 .3.1.5.3.7s.4.3.7.3h5.8c.3 0 .5-.1.7-.3.3-.2.5-.5.5-.7m-37.2-5.5c-.6.3-1.2.5-1.9.7q-1.05.3-2.1.3c-1 0-1.8-.1-2.3-.4s-.7-.9-.7-2v-.4c0-.6.1-1.1.2-1.5s.4-.8.7-1.1.8-.5 1.3-.7c.5-.1 1.2-.2 2.1-.2h2.7zm7.7-11.7c0-1.8-.3-3.3-.8-4.5s-1.3-2.2-2.2-3c-1-.8-2.1-1.4-3.5-1.7-1.4-.4-3-.6-4.7-.6-1.6 0-3.2.1-4.7.3s-2.7.4-3.6.7c-.6.2-.9.5-.9 1.1v3.9c0 .3.1.5.2.7.2.1.4.2.6.2h.2c.4 0 .9-.1 1.4-.1.6 0 1.2-.1 2-.1.7 0 1.5-.1 2.3-.1h2.3c1.1 0 2 .2 2.6.6s1 1.3 1 2.7v1.7h-2.6c-4.1 0-7.2.6-9 1.9s-2.8 3.4-2.8 6.2v.4c0 1.6.2 2.9.7 3.9.5 1.1 1.1 1.9 1.9 2.6.8.6 1.6 1.1 2.6 1.4s2 .4 3.1.4c1.4 0 2.7-.2 3.7-.6s2-.9 3-1.6v.8c0 .3.1.5.3.7s.4.3.7.3H53c.3 0 .5-.1.7-.3s.3-.4.3-.7v-17.2zm-34.4 7.6c0 1.3-.5 2.4-1.4 3.1s-2.7 1.1-5.1 1.1h-4v-9h5.4c1.9 0 3.3.4 4 1.3s1.1 1.9 1.1 3zm-.2-14.3c0 .5-.1 1-.2 1.5-.2.5-.4.9-.8 1.2s-.9.6-1.5.8q-.9.3-2.4.3H8.9v-8.3h3.7c2.5 0 4.2.3 5.2.9s1.5 1.6 1.5 2.9v.7zm8.2 13.8c0-1.7-.4-3.1-1.2-4.3s-1.8-2.2-3.1-2.8c1.3-.6 2.3-1.6 3-2.8.7-1.3 1.1-2.7 1.1-4.2v-.9c0-1.9-.4-3.5-1.1-4.8s-1.8-2.3-3.1-3.1-2.9-1.3-4.8-1.7c-1.9-.3-3.9-.5-6.2-.5H9.6c-.8 0-1.6.1-2.4.1s-1.5.1-2.2.2-1.2.1-1.6.2c-.9.2-1.6.4-2 .9-.4.4-.6 1.2-.6 2.3V153c0 1.1.2 1.8.6 2.3.4.4 1.1.7 2 .9.5.1 1.1.2 1.7.2.7.1 1.4.1 2.2.2.8 0 1.6.1 2.4.1h2.5c2.1 0 4.1-.2 5.9-.5s3.5-.9 4.8-1.7c1.4-.8 2.4-1.9 3.3-3.3.8-1.4 1.2-3.2 1.2-5.3z"}))],[Yd.m.Ideal,e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 95 82"},e),a.createElement("path",{fill:"#FFF",d:"M2.954 2.097V80.21h45.542c30.042 0 43.07-16.824 43.07-39.134 0-22.222-13.028-38.98-43.07-38.98H2.954z"}),a.createElement("path",{d:"M48.788.375c39.75 0 45.684 25.49 45.684 40.68 0 26.356-16.223 40.87-45.684 40.87H.066V.376h48.722zM3.902 4.21v73.88h44.886c27.105 0 41.85-12.626 41.85-37.035 0-25.083-15.984-36.845-41.85-36.845z"}),a.createElement("path",{d:"M9.924 72.067h14.37v-25.58H9.923m16.114-12.884c0 4.932-3.997 8.932-8.93 8.932-4.93 0-8.93-4-8.93-8.932a8.93 8.93 0 0 1 17.86 0"}),a.createElement("path",{fill:"#C06",d:"M54.23 37.782v4.14H43.99V25.305h9.91v4.137h-5.77v1.927h5.457v4.135H48.13v2.277zm1.988 4.144L61.23 25.3h5.89l5.01 16.626h-4.31l-.938-3.216h-5.414l-.943 3.216zm6.46-7.352h2.994l-1.37-4.698h-.248zM74.21 25.3h4.14v12.482h6.132c-1.682-22.65-19.5-27.543-35.69-27.543H31.528v15.068h2.554c4.66 0 7.553 3.16 7.553 8.24 0 5.244-2.825 8.373-7.553 8.373H31.53v30.154h17.26c26.325 0 35.486-12.225 35.81-30.153H74.21zm-42.684 4.146v8.336h2.558c1.773 0 3.41-.512 3.41-4.233 0-3.638-1.822-4.104-3.41-4.104z"}))]]);function Qd({name:e,displayName:t}){const{optionList:{typographyStyle:n}}=(0,ta.x)(),r=Zd.has(e),l=Zd.get(e);return a.default.createElement(a.default.Fragment,null,a.default.createElement(on.xV,null,r?a.default.createElement(l,{className:Xd.PaymentMethodLogo}):a.default.createElement(jn.E,{style:n},t)),!r&&a.default.createElement(on.PE,null,a.default.createElement(gi,{paymentBrands:[e]})))}function Jd({name:e,displayName:t,additionalParameters:n}){return a.default.createElement(on.c$,{id:e,label:t,details:a.default.createElement(pa.g,{controlledBy:e},a.default.createElement(Gd,{name:e,displayName:t,additionalParameters:n}))},a.default.createElement(Qd,{name:e,displayName:t}))}function Kd(){const{value:e,loading:t}=(0,I.Oe)(),n=(0,E.W)(),r=(0,$n.a)(),l=e&&!t?n("payment.alternative_payment_currency_total_notice",{amount_due:a.default.createElement(jn.E,{emphasis:"bold"},r(e.totalWithoutGiftCards.amount,{currency:e.totalWithoutGiftCards.currencyCode,form:"explicit"}))},"Note: you will be charged %{amount_due}."):a.default.createElement(Ha.r,{inlineSize:"base"});return a.default.createElement(Hn.a,null,a.default.createElement(Uo.c,null,l))}function ec({id:e,additionalDetails:t,displayName:n}){const r=(0,E.W)(),{optionList:{typographyStyle:l}}=(0,ta.x)(),{value:i}=(0,I.Oe)(),s=(0,o.md)($o.G),d=n??r("payment_gateway.cash_on_delivery_label","Cash on Delivery (COD)"),c=t&&t?.trim().length>0?a.default.createElement(ln.V,null,a.default.createElement(Uo.c,null,t)):null,u=i||s?a.default.createElement(Kd,null):null,m=c||u?a.default.createElement(pa.g,{controlledBy:e},a.default.createElement(Hn.a,{inlineAlignment:"center",spacing:"large100"},c,u)):null;return a.default.createElement(on.c$,{id:e,label:d,details:m},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{style:l},d)))}function tc({id:e,label:t,additionalDetails:n}){const{optionList:{typographyStyle:r}}=(0,ta.x)(),{value:l}=(0,I.Oe)(),i=(0,o.md)($o.G),s=n&&n?.trim().length>0?a.default.createElement(ln.V,null,a.default.createElement(Uo.c,null,n)):null,d=i||l?a.default.createElement(Kd,null):null,c=s||d?a.default.createElement(pa.g,{controlledBy:e},a.default.createElement(Hn.a,{inlineAlignment:"center",spacing:"large100"},s,d)):null;return a.default.createElement(on.c$,{id:e,label:t,details:c},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{style:r},t)))}function nc({name:e,paymentBrands:t,showRedirectionNotice:n=!0}){const r=(0,E.W)(),{nextStep:l}=(0,cd.PL)(),{optionList:{typographyStyle:i}}=(0,ta.x)(),{value:s}=(0,I.Oe)(),d=(0,o.md)($o.G),c=n?a.default.createElement(nd,null,r("payment.offsite_gateway_redirect_hint",{gateway_label:e,button_label:l.label},"After clicking “%{button_label}”, you will be redirected to %{gateway_label} to complete your purchase securely.")):null,u=d||s?a.default.createElement(Kd,null):null;return a.default.createElement(on.c$,{id:e,label:e,details:c||u?a.default.createElement(pa.g,{controlledBy:e},a.default.createElement(Hn.a,{inlineAlignment:"center",spacing:"large100"},c,u)):null},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{emphasis:(0,vt.Bl)()?void 0:"bold",style:i},e)),a.default.createElement(on.PE,null,a.default.createElement(gi,{paymentBrands:t})))}function ac({id:e,displayName:t}){const n=(0,E.W)(),{optionList:{typographyStyle:r}}=(0,ta.x)(),l=t??n("payment_gateway.deferred_payment_label","Choose payment method later");return a.default.createElement(on.c$,{id:e,label:l},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{emphasis:(0,vt.Bl)()?void 0:"bold",style:r},l)))}function rc({name:e,paymentBrands:t,paymentMethodIdentifier:n,uiExtension:r}){const{optionList:{typographyStyle:l}}=(0,ta.x)(),o=(0,vt.Bl)()?void 0:"bold",i=(0,kt.IV)("Checkout::PaymentMethod::Render",void 0===r?[]:[r]);return i.length?a.default.createElement(on.c$,{id:e,label:e,details:a.default.createElement(pa.g,{controlledBy:e},a.default.createElement(Kn.N,{options:{paymentMethodIdentifier:n},extensions:i}))},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{emphasis:o,style:l},e)),a.default.createElement(on.PE,null,a.default.createElement(gi,{paymentBrands:t}))):null}const lc=(0,Ht.MN)(!1);function oc({errorBannerInContext:e,billingAddressInContext:t}){const{buyerHasActed:n,setBuyerHasActed:r}=(()=>{const[e,t]=(0,o.fp)(lc);return{buyerHasActed:e,setBuyerHasActed:()=>t((()=>!0))}})(),{negotiate:l}=(0,p.T4)(),i=(0,E.W)(),s=(0,io.l)(),{value:d}=(0,I.mu)(),{displayedPaymentMethods:c}=(0,_e.Ti)(),u=Fo(),[m]=(0,zr.Z)([Vr.hU]),f=!m,h=(0,uo.Bf)(),{paymentLines:y}=(0,ve.C)(),[g,_]=(0,o.fp)(y),b=(0,I.Dr)(),v=(0,uo.Vq)(),S=(0,uo.TD)(mo.D.StoreCredit),k=(0,uo.iy)(),w=(0,vt.Bl)(),{value:A,loading:x}=(0,I.oo)(),M=(0,vo.O)(),T=(0,yo.n)(),N=A?.type===po.A.Fulfillment,{type:L,checkoutSessionIdentifier:D}=(0,C.Fo)(),R=(0,ge.m)(),{id:B,currencyCode:F,hostedFieldsUrl:z}=(0,P.q)(),V=(0,ur.QB)(),{value:O}=(0,I.VS)(),W=O?.presentmentCurrency||F,q=(0,Sn.W)(),$=go(),[U]=Oo(),[,H]=(0,o.fp)($o.G),j=(0,re.g)(),{value:Y}=(0,I.CL)(),G=Y?.countryCode||O?.countryCode,X=(0,a.useRef)(0),Z=(0,a.useRef)([]),Q=(0,a.useRef)([]),J=d?.some((e=>"direct"===e.type&&e.paymentBrands.includes(fo.Y.Bogus))),K=u&&g.some((({method:e})=>e.type===en.NK.CreditCard&&e.brand===fo.Y.Amex)),ee=(0,a.useMemo)((()=>J?new Set(["number"]):K?new Set(["verification_value"]):new Set),[J,K]);(0,a.useEffect)((()=>{if(Boolean(R.searchParams.get(Be.GH)||(0,de.Ri)(Be.GH)===D)){const e=g[0]?.method;"wallet"===e?.type&&e.name===sn.R.ShopPay&&te(["direct"])}}),[]);const te=(0,a.useCallback)((e=>{const t=sc(g,d);let n;_((t=>{const a=t.some((e=>"direct"===e.method.type));return n=(0,Wo.i$)(e,[...t,...!a&&U?[{method:U}]:[]],d,b.value?.lines),n}));const a=sc(n,d);(0,qo.fR)(t,a,W)&&(H(!0),function(e,t,n,a,r,l,o,i){const s={schemaId:le.$D.MultiCurrencyCheckoutPaymentMethodChange,payload:{shopId:parseInt((0,$t.ee)(n),10),userToken:t,checkoutToken:l||"",shopCurrencyCode:a,checkoutPresentmentCurrencyCode:r,priorPaymentMethodHandle:ic(o),priorPaymentType:(0,bo.N9)(o?.type||""),newPaymentMethodHandle:ic(i),newPaymentType:(0,bo.N9)(i?.type||""),isPriorPaymentMethodMc:(0,qo.Yl)(r,o),isNewPaymentMethodMc:(0,qo.Yl)(r,i)}};e.record(s)}(j,V.value.defaultAttributes?.uniqToken||"",B,F,W,D,t,a),l(void 0,{progression:!1,onComplete:()=>{}}))}),[g,d,U,_,W,b.value?.lines,H,j,V.value.defaultAttributes?.uniqToken,B,F,D,l]),ne=(0,a.useCallback)((e=>{r(),te(e)}),[te,r]),ae=(0,a.useMemo)((()=>{const e=g.filter((e=>{return t=e,!!c&&c.some((e=>(0,qo.t)(e)===(0,qo.t)(t.method)))||(e=>("wallet"===e.method.type||"walletsPlatformPaymentMethod"===e.method.type)&&so.T3.includes(e.method.name))(e);var t})),t=(0,Wo.gP)(e);return t.length>0?t:[]}),[c,g]);(0,a.useEffect)((()=>{(0,co._U)(g)||0===ae.length&&c?.[0]&&te([(0,qo.t)(c?.[0])])}),[g,c,ae,te]),(0,a.useEffect)((()=>{ti(Q.current,c)||X.current++}),[c]),(0,a.useEffect)((()=>{let e;ti(Q.current,c)?function(e,t){return!(!e||!t||e.length!==t.length)&&(e===t||(0,Ko.b)(e,t))}(Z.current,ae)||(e=n?"buyerSelectedPaymentMethod":"autoSelectedPaymentMethod"):e="paymentMethodsChanged",e&&function(e,t,n,a,r,l,o,i,s){const d=Math.min(...l?.map((e=>e.orderingIndex))||[]),c=Math.max(...l?.map((e=>e.orderingIndex))||[]);l?.forEach((l=>{const u=(0,qo.t)(l),m=!i&&u===r[0],p=i&&u===r[0],f={schemaId:le.$D.CheckoutPaymentMethodRendered_1_0,payload:{shopId:parseInt((0,$t.ee)(t),10),checkoutSessionIdentifier:o||"",buyerCountryCode:s,eventTriggerReason:a,iterationNumber:n,orderInTheList:l.orderingIndex,displayName:ei(l)||"",isAutoSelected:m,isBuyerSelected:p,isOrderedFirst:l.orderingIndex===d,isOrderedLast:l.orderingIndex===c}};e.record(f)}))}(j,B,X.current,e,ae,c,D,n,G),Q.current=c,Z.current=ae}),[ae,n,c,j,B,D,G]);const oe=(0,a.useMemo)((()=>{const e=ae.some((e=>"deferred"===e)),t=ae.some((e=>"creditCards"===e)),n=A?.type===po.A.Fixed;if(M){if(n)return i("payment_gateway.draft_order_payment_due_later_terms",{translatedName:A.translatedName.toLocaleLowerCase()},"You’ll be on {{translatedName}} terms once your order is confirmed.");if(N)return i("payment_gateway.draft_order_payment_due_on_fulfillment","Your payment will be due once your order has been confirmed and fulfilled.");const t=e?i("payment_gateway.draft_order_payment_due_later_no_terms","Your payment will be due once your order is confirmed."):i("payment_gateway.draft_order_payment_due_later_no_terms_payment_selected","Your card will be charged once your order is confirmed.");return null==A?t:i("payment_gateway.draft_order_payment_due_later_terms",{translatedName:A.translatedName},"You’ll be on {{translatedName}} terms once your order is confirmed.")}if(null==A||T)return;if(N){if(ae.some((e=>"creditCards"===e)))return i("payment_gateway.order_due_on_fulfillment_payment","Your card will be charged once your order is fulfilled.");if(e)return i("payment_gateway.order_due_on_fulfillment_choose_later","Your payment will be due once your order is fulfilled.")}if(!A.dueDate)return;const a={translatedName:A.translatedName,dueDate:s(new Date(A.dueDate),{month:"long",day:"2-digit"})};return t?n?i("payment_gateway.fixed_direct_payment_terms",{dueDate:a.dueDate},"Your card will be charged on {{dueDate}}."):i("payment_gateway.direct_payment_terms",a,"You’re on {{translatedName}} terms. Your card will be charged on {{dueDate}}."):n?i("payment_gateway.fixed_payment_label",{dueDate:a.dueDate},"Your payment will be due on {{dueDate}}."):i("payment_gateway.generic_payment_terms",a,"You’re on {{translatedName}} terms. Your payment will be due on {{dueDate}}.")}),[ae,A,M,T,N,s,i]);if(!h)return a.default.createElement(ao.y,{impressionType:"payment",impressionFeatures:["freeOrder"]},a.default.createElement(Jo,{reason:"freeOrder",minimal:w}));if(null==c||0===c.length)return a.default.createElement(ao.y,{impressionType:"payment",impressionFeatures:[]},a.default.createElement(ri,{error:"no_methods"}));if(v)return a.default.createElement(ao.y,{impressionType:"payment",impressionFeatures:["giftCard"]},a.default.createElement(Jo,{reason:"giftCard",minimal:w}));if(S)return a.default.createElement(ao.y,{impressionType:"payment",impressionFeatures:["storeCredit"]},a.default.createElement(Jo,{reason:"storeCredit",minimal:w}));if(k)return a.default.createElement(Jo,{reason:"redeemables",minimal:w});const ie=f&&(L===ho.Y.DraftOrder||L===ho.Y.OrderEdit),se=c.map((e=>"name"in e?e.name??e.type:e.type));return a.default.createElement(ao.y,{impressionType:"payment",impressionFeatures:se},a.default.createElement(ii,{errorBannerInContext:e,billingAddressInContext:t,selectedPaymentMethods:ae},a.default.createElement(Hn.a,null,ie&&a.default.createElement(ui,null),oe?a.default.createElement(an.l,{status:"info"},x?a.default.createElement(Ha.r,{inlineSize:"large"}):oe):null,a.default.createElement(ma.m,{id:"basic",selectedItems:ae,controlHidden:1===c.length,onChange:ne,title:i("general.choose_payment_method","Choose a payment method"),titleHidden:!0},c.map((e=>{const t=(0,qo.t)(e);return"direct"===e.type?a.default.createElement(oo.VV,{key:t,hostedFieldsUrl:z,blurValidationEnabled:w,blurValidationFieldDenylist:ee,onError:q.notify,onSetFieldErrors:$},a.default.createElement(Zs,{id:t,paymentBrands:e.paymentBrands,displayName:e.displayName,extensibilityDisplayName:e.extensibilityDisplayName,setSelected:ne,paymentMethodIdentifier:e.paymentMethodIdentifier,uiExtension:e.uiExtension,customHostedFields:e.checkoutHostedFields,isSelected:ae.includes(t),alternative:e.alternative})):"wallet"===e.type?a.default.createElement(oo.VV,{key:t,hostedFieldsUrl:z,blurValidationFieldDenylist:ee,onError:q.notify,onSetFieldErrors:$},a.default.createElement(xd,{method:e})):"walletsPlatform"===e.type?a.default.createElement(jd,{key:t,method:e}):e.type===en.NK.PayPal?a.default.createElement(Js,{key:t,method:e}):"local"===e.type?a.default.createElement(Jd,{key:t,name:e.name,displayName:e.displayName,additionalParameters:e.additionalParameters}):"paymentOnDelivery"===e.type?a.default.createElement(ec,{id:e.type,key:t,additionalDetails:e.additionalDetails,displayName:e.displayName}):"manualPayment"===e.type||"customManualPayment"===e.type?a.default.createElement(tc,{id:`${e.type}-${e.id}`,key:t,label:e.name,additionalDetails:e.additionalDetails}):"offsite"===e.type?a.default.createElement(nc,{key:t,name:e.name,paymentBrands:e.paymentBrands,showRedirectionNotice:e.showRedirectionNotice}):"deferred"===e.type?a.default.createElement(ac,{id:e.type,key:t,displayName:e.displayName}):"customOnsite"===e.type?a.default.createElement(rc,{key:t,name:e.name,paymentMethodIdentifier:e.paymentMethodIdentifier,paymentBrands:e.paymentBrands,uiExtension:e.uiExtension}):void 0}))))))}function ic(e){if(void 0===e)return"";const t="name"in e&&e.name||void 0,n="paymentMethodIdentifier"in e&&e.paymentMethodIdentifier||void 0;return(0,bo.p$)(e.type,t,n)}function sc(e,t){return t.find((t=>e.find((e=>"paymentMethodIdentifier"in e.method&&"paymentMethodIdentifier"in t?e.method.paymentMethodIdentifier===t.paymentMethodIdentifier:e.method.type===t.type))))}var dc=n(5949),cc=n(11157),uc=n(72236);function mc(){const e=(0,_e.O7)(),{shippingRequired:t}=(0,_e.kG)(),n=(0,or.No)(),r=t&&!n,l=(0,ra.R4)(),i=(0,x.sG)(),{shippingRequired:s}=(0,dc.D)(),{isOrderEditCheckout:d}=(0,cc.S)(),{shouldShowUnrecognizedUserFlow:c,shouldShowUnknownUserFlow:u}=(0,id.z)(),m=(0,Ir.N)(),{paymentLines:p}=(0,ve.C)(),f=(0,o.md)(p),h=(0,a.useMemo)((()=>f[0]),[f]),y="direct"===h?.method.type,g="wallet"===h?.method.type&&h?.method.name===sn.R.ShopPay,_="wallet"===h?.method.type&&h?.method.name===sn.R.ApplePay,E=(0,ra.VH)({shopPay:l.delivery}),b=(0,uc.C)();return!(0,Wo.WT)(f)&&r||g&&(c||u)||_?"hidden":m&&!e&&"offsite"!==h?.method.type?"inContext":i?"afterPayment":E?"inContext":e?"afterPayment":d?b?.pickupAddress?"afterPayment":s&&y?"inContext":"afterPayment":r&&y?"inContext":"afterPayment"}function pc(){const e=(0,P.q)(),{shippingRequired:t}=(0,_e.kG)(),n=(0,or.No)(),r=t&&!n,{paymentLines:l}=(0,ve.C)(),i=(0,o.md)(l),s=(0,a.useMemo)((()=>i[0]),[i]),d="direct"===s?.method.type,c="paymentOnDelivery"===s?.method.type,u="offsite"===s?.method.type,m=(0,ra.rS)("businessCustomer",!0,!1),{isOrderEditCheckout:p}=(0,cc.S)();return Boolean(e.requireMatchingShippingAndBilling)&&(d||c||u)&&r&&!p&&!m}function fc(){const{hostedFieldsUrl:e}=(0,P.q)(),t=(0,Sn.W)(),n=go(),r=mc(),{shippingRequired:l}=(0,dc.D)(),o=(0,uc.C)(),i=(0,or.No)()||o?.pickupAddress,s=pc(),d=(0,ra.R4)(),{value:c=[]}=(0,I.mu)(),{PaymentMethods:u}=rr(),m=l&&!i&&!s,p=(0,ra.VH)({shopPay:"inContext"===r&&!d.delivery,businessCustomer:!0,customerAccount:m})??m,f=c.some((e=>"direct"===e.type&&e.paymentBrands.includes(fo.Y.Bogus))),h=(0,a.useMemo)((()=>f?new Set(["number"]):new Set),[f]);return a.default.createElement(oo.VV,{hostedFieldsUrl:e,blurValidationFieldDenylist:h,onError:t.notify,onSetFieldErrors:n},a.default.createElement(u,{billingAddressInContext:p}))}function hc(){return(0,uo.Nq)(),null}function yc(){const{hasViolations:e}=(0,bl.l6)(El.S),t=(0,E.W)(),n=e?t("shipping_errors.shipping_method_not_available_due_to_unsatisfied_conditions","Items in the cart do not meet price or weight requirements to qualify for shipping. Update your cart and try again."):t("shipping_errors.shipping_method_not_available_generic.one","Your order cannot be shipped to the selected address. Review your address to ensure it's correct and try again, or select a different address.");return a.default.createElement(an.l,{status:"critical",title:t("shipping_errors.title","Shipping not available")},n)}const gc="shipping_address",_c="custom_billing_address";function Ec({isForExpressCheckout:e=!1}){const t=(0,E.W)(),{merchantPolicies:n}=(0,P.q)(),r=e?"small":"base",l=n?.find((e=>"subscription-policy"===e.handle)),o=a.default.createElement(jn.E,{appearance:"subdued",size:r},t("payment.purchase_options_cancellation_policy_label","cancellation policy")),i=l?a.default.createElement(J.N,{appearance:"monochrome",overlay:a.default.createElement(Va.a,{title:t("shop_policies.purchase_options_cancellation_policy","Cancellation policy"),source:l.url,padding:!0})},o):o;return a.default.createElement(a.default.Fragment,null,a.default.createElement(h.S,{id:"purchase_options_agreement",padding:e?["small100","none","none","none"]:"none"},a.default.createElement(jn.E,{appearance:"subdued",size:r},e?t("payment.purchase_options_agreement_label_wallets","By continuing with your payment, you agree to the future charges listed on this page and the cancellation policy."):t("payment.purchase_options_agreement_label",{cancellation_policy_label:i},"One or more items in your cart is a deferred or recurring purchase. By continuing with your payment, you agree that your payment method will automatically be charged at the price and frequency listed on this page until it ends or you cancel. All cancellations are subject to the  %{cancellation_policy_label}."))))}function bc({isShopPay:e,label:t}){const n=(0,E.W)(),[r,l]=(0,o.fp)((0,ve.C)().acceptMarketing),[i,s]=(0,o.fp)((0,ve.C)().acceptEmailMarketing),d=(0,re.g)(),{checkoutSessionIdentifier:c,sourceId:u}=(0,C.Fo)(),{id:m,myshopifyDomain:p}=(0,P.q)(),f=(0,vt.Bl)(),h=(0,ke.j9)(),y=(0,wa.s)().translations.has("marketing.disclaimer.description_html")?a.default.createElement(ln.V,{size:"small",appearance:"subdued"},n("marketing.disclaimer.description_html",{privacy_policy_link:a.default.createElement(J.N,{external:!0,to:h.storefront("policies/privacy-policy"),appearance:"monochrome"},n("marketing.disclaimer.privacy_policy","Privacy Policy")),terms_of_service_link:a.default.createElement(J.N,{external:!0,to:h.storefront("policies/terms-of-service"),appearance:"monochrome"},n("marketing.disclaimer.terms_of_service","Terms of Service"))},{options:{dangerouslySetInnerHTML:!0}}," ")):null;return a.default.createElement(Hn.a,{spacing:"tight"},a.default.createElement(_i.S,{id:"marketing_opt_in",name:"marketing_opt_in",checked:r,onChange:function(t){l(t),s(t);const n={schemaId:le.$D.EmailMarketingOptInInteraction,payload:{checkoutToken:c||u,shopId:Number((0,$t.ee)(m)),shopifyDomain:p,action:t?"click_email_opt_in":"unclick_email_opt_in",origin:e?"payment_page":"contact_info_page",checkoutVersion:f?"checkout_one_redesign":"checkout_one"}};d.record(n)}},t??n("marketing.accept_marketing_checkbox_label","Email me with news and offers")),y)}function vc(e){const t=(0,ra.Gy)(),n=(0,E.W)(),r="shopPay"===t;return a.default.createElement(bc,{isShopPay:!0,label:r?n("marketing.accept_shop_pay_marketing_checkbox_label","Sign me up for news and offers from this store"):n("marketing.accept_marketing_checkbox_label","Email me with news and offers")})}var Cc=n(14788);const Sc=()=>" "===(0,E.W)()("review.review_notice_html"," ")?null:a.default.createElement(a.default.Fragment,null,a.default.createElement(jn.E,{appearance:"subdued",size:"small"},a.default.createElement(Cc.X,null)),a.default.createElement(he.S,{spacing:y.OF.default("small300").when({viewportInlineSize:{min:"medium"}},"large200")}));var kc=n(21299),wc=n(74251),Pc=n(46277);const Ac={source:"googlePay",features:{MarketingDisclosure:vc,ReviewNotice:Sc,PaymentErrorHandler:function(){const e=(0,Pc.IX)(),t=(0,ra.Gy)(),[n,r]=(0,wc.SY)(),l=(0,kc.J)({shouldResetCustomerInfo:!1}),o=(0,a.useRef)(l);return o.current=l,(0,a.useEffect)((()=>{e?.id!==n?.receiptIdForPaymentFailure&&"failed"===e?.status&&"payment"===e?.failure.type&&"googlePay"===t&&(o.current(),r({...n,receiptIdForPaymentFailure:e?.id}))}),[e,t,r,n]),null}}};function Ic(){const[e]=(0,hl.a4)(),t=(0,is.Jj)();return(0,a.useMemo)((()=>e.filter((e=>!e.expired&&(!t.paymentMethodMustSupportInterestBearingLoans||e.supportsInstallmentsInterestLoan)))),[e,t])}var xc=n(97495);function Mc(){const e=(0,xn.f)(),{shippingRequired:t}=(0,_e.kG)(),n=(0,o.md)(xe.D.selectedCreditCard),r=(0,o.md)((0,ve.C)().billingAddress),l=(0,o.md)((0,ve.C)().shippingAddress),i=(0,o.md)((0,ve.C)().billingAddressOption),s=(0,_e.O7)(),d=(0,o.md)(s?xe.D.selectedFreeCheckoutBillingAddress:xe.D.selectedNewCardBillingAddress),c=(0,o.md)(xe.D.selectedShippingAddress),u=(0,a.useMemo)((()=>t?c?.address?c.address:l:null),[c,l,t]),m=(0,kn.Z7)(u?.countryCode,void 0,e),p=u?m(u,"shipping"):new Map,f=(0,a.useMemo)((()=>n?n.billingAddress.address:d?.address?d.address:"shipping"===i&&u?u:r),[r,i,d,u,n]),h=(0,kn.Z7)(f.countryCode,void 0,e)(f,"billing");return{selectedBillingAddress:f,selectedShippingAddress:u,billingAddressErrors:h,shippingAddressErrors:p}}function Tc(){const{nonEligibleReason:e}=(0,xc.O)(),{value:t,loading:n}=(0,I.FC)(),{selectedShippingAddress:r,shippingAddressErrors:l,billingAddressErrors:o}=Mc(),i=o.size>0,s=l.size>0||r&&!n&&"unavailable"===t?.status,d=(0,a.useMemo)((()=>e||(s?Be.dQ.ShopCashInvalidShippingAddress:i?Be.dQ.ShopCashInvalidBillingAddress:null)),[e,s,i]);return{eligible:null==d,nonEligibleReason:d}}function Nc(){const e=(0,zr.a)(Vr.sE),t=(0,zr.a)(Vr.r0),n=(0,Sl.s)(),{nonEligibleReason:a}=Tc(),{shopCash:r}=(0,_e.GH)(),[l]=(0,hl._c)(),o=Ic(),i=(0,ie.Mx)(),s=Boolean(r()),d=(0,vt.Bl)(),c=s?a:Be.dQ.ShopCashMerchantNotSupported,u=n&&!i,m=n&&i,p=new URLSearchParams(location.search).has("shop_cash_web")&&!t,f=u||m&&p||e,h=l.length>0&&o.length>0||d;return{visible:Boolean(f&&h),nonEligibleReason:c}}var Lc=n(11672);let Dc=function(e){return e.Vaulted="vaulted",e.Root="root",e}({});var Rc=n(47472);const Bc=()=>{const{recordImmediately:e,pageLoadId:t}=(0,oe.v)(),n=(0,Rc.K)("api-client-id"),[r]=(0,hl.Ou)(),l=(0,zr.a)(Vr.sE),{shopPayCheckoutSurface:o}=(0,S.I)(),i=Ic(),s=(0,vt.Bl)(),d=Boolean(window.ReactNativeWebView),c=i.length;return{recordAction:(0,a.useCallback)((a=>{const{source:i,action:u,redemptionType:m}=a;e({schemaId:"shopify_pay_payment_page_shop_cash_redemption_actions/1.0",payload:{pageLoadId:t,publicId:r,action:u,redemptionType:m,source:i,shopPayCheckoutSurface:o,isReactNativeWebview:d,isOnePageCheckout:s,isShopCashBalanceBetaEnabled:l,nEnabledCreditCards:c,apiClientId:n}})}),[t,r,o,d,s,l,c,n,e])}};function Fc(e,t,n){return{source:e,action:t,redemptionType:n}}var zc=n(62576),Vc=n(74928);const Oc=Object.freeze({name:null,number:null,verification_value:null,expiry:null,issue_date:null,issue_number:null});let Wc=function(e){return e.CreditCard="creditCard",e.BillingAddress="billingAddress",e}({}),qc=function(e){return e.ExpiredCard="credit_card_is_expired",e.InvalidValueForCardType="is_not_valid_for_this_card_type",e.NameInvalid="name_is_invalid",e.VerifyFailed="failed_to_verify_credit_card",e.SessionNotFound="session_id_not_found",e.CardTypeInvalid="invalid_card_type",e.NumberInvalid="is_not_a_credit_card_number",e}({}),$c=function(e){return e.FirstName="firstName",e.LastName="lastName",e.Number="number",e.Cvv="verificationValue",e.Month="month",e.Year="year",e.Base="base",e.DebitOnly="debitOnly",e}({});const Uc={baseMessage:null,fieldErrors:Oc};function Hc(){const e=(0,E.W)(),[t,n]=(0,a.useState)(Uc),r=(0,a.useCallback)((t=>{if(!t)return void n(Uc);if(!t.length)return void n({baseMessage:e("shop_pay.credit_card_form.generic_card_error","There was an error adding this card"),fieldErrors:Oc});const a={...Oc};let r=null;t.forEach((t=>{switch(t?.field[1]){case $c.FirstName:case $c.LastName:return void(a.name=e("field_errors.credit_card_name_invalid","Enter your name exactly as it’s written on your card"));case $c.Month:case $c.Year:return void(a.expiry=e("field_errors.credit_card_expiry_invalid","Enter a valid expiration date"));case $c.Number:return void(a.number=e("field_errors.credit_card_number_invalid","Enter a valid card number"));case $c.Cvv:return void(a.verification_value=e("payment.card_fields.errors.invalid.verification_value","Enter a valid CVV or security code"));case $c.DebitOnly:return void(r=e("shop_pay.checkout.debit_only","You can only pay in installments with a debit card. Please enter a valid debit card."));case $c.Base:if(t.message===qc.ExpiredCard)return void(a.expiry=e("shop_pay.checkout.card_has_expired","This card has expired"))}r=e("shop_pay.credit_card_form.generic_card_error","There was an error adding this card")})),n({baseMessage:r,fieldErrors:a})}),[e]);return{creditCardErrors:t,generateCreditCardErrors:r}}var jc=n(31933),Yc=n(13652);function Gc(){const e=(0,Yc.tM)(),t=(0,Yc.xM)(),n=(0,Yc.ZZ)(),[r,l]=(0,hl.a4)(),[i,s]=(0,hl.sg)(),[,d]=(0,hl.ou)(),[c]=(0,hl.Df)(),[u]=(0,hl.$v)(),{updateCheckoutAddress:m}=(0,jc.V)(),p=(0,o.md)((0,Vc._)()),f=(0,a.useCallback)((async e=>{s(e),await m({billingAddress:e.billingAddress.address,fallbackPhoneNumber:u})}),[s,m,u]),h=(0,a.useCallback)((async e=>{const n=i?.id;if("success"===(await t(e)).status){const t=r.filter((t=>t.id!==e));if(l(t),n!==e)return;const a=(0,fd.iZ)(t);a?s(a):(s(void 0),d(c));const o=a?a.billingAddress.address:c?.address;await m({billingAddress:o??p,fallbackPhoneNumber:u})}}),[r,t,p,l,c,d,s,m,u,i]),y=(0,a.useCallback)((async(t,n,a,o=!1,i=!1)=>{const s=await e(n,t,a);if("success"===s.status&&s.creditCard){if(o&&"debit"!==s.creditCard.funding)return h(s.creditCard.id),{status:"failed",errors:[{field:["",$c.DebitOnly],message:""}]};l([...r,s.creditCard]),i?await f(s.creditCard):f(s.creditCard)}return s}),[e,r,h,l,f]),g=(0,a.useCallback)((async(e,t,a)=>{const o=await n(t,e,a);if("success"===o.status&&o.creditCard){const t=r.findIndex((t=>t.id===e)),n=[...r];n[t]=o.creditCard,l(n),f(o.creditCard)}return o}),[r,l,f,n]);return{selectedCreditCard:i,setSelectedCreditCard:f,saveCreditCard:y,removeCreditCard:h,editCreditCard:g}}function Xc(e){return(0,o.md)(xe.D.enabledFlags).includes(e)}const Zc="f_59edecba",Qc={Content:"QBBxR"};function Jc({address:e,actions:t,nameLinePosition:n,addressPrimary:r}){const{nameLine:l,primary:o,secondary:i}=(0,kn.Jn)({address:e,nameLinePosition:n,addressPrimary:r});return a.default.createElement(rn.C,{columns:["fill","auto"],spacing:"base",blockAlignment:"start"},a.default.createElement(Hn.a,{inlineAlignment:"start",spacing:"none"},a.default.createElement("div",{className:Qc.Content},"block"===n&&a.default.createElement(ln.V,null,l),a.default.createElement(ln.V,null,o),a.default.createElement(ln.V,{appearance:"subdued"},i))),t)}function Kc(){const[e,t]=(0,a.useState)(!0),n=(0,I.JZ)(),r=(0,a.useMemo)((()=>(n?.value||[]).filter((e=>wl._T.has(e.code)))),[n?.value]);return(0,a.useEffect)((()=>{t(0===r?.length)}),[r]),{isValid:e,setIsValid:t,isLoading:n.loading}}function eu({state:e,title:t,description:n,onConfirm:r,onCancel:l}){return a.default.createElement(Ts.x,{open:"active"===e||"deleting"===e,title:t,onClose:l},a.default.createElement(Ns,{state:e,description:n,onConfirm:r,onCancel:l}))}function tu({label:e,onDelete:t,onEdit:n,id:r}){const l=(0,f.t)({base:!0,medium:!1});return n||t?a.default.createElement(He.$,{kind:"plain",accessibilityLabel:e,overlay:a.default.createElement(hs.A,{connector:l?"none":"arrow",id:r},a.default.createElement(Hn.a,{spacing:"small200",padding:["small100","base"],inlineAlignment:"center"},n&&a.default.createElement(He.$,{inlineSize:"fill",kind:"plain",onPress:n.callback,accessibilityLabel:n.label,inlineAlignment:"start",textDecoration:"none"},n.title),t&&a.default.createElement(He.$,{inlineSize:"fill",kind:"plain",onPress:t.callback,accessibilityLabel:t.label,appearance:"critical",inlineAlignment:"start",textDecoration:"none"},t.title)))},a.default.createElement(Le.In,{source:"verticalDots",size:"base",appearance:"monochrome"})):null}const nu="addressSelector--";function au({id:e="",selectedId:t="",addressType:n="shipping",isExternalVault:r=!1,onChange:l,onEdit:o,onDelete:i,choices:s,disabledChoices:d,ephemeralAddressCheckbox:c,addressPrimary:u,openAddressDeleteModal:m}){const p=(0,E.W)(),[f,h]=(0,a.useState)("idle"),y=(0,Ms.Z)(),g=(0,a.useMemo)((()=>Array.from(s.entries())),[s]),_=(0,a.useMemo)((()=>d?Array.from(d.entries()):[]),[d]),b="shipping"===n,{isLoading:v}=Kc(),[C,S]=(0,a.useState)(!1),k=(0,kn.g$)(n),w=e=>(o||i)&&e===t,[P,A]=(0,a.useState)(k),I=o?{label:p(b?"shipping.address_edit":"billing.address_edit","Edit address"),callback:o,title:p(b?"shipping.edit":"billing.edit","Edit")}:void 0,x=i?{label:p(b?"shipping.address_delete":"billing.address_delete","Delete address"),callback:()=>(A(k),m?m():h("active")),title:p(b?"shipping.delete":"billing.delete","Delete")}:void 0,M=ru(t,e),T=(0,a.useCallback)((([t])=>{S(!0);const n=function(e,t=""){return e.replace(`${t}${nu}`,"")}(t,e);l(n)}),[l,e]);(0,a.useEffect)((()=>{v||S(!1)}),[v]);const N=1===g.length,L=(n,l,i=!1)=>a.default.createElement(rn.C,{columns:["fill","auto"],blockAlignment:"start",key:n},a.default.createElement(cn.wC,{key:n,id:ru(n,e),padding:N?["small100","none","small100","small100"]:void 0,disabled:i},a.default.createElement(rn.C,{blockAlignment:"center",columns:["fill","auto"]},a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(Jc,{nameLinePosition:"inline",address:l,addressPrimary:u&&u(n)}),n===Be.r9&&c,(e=>w(e)&&r)(n)&&a.default.createElement(He.$,{kind:"plain",inlineAlignment:"start",onPress:o},a.default.createElement(jn.E,null,I?.title))),r&&t===n&&a.default.createElement(sr.R,{size:"small",active:v&&C})),(e=>w(e)&&!r)(n)&&a.default.createElement(tu,{label:p(b?"shipping.address_more":"billing.address_more","More actions for this address"),onEdit:I,onDelete:x}))),D=g.map((([e,t])=>L(e,t))),R=_.length?_.map((([e,t])=>L(e,t,!0))):null;return a.default.createElement(a.default.Fragment,null,a.default.createElement(cn.Wd,{id:`${n}Address`,selectedItems:[M],onChange:T,hideRadioButton:N},D,R),i&&a.default.createElement(eu,{state:f,title:p(b?"shipping.address_delete":"billing.address_delete","Delete address"),description:p("address_management.confirm_address_deletion",{address:P},"Are you sure you want to delete the address {{address}}?"),onConfirm:async()=>{h("deleting"),await i(),y.current&&h("idle")},onCancel:()=>h("idle")}))}function ru(e,t=""){return`${t}${nu}${e}`}const lu={Button:"NQzGw",disabled:"qgY_G",borderRadiusBase:"TVULW",displayInlineBlock:"L4070",paddingInlineSmall400:"pw7Cj",paddingInlineSmall300:"K8LBN",paddingInlineBase:"JtuBO",paddingBlockSmall400:"Zf5DM",paddingBlockSmall300:"kxG5m",paddingBlockBase:"v1Y5d"},ou=(0,a.forwardRef)((function({children:e,displayInlineBlock:t=!1,borderRadiusBase:n=!1,paddingInline:r="small300",paddingBlock:l="small300",...o},i){return a.default.createElement("div",{className:_()(lu.Button,n&&lu.borderRadiusBase,t&&lu.displayInlineBlock,o.disabled&&lu.disabled,lu[(0,dt.N)("paddingInline",r)],lu[(0,dt.N)("paddingBlock",l)])},a.default.createElement(He.$,(0,ye.A)({kind:"plain",ref:i},o),e))})),iu=/\{(.*?)\}/g;function su({addressToEdit:e,addressType:t,saveText:n,cancelText:r,onCancel:l,onSuccess:i,creditCardToEdit:s}){const[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),{geolocation:p}=(0,be.u)(),f=(0,E.W)(),{updateAddress:h,saveAddress:y}=(0,yl.T)(),g=(0,xn.f)(),_=(0,Vc._)(e),b=(0,o.md)(_),[v,C]=Ql(),{editCreditCard:S}=Gc(),{recordImmediately:k}=(0,oe.v)();let[w]=(0,hl.zo)();w={...w};const{details:P,loading:A}=(0,Pn.S0)(b.countryCode),I=(0,a.useMemo)((()=>P??p.country),[P,p.country]),{data:x}=(0,vs.IT)(Cs),M=(0,a.useMemo)((()=>x?.shop?.billingCountries??[{value:I.code,label:I.name}]),[x,I]),T=function(e,t,n,r,l){const i=(0,o.QN)(),s=(0,E.W)(),d=(0,xn.f)();return(0,a.useCallback)((a=>{let o=!0;for(const t of Object.values(e))i.read(t).value&&(o=!1);const c=new Map;d.isRequired("firstName")&&!(0,Ie.CJ)(a.firstName)&&c.set("firstName",s("field_errors.address_first_name_blank","Enter a first name")),d.isRequired("lastName")&&!(0,Ie.CJ)(a.lastName)&&c.set("lastName",s("field_errors.address_last_name_blank","Enter a last name")),d.isRequired("company")&&!(0,Ie.CJ)(a.company)&&c.set("company",s("field_errors.address_company_blank","Enter a company name")),d.isRequired("address1")&&!(0,Ie.CJ)(a.address1)&&c.set("address1",s("field_errors.address_address1_blank","Enter an address")),d.isRequired("address2")&&!(0,Ie.CJ)(a.address2)&&c.set("address2",s("field_errors.address_address2_blank","Enter an apartment, suite, etc.")),r?.autofillCityEnabled||!d.isRequired("city")||(0,Ie.CJ)(a.city)||c.set("city",s("field_errors.address_city_blank","Enter a city")),d.isRequired("countryCode")&&!(0,Ie.CJ)(a.countryCode)&&c.set("countryCode",s("field_errors.address_country_blank","Select a country/region")),l?.some((e=>e.value===a.countryCode))||c.set("countryCode",s("field_errors.address_country_invalid","Select a country/region from the list")),!r?.autofillPostalCodeEnabled&&r?.postalCodeRequired&&!(0,Ie.CJ)(a.postalCode)&&c.set("postalCode",s("field_errors.address_zip_invalid","Enter a valid ZIP / postal code")),d.isRequired("phone")&&!(0,Ie.CJ)(a.phone)&&c.set("phone",s("field_errors.address_phone_blank","Enter a valid phone number")),r.zones.length>0&&r.formatting.edit.includes("{province}")&&!(0,Ie.CJ)(a.zoneCode)&&c.set("zoneCode",s("field_errors.address_province_blank","Select a state / province"));const u="shipping_address"===n?t.delivery:t.payments,m=(0,wn.oD)(n,u),p=new Map([...c,...m]);if(p.size){for(const[t,n]of p)i.write(e[t],n);o=!1}return o}),[d,l,r,e,i,s,n,t])}(v,w,t,I,M);(0,a.useEffect)((()=>{!e||A||u||(T(b),m(!0))}),[u,T,b,e,A]);const N=(0,a.useMemo)((()=>{const e=I.formatting.edit,t=e.match(iu)?.map((e=>e.slice(1,-1)))??[];return t?.reduce(((e,t)=>{if(!g.isVisible(t))return e;const n=function(e){switch(e){case"zip":return"postalCode";case"country":return"countryCode";case"province":return"zoneCode";default:return e}}(t);return e.push({id:n,fields:[n]}),e}),[])}),[g,I]),L=(0,a.useCallback)((async()=>{if(w.delivery=[],w.payments=[],!T(b))return;let n;c(!0),s?n=await S(s.id,b,s.nickname):e&&"id"in e?n=await h(b,e.id):(n=await y(b,t),k({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:"shipping_address"===t?"shipping_address_add_new":"billing_address_add_new"}})),"success"===n.status?i?.():(c(!1),C(n.errors))}),[e,b,s,S,t,i,k,y,h,T,C,w]),{groupsBeforeCountry:D,countryGroup:R,groupsAfterCountry:B}=(0,a.useMemo)((()=>fl(N)),[N]),F=(0,a.useCallback)((()=>{k({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:"address_autocomplete"}})}),[k]),z={country:I,address:_,addressErrors:v,addressSettings:g,availableCountries:M,onAddressAutoComplete:F};return a.default.createElement(fa.l,{disabled:d,onSubmit:L},a.default.createElement(sr.R,{active:A},a.default.createElement(xr.H,null,D.map((e=>a.default.createElement(ml,(0,ye.A)({key:e.id,group:e,loading:A},z)))),a.default.createElement(ml,(0,ye.A)({key:"country",group:R,loading:A},z)),B.map((e=>a.default.createElement(ml,(0,ye.A)({key:e.id,group:e,loading:A},z)))),a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(He.$,{loading:d,accessibilityRole:"submit"},n??f("shop_pay.address_form.save","Save address")),l?a.default.createElement(ou,{onPress:l,inlineSize:"fill",borderRadiusBase:!0,paddingBlock:"base"},r??f("shop_pay.address_form.cancel","Cancel")):null))))}var du=n(5366);function cu({addressType:e,addressCount:t,onPress:n}){const r=(0,E.W)(),{shippingCountries:l}=(0,Pn.UR)(),[o,i]=(0,a.useState)(!1),s=t>=Be.I0,d=(0,a.useCallback)((()=>{n?n():i(!0)}),[n]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(ou,{inlineSize:"fill",inlineAlignment:"start",onPress:d,disabled:s,paddingInline:"base"},a.default.createElement(ht.o,{padding:["small200","none"]},a.default.createElement(Le.In,{source:"plus",size:"small",appearance:s?void 0:"monochrome"}),a.default.createElement(Hn.a,{inlineAlignment:"start",spacing:"small400"},a.default.createElement(ln.V,{appearance:s?"subdued":void 0},r("shop_pay.address_form.add_address","Use a different address")),s&&a.default.createElement(ln.V,{inlineAlignment:"start",size:"small",emphasis:"bold"},r("shop_pay.address_form.max_address",{max_addresses:Be.I0},"{{max_addresses}}-address limit reached. Remove an address to add a new one."))))),l&&!n&&a.default.createElement(du.M,{open:o,title:r("shop_pay.address_form.add","Add address"),onClose:()=>i(!1)},a.default.createElement(su,{onCancel:()=>i(!1),onSuccess:()=>i(!1),addressType:e})))}function uu({message:e,action:t,padding:n=["none","base","base","base"]}){return a.default.createElement(h.S,{padding:n},a.default.createElement(an.l,{status:"critical"},e," ",t&&a.default.createElement(He.$,{kind:"plain",onPress:t.onPress},t.text)))}function mu({addressType:e,isValid:t,onAction:n,checkoutErrors:r}){const{value:l,loading:o}=(0,I.FC)(),i=(0,E.W)(),{name:s}=(0,P.q)(),d="shipping_address"===e?r.delivery:r.payments,c=(0,a.useMemo)((()=>{const e=[];if(0===d.length)return e;for(const t of d)switch(t.code){case Pe.X.DeliveryCompanyRequired:e.push({code:t.code,message:i("shop_pay.checkout.shipping_company_required_error",{shopName:s},"{{shopName}} requires a company name for the shipping address."),actionMessage:i("shop_pay.checkout.update_address","Update address")});continue;case Pe.X.DeliveryPhoneNumberRequired:case Pe.X.DeliveryPhoneNumberDoesNotMatchExpectedPattern:e.push({code:t.code,message:t.localizedMessage||"",actionMessage:i("shop_pay.checkout.update_address","Update address")});continue;case Pe.X.PaymentsCompanyRequired:e.push({code:t.code,message:i("shop_pay.checkout.payment_company_required_error",{shopName:s},"{{shopName}} requires a company name for the billing address."),actionMessage:i("shop_pay.checkout.update_billing_address","Update billing information")});continue;case Pe.X.PaymentsPhoneNumberRequired:case Pe.X.PaymentsPhoneNumberDoesNotMatchExpectedPattern:e.push({code:t.code,message:t.localizedMessage||"",actionMessage:i("shop_pay.checkout.update_billing_address","Update billing information")})}return e}),[s,i,d]);if(!t)return a.default.createElement(uu,{message:"shipping_address"===e?i("shop_pay.checkout.update_address_banner","Update this address to view your delivery options."):i("shop_pay.checkout.invalid_billing_address_banner","Update this address before completing your purchase."),action:{text:i("shop_pay.checkout.update_address","Update address"),onPress:n}});if(c?.length>0){const{code:t,message:r,actionMessage:l}=c[0];if(function(e,t){return"shipping_address"===e&&t===Pe.X.DeliveryCompanyRequired||"billing_address"===e&&t===Pe.X.PaymentsCompanyRequired}(e,t)||function(e,t){return"shipping_address"===e?[Pe.X.DeliveryPhoneNumberRequired,Pe.X.DeliveryPhoneNumberDoesNotMatchExpectedPattern].includes(t):"billing_address"===e&&[Pe.X.PaymentsPhoneNumberRequired,Pe.X.PaymentsPhoneNumberDoesNotMatchExpectedPattern].includes(t)}(e,t))return a.default.createElement(uu,(0,ye.A)({message:r},l?{action:{text:l,onPress:n}}:{}))}return"shipping_address"!==e||o||"unavailable"!==l?.status?null:a.default.createElement(uu,{message:i("shop_pay.checkout.shipping_unavailable","Shipping not available for the selected address.")})}function pu({open:e,title:t,description:n,onConfirm:r,onCancel:l}){const o=(0,E.W)();return a.default.createElement(du.M,{open:e,title:t,onClose:l},a.default.createElement(ln.V,null,n),a.default.createElement(he.S,null),a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(He.$,{inlineSize:"fill",kind:"primary",appearance:"critical",onPress:r},o("shop_pay.checkout.delete","Delete")),a.default.createElement(ou,{inlineSize:"fill",onPress:l,borderRadiusBase:!0,paddingBlock:"base"},o("shop_pay.address_form.cancel","Cancel"))))}const fu=({addressType:e,modal:t,editableAddressId:n,onModalUpdate:r})=>{const l=(0,E.W)(),{recordImmediately:o}=(0,oe.v)(),{deleteAddress:i}=(0,yl.T)(),{shippingRequired:s}=(0,_e.kG)(),[d]=(0,hl._c)(),c=(0,kn.g$)("billing_address"===e?"billing":"shipping"),u=(0,a.useCallback)((()=>{r(null)}),[r]),m=(0,a.useCallback)((async()=>{n&&(await i(n),o({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:"shipping_address"===e?"shipping_address_remove":"billing_address_remove"}}),r(null))}),[e,i,n,r,o]),p=d.find((e=>e.id===n));return a.default.createElement(a.default.Fragment,null,(null===t||"edit"===t)&&a.default.createElement(du.M,{open:"edit"===t,title:l("shop_pay.address_form.edit","Edit address"),onClose:u},a.default.createElement(su,{saveText:l("shop_pay.address_form.update","Save changes"),addressToEdit:p,onCancel:u,onSuccess:u,addressType:s?"shipping_address":"billing_address"})),(null===t||"delete"===t)&&a.default.createElement(pu,{open:"delete"===t,title:l("shop_pay.checkout.address_delete","Delete address"),description:l("shop_pay.checkout.confirm_address_deletion",{address:c},"Are you sure you want to delete the address {{address}}?"),onConfirm:m,onCancel:u}))},hu="billing_address",yu=({id:e,label:t,onCreateAddressPress:n})=>{const[r]=(0,hl._c)(),[l]=(0,hl.zo)(),[o,i]=(0,a.useState)(),[s,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),{recordImmediately:m}=(0,oe.v)(),{selectedAddress:p,setSelectedAddress:f}=(0,yl.T)(hu),[h]=(0,hl.Df)(),{shippingRequired:y}=(0,_e.kG)(),g=(0,_e.O7)(),_=(0,E.W)(),b=p?.id===h?.id&&g,v=(0,is.Jj)(),C=v.supported&&v.paymentMethodSelected,{choices:S,disabledChoices:k}=(0,is.iZ)(),{setFirstSpiSupportedAddress:w}=(0,is.gg)(hu);(0,a.useEffect)((()=>{C&&w()}),[C,w]);const P=(0,a.useCallback)((()=>{i(p?.id),u("edit")}),[u,i,p]),A=(0,a.useCallback)((e=>{const t=r.find((t=>t.id===e));t&&f(t,"billing_address")}),[f,r]),I=(0,a.useCallback)((e=>{m({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:e?"shipping_addresses_collapse":"shipping_addresses_expand"}}),d(!e)}),[m]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(za.pp,{id:e,label:t,onToggle:I,summary:b&&y?_("shop_pay.checkout.billing_same_as_shipping","Same address as shipping"):p?a.default.createElement(Jc,{address:p.address,nameLinePosition:"block"}):a.default.createElement(ln.V,null,_("shop_pay.address_form.add","Add address")),open:s},p&&a.default.createElement(au,{choices:S,disabledChoices:k,selectedId:p.id,onChange:A,id:e}),a.default.createElement(cu,{addressType:"billing_address",addressCount:r.length,onPress:n})),p&&a.default.createElement(mu,{addressType:"billing_address",isValid:p?.valid,onAction:P,checkoutErrors:l}),a.default.createElement(fu,{addressType:"billing_address",modal:c,onModalUpdate:u,editableAddressId:o}))};function gu({saveText:e,onCancel:t,onCreateAddress:n}){const r=(0,E.W)(),{recordImmediately:l}=(0,oe.v)(),{sdk:o,validate:i,errors:s}=(0,mi.Z)(),{saveCreditCard:d}=Gc(),[c]=(0,hl.ou)(),{creditCardErrors:u,generateCreditCardErrors:m}=Hc(),p=(0,I.mu)(),[y,g]=(0,a.useState)(!1),_=(0,is.Jj)(),b=(0,Re.P)("simulated"),v=(0,f.t)({base:!0,small:!1}),C=Xc(Zc),S=v?Hn.a:ht.o,[k,w]=(0,a.useState)(""),P=(0,a.useCallback)((async()=>{const{isValid:e}=i();if(e&&c)if(b)t?.();else{g(!0);try{const e=await o.vaultCard(),n=await d(e,c.address,k,_.paymentMethodMustSupportInterestBearingLoans);"success"===n.status?(l({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:Rl.AddNew}}),t?.()):(m(n.errors||[]),g(!1))}catch{g(!1)}}}),[i,c,k,o,d,_,l,t,m,b]);(0,a.useEffect)((()=>{o.setErrors(u.fieldErrors)}),[u,o]);const A=(0,a.useMemo)((()=>(p.value??[]).filter((e=>"direct"===e.type))),[p]).flatMap((e=>e.paymentBrands));return a.default.createElement(fa.l,{onSubmit:P},u.baseMessage&&a.default.createElement(h.S,{padding:["none","none","base","none"]},a.default.createElement(an.l,{status:"critical"},u.baseMessage)),a.default.createElement(Hn.a,null,a.default.createElement(Hn.a,null,s.sdk&&a.default.createElement(Si,null),a.default.createElement(ls,{cardBrands:A,prefillCardholderName:!0}),C&&!s?.sdk&&a.default.createElement(Br.A_,{name:"cardNickname",label:r("payment.card_nickname_label","Nickname (optional)"),value:k,onChange:w,maxLength:Be.er}),!s?.sdk&&a.default.createElement(yu,{id:"billing_address_credit_card",label:r("shop_pay.checkout.bill_to","Bill to"),onCreateAddressPress:n})),a.default.createElement(S,{blockAlignment:"center",spacing:"large200"},!s?.sdk&&a.default.createElement(He.$,{loading:y,inlineSize:v?"fill":void 0,accessibilityRole:"submit"},e||r("shop_pay.checkout.payment.card_form.save","Save")),t&&a.default.createElement(He.$,{kind:"plain",inlineSize:v?"fill":void 0,onPress:t},r("shop_pay.checkout.payment.card_form.cancel","Cancel"))),v&&a.default.createElement(he.S,null)))}function _u(){const e=(0,E.W)(),[t,n]=(0,a.useState)("idle"),{recordImmediately:r}=(0,oe.v)(),[l]=(0,hl.a4)(),o=l&&l.length>=Be.vR,i=(0,a.useCallback)((()=>{r({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:"open_add_card_dialog"}}),n("card")}),[r,n]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(h.S,null,a.default.createElement(He.$,{onPress:i,kind:"plain",textDecoration:"none",disabled:o},a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},a.default.createElement(Le.In,{source:"plus",size:"base",appearance:"monochrome"}),a.default.createElement(jn.E,null,e("shop_pay.credit_card_form.add_card","Use a different card")))),o&&a.default.createElement("div",{style:{paddingLeft:"calc(var(--x-spacing-large-100) + var(--x-spacing-small-200) + 1px)"}},a.default.createElement(ln.V,{size:"small",appearance:"subdued"},e("shop_pay.credit_card_form.max_cards_reached",{max_cards:Be.vR},"%{max_cards}-card limit reached. Remove a card to add a new one.")))),a.default.createElement(Eu,{modalStatus:t,setModalStatus:n}))}const Eu=({modalStatus:e,setModalStatus:t,isSimulated:n,infoBanner:r=null})=>{const l=(0,E.W)(),{recordImmediately:i}=(0,oe.v)(),[,s]=Ql(),d=(0,Vc._)(),{saveAddress:c}=(0,yl.T)("billing_address"),u=(0,o.QN)(),m=go(),p=(0,a.useCallback)((()=>{t("card")}),[t]),f=(0,o.md)((0,Vc._)()),h=(0,a.useCallback)((()=>{m({}),t("idle")}),[m,t]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(Ts.x,{open:"idle"!==e,title:"billingAddress"===e?l("shop_pay.address_form.add","Add address"):l("shop_pay.credit_card_form.add_new_card","Add card"),onClose:h},r,a.default.createElement("div",{style:{display:"billingAddress"===e?"none":"block"}},a.default.createElement(gu,{onCreateAddress:()=>{u.write(d,f),t("billingAddress")},onCancel:h})),"billingAddress"===e&&a.default.createElement(Is,{addressType:"billing",onCancel:p,onSuccess:p,onSave:async e=>{if(n)return!0;const t=await c(e,"billing_address");i({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:"billing_address_add_new"}});const a="success"===t.status;return a||s(t.errors),a},editableAddress:d,cancelText:l("shop_pay.credit_card_form.go_back","Go back"),saveText:l("shop_pay.edit_credit_card_modal.save_billing_address","Save billing address")})))},bu="afmy8",vu="CE_Rv",Cu=()=>{const e=(0,E.W)(),t=(0,T.dg)(),n=(0,ie.em)(t),r=go(),{recordImmediately:l}=(0,oe.v)(),{hostedFieldsUrl:o}=(0,P.q)(),i=(0,Sn.W)(),s=e("shop_pay.checkout.shop_cash.redemption_vaulted_card_required_error","To complete this checkout, Shop Cash requires a valid credit card to be added to your account."),[d,c]=(0,a.useState)("card"),u=a.default.createElement(Su,null),m=(0,a.useCallback)((()=>{l({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:"open_add_card_dialog"}}),c("card")}),[c,l]);return a.default.createElement(oo.VV,{hostedFieldsUrl:o,onError:i.notify,onSetFieldErrors:r},a.default.createElement(zc.a,null,a.default.createElement(h.S,{padding:["small200","small100"],cornerRadius:"base",accessibilityRole:"status",className:_()(bu,n&&vu)},a.default.createElement(ln.V,{size:"small"},s),a.default.createElement(J.N,{appearance:"monochrome",onPress:m},e("shop_pay.credit_card_form.add_new_card","Add card"))),a.default.createElement(Eu,{modalStatus:d,setModalStatus:c,infoBanner:u})))},Su=()=>{const e=(0,E.W)(),t=(0,T.dg)(),n=(0,ie.em)(t),r=e("shop_pay.checkout.shop_cash.redemption_vaulted_card_required_error","To complete this checkout, Shop Cash requires a valid credit card to be added to your account.");return a.default.createElement(h.S,{padding:["none","none","base","none"]},a.default.createElement(h.S,{padding:["small200","small100"],cornerRadius:"base",accessibilityRole:"status",className:_()(bu,n&&vu)},a.default.createElement(ln.V,{size:"small"},r)))};var ku=n(63290),wu=n(86222),Pu=n(40776);const Au=({type:e,primaryLabel:t,primaryOptionalLabel:n,secondaryLabel:r,accessibilityLabel:l,disabled:o})=>a.default.createElement(ku.G,{id:e,key:e,accessibilityLabel:l,disabled:o},a.default.createElement(Hn.a,{inlineAlignment:"start",spacing:"none"},a.default.createElement("div",{style:{wordBreak:"break-word"}},a.default.createElement(on.xV,null,a.default.createElement(ht.o,{spacing:"extraTight"},a.default.createElement(ln.V,null,t),n&&a.default.createElement(ln.V,{appearance:"subdued"}," · ",n))),r&&a.default.createElement(on.PE,null,a.default.createElement(ln.V,{appearance:"subdued",size:"base"},r))))),Iu=({value:e,onChange:t,options:n,disabled:r})=>n?.length?a.default.createElement(wu.f,{border:"none",padding:"small100"},a.default.createElement(Pu.s,{name:"shop_cash_options",value:e??"none",onChange:t,variant:"group"},a.default.createElement(Hn.a,{spacing:"none"},n.map((e=>a.default.createElement(Au,(0,ye.A)({},e,{key:e.type,disabled:r}))))))):null;function xu({content:e,padding:t=["base","base","none","base"],blockAlignment:n="center",iconAppearance:r,iconSize:l="small",iconSource:o="info"}){return a.default.createElement(h.S,{padding:t},a.default.createElement(rn.C,{blockAlignment:n,border:"base",cornerRadius:"base",columns:["auto","fill"],padding:["small400","small200"],spacing:"small200"},a.default.createElement(Le.In,{appearance:r,source:o,size:l}),a.default.createElement(ln.V,{appearance:"subdued",size:"small"},e)))}const Mu=({children:e})=>{const t=(0,vt.Bl)();return a.default.createElement(h.S,{padding:t?"none":["large200","base"],border:t?"none":"base",cornerRadius:"base"},e)},Tu=({value:e,disabled:t,redemptionStatus:n,onChange:r,nonEligibleReason:l,minimumOrderValueBanner:o,options:i})=>{const s=(0,E.W)(),d=Boolean("error"===n.state),c=Boolean(d&&n.errorCode?.code===Be.dQ.ShopCashCreditCardVaultedRequired),u=Nu(l),m=Nu(n.errorCode&&n.errorCode.code||null);return d&&!c?a.default.createElement(Mu,null,a.default.createElement(uu,{message:m??s("shop_pay.checkout.shop_cash.redemption_error","Sorry, we couldn't use your Shop Cash. Please try again later."),padding:"none"})):d&&c?a.default.createElement(Mu,null,a.default.createElement(Iu,{value:e,onChange:r,options:i,disabled:t}),a.default.createElement(h.S,{padding:["base","none","none","none"]},a.default.createElement(Cu,null))):u?a.default.createElement(Mu,null,a.default.createElement(xu,{content:u,iconSource:"critical",padding:"none"})):a.default.createElement(Mu,null,a.default.createElement(Iu,{value:e,onChange:r,options:i,disabled:t}),o&&a.default.createElement(h.S,{padding:["base","none","none","none"]},o))};function Nu(e){const t=(0,E.W)();switch(e){case null:return null;case Be.dQ.ShopCashInvalidBillingAddress:return t("shop_pay.checkout.shop_cash.redemption_invalid_billing_address","Please provide a valid billing address.");case Be.dQ.ShopCashInvalidShippingAddress:return t("shop_pay.checkout.shop_cash.redemption_invalid_shipping_address","Please provide a valid shipping address.");case Be.dQ.ShopCashMerchantNotSupported:case Pe.X.PaymentsShopCashUnsupportedCurrency:return t("shop_pay.checkout.shop_cash.redemption_unsupported_merchant","Shop Cash can’t be used at this store.");case Be.dQ.ShopCashUnsupportedDeliveryMethodType:return t("shop_pay.checkout.shop_cash.redemption_unsupported_delivery_method","Shop Cash can't be used with the selected delivery method.");case Pe.X.PaymentsShopCashUnsupportedShipping:return t("shop_pay.checkout.shop_cash.redemption_unsupported_shipping","Shop Cash can’t be used for digital goods.");case Pe.X.PaymentsShopCashGiftCardNotAllowed:return t("shop_pay.checkout.shop_cash.redemption_unsupported_gift_cards","Shop Cash can’t be used to buy gift cards.");case Pe.X.PaymentsShopCashUnsupportedSubscriptions:return t("shop_pay.checkout.shop_cash.redemption_unsupported_subscriptions","Shop Cash can’t be used for subscriptions.");case Be.dQ.ShopCashInsufficientFundingLedgerBalance:return t("shop_pay.checkout.shop_cash.redemption_error_campaign_out_of_funds","Offer ended for the day, check back later");case Pe.X.PaymentsShopCashNotAllowed:case Pe.X.PaymentsShopCashNotEnabled:default:return t("shop_pay.checkout.shop_cash.redemption_error","Sorry, we couldn't use your Shop Cash. Please try again later.")}}let Lu=function(e){return e.MixedShopCash="MIXED_SHOP_CASH",e.ShopCashOffer="SHOP_CASH_OFFER",e.StandardShopCash="STANDARD_SHOP_CASH",e}({});var Du=n(58725);let Ru=function(e){return e.BillingPhoneViolation="Shop Cash was auto removed due to an outside billing phone violation",e.InstallmentsUnSupported="Shop Cash was automatically removed because it is not supported for installments",e.UserIneligible="Shop Cash was auto removed due to user ineligibility",e.NotVisible="Shop Cash does not met the requirements to be displayed",e.BuyerIsMissingRequiredData="No address or credit card found and is not a OnePage checkout",e.BuyerOutsideOfShopPay="The checkout is not ShopPay platform",e.CheckoutIsFree="Shop Cash not visible: the checkout is free",e.ShopCashRedemptionFetchFailed="Failed to fetch Shop Cash redemption!",e.ShopCashRedemptionError="ShopCashRedemptionError",e}({});function Bu(){const e=(0,Ni.S)(),t=Li.J.ShopCashErrorEvent;return{logShopCashError:(0,a.useCallback)((n=>{switch(n.type){case"create-redemption-failure":e.increment(t,{value:1,tags:{type:n.type,errorMessage:(a=Ru.ShopCashRedemptionError,r=n.action,a===Ru.ShopCashRedemptionError&&r?`Failed to ${r} Shop Cash redemption!`:a)}});break;case"draft-redemption-request-failed-no-data":case"draft-redemption-request-failed-data":e.increment(t,{value:1,tags:{type:n.type}})}var a,r}),[t,e])}}const Fu="shopify_pay_payment_page_shop_cash_redemption_eligibility/2.2",zu="below_mov";function Vu(){const e=Fu,{recordImmediately:t,pageLoadId:n}=(0,oe.v)(),[r]=(0,hl.Ou)(),{value:l}=(0,I.u_)(),[o]=(0,hl.fv)(),{minimumOrderValueRemainingAmount:i}=(0,Lc.SS)(),s=i>0?zu:void 0;return{triggerShopCashMonorail:(0,a.useCallback)((a=>{if(!l)return;const{boostCashDestinationAmount:d,totalCashSourceAmount:c,campaignId:u,boostMultiplier:m,cashSourceAmount:p,boostCashSourceAmount:f,minimumOrderValue:h}=o||{},y={balance:c?.amount??0,pageLoadId:n,isBoostAvailable:Boolean(d?.amount)??!1,totalPrice:Number(l.amount),publicId:r,boostCampaignId:u??void 0,boostIneligibilityReason:s,boostMultiplier:m??void 0,maxTotalRedemptionAllowed:c?.amount??void 0,offerAmountBelowMov:i??void 0,offerMinimumOrderValueRequired:h?.amount??0,maxPostOfferRemainingAmount:p?.amount??0,maxOfferRedemptionAmount:f?.amount??0};switch(a.type){case"remove-redemption-when-installments-is-selected":case"shop-cash-violation-subscription":t({schemaId:e,payload:{...y,redemptionIneligibilityReason:Ru.InstallmentsUnSupported}});break;case"user-becomes-ineligible":t({schemaId:e,payload:{...y,redemptionIneligibilityReason:`${Ru.UserIneligible}: ${a.nonEligibleReason}`}});break;case"billing-phone-violation":t({schemaId:e,payload:{...y,redemptionIneligibilityReason:Ru.BillingPhoneViolation}});break;case"hide-redemption-because-checkout-is-free":t({schemaId:Fu,payload:{...y,redemptionIneligibilityReason:Ru.CheckoutIsFree}});break;case"user-does-not-meet-requirements-for-shop-cash":{const n=[];a.nonEligibleReason?n.push(a.nonEligibleReason):n.push([`${Ru.BuyerIsMissingRequiredData} or ${Ru.BuyerOutsideOfShopPay}`]);const r=`ShopCash not visible: ${n.join(" and ")}`;t({schemaId:e,payload:{...y,redemptionIneligibilityReason:r}})}break;case"user-meets-requirements-for-shop-cash":t({schemaId:e,payload:{...y,redemptionIneligibilityReason:void 0}});break;case"layout-does-not-meet-requirements-for-shop-cash":t({schemaId:e,payload:{...y,redemptionIneligibilityReason:a.nonEligibleReason}})}}),[i,s,n,l,r,t,e,o])}}var Ou=n(72897);const Wu=()=>{const e=(0,E.W)();return{type:"none",value:{currencyCode:Ou.j.Usd,amount:0},primaryLabel:e("shop_pay.checkout.shop_cash.redemption.primary_label.none","Don't use Shop Cash"),summaryHintLabel:e("shop_pay.checkout.shop_cash.redemption.summary_label.none","Available to spend")}},qu=()=>{const[e]=(0,hl.fv)(),t=(e=>{const t=(0,E.W)(),n=(0,$n.a)(),{boostCashSourceAmount:a,boostCashDestinationAmount:r,boostMultiplier:l,campaignId:o}=e||{};if(!(a&&r&&l&&o))return null;const i=n(a.amount,{currency:a.currencyCode,form:"short"}),s=n(r.amount,{currency:r.currencyCode,form:"short"});return{type:"offer",value:r,campaignId:o,primaryLabel:t("shop_pay.checkout.shop_cash.redemption.primary_label.default",{formatBoostedAmount:s},"%{formatBoostedAmount} off"),primaryOptionalLabel:t("shop_pay.checkout.shop_cash.redemption.primary_optional_label.offer",{boostMultiplier:l},"%{boostMultiplier}x offer"),secondaryLabel:t("shop_pay.checkout.shop_cash.redemption.secondary_label.default",{formatShopCashAmount:i},"Use %{formatShopCashAmount} Shop Cash"),summaryHintLabel:t("shop_pay.checkout.shop_cash.redemption.summary_label.default",{formatBoostedAmount:s},"%{formatBoostedAmount} off")}})(e),n=(e=>{const t=(0,E.W)(),n=(0,$n.a)(),{cashSourceAmount:a,cashDestinationAmount:r,totalCashDestinationAmount:l,totalCashSourceAmount:o,boostMultiplier:i,campaignId:s}=e||{};if(!(l&&o&&i&&s))return null;if(!a&&!r)return null;const d=n(o.amount,{currency:o.currencyCode,form:"short"}),c=n(l.amount,{currency:l.currencyCode,form:"short"});return{type:"offer_plus_balance",value:l,campaignId:s,primaryLabel:t("shop_pay.checkout.shop_cash.redemption.primary_label.default",{formatBoostedAmount:c},"%{formatBoostedAmount} off"),primaryOptionalLabel:t("shop_pay.checkout.shop_cash.redemption.primary_optional_label.offer_plus_balance",{boostMultiplier:i},"%{boostMultiplier}x offer + balance"),secondaryLabel:t("shop_pay.checkout.shop_cash.redemption.secondary_label.default",{formatShopCashAmount:d},"Use %{formatShopCashAmount} Shop Cash"),summaryHintLabel:t("shop_pay.checkout.shop_cash.redemption.summary_label.default",{formatBoostedAmount:c},"%{formatBoostedAmount} off")}})(e),a=(e=>{const t=(0,E.W)(),n=(0,$n.a)(),{cashDestinationAmount:a}=e||{};if(!a)return null;const r=n(a.amount,{currency:a.currencyCode,form:"short"});return{type:"non_offer",value:a,primaryLabel:t("shop_pay.checkout.shop_cash.redemption.primary_label.default",{formatBoostedAmount:r},"%{formatBoostedAmount} off"),secondaryLabel:t("shop_pay.checkout.shop_cash.redemption.secondary_label.default",{formatShopCashAmount:r},"Use %{formatShopCashAmount} Shop Cash"),summaryHintLabel:t("shop_pay.checkout.shop_cash.redemption.summary_label.default",{formatBoostedAmount:r},"%{formatBoostedAmount} off")}})(e),r=(e=>{const t=(0,E.W)(),n=(0,$n.a)(),{totalCashSourceAmount:a}=e||{},{hasMinimumOrderValue:r,minimumOrderValueSatisfied:l}=(0,Lc.SS)();if(!r||l)return null;if(!a)return null;const o=n(a.amount,{currency:a.currencyCode,form:"short"});return{type:"mov_not_met",value:a,primaryLabel:t("shop_pay.checkout.shop_cash.redemption.primary_label.default",{formatBoostedAmount:o},"%{formatBoostedAmount} off"),secondaryLabel:t("shop_pay.checkout.shop_cash.redemption.secondary_label.default",{formatShopCashAmount:o},"Use %{formatShopCashAmount} Shop Cash"),summaryHintLabel:t("shop_pay.checkout.shop_cash.redemption.summary_label.default",{formatBoostedAmount:o},"%{formatBoostedAmount} off")}})(e),l=Wu();let o;return o=r?[r,l]:n&&t?[n,t,l]:t?[t,l]:a?[a,l]:[],{dataSources:o}},$u=()=>{const{dataSources:e}=qu(),t=Wu(),n=({type:t})=>e.find((e=>e.type===t))??null,a=n({type:"mov_not_met"}),r=n({type:"offer"}),l=n({type:"offer_plus_balance"}),o=Boolean(a),i=Boolean(r??l),s=Boolean(l);let d="none";return d=o?"none":i?s?"offer_plus_balance":"offer":"none",{defaultShopCashOption:n({type:d})??t}};function Uu(e){return e.filter((e=>"redeemable"!==e.method.type||e.method.redemptionSource!==mo.D.ShopCash))}const Hu=({shopCashOptions:e,type:t})=>({shopCashOption:e.find((e=>e.type===t))??null}),ju=({shopCashOption:e})=>"none"===e.type,Yu=({currentValue:e,previousValue:t})=>!t||e.amount!==t.amount||e.currencyCode!==t.currencyCode,Gu=({currentShopCashOption:e,previousShopCashOption:t})=>e.type!==t.type||Yu({currentValue:e.value,previousValue:t.value}),Xu=new Set([Pe.X.PaymentsPhoneNumberDoesNotMatchExpectedPattern]);function Zu(){const{value:e}=(0,I.Dr)();return e?.lines.find((e=>"redeemable"===e.method.type&&e.method.redemptionSource===mo.D.ShopCash))}function Qu(e,t){const{negotiate:n}=(0,p.T4)(),{logShopCashError:r}=Bu(),{recordImmediately:l}=(0,oe.v)(),o=Wu(),{recordAction:i}=Bc();return(0,a.useCallback)((async(a,s)=>{const d=s&&"error"===s.state;await n(void 0,{include:["paymentLines","billingAddress"],silenceViolations:["non-shop-cash"],onComplete:n=>{switch(n.status){case"stale":e(d?s:{state:"stale"});break;case"success":e(d?s:{state:"success"}),l({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:"apply"===a?"shop_cash_redemption_applied":"shop_cash_redemption_removed"}});break;case"error":e(d?s:{state:"error"}),t(o),i({source:n.errors?`create-redemption-failure ${n.errors.map((e=>e.code)).join(", ")}`:"negotiation-error",action:"auto-remove",redemptionType:"none"}),r({type:"create-redemption-failure",action:a,result:n})}}})}),[r,n,l,e,t,o,i])}function Ju(e,t,n){const r=(0,vt.Bl)(),l=(0,ve.C)(),[o]=(0,hl.sg)(),{selectedBillingAddress:i}=Mc(),s=Wu(),{state:d}=(0,jt.c$)(),{recordAction:c}=Bc(),u=Qu(t,e);return(0,a.useCallback)((async({shopCashOption:a,recordActionInput:m})=>{e(a),t({state:"loading"}),c({source:m.source,action:m.action,redemptionType:a.type});let p=Uu(d.read(l.paymentLines).value);const f=await n({shopCashOption:a});f&&f.amount&&f.data&&"success"===f.status?(p.push({cost:{amount:f.amount,currencyCode:a.value.currencyCode},method:{type:"redeemable",redemptionSource:mo.D.ShopCash,redemptionContent:{redemptionId:f.data.id,billingAddress:r?i:o?.billingAddress.address,destinationAmount:f.data.destinationAmount,sourceAmount:f.data.sourceAmount}}}),d.write(l.paymentLines,p),await u("apply",{state:"success"})):(e(s),c({source:f?.errors?`negotiation-error ${f?.errors.code}`:"negotiation-error",action:"auto-remove",redemptionType:s.type}),d.read(l.paymentLines).value.some((e=>"redeemable"===e.method.type&&e.method.redemptionSource===mo.D.ShopCash))?(p=Uu(d.read(l.paymentLines).value),d.write(l.paymentLines,p),await u("remove",{state:"error",errorCode:f?.errors})):(t({state:"error"}),t({state:"error",errorCode:f?.errors})))}),[e,t,c,d,l.paymentLines,n,r,i,o?.billingAddress.address,u,s])}function Ku(e,t){const n=(0,ve.C)(),{state:r}=(0,jt.c$)(),l=Wu(),{recordAction:o}=Bc(),i=Qu(t,e);return(0,a.useCallback)((async a=>{e(l),t({state:"loading"});const s=Uu(r.read(n.paymentLines).value);r.write(n.paymentLines,s),o({source:a.source,action:a.action,redemptionType:"none"}),await i("remove")}),[e,l,t,r,n.paymentLines,o,i])}function em(){const{value:e}=(0,I.u_)(),t=Zu(),[n,r]=(0,a.useState)((()=>{if(!t?.method.redemptionContent)return;const{redemptionId:e,destinationAmount:n,sourceAmount:a}=t.method.redemptionContent;return{id:e,sourceAmount:a,destinationAmount:n}})),l=(0,Yc.Pk)();return(0,a.useCallback)((async({shopCashOption:t})=>{const a=t.value.amount;if(!a||!e)return;let o;switch(t.type){case"offer":o=Lu.ShopCashOffer;break;case"offer_plus_balance":o=Lu.MixedShopCash;break;default:o=Lu.StandardShopCash}if(n&&Number(n.destinationAmount?.amount)===a)return{status:"success",amount:a,data:n};const i=await l(o);if("success"!==i.status)return i;if(i.data?.authCode){const{authCode:e,sourceAmount:t,destinationAmount:n}=i.data,l={id:e,sourceAmount:t,destinationAmount:n};return r(l),{status:"success",amount:a,data:l}}}),[l,e,n])}const tm=({visibility:e,reason:t,position:n,children:r=null})=>{const{recordVisibility:l}=(({visibility:e,reason:t="none",position:n})=>{const{recordImmediately:r,pageLoadId:l}=(0,oe.v)(),o=(0,Rc.K)("api-client-id"),[i]=(0,hl.Ou)(),s=(0,zr.a)(Vr.sE),{shopPayCheckoutSurface:d}=(0,S.I)(),c=Ic(),u=(0,vt.Bl)(),m=Boolean(window.ReactNativeWebView),p=c.length;return{recordVisibility:(0,a.useCallback)((()=>{r({schemaId:"shopify_pay_payment_page_shop_cash_redemption_visibility/1.1",payload:{pageLoadId:l,publicId:i,visibility:e,reason:t,position:n,shopPayCheckoutSurface:d,isReactNativeWebview:m,isOnePageCheckout:u,isShopCashBalanceBetaEnabled:s,nEnabledCreditCards:p,apiClientId:o}})}),[r,l,i,e,t,n,d,m,u,s,p,o])}})({visibility:e,reason:t,position:n});return(0,a.useEffect)((()=>{l()}),[l]),a.default.createElement(a.default.Fragment,null,r)},nm=({shopCashOptions:e,currentShopCashOption:t,setCurrentShopCashOption:n,setPreferredShopCashOptionType:r,toggleStatus:l,setToggleStatus:o,position:i})=>{const s=(0,E.W)(),{nonEligibleReason:d}=Nc(),{recordImmediately:c}=(0,oe.v)(),{progressing:u}=(0,p.T4)(),[m,f]=(0,a.useState)(!1),h=(0,a.useCallback)((()=>{f((e=>!e))}),[]),y=em(),{hasMinimumOrderValue:g,banner:_}=(0,Lc.SS)(),b=g&&Boolean(_),v=Ju(n,o,y),C=Ku(n,o),S=(0,a.useCallback)((t=>{r(t);const{shopCashOption:n}=Hu({shopCashOptions:e,type:t});if(null!==n)if(c({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:`shop_cash_selection_${t}`}}),ju({shopCashOption:n})){const e=Fc("user-selection","manually-remove","none");C(e)}else{const e=Fc("user-selection","manually-apply",t);v({shopCashOption:n,recordActionInput:e})}}),[v,C,e,c,r]);!function(e,t){const{nonEligibleReason:n}=Nc(),{triggerShopCashMonorail:r}=Vu();(0,a.useEffect)((()=>{const a=!ju({shopCashOption:e});if(n&&a){const e=Fc("user-becomes-ineligible","auto-remove","none");t(e),r({type:"user-becomes-ineligible",nonEligibleReason:n})}}),[e,n,t,r])}(t,C),function(e,t){const n=(0,a.useRef)(!1),{hasMinimumOrderValue:r,banner:l}=(0,Lc.SS)(),o=r&&Boolean(l);(0,a.useEffect)((()=>{n.current||o&&!e&&(n.current=!0,t(!0))}),[o,e,n,t])}(m,f);const k="error"===l.state,w=Boolean(d),P=!k&&!w;return(({setRollupOpened:e,isShopCashAvailable:t})=>{const n=(0,Du.Z)(t);(0,a.useEffect)((()=>{t||n===t||e(!0)}),[e,n,t])})({setRollupOpened:f,isShopCashAvailable:P}),a.default.createElement(a.default.Fragment,null,a.default.createElement(za.pp,{open:m,id:"shopCashToggle",label:s("order_summary.shop_cash_title","Shop Cash"),onToggle:h,summary:P?t.summaryHintLabel||null:s("shop_pay.checkout.shop_cash.redemption.summary_label.unavailable","Unavailable")},a.default.createElement(Tu,{value:t.type,disabled:"loading"===l.state||u,redemptionStatus:l,onChange:S,nonEligibleReason:d,minimumOrderValueBanner:b?_:null,options:e})),P?a.default.createElement(tm,{visibility:"visible",reason:"none",position:i}):a.default.createElement(tm,{visibility:"disabled",reason:k?"has-error":"is-ineligible",position:i}))},am=e=>a.default.createElement(nm,(0,ye.A)({},e,{position:Dc.Vaulted})),rm=e=>a.default.createElement(H.wn,null,a.default.createElement(nm,(0,ye.A)({},e,{position:Dc.Root}))),lm=({reason:e,position:t})=>a.default.createElement(tm,{visibility:"hidden",reason:e,position:t}),om=(0,nr.R)("ShopCashContext");function im({children:e}){const[t,n]=(0,a.useState)(null),r={preferredShopCashOptionType:t,setPreferredShopCashOptionType:n};return a.default.createElement(om.Provider,{value:r},e)}var sm=n(65545);function dm({children:e,currentShopCashOption:t,setCurrentShopCashOption:n,setToggleStatus:r,toggleStatus:l,preferredShopCashOptionType:o}){(()=>{const[e,t]=(0,hl.fv)(),{loading:n}=(0,_e.kG)(),{loading:r,value:l}=(0,I.FC)(),o=(0,Yc.Xg)(),i=(0,Re.P)("simulated"),{shopCashMaxApplicableAmount:s}=(0,sm.k)(),d=(0,Du.Z)(s),c=n||r||"filled"!==l?.status,u=(0,Du.Z)(c),{logShopCashError:m}=Bu(),p=(0,a.useCallback)((async e=>{if(!i){const t=await o(e);if("success"===t.status)return t.shopCashRedemptionDraft;"failed"===t.status&&(t.errors?m({type:"draft-redemption-request-failed-data",userErrors:t.errors}):m({type:"draft-redemption-request-failed-no-data"}))}}),[i,m,o]),f=(0,a.useCallback)((async e=>{const n=await p(e);if(!n)return;const{boostCashSourceAmount:a,boostCashDestinationAmount:r,cashSourceAmount:l,cashDestinationAmount:o,totalCashSourceAmount:i,totalCashDestinationAmount:s,boostMultiplier:d,campaignId:c,offerEligible:u,minimumOrderValue:m,orderTotal:f}=n,{standardSourceBalance:h,standardDestinationBalance:y,boostSourceBalance:g,boostDestinationBalance:_,totalSourceBalance:E,totalDestinationBalance:b}=(0,fd.h1)({cashSourceAmount:l,cashDestinationAmount:o,boostCashSourceAmount:a,boostCashDestinationAmount:r,totalCashSourceAmount:i,totalCashDestinationAmount:s}),v={cashSourceAmount:(0,fd.j3)(h),cashDestinationAmount:(0,fd.j3)(y),boostCashSourceAmount:(0,fd.j3)(g),boostCashDestinationAmount:(0,fd.j3)(_),totalCashSourceAmount:(0,fd.j3)(E),totalCashDestinationAmount:(0,fd.j3)(b),boostMultiplier:d?Number(d):null,campaignId:c??null,offerEligible:u??!1,minimumOrderValue:(0,fd.j3)(m),orderTotal:(0,fd.j3)(f)};t(v)}),[p,t]);(0,a.useEffect)((()=>{if(c||!s)return;const e=u&&!c,t=Yu({currentValue:s,previousValue:d??void 0});(e||t)&&f(s)}),[c,u,s,d,f])})();const i=em(),s=Ku(n,r),d=Ju(n,r,i);return function({currentShopCashOption:e,preferredShopCashOptionType:t,toggleStatus:n,removeShopCashRedemption:r,applyShopCashRedemption:l}){const{dataSources:o}=qu(),i=(0,Du.Z)(o),{visible:s,nonEligibleReason:d}=Nc(),{defaultShopCashOption:c}=$u(),u=Zu(),m=Boolean(u),p="stale"===n.state,f=p!==(0,Du.Z)(p);(0,a.useEffect)((()=>{if(!s||d)return;if(!(({currentShopCashOptions:e,previousShopCashOptions:t})=>{const n=e=>void 0===e||0===e?.length;if(n(t)&&n(e))return!1;if(e.length!==t?.length)return!0;for(let a=0;a<e.length;a++){const n=e[a],r=t[a];if(Gu({currentShopCashOption:n,previousShopCashOption:r}))return!0}return!1})({previousShopCashOptions:i,currentShopCashOptions:o})&&!f)return;const{shopCashOption:n}=(({preferredShopCashOptionType:e,defaultShopCashOption:t,shopCashOptions:n})=>{let a;if(e){const{shopCashOption:r}=Hu({shopCashOptions:n,type:e});a=r??t}else a=t;return{shopCashOption:a}})({preferredShopCashOptionType:t,defaultShopCashOption:c,shopCashOptions:o});if(Gu({currentShopCashOption:n,previousShopCashOption:e})||m)if(ju({shopCashOption:n})){const e=Fc("default-value-selected","auto-remove","none");r(e)}else{const e=Fc("default-value-selected","auto-apply",n.type);l({shopCashOption:n,recordActionInput:e})}}),[e,o,i,d,c,t,l,r,s,f,m])}({currentShopCashOption:t,preferredShopCashOptionType:o,toggleStatus:l,removeShopCashRedemption:s,applyShopCashRedemption:d}),function({currentShopCashOption:e,applyShopCashRedemption:t,removeShopCashRedemption:n,setRedemptionStatus:r}){const l=(0,a.useRef)(!1),{triggerShopCashMonorail:o}=Vu(),{hasViolations:i}=(0,bl.Ck)(Xu),{defaultShopCashOption:s}=$u();(0,a.useEffect)((()=>{const a=!l.current&&i,d=l.current&&!i,c=!ju({shopCashOption:e});if(a){if(l.current=!0,r({state:"error"}),o({type:"billing-phone-violation"}),c){const e=Fc("shop_cash-external-violation","auto-remove","none");n(e)}}else if(d&&(l.current=!1,!c)){const e=Fc("recovers-from-shop-cash-external-violation","auto-apply",s.type);t({shopCashOption:s,recordActionInput:e})}}),[i,e,s,t,n,r,o])}({currentShopCashOption:t,applyShopCashRedemption:d,removeShopCashRedemption:s,setRedemptionStatus:r}),function(){const{triggerShopCashMonorail:e}=Vu(),{visible:t,nonEligibleReason:n}=Nc(),r=t&&null===n,{loading:l}=(0,_e.kG)(),{loading:o,value:i}=(0,I.FC)(),s=l||o||"filled"!==i?.status,d=(0,Du.Z)(s);(0,a.useEffect)((()=>{s||d&&!s&&e(r?{type:"user-meets-requirements-for-shop-cash"}:{type:"user-does-not-meet-requirements-for-shop-cash",nonEligibleReason:n})}),[e,n,r,s,d])}(),function(){const{triggerShopCashMonorail:e}=Vu(),{visible:t,nonEligibleReason:n}=Nc(),r=(0,_e.O7)(),l=(0,Du.Z)(r);(0,a.useEffect)((()=>{if(r!==l&&r){if(!t||n)return;e({type:"hide-redemption-because-checkout-is-free"})}}),[r,t,n,l,e])}(),a.default.createElement(a.default.Fragment,null,e)}var cm=n(54740),um=n(38948),mm=n(61599),pm=n(64237);function fm({amount:e,maskedIdentifier:t,remove:n}){const r=(0,$n.a)(),l=(0,E.W)(),o=r(e.amount,{currency:e.currencyCode,form:"short"}),i=t.slice(-4),s=l("payment.gift_card_wrapper.gift_card_label",{identifier:(0,pm.gg)(i)},"Gift card %{identifier}"),d=l("order_summary.gift_card_ending",{last_characters:i||""},"Gift card ending with %{last_characters}");return a.default.createElement(h.S,{cornerRadius:"base",background:"base",border:"base",blockAlignment:"center",padding:"small200"},a.default.createElement(rn.C,{columns:["fill","auto"]},a.default.createElement(rn.C,{columns:["auto","auto"],spacing:"small300",blockAlignment:"center"},a.default.createElement(fi.k,{name:"gift-card"}),a.default.createElement(mm.P,null,a.default.createElement(h.S,{accessibilityVisibility:"hidden"},a.default.createElement(jn.E,null,s)),a.default.createElement(h.S,{visibility:"hidden"},a.default.createElement(jn.E,null,d)))),a.default.createElement(rn.C,{columns:["auto","auto"],spacing:"small100",blockAlignment:"center"},a.default.createElement(jn.E,{emphasis:"bold"},o),a.default.createElement(Ne.o,{onPress:()=>n(),accessibilityLabel:l("general.remove_item",{label:d},"Remove %{label}")},a.default.createElement(Le.In,{source:"close",size:"small"})))))}var hm=n(19705);function ym(){const{value:e=[]}=(0,I.JZ)(),t=e.filter((e=>!!(0,pm.Qv)(e)||!!(0,hm.t8)(e))),n=t.length>0?t[0].localizedMessage||t[0].nonLocalizedMessage:null;return n?a.default.createElement(an.l,{status:"critical"},n):null}const gm="gift_card_option";function _m({showHeading:e=!0,afterAppliedRedeemablesChange:t}){const n=(0,E.W)(),{paymentMethod:r,paymentLines:l,submit:o,remove:i,removeAll:s}=(0,um.Px)(),d=(0,kt.IV)("Checkout::GiftCard::Render",r?.uiExtension?[r?.uiExtension]:[]),{value:c}=(0,I.u_)(),u=c?.amount||0,[m,p]=(0,a.useState)([]),[f,y]=(0,a.useState)(!1),g=0===u&&0===l?.length;return(0,a.useEffect)((()=>{g?p([]):l?.length>0&&p([gm])}),[l?.length,g]),d.length&&r?a.default.createElement(cm.w,{accessibilityLabel:n("payment.gift_card_wrapper.heading","Gift card")},a.default.createElement(Hn.a,null,e&&a.default.createElement(fe.D,null,n("payment.gift_card_wrapper.heading","Gift card")),a.default.createElement(ma.m,{id:"gift_card_option_list",allowMultiple:!0,selectedItems:m,onChange:async e=>{if(p(e),0===e.length&&l.length>0){const e=await s();"success"===e?.status&&t?.()}}},a.default.createElement(on.c$,{id:gm,label:n("payment.gift_card_wrapper.apply_gift_card_label","Apply a gift card"),disabled:g,details:a.default.createElement(pa.g,{controlledBy:gm,blockPadding:"none",inlinePadding:"none"},a.default.createElement(Hn.a,{padding:"base"},l?.length>0&&a.default.createElement(Hn.a,{spacing:"small300"},l.map((e=>{const{cost:n,method:r}=e;if(!n||r.redemptionSource!==mo.D.Custom)return null;const l=r.redemptionContent?.redemptionAttributes.reduce(((e,t)=>`${e},${t.key}:${t.value}`),"");return a.default.createElement(fm,{key:l,maskedIdentifier:r.redemptionContent?.maskedIdentifier||"",amount:{amount:n.amount,currencyCode:n.currencyCode},remove:async()=>{const e=await i(r);"success"===e?.status&&t?.()}})}))),a.default.createElement(ym,null),(()=>{if(0===u)return null;const e=a.default.createElement(Kn.N,{extensions:d,options:{paymentMethodIdentifier:r.paymentMethodIdentifier,submitRedeemablePaymentLine:async(e,n)=>{const a=await o(e,n);return"success"===a?.status&&(y(!1),t?.()),a}}});return l&&0!==l.length?f?a.default.createElement(h.S,null,a.default.createElement(he.S,{spacing:"small500"}),a.default.createElement(Hn.a,{spacing:"base"},a.default.createElement(fe.D,{level:3},n("payment.gift_card_wrapper.apply_another_gift_card_label","Apply another gift card")),e)):a.default.createElement(h.S,null,a.default.createElement(he.S,{spacing:"small500"}),a.default.createElement(He.$,{kind:"plain",textDecoration:"none",onPress:()=>y(!0)},a.default.createElement(ht.o,{spacing:"small400",blockAlignment:"center"},a.default.createElement(Le.In,{source:"plus",appearance:"interactive"}),a.default.createElement(jn.E,null,n("payment.gift_card_wrapper.apply_another_gift_card_label","Apply another gift card"))))):e})()))})))):null}function Em(){const{currencyCode:e}=(0,P.q)(),{value:t}=(0,I.VS)();return(0,a.useMemo)((()=>{const n=t?.presentmentCurrency||e;return("CustomerProfile"===t?.customerProfile?.__typename?t.customerProfile.storeCreditAccounts:[]).find((e=>e.balance.currencyCode===n))}),[t,e])}function bm(){const e=(0,I.Dr)();return(0,a.useMemo)((()=>e.value?.lines.filter((({method:e})=>(0,Wo.k)(e)))||[]),[e])}let vm=function(e){return e.Init="init",e.Loading="loading",e.Success="success",e.Error="error",e.Stale="stale",e}({});function Cm(e,t){return e.filter((({method:e})=>!Sm(e,t)))}function Sm(e,t){return!!((0,Wo.k)(e)&&e.redemptionContent&&"storeCreditAccountId"in e.redemptionContent&&e.redemptionContent.storeCreditAccountId===t.id)}function km(e){const t=(0,zr.a)(Vr.yX),{value:n}=(0,I.mu)();return(0,a.useMemo)((()=>{const a=Boolean(e?.balance?.amount),r=Boolean(n?.find((e=>"redeemable"===e.type&&e.redemptionSource===mo.D.StoreCredit)));return Boolean(t&&a&&r)}),[e,n,t])}function wm(e){const{negotiate:t}=(0,p.T4)();return(0,a.useCallback)((async()=>new Promise((n=>{t(void 0,{include:["paymentLines"],silenceValidations:!0,silenceViolations:["non-store-credit"],runListenersOnError:!0,force:!0,onComplete(t){e("success"===t.status?vm.Success:vm.Error),n(t)}})}))),[t,e])}const Pm="StoreCreditRedemptionCheckbox";function Am({afterAppliedRedeemablesChange:e}){const t=(0,E.W)(),n=(0,$n.a)(),r=(0,I.u_)(),l=(0,I.Dr)(),o=(0,_e.gd)(),i=(0,_e.Fw)(),s=Em(),d=(0,a.useMemo)((()=>!(!s||!l.value?.lines)&&function(e,t){return e.some((({method:e})=>Sm(e,t)))}(l.value.lines,s)),[l,s]),[c,u]=(0,a.useState)(vm.Init),m=km(s),p=function(e,t){const n=(0,ve.C)(),{state:r}=(0,jt.c$)(),l=wm(t);return(0,a.useCallback)((async()=>{if(!e)return t(vm.Error),Promise.resolve(null);t(vm.Loading);const a=Cm(r.read(n.paymentLines).value,e);return r.write(n.paymentLines,[...a,{method:{type:"redeemable",redemptionSource:mo.D.StoreCredit,redemptionContent:{storeCreditAccountId:e.id}}}]),await l()}),[l,n.paymentLines,t,r,e])}(s,u),f=function(e,t){const n=(0,ve.C)(),{state:r}=(0,jt.c$)(),l=wm(t);return(0,a.useCallback)((async()=>{if(!e)return t(vm.Error),Promise.resolve();t(vm.Loading);const a=Cm(r.read(n.paymentLines).value,e);return r.write(n.paymentLines,a),await l()}),[e,t,r,n.paymentLines,l])}(s,u),h=c===vm.Loading||o||i||r&&0===r.value?.amount&&!d;let y;return o?y=t("payment.store_credit.buying_gift_card","You can’t use store credit to buy a gift card"):i&&(y=t("payment.store_credit.no_fixed_selling_plans","You can’t use store credit with deferred purchase options")),m?a.default.createElement(cm.w,{accessibilityLabel:t("payment.store_credit.label","Store credit")},a.default.createElement(ma.m,{id:"store_credit_redemption",selectedItems:d?[Pm]:[],onChange:async function(t){let n=null;n=t.includes(Pm)?await p():await f(),"success"===n?.status&&e?.()},allowMultiple:!0},a.default.createElement(on.c$,{id:Pm,disabled:h},a.default.createElement(on.xV,null,a.default.createElement(ht.o,{blockAlignment:"center"},a.default.createElement(jn.E,null,t("payment.store_credit.apply_label","Apply store credit")),c===vm.Loading&&a.default.createElement(Te.y,null))),a.default.createElement(on.PE,null,a.default.createElement(jn.E,{emphasis:"bold"},n(s.balance.amount,{currency:s.balance.currencyCode}))),y&&a.default.createElement(on.bc,null,a.default.createElement(jn.E,null,y))))):null}function Im(){return null}var xm=n(9155);const Mm="i4w4N",Tm=`https://${A.$z}/shop-assets/static_uploads/shop-cash/shop_cash_logo_v2.png`;function Nm({cashBackRate:e}){const t=(0,E.W)();return a.default.createElement(h.S,{cornerRadius:"base",position:{type:"relative"},className:_()(Mm)},a.default.createElement(rn.C,{columns:["auto",129],spacing:"none"},a.default.createElement(h.S,{padding:"large200"},a.default.createElement(jn.E,null,t("shop_pay.checkout.shop_cash.cashback_title",{cashBackRate:e},"You're earning %{cashBackRate}% Shop Cash by using Shop Pay on this order!"))),a.default.createElement(h.S,{position:{type:"absolute",inlineEnd:0,blockStart:0},maxInlineSize:129},a.default.createElement(ia._,{source:Tm}))))}const Lm=e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 12v-1a7 7 0 0 0-7-7H4v1a7 7 0 0 0 7 7zm0 0v2m0 1h1a7 7 0 0 0 7-7V7h-1a7 7 0 0 0-7 7m0 1v-1m0 1v5"})),Dm="YvXnf",Rm="wmgBN";function Bm(){const e=(0,T.dg)(),t=(0,E.W)();return a.default.createElement(rn.C,{columns:["auto","fill"],spacing:"base",blockAlignment:"center"},a.default.createElement(h.S,{className:_()(Dm,{[Rm]:(0,ie.em)(e)}),disableGlobalBranding:!0},a.default.createElement(Lm,{width:20,height:20})),a.default.createElement(h.S,null,a.default.createElement(jn.E,{appearance:"subdued"},t("shop_pay.carbon_neutral_delivery","Every Shop Pay purchase removes carbon from the air—at no extra cost."))))}var Fm=n(47042);function zm(){const[e]=(0,hl._c)(),t=Ic(),{shippingRequired:n}=(0,_e.kG)(),a=(0,_e.O7)(),r=(0,is.Jj)(),[l]=(0,hl.M3)(),{hasSubscriptions:o}=(0,Fm.E)(),i=e.length>0,s=n&&(l||i),d=!l&&!i,c=!d&&t.length>0;return{showShipping:s,showPayment:c,promptAddress:d,promptCreditCard:!(l||d||c||a),installments:r,hasSubscriptions:o}}let Vm=function(e){return e.Historical="HISTORICAL",e.Initial="INITIAL",e}({});var Om=n(67331),Wm=n(74436);const qm=(0,Ht.MN)(!1),$m=(0,Ht.MN)(!1);function Um({onValid:e,onInvalid:t,children:n}){const r=(0,o.QN)(),l=(0,o.DD)(new Set),i=(0,a.useMemo)((()=>(0,Ht.MN)((e=>{const t=e(l);let n=!1,a=t.size>0;for(const l of t){const[t,o,i]=l;o(e(t))&&(a=!1),r.read(t).value!==i&&(n=!0)}return{valid:a,changed:n}}))),[l,r]),s=(0,a.useCallback)(((e,t)=>{const n=[e,t,r.read(e).value];return r.write(l,(e=>{const t=new Set(e);return t.add(n),t})),()=>{r.write(l,(e=>{const t=new Set(e);return t.delete(n),t}))}}),[r,l]),d=(0,a.useCallback)((n=>{n.valid?e?.({contact:qm,shipping:$m}):t?.({contact:qm,shipping:$m}),r.write(l,(e=>{const t=new Set(e);for(const n of e){const[e,a]=n;t.delete(n);const l=[e,a,r.read(e).value];t.add(l)}return t}))}),[r,l,e,t]);(0,a.useEffect)((()=>{const e=r.read(i).value;d(e)}),[]),(0,a.useEffect)((()=>r.subscribe(i,(({value:e})=>{if(e.changed)return d(e)}))),[r,i,d]);const c=(0,a.useMemo)((()=>({registerValidator:s,contact:qm,shipping:$m})),[s]);return a.default.createElement(Wm.B.Provider,{value:c},n)}const Hm=(0,a.createContext)(null);let jm=function(e){return e.Autocomplete="PREFETCH_SHIPPING_RATES_ON_AUTOCOMPLETE",e.HistoricalAddress="PREFETCH_SHIPPING_RATES_USING_HISTORICAL_ADDRESS",e}({});const Ym=()=>(new Date).valueOf(),Gm=(e,t)=>e.name===t.name&&e.city===t.city&&e.countryCode===t.countryCode&&e.zoneCode===t.zoneCode&&e.postalCode===t.postalCode&&e.address1===t.address1&&e.address2===t.address2&&e.company===t.company&&e.firstName===t.firstName&&e.lastName===t.lastName&&e.phone===t.phone;var Xm=n(68119),Zm=n(14856),Qm=n(85462),Jm=n(6044),Km=n(31685);function ep(){const e=(0,E.W)(),t=(0,ke.j9)(),{smsMarketing:n}=(0,P.q)(),{phone:r,acceptSmsMarketing:l,smsMarketingPhone:i,shippingAddress:s,locationAddress:d}=(0,ve.C)(),{countryCode:c}=(0,o.md)(d),[u,m]=(0,o.fp)(l),p=(0,I.rZ)(),{handleSmsMarketingConsent:f}=(0,Qm.h)(),[g]=(0,o.fp)(r),[_]=(0,o.fp)(s.fields.phone),[b,v]=(0,o.fp)(i);(0,a.useEffect)((()=>{b||v(g||(_??""))}),[]);const{fieldError:C,setFieldError:S}=(0,Jm.B)();function k(e){S(void 0),f(e)}(0,o.GI)(r,(e=>{e&&!p&&v(e)}));const w=e("field_errors.sms_marketing_phone_invalid","Enter a valid phone number"),A=(0,Km.w)(w),x=(0,vt.Bl)(),M=Boolean(p),T=Boolean(!g);if(n===Zm.q.Off)return null;const N=a.default.createElement(ln.V,{size:"small",appearance:"subdued"},e("marketing.sms.disclaimer.description_html",{privacy_policy_link:a.default.createElement(J.N,{external:!0,to:t.storefront("policies/privacy-policy"),appearance:"monochrome"},e("marketing.sms.disclaimer.privacy_policy","Privacy Policy")),terms_of_service_link:a.default.createElement(J.N,{external:!0,to:t.storefront("policies/terms-of-service"),appearance:"monochrome"},e("marketing.sms.disclaimer.terms_of_service","Terms of Service"))},{options:{dangerouslySetInnerHTML:!0}},"By signing up via text, you agree to receive recurring automated marketing messages, including cart reminders, at the phone number provided. Consent is not a condition of purchase. Reply STOP to unsubscribe. Reply HELP for help. Message frequency varies. Msg & data rates may apply. View our %{privacy_policy_link} and %{terms_of_service_link}."));return a.default.createElement(a.default.Fragment,null,x?a.default.createElement(Hn.a,{spacing:"base"},a.default.createElement(Xm.E,{defaultOpen:u},a.default.createElement(_i.S,{id:"sms_marketing_opt_in",name:"sms_marketing_opt_in",checked:u,onChange:k,toggles:"smsMarketingOptInDisclosureContent","aria-expanded":u,"aria-controls":"acceptSmsMarketingCollapsible"},e("marketing.accept_sms_checkbox_label","Text me with news and offers")),a.default.createElement(h.S,{id:"smsMarketingOptInDisclosureContent"},a.default.createElement(Hn.a,{padding:["none","none","base","none"]},a.default.createElement(Ke.P,(0,ye.A)({countryCode:c??"",label:e("marketing.sms.mobile_phone_number","Mobile phone number"),disabled:!M&&!T,caretPosition:0,prefillCountryCode:!0,icon:"mobile"},A,{error:C}))),N))):a.default.createElement(h.S,null,a.default.createElement(_i.S,{id:"sms_marketing_opt_in",name:"sms_marketing_opt_in",checked:u,onChange:k,"aria-expanded":u,"aria-controls":"acceptSmsMarketingCollapsible"},e("marketing.accept_sms_checkbox_label","Text me with news and offers")),a.default.createElement(yt.e,{open:u,id:"acceptSmsMarketingCollapsible"},a.default.createElement(h.S,{padding:["base","none","none","large200"]},a.default.createElement(Hn.a,{padding:["none","none","none","small200"]},a.default.createElement(Hn.a,{maxInlineSize:y.OF.when({viewportInlineSize:{min:"small"}},360)},a.default.createElement(Ke.P,(0,ye.A)({countryCode:c??"",label:e("marketing.sms.mobile_phone_number","Mobile phone number"),disabled:!M&&!T,caretPosition:0,prefillCountryCode:!0,icon:"mobile"},A))),N)))))}function tp({showLogoutLink:e,logoutUrl:t}){const n=(0,E.W)(),r=(0,I.rZ)(),l=Fe(),i=(0,Re.P)("simulated"),{email:s,phone:d,firstName:c,lastName:u}=("CustomerProfile"===r?.__typename?r:void 0)??{},m=c||u,{phone:p}=(0,ve.C)(),f=(0,o.QN)(),h=`(${s??d})`,y=(0,o.md)(xe.D.flow)===Me.p.UnauthenticatedUser,{modalUrlOrigin:g,modalUpdatedOrigin:_,shopPayVerificationVisible:b,showShopPayVerification:v}=qe({isShopPayUnauthenticatedUser:y,email:s||""});return(0,a.useEffect)((()=>{f.write(p,"")}),[]),a.default.createElement(a.default.Fragment,null,a.default.createElement(ht.o,{blockAlignment:"center"},a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(jn.E,null,m?n("general.display_name",{firstName:c??"",lastName:u??""},"{{firstName}} {{lastName}}"):null," ",h),e&&!i?a.default.createElement(ht.o,null,a.default.createElement(J.N,{to:t},n("customer_account.sign_out_link_label","Log out"))):null)),s&&l&&a.default.createElement(Ze,{email:s,open:b,showPopover:v,urlOrigin:g,updatedOrigin:_}))}var np=n(579);function ap(){const e=(0,E.W)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(jn.E,{appearance:"subdued",size:"small",accessibilityLive:"polite"},e("marketing.sms.disclaimer.description_transactional_html",{privacy_policy_modal_link:a.default.createElement(np.c,{handle:"privacy-policy"}),terms_of_service_modal_link:a.default.createElement(np.c,{handle:"terms-of-service"})},"You may receive text messages related to order confirmation and shipping updates. Reply STOP to unsubscribe. Reply HELP for help. Message frequency varies. Msg & data rates may apply. View our %{privacy_policy_modal_link} and %{terms_of_service_modal_link}.")))}function rp({additionalFormComponents:e,hideAllOptIns:t=!1,showSmsMarketingOptIn:n=!1,showEmailMarketingOptIn:r=!0,prefetchShippingRates:l=!0,onValidateEmailInput:i}){const s=(0,E.W)(),d=(0,o.QN)(),{emailMarketing:c}=(0,P.q)(),{loggedIn:u,showLogoutLink:m,logoutUrl:f}=(0,si.T4)(),h=(0,zr.a)(Vr.Ry),{value:y}=(0,I.VS)(),g=y?.countryCode,[_,b]=(0,a.useState)(r&&lp(c,Ee.C.Email,h,g)),[v,S]=(0,a.useState)(!1),{shippingAddress:k}=(0,ve.C)(),w=(0,o.md)(k.fields.countryCode),{validatePhoneNumber:A}=(0,il.X)(),{negotiate:x}=(0,p.T4)(),{activeWalletSessionAtom:M}=(0,In.b)(),T=(0,a.useCallback)((e=>{b(r&&lp(c,e,h,g)),S(!1)}),[c,h,g,r]),N=function(){const{getContactInfoOptions:e}=(0,P.q)(),{shippingAddress:t}=(0,ve.C)(),n=(0,o.md)(t.fields.countryCode),r=(0,E.W)(),l=(0,_e.PW)(),i=(0,o.md)(xe.D?.flow)===Me.p.UnauthenticatedUser,s=l||i||!e(n).includes(Ee.C.Phone);return(0,a.useMemo)((()=>s?r("field_errors.email_blank","Enter an email"):r("field_errors.email_or_phone_blank","Enter an email or phone number")),[s,r])}(),L=(0,a.useCallback)((e=>{const t=(0,$e.s)(e,N),n=(0,$e.U)(e,s("field_errors.email_invalid","Enter a valid email"));return t||n||i?.(e)}),[N,i,s]),D=(0,a.useCallback)((e=>{const t=(0,$e.s)(e,s("field_errors.email_or_phone_blank","Enter an email or phone number"));if(t)return S(!t),t;const n=A(e,w??"ZZ")?void 0:s("field_errors.address_phone_blank","Enter a valid phone number");return S(!n),n}),[s,A,w]),R=(0,X.y7)(),B=(0,G._p)(),{capturePrefetch:F}=(()=>{const e=(0,re.g)(),{shippingAddress:t}=(0,ve.C)(),n=(0,o.QN)(),r=(()=>{const{id:e}=(0,P.q)(),{checkoutSessionIdentifier:t,sourceId:n}=(0,C.Fo)(),r=t||n||"",l=(new Date).valueOf(),o=`${r}-${l}`;return(0,a.useCallback)(((t,n,a)=>({schemaId:le.$D.PrefetchOnAddressAutocomple,payload:{eventId:o,prefetchingOfRatesProjectName:"prefetch_on_address_autocomplete",prefetchingOfRatesProjectVersion:"v2",shopId:parseInt((0,$t.ee)(e),10),checkoutToken:r,successfulEarlyFetch:a,prefetchingRoutingRequestSubmittedAt:t,normalRoutingRequestSubmittedAt:n}})),[r,e,o])})(),l=(()=>{const{id:e}=(0,P.q)(),{checkoutSessionIdentifier:t,sourceId:n}=(0,C.Fo)(),r=t||n||"",l=(new Date).valueOf(),o=`${r}-${l}`;return(0,a.useCallback)(((t,n)=>({schemaId:le.$D.PrefetchUsingHistoricalAddress,payload:{eventId:o,prefetchingOfRatesProjectName:"prefetch_using_historical_addresses",prefetchingOfRatesProjectVersion:"v1",shopId:parseInt((0,$t.ee)(e),10),checkoutToken:r,prefetchingRoutingRequestSubmittedAt:t,normalRoutingRequestSubmittedAt:n}})),[r,e,o])})(),i=(0,a.useContext)(Hm),s=(0,a.useCallback)((e=>{const a=Ym();if(e===jm.Autocomplete){const e=n.read(t).value;i?.setPrefetchPoint(a,e)}else e===jm.HistoricalAddress&&i?.setPrefetchPointHistorical(a)}),[i,t,n]),d=(0,a.useCallback)((()=>{const a=i?.prefetchTime,l=i?.prefetchAddress,o=i?.negotiateTime,s=i?.negotiateAddress;if(void 0===a||void 0===l)return;const d=Ym(),c=n.read(t).value,u=void 0!==s&&!Gm(c,s);if(!o||u){const t=Gm(l,c);e.record(r(a,d,t)),i?.setNegotiatePoint(d,c)}}),[e,i,t,n,r]),c=(0,a.useCallback)((()=>{const t=i?.prefetchTimeHistorical;t&&(e.record(l(t,Ym())),i?.setPrefetchPointHistorical(void 0))}),[e,i,l]);return{capturePrefetch:s,captureNegotiate:(0,a.useCallback)((()=>{d(),c()}),[d,c])}})(),z=(0,vt.Bl)(),V=(0,a.useCallback)((({contact:e})=>{l&&!d.read(M).value&&(F(jm.HistoricalAddress),x(void 0,{silenceViolations:["all"],silenceValidations:!0,include:["email","phone"],prefetch:!z,customizeNegotiation:e=>!z&&e.delivery?{...e,delivery:{...e.delivery,prefetchShippingRatesStrategy:Vm.Historical}}:e})),d.write(e,!0),R("sectionComplete",{section:"contact",timestamp:new Date}),B({type:"section_complete",section:"contact"})}),[M,F,x,z,d,R,B,l]),O=(0,a.useCallback)((({contact:e})=>{d.write(e,!1)}),[d]);return a.default.createElement(xr.H,null,u?a.default.createElement(tp,{showLogoutLink:m,logoutUrl:f}):a.default.createElement(Um,{onValid:V,onInvalid:O},a.default.createElement(et,{onInputTypeChange:T,onInlineEmailValidation:L,onInlinePhoneValidation:D})),e,!t&&a.default.createElement(a.default.Fragment,null,v?a.default.createElement(ap,null):null,_?a.default.createElement(bc,null):null,n?a.default.createElement(ep,null):null))}function lp(e,t,n,a){const r=n&&!(0,wn.yq)(a);return e!==Om.N.Off&&t===Ee.C.Email&&!r}var op=n(277);const ip="Rne9s";function sp({loginLink:e,title:t}){return a.default.createElement("div",{className:ip},a.default.createElement(fe.D,{level:1},t),e)}const dp=()=>{const{recordImmediately:e}=(0,oe.v)(),t=(0,E.W)(),[,n]=(0,o.fp)(xe.D?.shopPayVerificationTrigger);return a.default.createElement(J.N,{onPress:()=>{e({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:"click_shop_pay_sign_in"}}),n({source:We.j.LoginLink})}},t("shop_pay.sign_in","Sign in to Shop Pay"))};function cp({flow:e}){const t=(0,E.W)(),{shippingRequired:n}=(0,_e.kG)(),[r]=(0,Zt.lr)(Yt.z.OneTimePurchase),l=r[0],o=l===Gt.y.PickupPoint||l===Gt.y.PickUp;return!n||o?e===Me.p.UnauthenticatedUser?a.default.createElement(Ll,null):a.default.createElement(H.wn,null,a.default.createElement(Hn.a,{spacing:"large200"},a.default.createElement(fe.D,{level:1},t("contact.contact_method_title","Contact")),a.default.createElement(Ll,null))):null}function up({flow:e}){return(0,Zt.qj)(Yt.z.OneTimePurchase)?a.default.createElement(cp,{flow:e}):null}function mp({flow:e=Me.p.EmailOnlySignup}){return(0,o.md)(xe.D.flow)!==e?null:a.default.createElement(up,{flow:e})}function pp({email:e}){const t=(0,E.W)(),{name:n}=(0,P.q)();return a.default.createElement(h.S,{padding:["small200","none"]},a.default.createElement(an.l,{status:"info"},t("shop_pay.checkout.email_changed",{shopName:n,email:a.default.createElement(jn.E,{emphasis:"bold"},e)},"Your order confirmation will be sent to your {{shopName}} account email {{email}}")))}function fp({addressType:e="shipping",disabledReason:t,onSave:n,onAddAction:r,showSavedAddressSelector:l=!0,addressErrorsAtom:i,showNewAddressButton:s=!0,combineViolationAndValidationErrors:d}){const c=(0,E.W)(),[u,m]=(0,o.fp)(Cl.addressModalState),p=(0,o.md)(wn.jI),f="shipping"===e,y=()=>{m({status:"idle",address:u.address})},g="editing"===u.status,_=c(f?"shipping.address_form.add_address":"billing.address_form.add_address","Add address"),b=c(f?"shipping.address_edit":"billing.address_edit","Edit address"),v=c(f?"shipping.address_form.save":"billing.address_form.save","Save"),C=c(f?"shipping.address_form.cancel":"billing.address_form.cancel","Cancel"),S=c(f?"shipping.add_address":"billing.add_address","Use a different address"),k=(0,ra.VH)({businessCustomer:"shipping"===e?c("shipping.add_address","Use a different address"):void 0})??(g?b:_),w=(0,ra.VH)({businessCustomer:"shipping"===e?c("shipping.address_form.one_time_address_subtitle","Use a one-time address for this order"):void 0})??"",P=Boolean(t),A=void 0===d?g:d;return a.default.createElement(a.default.Fragment,null,s&&a.default.createElement(h.S,null,a.default.createElement(He.$,{kind:"plain",disabled:P,textDecoration:"none",onPress:()=>{r()}},a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},a.default.createElement(Le.In,{source:"plus",size:"base",appearance:"monochrome"}),a.default.createElement(jn.E,null,S))),P&&a.default.createElement("div",{style:{paddingLeft:"calc(var(--x-spacing-large-100) + var(--x-spacing-small-200) + 1px)"}},a.default.createElement(ln.V,{size:"small",appearance:"subdued"},t))),a.default.createElement(Ts.x,{open:"editing"===u.status||"adding"===u.status,title:k,onClose:y},w&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Hn.a,null,a.default.createElement(ln.V,{appearance:"subdued"},w)),a.default.createElement(he.S,null)),a.default.createElement(Hn.a,null,p&&a.default.createElement(an.l,{status:"critical"},a.default.createElement(ln.V,null,c("shipping.address_form.generic_error","There was a problem saving your address. Please try again."))),a.default.createElement(Is,{editableAddress:u.address,addressType:e,saveText:v,cancelText:C,onSave:n,onSuccess:y,onCancel:y,showSavedAddressSelector:l,addressErrorsAtom:i,combineViolationAndValidationErrors:A}))))}function hp(){const{checkoutSessionIdentifier:e}=(0,C.Fo)(),t=(0,zr.a)(Vr.le),[n]=(0,hl.Df)(),a=(0,fd.yc)(e),r=t&&void 0!==a&&n?.id===Be.r9,l=t&&(a?.saveAddress||!1),{recordImmediately:o}=(0,oe.v)();let i;return i=t&&void 0!==a?t=>{(0,fd.Po)(e,t),o({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:t?"ephemeral_address_save_checked":"ephemeral_address_save_unchecked"}})}:()=>{},{displayEphemeralAddressCheckbox:r,saveAddress:l,onChangeCheckbox:i}}class yp extends Error{constructor(...e){super(...e),this.name="InvalidSelectedAddressError"}}function gp({addressType:e="shipping",id:t}){const{recordImmediately:n}=(0,oe.v)(),r=(0,E.W)(),l=`${e}_address`,[i]=(0,hl._c)(),{selectedAddress:s,setSelectedAddress:d,saveAddress:c,deleteAddress:u,updateAddress:m}=(0,yl.T)(l),[,p]=Ql(),[f,y]=(0,o.fp)(Cl.addressModalState),g=t||l,_=(0,o.md)((0,Vc._)()),b=(0,Re.P)("simulated"),v=i.length>=Be.I0?r("shop_pay.address_form.max_address",{max_addresses:Be.I0},"{{max_addresses}}-address limit reached. Remove an address to add a new one."):"",C=new Map(i.map((e=>[e.id,e]))),S=(0,fd.Bd)(i),{displayEphemeralAddressCheckbox:k,saveAddress:w,onChangeCheckbox:P}=hp(),A=k&&a.default.createElement(_i.S,{id:"vaulting_ephemeral_address",name:"vaulting_ephemeral_address",checked:w,onChange:P},r("shop_pay.address_form.save_shipping_address","Save this shipping address for next time"));return a.default.createElement(Hn.a,{spacing:"base"},a.default.createElement(au,{id:g,addressType:e,selectedId:s?.id,onChange:e=>{const t=C.get(e);if(!t)throw new yp;d(t,l)},onDelete:S.size>1?async()=>!!b||!!s&&(await u(s?.id),n({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:"shipping"===e?"shipping_address_remove":"billing_address_remove"}}),!0):void 0,onEdit:()=>{s&&y({status:"editing",address:(0,wn.tB)(s.address)})},choices:S,ephemeralAddressCheckbox:A}),a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(fp,{addressType:e,disabledReason:v,onAddAction:()=>{y({status:"adding",address:(0,wn.tB)(_)})},onSave:async t=>{if(b)return!0;let a;"editing"===f.status?a=await m(t,s.id):(a=await c(t,l),n({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:"shipping"===e?Bl.NewShipping:Bl.NewBilling}}));const r="success"===a.status;return r||p(a.errors),r}})))}var _p=n(69751);function Ep({creditCard:e,open:t,onCancel:n,onSave:r,showAddress:l=!1}){const o=(0,E.W)(),i=(0,f.t)({base:!0,small:!1}),s=Xc(Zc),d=i?Hn.a:ht.o,[c,u]=(0,a.useState)(l),[m,p]=(0,a.useState)(e.nickname);(0,a.useEffect)((()=>{p(e.nickname)}),[t,e]);const y=()=>{u(!1),n()},g=(0,a.useCallback)((()=>{u(!0)}),[]),_=(0,a.useCallback)((()=>{u(!1)}),[]);return a.default.createElement(Ts.x,{open:t,title:c?o("shop_pay.edit_credit_card_modal.edit_address_title","Edit billing address"):o("shop_pay.edit_credit_card_modal.edit_card_title","Edit card"),onClose:y},c?a.default.createElement(Is,{onCancel:_,onSuccess:y,onSave:r,cancelText:o("shop_pay.credit_card_form.go_back","Go back"),saveText:o("shop_pay.edit_credit_card_modal.save_billing_address","Save billing address"),editableAddress:(0,wn.tB)(e.billingAddress.address),addressType:"billing"}):a.default.createElement(a.default.Fragment,null,a.default.createElement(jn.E,null,o("shop_pay.edit_credit_card_modal.edit_address_only_note","You can only edit the billing address of your card.")),a.default.createElement(he.S,{spacing:"small200"}),a.default.createElement(fa.l,{disabled:!1,onSubmit:()=>{}},a.default.createElement(xr.H,null,a.default.createElement(Br.A_,{name:"cardNumber",label:o("payment.card_number_label","Card number"),readonly:!0,value:`···· ···· ···· ${e.lastDigits}`,disabled:!0}),a.default.createElement(Br.A_,{name:"cardHolderName",label:o("payment.name_on_card_label","Name on card"),readonly:!0,value:"············",disabled:!0}),a.default.createElement(Br.A_,{name:"expiryLabel",label:o("payment.card_expiry_label","Expiration date (MM / YY)"),readonly:!0,value:(b=e.expiryMonth,v=e.expiryYear,`${b>9?b:`0${b}`}/${`${v}`.slice(2)}`),disabled:!0}),a.default.createElement(Br.A_,{name:"cardVerification",label:o("payment.card_verification_value_label","Security code"),readonly:!0,value:"···",disabled:!0}),s&&a.default.createElement(Br.A_,{name:"cardNickname",label:o("payment.card_nickname_label","Nickname (optional)"),value:m||"",onChange:p,maxLength:Be.er}))),a.default.createElement(he.S,null),a.default.createElement(h.S,{border:"base",cornerRadius:"base"},a.default.createElement(_p.a,{noWrap:!0,label:o("shop_pay.checkout.bill_to","Bill to"),action:a.default.createElement(He.$,{kind:"plain",onPress:g},a.default.createElement(jn.E,null,o("shop_pay.edit_credit_card_modal.edit_button","Edit")))},a.default.createElement(Jc,{address:e.billingAddress.address,nameLinePosition:"block"}))),s&&a.default.createElement(a.default.Fragment,null,a.default.createElement(he.S,null),a.default.createElement(d,{blockAlignment:"center",spacing:"large200"},a.default.createElement(He.$,{inlineSize:i?"fill":void 0,accessibilityRole:"submit",onPress:()=>{r(e.billingAddress.address,m),y()}},o("shop_pay.checkout.payment.card_form.save","Save")),a.default.createElement(He.$,{kind:"plain",inlineSize:i?"fill":void 0,onPress:y},o("shop_pay.checkout.payment.card_form.cancel","Cancel"))))));var b,v}var bp=n(40508),vp=n(57992),Cp=n(54469);function Sp({title:e,ineligibilityReason:t}){return t?a.default.createElement(an.l,{title:e,status:"info"},a.default.createElement(Hn.a,{inlineAlignment:"start"},t)):null}const kp=e=>{const t=Xc(Zc);return(0,a.useMemo)((()=>e?t&&e.nickname&&e.nickname.trim().length>0?e.nickname:t&&e.bank&&e.bank.trim().length>0?e.bank:(0,fd.r$)(e.brand):""),[e,t])},wp={Bullets:"Ag3ki",LabelWrapper:"rbXzJ",Label:"S4dfB"};function Pp({creditCard:e,actions:t}){const n=(0,kn.IL)(e.billingAddress.address,{hiddenFields:["firstName","lastName","phone","company"],countryFormat:"explicit"}),r=Xc(Zc),l=kp(e),o="····";return a.default.createElement(rn.C,{columns:["fill",...t?["auto"]:[]],spacing:"small200",blockAlignment:"start"},a.default.createElement(Hn.a,{inlineAlignment:"start",spacing:"none"},a.default.createElement(ht.o,{spacing:"small200"},a.default.createElement(fi.k,{name:e.brand}),a.default.createElement(jn.E,null,r?a.default.createElement("span",{className:wp.LabelWrapper},a.default.createElement("span",{className:wp.Label},a.default.createElement(mm.P,null,l)),a.default.createElement("span",{"aria-hidden":"true",className:wp.Bullets},o),a.default.createElement(jn.E,null,e.lastDigits)):a.default.createElement(a.default.Fragment,null,a.default.createElement(jn.E,null,l),a.default.createElement("span",{"aria-hidden":"true",className:wp.Bullets},o),a.default.createElement(jn.E,null,e.lastDigits)))),a.default.createElement(ln.V,{appearance:"subdued",size:"small"},n)),t)}const Ap="creditCardSelector--";function Ip({selectedId:e="",onChange:t,creditCards:n,onDelete:r,onEdit:l}){const{creditCardDisabled:i}=(0,vp.w)(),s=(0,is.uj)(),d=(0,Cp.l)(),c=(0,is.Jj)(),u=(0,Ms.Z)(),m=(0,Re.P)("simulated"),p=(0,o.md)(xe.D.selectedCreditCard),{activeOrExpiredCards:f,disabledCardsForInstallments:y,isEveryCardDisabled:g,isEveryCardExpired:_}=(0,a.useMemo)((()=>{const e=[],t=[];let a=0;for(const l of n)c.paymentMethodSelected&&i(l)?t.push(l):l.expired?(a++,e.push(l)):e.push(l);const r=t.length+a;return{activeOrExpiredCards:e,disabledCardsForInstallments:t,isEveryCardDisabled:n.length>0&&n.length===r,isEveryCardExpired:n.length>0&&a===n.length}}),[c.paymentMethodSelected,n,i]),b=(0,E.W)(),[v,C]=(0,a.useState)({status:"idle",card:void 0}),S=c.paymentMethodMustSupportInterestBearingLoans?[b("shop_pay.checkout.card_debit","Only debit cards can be used to pay in installments."),s].join(" ").trim():s,k=Boolean(S)&&d===sn.R.ShopifyInstallments,w=(e,t)=>e?{label:b("shop_pay.checkout.card_delete","Delete card"),title:b("shop_pay.checkout.payment.delete","Delete"),callback:()=>{C({status:"active",card:t})}}:void 0,P=l?{label:b("shop_pay.checkout.payment.card_edit","Edit card"),title:b("shop_pay.checkout.edit","Edit"),callback:l}:void 0,A=(0,a.useCallback)((async()=>{m?C({status:"idle",card:void 0}):(C((({card:e})=>({status:"deleting",card:e}))),v.card&&(await(r?.(v.card)),u.current&&C({status:"idle",card:void 0})))}),[v.card,r,u,m]),I=xp(e),x=(0,a.useCallback)((e=>{const n=function(e){return e?e.replace(Ap,""):e}(e);t(n)}),[t]),M=Boolean(r),T=e=>{const t=w(M,e);return a.default.createElement(a.default.Fragment,null,a.default.createElement(he.S,{spacing:"small500"}),a.default.createElement(ht.o,{spacing:"small300"},a.default.createElement(bp.E,{tone:"critical"},b("shop_pay.checkout.expiry_date",{expiryDate:`${e.expiryMonth}/${e.expiryYear}`},"Exp. {{expiryDate}}")),t&&a.default.createElement(He.$,{kind:"plain",appearance:"critical",textDecoration:"none",accessibilityLabel:t.label,onPress:t.callback},t.title)))},N=(0,a.useMemo)((()=>_?b("shop_pay.checkout.card_all_expired","All your saved cards are expired. Please add a new card."):g?b("shop_pay.checkout.no_valid_cards","No valid cards available"):p?.expired?b("shop_pay.checkout.payment_method_expired","Your payment method has expired"):void 0),[g,_,p?.expired,b]);return a.default.createElement(a.default.Fragment,null,k&&a.default.createElement(h.S,null,a.default.createElement(Sp,{ineligibilityReason:S}),a.default.createElement(he.S,null)),Boolean(N)&&a.default.createElement(h.S,null,a.default.createElement(an.l,{status:"critical",title:N})),a.default.createElement(wu.f,{background:"transparent",backgroundSelected:"base",border:"none",padding:"small100"},a.default.createElement(Pu.s,{name:"CreditCardPaymentSelector",variant:"group",value:I,onChange:x,hideRadioButton:f.length+y.length===1},f.map((t=>a.default.createElement(ku.G,{key:t.id,id:xp(t.id),disabled:t.expired,secondaryContent:t.id===e&&!t.expired&&(l||r)&&a.default.createElement(tu,{label:b("shop_pay.checkout.card_more","More actions for this card"),onDelete:w(M,t),onEdit:P}),tertiaryContent:t.expired?T(t):void 0},a.default.createElement(Pp,{creditCard:t})))),y.map((e=>a.default.createElement(ku.G,{disabled:!0,key:e.id,id:xp(e.id),secondaryContent:!e.expired&&M&&a.default.createElement(tu,{label:b("shop_pay.checkout.card_more","More actions for this card"),onDelete:w(M,e)}),tertiaryContent:e.expired?T(e):void 0},a.default.createElement(Pp,{creditCard:e})))))),M&&v.card&&a.default.createElement(eu,{state:v.status,title:b("shop_pay.checkout.card_delete","Delete card"),description:v.card.storesWithActiveSubscriptions.length?b("shop_pay.checkout.card_confirm_with_active_subscriptions",{count:v.card.storesWithActiveSubscriptions.length,storeName:v.card.storesWithActiveSubscriptions[0]},{one:"This card is the payment method for an active subscription at {{storeName}}. If you delete this card, you will need to edit your payment method for that subscription.",other:"This card is the payment method for active subscriptions at {{storeName}} and more. If you delete this card, you will need to edit your payment method for those subscriptions."}):b("shop_pay.checkout.card_confirm","Are you sure you want to delete this card from your account?"),onConfirm:A,onCancel:()=>C({status:"idle",card:void 0})}))}function xp(e){return`${Ap}${e}`}class Mp extends Error{constructor(...e){super(...e),this.name="InvalidSelectedCreditCardError"}}var Tp=n(25063);function Np({addressType:e,addressCount:t,onPress:n}){const r="shipping"===e,l=(0,E.W)(),o=t>=Be.I0;return a.default.createElement(He.$,{kind:"plain",inlineSize:"fill",inlineAlignment:"start",onPress:n,disabled:o},a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},a.default.createElement(Le.In,{source:"plus",size:"base",appearance:o?void 0:"monochrome"}),a.default.createElement(Hn.a,{inlineAlignment:"start",spacing:"small400"},a.default.createElement(ln.V,{inlineAlignment:"start",appearance:o?"subdued":void 0},l(r?"shipping.add_address":"billing.add_address","Use a different address")),o&&a.default.createElement(ln.V,{inlineAlignment:"start",size:"small",emphasis:"bold"},l("shop_pay.address_form.max_address",{max_addresses:Be.I0},"{{max_addresses}}-address limit reached. Remove an address to add a new one.")))))}function Lp({id:e,label:t,addressType:n,onAddAction:r}){const l=(0,E.W)(),o=`${n}_address`,{recordImmediately:i}=(0,oe.v)(),[s]=(0,hl._c)(),{selectedAddress:d,setSelectedAddress:c}=(0,yl.T)(o),[u,m]=(0,a.useState)(!d),p=(0,is.Jj)(),f=p.supported&&p.paymentMethodSelected,{choices:y,disabledChoices:g}=(0,is.iZ)(),{setFirstSpiSupportedAddress:_}=(0,is.gg)(o);(0,a.useEffect)((()=>{f&&"billing"===n&&_()}),[f,n,_]);const b=(0,a.useCallback)((e=>{const t="shipping"===n?"shipping_addresses":"billing_addresses";i({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:e?`${t}_collapse`:`${t}_expand`}}),m((e=>!e))}),[i,n]),v=(0,a.useCallback)((e=>{const t=s.find((t=>t.id===e));c(t,o)}),[s,c,o]),C=(0,kn.IL)(d?.address,{hiddenFields:["phone"]}),S=(0,a.useCallback)((()=>{r?.()}),[r]);return a.default.createElement(za.pp,{open:u,id:e,label:t,onToggle:b,summary:d?C:a.default.createElement(ln.V,null,l("shop_pay.address_form.add","Add address"))},a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(au,{id:"billing_address_credit_card",choices:y,disabledChoices:g,addressType:"billing",onChange:v,selectedId:d?.id}),a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(Np,{addressType:n,addressCount:s.length,onPress:S}))))}function Dp(e){const t=(0,Vc._)();return a.default.createElement(Is,(0,ye.A)({},e,{editableAddress:t}))}const Rp={source:"shopPay",features:{Rewards:function(){const{visible:e,cashBackRate:t}=function(){const{isUnauthenticatedSession:e}=(0,cr.M)(),[t]=(0,hl.fv)(),[n]=(0,hl.Cu)(),[r]=(0,hl.Ou)(),{value:l}=(0,I.u_)(),{recordImmediately:o,pageLoadId:i}=(0,oe.v)(),{nonEligibleReason:s}=Tc(),{selectedBillingAddress:d}=Mc(),c=e?[null,Be.dQ.ShopCashInvalidBillingAddress,Be.dQ.ShopCashInvalidShippingAddress].includes(s):null==s,{totalCashSourceAmount:u}=t||{},m=d.countryCode===lr.O.Us,p=c&&m&&Number(l?.amount)>0,f=Boolean(n&&p);return(0,a.useEffect)((()=>{u&&l?.amount&&o({schemaId:"shopify_pay_payment_page_shop_cash_reward_eligibility/3.0",payload:{pageLoadId:i,balance:u?.amount,publicId:r,isTransactionCashbackEligible:p,totalPrice:Number(l.amount),cashbackPercent:n?.cashBackRate}})}),[p,l?.amount,i,o,u?.amount,n?.cashBackRate,r,u]),{visible:f,cashBackRate:n?.cashBackRate}}(),{layout:n}=(0,S.I)(),r="web"===n;return a.default.createElement(h.S,null,r&&a.default.createElement(he.S,{spacing:"large200"}),e&&t?a.default.createElement(Nm,{cashBackRate:t}):a.default.createElement(Bm,null))},MarketingDisclosure:function(e){const{layout:t}=(0,S.I)(),{visible:n,nonEligibleReason:r}=Nc(),[l]=(0,hl.fv)(),o=n&&!r&&l?.offerEligible,i=(0,xm.q)(),s="app"===t&&!o;(0,a.useEffect)((()=>{i(s)}),[i,s]);const d=(0,f.t)({base:!0,medium:!1});return s?null:a.default.createElement(H.iJ,{condition:d},a.default.createElement(vc,null))},CashRedemption:function({source:e=Dc.Root,vaultedMethods:t}){const{dataSources:n}=qu(),r=Wu(),[l,o]=(0,a.useState)(r),{preferredShopCashOptionType:i,setPreferredShopCashOptionType:s}=(0,nr.i)(om),[d,c]=(0,a.useState)({state:"init"});(()=>{const{triggerShopCashMonorail:e}=Vu(),{visible:t}=Nc(),n=(0,Du.Z)(t),r=t!==n,l=(0,zr.a)(Vr.sE),{shopPayCheckoutSurface:o,layout:i}=(0,S.I)(),[s]=(0,hl._c)(),d=Ic(),c=(0,vt.Bl)(),u={shopPayCheckoutSurface:o,layout:i,isReactNativeWebView:Boolean(window.ReactNativeWebView),shopCashBalanceBeta:l,nAddresses:s.length,nCreditCards:d.length,isOnePageCheckout:c},m=JSON.stringify(u);(0,a.useEffect)((()=>{r&&!t&&e({type:"layout-does-not-meet-requirements-for-shop-cash",nonEligibleReason:`Layout does not meet requirements for Shop Cash: ${m}`})}),[t,r,m,e])})();const{visible:u,nonEligibleReason:m}=Nc(),p=m===Pe.X.PaymentsShopCashUnsupportedCurrency,f=(0,_e.O7)(),h={currentShopCashOption:l,setCurrentShopCashOption:o,setToggleStatus:c,toggleStatus:d,preferredShopCashOptionType:i},y={shopCashOptions:n,currentShopCashOption:l,setCurrentShopCashOption:o,setPreferredShopCashOptionType:s,toggleStatus:d,setToggleStatus:c,position:e},g=e===Dc.Vaulted,_=Boolean(t),E=e===Dc.Root,b=Boolean(!t);if(!u)return a.default.createElement(lm,{reason:"layout-requirements-not-met",position:e});if(p)return a.default.createElement(lm,{reason:"unsupported-currency",position:e});const v=(({shopCashOptions:e})=>e.some((e=>(({shopCashOption:e})=>!ju({shopCashOption:e})&&Boolean(e.value.amount&&e.primaryLabel))({shopCashOption:e}))))({shopCashOptions:n})&&!f,C=f?"free-checkout":"no-applicable-options";return g&&_?a.default.createElement(dm,h,v?a.default.createElement(am,y):a.default.createElement(lm,{reason:C,position:e})):E&&b?a.default.createElement(dm,h,v?a.default.createElement(rm,y):a.default.createElement(lm,{reason:C,position:e})):a.default.createElement(lm,{reason:"placement-hidden",position:e})},SubscriptionPolicy:function({policy:e}){const t=(0,E.W)(),{hasSubscriptions:n}=zm(),[r,l]=(0,a.useState)(!1);function o(){l(!1)}const i=t("shop_pay.checkout.user_consent_subscriptions.policy_title","Subscription policy");if(!n||!e.url)return null;const s=a.default.createElement(J.N,{id:"cancellation_policy",key:"subsPolicy",onPress:function(){l(!0)}},t("shop_pay.checkout.user_consent_subscriptions.policy_link","cancellation policy")),d=()=>a.default.createElement(ln.V,{id:"buyer_consent",appearance:"subdued",inlineAlignment:"start"},t("shop_pay.checkout.user_consent_subscriptions.message",{cancellation_policy:s},{options:{noWrapElementReplacements:!0}},"One or more items in your cart is a subscription. By continuing with your payment, you agree that any subscription will automatically renew at the price and frequency listed on this page until it ends or you cancel. All cancellations are subject to the %{cancellation_policy}."));return a.default.createElement(a.default.Fragment,null,a.default.createElement(Ts.x,{title:i,open:r,onClose:o},a.default.createElement(a.default.Fragment,null,a.default.createElement("iframe",{src:e.url,title:i,id:"policyFrame",style:{height:"520px",width:"100%"}}),a.default.createElement(He.$,{onPress:o,inlineSize:"fill"},t("shop_pay.checkout.user_consent_subscriptions.back","Back")))),a.default.createElement(d,null))},PurchaseOptionsAgreement:Im,ContactForm:function(){const e=(0,o.QN)(),t=(0,E.W)(),n=t("field_errors.email_invalid","Enter a valid email"),r=(0,c.ci)({lookup:!0}),l=(0,ze.nQ)(),[i]=(0,Ve.j1)();(0,a.useEffect)((()=>{l.userStatus===ze.$_.Invalid&&e.write(Ae.Bu,n)}),[n,e,l.userStatus]),(0,a.useEffect)((()=>{i&&e.write(Ae.Bu,i.textMessage)}),[e,i]);const s=null!=r&&c.v4.includes(r),d=(0,a.useCallback)((e=>l.email===e&&l.userStatus===ze.$_.Invalid?n:i?i.textMessage:void 0),[n,i,l]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(op.C,{color:"branded"}),a.default.createElement(he.S,null),a.default.createElement(sp,{title:t("contact.contact_method_title","Contact"),loginLink:r===u.k.UnauthenticatedCheckout?a.default.createElement(dp,null):null}),a.default.createElement(he.S,null),a.default.createElement(rp,{hideAllOptIns:!0,additionalFormComponents:a.default.createElement(a.default.Fragment,null,s&&null==i&&a.default.createElement(ln.V,{size:"small",appearance:"subdued"},t("shop_pay.checkout.unauthenticated_checkout.existing_user_notice","Used Shop Pay before? Enter your email to use your saved information to check out.")),a.default.createElement(mp,{flow:Me.p.UnauthenticatedUser})),onValidateEmailInput:d}))},VaultedContact:function({emailAddress:e,label:t,logo:n}){const r=(0,E.W)(),l=(0,ie.yO)(),{detour:i}=(0,p.T4)(),{isEmailOnlySignUp:s,clearEmailOnlySignUp:d,setSkipAutomaticCustomerLoginAttempt:c}=(0,w.Y)(),u=(0,o.md)(xe.D.email),m=Boolean(u)&&Boolean(e)&&u!==e&&a.default.createElement(pp,{email:e}),f=(0,a.useCallback)((()=>{d(),c(!0),i("shopPayLogin",{routerOptions:{replace:!0}})}),[d,i,c]),y=a.default.createElement(h.S,null,s?a.default.createElement(rn.C,{blockAlignment:"baseline",columns:["fill","auto"],spacing:"small100"},u,a.default.createElement(J.N,{onPress:f},a.default.createElement(jn.E,null,r("vaulted.change_button","Change")))):u,m);return l?a.default.createElement(Hn.a,{padding:["none","none","base","none"]},y):a.default.createElement(za.pp,{id:"contact",label:t,logo:n,summary:y},a.default.createElement(Hn.a,{spacing:"small200"},y))},DeliveryAddressEdit:gp,PaymentMethodSelector:function(){const e=(0,E.W)(),t=(0,o.md)(xe.D.creditCards),n=(0,o.md)(xe.D.selectedCreditCard),{setSelectedCreditCard:r,removeCreditCard:l,editCreditCard:i}=Gc(),[s,d]=(0,a.useState)(!1),{hostedFieldsUrl:c}=(0,P.q)(),u=(0,Sn.W)(),m=go(),p=(0,Re.P)("simulated"),f=(0,uo.TD)(mo.D.Custom),y=(0,uo.TD)(mo.D.StoreCredit),g=(0,uo.iy)(),{paymentLines:_}=(0,um.Px)(),b=()=>{const t=f?e("payment.order_covered_by_gift_cards_notice",{count:_.length},{one:"Your order is covered by your gift card.",other:"Your order is covered by your gift cards."}):y?e("payment.order_covered_by_store_credit_notice","Your order is covered by your store credit."):e("payment.order_covered_by_redeemables_notice","Your order is covered.");return t?a.default.createElement(h.S,{background:"subdued",padding:"base",cornerRadius:"base"},a.default.createElement(jn.E,{appearance:"subdued"},t)):null};return a.default.createElement(oo.VV,{hostedFieldsUrl:c,onError:u.notify,onSetFieldErrors:m},a.default.createElement(Hn.a,{spacing:"base"},g?a.default.createElement(b,null):a.default.createElement(a.default.Fragment,null,a.default.createElement(Ip,{selectedId:n?.id,creditCards:t,onChange:function(e){const n=(0,fd.eC)(t,e);if(!n)throw new Mp;r(n)},onDelete:async e=>!!e&&(await l(e.id),!0),onEdit:()=>{n&&d(!0)}}),a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(_u,null))),n&&a.default.createElement(Ep,{open:s,creditCard:n,onCancel:()=>d(!1),onSave:async(e,t)=>{if(p)return!0;let a;return n&&(a=await i(n.id,e,t)),"success"===a?.status}})))},BillingAddressEdit:gp,PaymentMethods:function({errorBannerInContext:e,billingAddressInContext:t}){const n=(0,o.QN)(),r=(0,xn.f)(),l=(0,a.useMemo)((()=>({addressErrors:(0,wn.iK)(),addressSettings:r})),[r]),[i,s]=Ql(l.addressErrors),d=(0,E.W)(),[c,u]=(0,a.useState)(!1),{sdk:m,errors:p,validate:f}=(0,mi.Z)(),y=Eo(),g=(0,_e.O7)(),_=(0,Tp.h)(),b=g&&_,{recordImmediately:v}=(0,oe.v)(),C=(0,I.mu)(),{saveCreditCard:S}=Gc(),{creditCardErrors:k,generateCreditCardErrors:w}=Hc(),P=(0,o.md)((0,ve.C)().paymentLines),A=(0,is.Jj)(),{creditCardDisabled:x}=(0,vp.w)(),M=(0,uo.Bf)(),T=(0,uo.Vq)(),N=(0,uo.xT)(),L=(0,uo.iy)([mo.D.Custom,mo.D.StoreCredit]),D=(0,o.md)((0,ve.C)().billingAddress),R=(0,o.md)((0,ve.C)().shippingAddress),B=(0,o.md)((0,ve.C)().billingAddressOption),{shippingRequired:F}=(0,_e.kG)(),{saveAddress:z,selectedAddress:V}=(0,yl.T)("billing_address"),O=F&&"shipping"===B&&!A.isPointOfSale?R:D,W=V?V.address:O,q=(0,kn.Z7)(W?.countryCode,void 0,r),{checkPayUserAvailable:$}=(0,cr.M)();_l((async()=>{if(!M)return{success:!0};if(T)return{success:!0};if(0===P.length)return{success:!1,location:"intercept_no_payment_lines"};if("direct"!==P[0].method.type)return{success:!0};if(!W)return{success:!1,location:"intercept_no_selected_billing_address"};const{isValid:e}=f(),t=q(W,"billing");if("shipping"!==B||!F)for(const[o,i]of Array.from(t))n.write(l.addressErrors[o],i);if(!e)return{success:!1,location:"intercept_credit_card_not_valid"};if(0!==t.size)return{success:!1,location:"intercept_billing_address_has_errors"};if(!$())return{success:!0};const a=await m.vaultCard(),r=await S(a,W,null,A.paymentMethodMustSupportInterestBearingLoans,!0);return"success"===r.status?A.paymentMethodSelected&&x(r.creditCard)?{success:!1,location:"intercept_card_not_good_for_installments"}:{success:!0}:(w(r.errors||[]),s(r.errors?.filter((e=>e.field[0]===Wc.BillingAddress))),{success:!1,location:"intercept_credit_card_not_saved"})}));const U=()=>{u(!1)};(0,a.useEffect)((()=>{m.setErrors(k.fieldErrors)}),[k,m]);const H=(0,a.useMemo)((()=>C.value?.filter((e=>"direct"===e.type))),[C]);if(p.sdk)return a.default.createElement(Si,null);if(!M)return a.default.createElement(Jo,{reason:"freeOrder",minimal:!0});if(T)return a.default.createElement(Jo,{reason:"giftCard",minimal:!0});if(N)return a.default.createElement(Jo,{reason:"storeCredit",minimal:!0});if(L)return a.default.createElement(Jo,{reason:"redeemables",minimal:!0});const j=H.flatMap((e=>e.paymentBrands)),Y=e&&y?a.default.createElement(an.l,{status:"critical"},d("payment.generic_incorrect_card_info","Your payment details couldn’t be verified. Check your card details and try again.")):null;return a.default.createElement(ii,{errorBannerInContext:e,billingAddressInContext:t},k.baseMessage&&a.default.createElement(a.default.Fragment,null,a.default.createElement(an.l,{status:"critical"},k.baseMessage)),b&&a.default.createElement(a.default.Fragment,null,a.default.createElement(an.l,{status:"info"},d("shop_pay.checkout.vaulted_card_required_error","To complete this checkout, Shop Pay requires a valid credit card to be added to your account."))),a.default.createElement(Hn.a,{spacing:"large200"},a.default.createElement(Hn.a,null,Y,a.default.createElement(ls,{cardBrands:j,prefillCardholderName:!0}),t&&a.default.createElement(os.Provider,{value:l},a.default.createElement(Cd,null)),!t&&V&&a.default.createElement(a.default.Fragment,null,a.default.createElement(h.S,{border:"base",cornerRadius:"base",padding:["none","base"]},a.default.createElement(Lp,{id:"payment_selector_billing_address",addressType:"billing",label:d("shop_pay.checkout.bill_to","Bill to"),onAddAction:()=>{u(!0)}}))))),a.default.createElement(Ts.x,{open:c,title:d("shop_pay.address_form.add","Add address"),onClose:()=>u(!1)},a.default.createElement(Dp,{addressType:"billing",addressErrorsAtom:i,onCancel:U,onSuccess:U,onSave:async e=>{const t=await z(e,"billing_address");v({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:Bl.NewBilling}});const n="success"===t.status;return n||s(t.errors),n},cancelText:d("shop_pay.credit_card_form.go_back","Go back"),saveText:d("shop_pay.edit_credit_card_modal.save_billing_address","Save billing address")})))},SignUpContact:mp,InvalidShippingMethodBanner:function(){const{hasViolations:e}=(0,bl.l6)(El.I0),{hasViolations:t}=(0,bl.Ck)(El.lh),n=(0,E.W)(),{isPayUserAvailable:r}=(0,cr.M)();return e?a.default.createElement(Pl,null):t&&!r?a.default.createElement(vl,{message:n("shop_pay.checkout.shipping_method_invalid_phone_number","Update the phone number in your delivery address to see available shipping methods.")}):a.default.createElement(yc,null)},GiftCardRedemption:_m,StoreCreditRedemption:Am}},Bp={source:"payPal",features:{MarketingDisclosure:vc,ReviewNotice:Sc}};var Fp=n(56953),zp=n(88561);function Vp(){const e=(0,Wd.N)(),{inMemoryAmazonPayParts:t}=(0,In.b)(),n=(0,o.md)(t.sdkStatus),r=(0,Vd.N)(Md.lC.BuyWithPrime),l=(0,E.W)(),i=(0,Sn.W)(),s=l("review.blocks.change_link_label","Change"),[,d]=(0,Fp.KW)();return n.status===Od.SY.Error&&i.notify(new zp.G("Unable to render change payment link because BWP SDK is unavailable")),n.status!==Od.SY.Available?null:a.default.createElement(J.N,{onPress:()=>{try{n.sdk.buywithprime.changePaymentMethod({amazonPayOptions:{amazonCheckoutSessionId:r,isDeclined:e}})}catch(t){d({type:"buy_with_prime_change_action_failure"}),i.notify(new zp.G(`Error on changing buyer payment method. Details: ${t}`))}}},s)}var Op=n(16133);function Wp(e){const{isRequired:t,countryCode:n,externalPhoneNumberUtil:r}=e,l=(0,E.W)(),{validatePhoneNumber:o}=(0,il.X)(r);return{validatePhoneField:(0,a.useCallback)((e=>{const a=(0,Ie.CJ)(e);return t&&!a?l("field_errors.phone_blank","Enter a phone number"):a&&!o(e??"",n)?l("field_errors.shipping_line_phone_invalid","Enter a valid phone number"):void 0}),[t,o,n,l])}}var qp=n(44025);function $p(e){const{showIcon:t}=e,{inMemoryAmazonPayParts:n}=(0,In.b)(),r=(0,o.md)(n.sdkStatus),l=(0,Vd.N)(Md.lC.BuyWithPrime),i=(0,Wd.N)(),s=(0,E.W)(),d=(0,Sn.W)(),c=t?s("shipping.add_address","Use a different address"):s("review.blocks.change_link_label","Change"),[,u]=(0,Fp.KW)();return r.status===Od.SY.Error&&d.notify(new zp.G("Unable to render change address link because BWP SDK is unavailable")),r.status!==Od.SY.Available||i?null:a.default.createElement(J.N,{onPress:()=>{try{r.sdk.buywithprime.changeShippingAddress({amazonPayOptions:{amazonCheckoutSessionId:l}})}catch(e){u({type:"buy_with_prime_change_action_failure"}),d.notify(new zp.G(`Error on changing buyer shipping address. Details: ${e}`))}}},a.default.createElement(ht.o,{blockAlignment:"center",spacing:"none"},t?a.default.createElement(a.default.Fragment,null,a.default.createElement(Le.In,{source:"arrowUpRight",size:"small",appearance:"monochrome"}),a.default.createElement(ft.c,{spacing:"tight"})):null,a.default.createElement(jn.E,null,c)))}function Up(e){const{externalPhoneNumberUtil:t}=e,n=(0,E.W)(),{shippingAddress:r}=(0,ve.C)(),l=(0,o.md)(r),[i,s]=(0,a.useState)(null),d=(0,gn.FI)().isRequired("phone",l.countryCode),{validatePhoneField:c}=Wp({isRequired:d,countryCode:l.countryCode,externalPhoneNumberUtil:t}),u=(0,Ie.NX)(),m=(0,o.md)(r.fields.phone),p=(0,Ie.j8)(r.fields.phone,u,c),f=(0,a.useCallback)((e=>{s(c(e))}),[c]),y=(0,a.useRef)(m),g=n("contact.phone_label","Phone"),_=n("contact.optional_phone_label","Phone (optional)"),b=a.default.createElement(h.S,null,a.default.createElement(h.S,{padding:"small400"}),a.default.createElement(Ke.P,(0,ye.A)({name:"phone",countryCode:l.countryCode||"",label:d?g:_,hideCountries:!0,required:d,autocomplete:{group:"shipping",field:"telephone"},autoFocus:!0,onInputValueChange:f},p,{error:i})));return(0,a.useEffect)((()=>{m&&!y.current&&(y.current=m),s(c(m))}),[c,m,y]),c(y.current)?b:null}const Hp=()=>{const{formattedAddress:e,address:{firstName:t,lastName:n}}=(0,Op.o2)(["phone","firstName","lastName"]);return a.default.createElement(cn.Wd,{id:"buy_with_prime_address_edit",titleHidden:!0,selectedItems:["1"],onChange:()=>{},controlHidden:!0,hideRadioButton:!0},a.default.createElement(cn.wC,{id:"1",padding:["small100","none","small100","small100"]},a.default.createElement(rn.C,{spacing:"base",blockAlignment:"start"},a.default.createElement(Hn.a,{inlineAlignment:"start",cornerRadius:"base",padding:"none"},a.default.createElement(h.S,{borderRadius:"base"},a.default.createElement(h.S,{padding:"none"},a.default.createElement(ln.V,null,t," ",n),a.default.createElement(ln.V,{appearance:"subdued"},e)),a.default.createElement(Up,null)),a.default.createElement($p,{showIcon:!0})))))};function jp(e){const t=(0,o.QN)();return(0,a.useMemo)((()=>e.some((e=>{const n=t.read(e.behaviors).value;return!(!n.blockProgress||!e.capabilities.blockProgress)||!!n.alwaysReveal}))),[e,t])}function Yp(){const{recordImmediately:e}=(0,oe.v)();return{trackOnDeliveryToggle:(0,a.useCallback)((t=>{e({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:t?"shipping_rates_expand":"shipping_rates_collapse"}})}),[e]),trackSelectShippingMethod:(0,a.useCallback)(((t,n)=>{e({schemaId:"shopify_pay_payment_page_select_shipping_rate/3.1",payload:{currentRate:t.handle??"",currentRatePrice:`${t?.cost?.amount??0}`,isLocalDelivery:!t.pickupLocation&&t.methodType===Gt.y.Local,isLocalPickup:Boolean(t.pickupLocation),previousRate:n?.handle,previousRatePrice:"number"==typeof n?.cost?.amount?`${n?.cost?.amount}`:void 0}})}),[e])}}var Gp=n(89857),Xp=n(99741),Zp=n(29271),Qp=n(80107),Jp=n(67361),Kp=n(99295),ef=n(22711),tf=n(17594),nf=n(68999);const af=({deliveryMethod:e})=>{const t=(0,E.W)(),n=(0,$n.a)(),{optionList:{typographyStyle:r}}=(0,ta.x)(),{cost:l,costAfterDiscounts:o,priceBreakdown:i}=e;if(!i?.length)return null;const s=n(o.amount,{currency:o.currencyCode}),d=i.every((({excludeFromDeliveryOptionPrice:e})=>e)),c=i.every((e=>{const t=e.targetMerchandiseLines[0].sellingPlan?.prepaid;return!t})),{amount:u}=l,{amount:m}=o,p=c&&d?t("shipping.subscription_delivery_description.shipping_price_included","Included"):s;return u>m?a.default.createElement(nf.$,{cost:l,costAfterDiscounts:o}):a.default.createElement(jn.E,{style:r},p)},rf=e=>""===e?"":`${e[0].toUpperCase()+e.substring(1)}`,lf=({priceBreakdown:e,discountedShippingPrice:t,sellingPlan:n,subscriptionDetails:r})=>{const l=(0,E.W)(),o=(0,$n.a)(),i=(0,Kt.ZS)(),{deliveryInterval:s,billingIntervalCount:d,billingMaxCycles:c}=r,u=i(s,d),{amount:m,discountRecurringCycleLimit:p,excludeFromDeliveryOptionPrice:f}=e,h=o(m.amount,{currency:m.currencyCode}),y=n.prepaid?!c||c>1?function(){const e=`${h} ${u}`;return b()?_(p,e):f?C(e):`${v(n.deliveriesPerBillingCycle)} ${u}`}():g():function(){const e=`${h} ${u}`;return 1===n.subscriptionDetails.billingMaxCycles?g():b()||0!==t.amount&&t.amount<m.amount?_(p,e):f?C(e):u}();function g(){const e=f&&!b()?n.deliveriesPerBillingCycle-1:n.deliveriesPerBillingCycle;return e>0?rf(v(e)):""}function _(e=0,t){return[l("shipping.subscription_delivery_description.free_for_first_n_order",{count:e},{one:"For first order",other:"For first %{count} orders"}),C(t)].filter((e=>""!==e.trim())).join(", ")}function b(){return 0===t.amount&&void 0!==p}function v(e){return l("shipping.subscription_delivery_description.prepaid_delivery_frequency",{count:e},{one:"for %{count} delivery",other:"for %{count} deliveries"})}function C(e){return l("shipping.subscription_delivery_description.recurring_order_shipping_price",{recurring_order_shipping_price:e},"followed by %{recurring_order_shipping_price}")}return a.default.createElement(ln.V,{appearance:"subdued",size:"small"},rf(y))},of=({deliveryMethod:e})=>{const t=(0,E.W)(),n=(0,vt.Bl)(),r=(0,kt.w9)("Checkout::ShippingMethodDetails::RenderAfter"),l=(0,kt.w9)("Checkout::ShippingMethodDetails::RenderExpanded");if(null==e)return null;const{title:o,handle:i,priceBreakdown:s,costAfterDiscounts:d,deliveryPromisePresentmentTitle:c,brandedPromise:u}=e;if(!s)return null;const m=s.every((e=>0===e.discountRecurringCycleLimit)),p=!m&&1===s.length,f=e.methodType===Gt.y.Local?t("shipping.local_delivery","Local delivery"):o,h=r.length>0;return a.default.createElement(ma.m,{id:"subscription_shipping_method",title:t("general.choose_shipping_method","Choose a shipping method"),titleHidden:!0,selectedItems:[i],onChange:()=>{},controlHidden:!0},a.default.createElement(on.c$,{id:i,label:f,details:((t,n,r,l)=>{const o=!n&&r.length>1,i=l.length>0;return o||i?a.default.createElement(pa.g,{controlledBy:t,renderChildrenWhenCollapsed:!0},a.default.createElement(Hn.a,{spacing:"large200"},o&&a.default.createElement(tf.w,{deliveryMethod:e}),i&&a.default.createElement(Kn.N,{extensions:l,options:{handle:t}}))):null})(i,m,s,l)},a.default.createElement(on.xV,null,a.default.createElement(ef.E,{methodTitle:f,brandedPromise:u}),c&&!n?a.default.createElement(ln.V,{appearance:"subdued"},c?.long):null),a.default.createElement("div",{className:"T8lOv"},a.default.createElement(on.PE,null,a.default.createElement(af,{deliveryMethod:e}),p&&function(e){const t=e.targetMerchandiseLines[0].sellingPlan;if(t?.subscriptionDetails)return a.default.createElement(lf,{priceBreakdown:e,discountedShippingPrice:d,sellingPlan:t,subscriptionDetails:t.subscriptionDetails})}(s[0]))),h&&a.default.createElement(on.bc,null,a.default.createElement(Kn.N,{extensions:r,options:{handle:i}}))))},sf=({line:e,showHeader:t,loadingAdditionalShippingRates:n,hasMultipleShippingLines:r})=>{const l=(0,E.W)(),{extensionsBefore:o,extensionsAfter:i}=(0,Zp.C)({targeted:!0,hasMultipleDeliveryGroups:Boolean(r)}),s=(0,_e.aR)(),[d,c]=(0,Zt.Mr)(e.type),{methods:u,type:m}=e,p=t?a.default.createElement(fe.D,{level:3},m===Yt.z.OneTimePurchase?l("shipping.shipping_method_one_time_purchase_group_title","One-time purchase"):l("shipping.shipping_method_subscription_group_title","Subscription")):null,f=(0,a.useMemo)((()=>u.find((e=>e.handle===d))||(u.length>0?u[0]:void 0)),[u,d]),h=m!==Yt.z.OneTimePurchase&&s?a.default.createElement(of,{deliveryMethod:f}):a.default.createElement(Kp.PA,{type:m,methods:u,loadingAdditionalShippingRates:n});return a.default.createElement(Hn.a,{spacing:"small200"},p,a.default.createElement(Kn.N,{extensions:o,options:{deliveryGroupId:(0,Jp.L0)(e.id)}}),h,a.default.createElement(Kn.N,{extensions:i,options:{deliveryGroupId:(0,Jp.L0)(e.id)}}))};let df=function(e){return e.Completed="COMPLETED",e.Fetching="FETCHING",e}({});const cf=JSON.parse('{"id":"ca32d1a1360abc73acf9c215a92ce9283175d9aa48b70e909517b6ccfe9467a7","name":"ShippingRatesStatusQuery","source":"query ShippingRatesStatusQuery($token:String!){shippingRatesStatus(token:$token)}"}'),uf=e=>{const t=(0,a.useRef)(!1),n=(0,a.useRef)(!1),r=(0,a.useRef)(0),l=(0,vs.bn)(),{value:o,loading:i}=(0,I.FC)(),{negotiate:s}=(0,p.T4)();return(0,a.useEffect)((()=>{n.current=i}),[i]),(0,a.useEffect)((()=>{let a;o&&"filled"===o.status&&o.intermediateRates&&o.shippingRatesStatusToken&&o.progressiveRatesEstimatedTimeUntilCompletion?(t.current=!0,r.current=o.progressiveRatesEstimatedTimeUntilCompletion):(t.current=!1,r.current=0);const i=async()=>{if(!n.current){const n=await l.query(cf,{variables:{token:o.shippingRatesStatusToken},cache:!1});n?.data?.shippingRatesStatus===df.Completed?s(void 0,{include:["shippingAddress"],silenceValidations:!0,silenceViolations:["non-stock"],customizeNegotiation:e=>(e.delivery.useProgressiveRates=!1,e)}).finally((()=>{"function"==typeof e&&e()})).catch((e=>{throw e})):t.current&&(a=setTimeout(i,r.current))}};return t.current&&(a=setTimeout(i,r.current)),()=>a&&clearTimeout(a)}),[e,l,s,o]),"filled"===o?.status&&o.intermediateRates};var mf=n(62888);function pf(e){const t=(0,E.W)(),n=(0,a.useCallback)((e=>e.reduce(((n,a,r)=>r===e.length-1?t("shipping.shipping_method_combinations.combination",{rest:n,current:a},"%{rest} and %{current}"):t("shipping.shipping_method_combinations.with_separator",{rest:n,current:a},"%{rest}, %{current},")),"")),[t]);return(0,a.useMemo)((()=>{if(!(0,fd.q7)(e))return[];const a=(0,dn.MD)(e);return function(e,t){const n=(t||[]).filter(dn.gB).map(co.sm);return(0,co.WN)(n).filter((e=>e.length)).map((t=>function(e,t){return{...(0,fd.LF)(e),title:(0,fd.s4)(e,t),cost:(0,fd.mU)(e),costAfterDiscounts:(0,fd.YQ)(e)}}(t,e)))}({businessDays:e=>t("shipping.estimated_delivery_date",{count:e},{one:"%{count} business day",other:"%{count} business days"}),businessDaysRange:(e,n)=>t("shipping.estimated_delivery_date_range",{minimum:e,maximum:n},"%{minimum} to %{maximum} business days"),subscriptionsOnlyShippingTitle:t("shipping.subscription_shipping","Subscription shipping"),combineTwoShippingTitles:(e,n)=>t("shipping.shipping_method_combinations.combination",{rest:e,current:n},"%{rest} and %{current}"),combineMultipleShippingTitles:n,localDeliveryTitle:t("shipping.local_delivery","Local delivery")},a)}),[n,e,t])}function ff(){const{value:e,loading:t}=(0,I.FC)(),n=(0,dn.Me)(e,Yt.z.OneTimePurchase,!0),r=(0,a.useMemo)((()=>n&&"available"===n.status?n.methods:[]),[n]),l=pf(e),i=(0,fd.q7)(e)?l:r,s=(0,a.useMemo)((()=>i.reduce(((e,t)=>{const n=t.methodType===Gt.y.Local?Gt.y.Shipping:t.methodType;return n===Gt.y.PickUp||n===Gt.y.Shipping?{...e,[n]:[...e[n],t]}:e}),{[Gt.y.Shipping]:[],[Gt.y.PickUp]:[]})),[i]),[d,c]=(0,a.useState)(!0),[u]=(0,o.fp)(xe.D.selectedShippingAddress);(0,a.useEffect)((()=>{c(!0)}),[u]),(0,a.useEffect)((()=>{t||c(!1)}),[t]);const[,m]=(0,a.useState)(),p=uf(m);return{methodsByType:s,availableDeliveryMethods:i,availableDeliveryMethodsLoading:d,progressiveShippingRatesLoading:p}}function hf({onChange:e,prerequisitesLoading:t}){const{value:n,loading:r}=(0,I.FC)(),l=(0,dn.Me)(n,Yt.z.OneTimePurchase,!0),o=pf(n),[i]=(0,Zt.Mr)(l?.type??Yt.z.OneTimePurchase),s=(0,a.useMemo)((()=>{if(!t&&!r&&i&&null!=l&&"available"===l.status)return(0,fd.q7)(n)?o.find((e=>e.handle===i)):l.methods.find((e=>e.handle===i))}),[t,r,i,l,n,o]),d=(0,a.useRef)(s);return(0,a.useEffect)((()=>{s&&d.current&&d.current.handle!==s.handle&&e(s,d.current),d.current=s}),[s,e]),{selectedDeliveryMethod:s}}const yf=(0,Ge.m)({load:()=>(0,Xe.P)((()=>n.e(231).then(n.bind(n,24635)))),id:()=>24635});var gf=n(93615),_f=n(48015);const Ef=[{handle:"first"},{handle:"second"}],bf=()=>{},vf=[];function Cf(){const{asyncDeliveryPromiseExperienceEnabled:e}=(0,P.q)(),{value:t}=(0,I.FC)(),n=(0,zr.a)(Vr.u_),r=e&&n,l="filled"===t?.status?t.lines[0]:void 0,o="available"===l?.status&&l.methods.length>0?l.methods:Ef;return a.default.createElement(ma.m,{id:"shippingMethods",selectedItems:vf,onChange:bf,loading:!0,controlHidden:1===o.length},o.map((({handle:e,title:t,description:n,estimatedTimeInTransit:l},o)=>a.default.createElement(on.c$,{id:e,key:e,disabled:!0},a.default.createElement(on.xV,null,a.default.createElement(ln.V,{emphasis:"bold"},a.default.createElement(gf.E,{inlineSize:0===o?"12ch":"6ch"},t)),r||null!=l?a.default.createElement(Ha.r,{inlineSize:"small"}):null,n&&!r?a.default.createElement(_f.C,{size:"small"},n):null),a.default.createElement(on.PE,null,a.default.createElement(gf.E,{inlineSize:"5ch"}))))))}const Sf=()=>{const e=(0,E.W)(),t=(0,ra.VH)({shopPay:e("shop_pay.invalid_shipping_method_summary","Select a different shipping address to view available shipping methods")})??e("shipping_errors.empty_state","Enter your shipping address to view available shipping methods.");return a.default.createElement(Yo,null,a.default.createElement(Xo,null,t))},kf=(0,a.memo)((function(){const e=(0,Kt.wv)(),{InvalidShippingMethodBanner:t}=rr();switch(e.status){case"initial":case"loading":return a.default.createElement(Cf,null);case"empty":return a.default.createElement(Sf,null);case"error":return a.default.createElement(t,null);case"filled":{const t=(0,Gp.HU)(e.deliveryLines).filter((e=>"not_required"!==e.status)),n=t.flatMap((({methods:e})=>e.map((({title:e})=>e))));return a.default.createElement(ao.y,{impressionType:"shipping_methods",impressionFeatures:n},a.default.createElement(wf,{lines:t}))}}}));function wf({lines:e}){const t=(0,X.y7)(),n=(0,G._p)(),[,r]=(0,a.useState)(),l=uf(r),o=(0,E.W)(),i=(0,Kt.FW)(e),s=(0,Kt.x1)(),d=(0,ra.VH)({shopPay:Pf})??a.default.Fragment,c=a.default.createElement(an.l,{status:"critical"},o("shipping_errors.shipping_method","The shipping options have changed for your order. Review your selection and try again.")),u=e.length>1||(0,mf.cU)(e),m=e.filter((({type:e})=>e===Yt.z.OneTimePurchase)).length;return(0,a.useEffect)((()=>{t("shippingMethodsFilled",{timestamp:new Date}),n({type:"shipping_methods_filled"})}),[t,n]),a.default.createElement(a.default.Fragment,null,a.default.createElement(d,null),a.default.createElement(Hn.a,{spacing:"large200"},i&&c,s?a.default.createElement(yf,{shippingGroupLines:e,oneTimePurchaseTotalCount:m}):e.map((t=>a.default.createElement(sf,{line:t,showHeader:u,loadingAdditionalShippingRates:l,key:`${t.type}`,hasMultipleShippingLines:e.length>1})))))}function Pf(){const{trackSelectShippingMethod:e}=Yp(),{availableDeliveryMethodsLoading:t,progressiveShippingRatesLoading:n}=ff();return hf({onChange:e,prerequisitesLoading:t||t&&!n}),null}var Af=n(91924),If=n(73595),xf=n(68810),Mf=n(37607);function Tf({selectedDeliveryMethod:e,selectedDeliveryExpectation:t}){const n=(0,E.W)(),r=(0,Qt.hp)(),l=(0,$n.a)(),{value:i}=(0,I.CL)(),{asyncDeliveryPromiseExperienceEnabled:s}=(0,P.q)(),d="·",c=(0,Zt.FA)(Yt.z.OneTimePurchase),[u,m]=(0,o.fp)(c);(0,a.useEffect)((()=>{e?.phoneRequired&&!u&&i?.phone&&m(i?.phone)}),[]);const{geolocation:p}=(0,be.u)(),{formattedNumber:f}=(0,Il.l)(p.country.code,u);if(!e)return null;const h=e.estimatedTimeInTransit,{cost:y,costAfterDiscounts:g,title:_,minDeliveryDateTime:b,maxDeliveryDateTime:v,deliveryPromisePresentmentTitle:C,phoneRequired:S,brandedPromise:k,displayCheckoutRedesign:w,description:A}=e,x=C?.short||(void 0===h?null:r(h)),M=s?x||A:x,T=y.amount?l(y.amount,{currency:y.currencyCode}):n("shipping.free_rate_label","Free"),N=g.amount?l(g.amount,{currency:g.currencyCode}):n("shipping.free_rate_label","Free"),L=y.amount>g.amount?a.default.createElement(a.default.Fragment,null,a.default.createElement(jn.E,{appearance:"subdued",accessibilityRole:"deletion"},T)," ",N):a.default.createElement(a.default.Fragment,null,N);if(w){const e=(0,ef.p)(_,L);return a.default.createElement(ef.E,{methodTitle:e,brandedPromise:k,inlineLogo:!0})}if(S)return a.default.createElement(a.default.Fragment,null,a.default.createElement(ln.V,null,_," ",d," ",a.default.createElement(jn.E,{emphasis:"bold"},L)),a.default.createElement(ln.V,{appearance:"subdued"},f));if(b&&v&&C&&!s){const{short:e}=C;return a.default.createElement(a.default.Fragment,null,a.default.createElement(ln.V,null,_," ",d," ",a.default.createElement(jn.E,{emphasis:"bold"},L)),a.default.createElement(ln.V,{appearance:"subdued"},e))}return M?t?a.default.createElement(a.default.Fragment,null,_," ",d," ",a.default.createElement(jn.E,{emphasis:"bold"},L)):a.default.createElement(a.default.Fragment,null,a.default.createElement(ln.V,null,_," ",d," ",a.default.createElement(jn.E,{emphasis:"bold"},L)),a.default.createElement(ln.V,{appearance:"subdued"},M)):a.default.createElement(a.default.Fragment,null,_," ",d," ",L)}function Nf({state:e,addressInvalidMessage:t,addressIncompleteMessage:n}){const r=(0,E.W)(),l=(0,Kt.x1)(),{hasViolations:o}=(0,bl.Ck)(El.b2),{hasViolations:i}=(0,bl.Ck)(El.WX),{optionList:{typographyStyle:s}}=(0,ta.x)(),d=(0,a.useRef)(!1),{asyncDeliveryPromiseExperienceEnabled:c}=(0,P.q)(),u=(0,zr.a)(Vr.u_),{deliveryExpectationLines:m,pollCount:p}=function(){const{deliveryExpectationLines:e,deliveryExpectationLinesLoading:t,status:n,pollCount:a}=(0,xf.H)();if(!t&&"unavailable"!==n)return{deliveryExpectationLines:e,pollCount:a}}()||{},f=c&&u;switch(e.status){case"initial":case"loading":return a.default.createElement(Ha.r,null);case"empty":case"error":{let e;return e=o?n??r("shipping.method_summary.incomplete_address_entered","Enter a complete shipping address to view available shipping methods"):i?r("shipping.different_shipping_method_summary","Enter a different shipping address to view available shipping methods"):t??r("shipping.invalid_shipping_method_summary","Enter a valid shipping address to view available shipping methods"),a.default.createElement(jn.E,null,e)}case"filled":return l?a.default.createElement(Mf.f,null):function({state:e,expectedDeliveryLines:t,asyncDeliveryPromiseExperienceEnabled:n,typographyStyle:r,shopPromiseCheckoutImprovementsEnabled:l,pollCount:o}){const{selectedExpectation:i,selectedMethod:s}=function(e,t,n){if(n&&n?.length>0){const{method:a,deliveryExpectationLine:r}=function(e,t){for(const n of e){if("not_required"===n.status)continue;const e=t.find((e=>e.deliveryStrategyHandle===n.selectedDeliveryMethodHandle));if(null===e?.minDeliveryDateTime)return null;for(const t of n.methods)if(t.handle===n.selectedDeliveryMethodHandle)return{method:t,deliveryExpectationLine:e}}}(e,n)||{};if(null!==r&&r&&t)return{selectedExpectation:r,selectedMethod:a}}return{selectedExpectation:void 0,selectedMethod:Lf(e)}}(e.deliveryLines,n,t);return a.default.createElement(a.default.Fragment,null,i&&s&&!l&&a.default.createElement(Af.W,{deliveryDateText:i?.deliveryExpectationPresentmentTitle?.short,typographyStyle:r,brandedPromise:i.brandedPromise,id:s.handle}),a.default.createElement(Tf,{selectedDeliveryMethod:s,selectedDeliveryExpectation:i}),l&&s&&i&&a.default.createElement(If.w,{deliveryMethod:s,deliveryExpectationLine:i,animateOnShow:(o??0)>1}))}({state:e,expectedDeliveryLines:m,pollCount:p,asyncDeliveryPromiseExperienceEnabled:Boolean(c),typographyStyle:s,hasRanAsyncAnimation:d,shopPromiseCheckoutImprovementsEnabled:f})}}function Lf(e){for(const t of e)if("not_required"!==t.status)for(const e of t.methods)if(e.handle===t.selectedDeliveryMethodHandle)return e}const Df=e=>a.default.createElement(cm.w,null,e);function Rf({initiallyOpen:e=!1}={}){const t=(0,E.W)(),{trackOnDeliveryToggle:n}=Yp(),r=(0,Kt.x1)(),l=(0,Qp.B)(),{hasMultipleDeliveryGroups:i,onlyDeliveryGroupId:s}=(0,Zp.L)(),{extensionsBefore:d,extensionsAfter:c,extensionsForRollupReveal:u}=(0,Zp.C)({hasMultipleDeliveryGroups:i,targeted:!1,shouldHandleRollup:!0}),m=(0,kt.w9)("Checkout::ShippingMethodDetails::RenderAfter"),p=(0,kt.w9)("Checkout::ShippingMethodDetails::RenderExpanded"),f=(0,Kt.wv)(),{hasViolations:h}=(0,bl.l6)(new Set([...El.fT])),y=(0,ra.VH)({businessCustomer:!1})??("filled"===(C=f).status&&C.deliveryLines.some((e=>"available"===e.status&&e.hasDeliveryLineChange))),g=jp([...u,...m,...p]),{currentReturnSection:_}=(0,Xp.H_)(),[b,v]=(0,a.useState)(e||g||"VaultedShippingMethods"===_);var C;(0,a.useEffect)((()=>{l&&g&&v(!0)}),[g,v,l]),(0,a.useEffect)((()=>{(h||y)&&v(!0)}),[v,h,y]);const S=(0,a.useCallback)((e=>{n(e)}),[n]),k=(0,ra.VH)({shopPay:S}),w=(0,a.useCallback)((()=>{v((e=>{const t=!e;return k?.(t),t}))}),[k]),{value:P}=(0,I.FC)(),A=(0,Gp.ck)(P),x=A&&A[0],M=(0,Zt.FA)(Yt.z.OneTimePurchase),[T]=(0,o.fp)(M),{value:N}=(0,I.CL)();(0,a.useEffect)((()=>{x?.phoneRequired&&!T&&!N?.phone&&v(!0)}),[x?.handle]);const L="error"===f.status||"empty"===f.status;(0,a.useEffect)((()=>{L&&v(!1)}),[L]);const D=(0,ra.VH)({shopPay:Ff,customerAccount:Bf})??zf,R=t("shipping.shipping_method_notice"," ");return a.default.createElement(za.pp,{open:b,id:"shippingMethod",label:r?t("shipping.split_cart_shipping_label","Method"):t("shipping.shipping_method_title","Shipping method"),summary:a.default.createElement(D,null),onToggle:w},"error"===f.status?null:a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(Kn.N,{extensions:d,options:{deliveryGroupId:s},render:Df}),a.default.createElement(Hn.a,{spacing:"base"}," "===R?null:a.default.createElement(ln.V,null,R),a.default.createElement(kf,null)),a.default.createElement(Kn.N,{extensions:c,options:{deliveryGroupId:s},render:Df})))}function Bf(){const e=(0,E.W)(),t=(0,Kt.wv)();return a.default.createElement(Nf,{state:t,addressIncompleteMessage:e("shipping.method_summary.incomplete_address_selected","Select a complete shipping address to view available shipping methods"),addressInvalidMessage:e("customer_account.invalid_shipping_method_summary","Select a valid shipping address to view available shipping methods")})}function Ff(){const e=(0,E.W)(),t=(0,Kt.wv)();return a.default.createElement(Nf,{state:t,addressIncompleteMessage:e("shipping.method_summary.incomplete_address_selected","Select a complete shipping address to view available shipping methods"),addressInvalidMessage:e("shop_pay.invalid_shipping_method_summary","Select a different shipping address to view available shipping methods")})}function zf(){const e=(0,Kt.wv)();return a.default.createElement(Nf,{state:e})}var Vf=n(18194);function Of(){const[e,t]=(0,a.useState)(void 0),n=(0,E.W)(),{promiseText:r,loading:l}=(0,Fp.QL)(),o=(0,re.I)(),i=(0,Kt.V_)(),{loading:s,value:d}=(0,_e.hm)();(0,a.useEffect)((()=>{t(Date.now())}),[]),(0,a.useEffect)((()=>{if(!s&&d&&e){const n=Date.now(),a=n-e,r=d[0]?.promiseProviderApiClientId;if(r){const e=(0,$t.ee)(r);o(a,n,Number(e)),i(a,Number(e)),t(void 0)}}}),[s,d,e,o,i]);const c=a.default.createElement(ht.o,null,Vf.kQ,a.default.createElement(Ha.r,null));return a.default.createElement(ht.o,null,a.default.createElement(za.pp,{id:"buyWithPrimeShippingMethods",label:n("shipping.shipping_method_title","Shipping method"),summary:l?c:r}))}const Wf={source:"buyWithPrime",features:{VaultedPayment:function(){const e=(0,E.W)(),{brand:t,descriptor:n}=(0,Nd.CS)();return a.default.createElement(za.pp,{id:"buyWithPrimePayDetails",label:e("payment.payment_method","Payment method"),summary:n?a.default.createElement(Bd,{brand:t,descriptor:n}):a.default.createElement(Ha.r,null),action:a.default.createElement(Vp,null)})},VaultedDeliveryAddress:function(){const e=(0,E.W)(),{formattedAddress:t,address:{address1:n,countryCode:r,phone:l}}=(0,Op.o2)(),{error:o}=(0,qp.s)(),i=(0,gn.FI)().isRequired("phone",r),{validatePhoneField:s}=Wp({isRequired:i,countryCode:r}),[d,c]=(0,a.useState)(!n),[u,m]=(0,a.useState)(!1),p=(0,a.useCallback)((()=>m((e=>!e))),[m]),f=(0,a.useRef)(l);return(0,a.useEffect)((()=>c(!n)),[n]),(0,a.useEffect)((()=>{f.current||(f.current=l),m(Boolean(s(f.current)))}),[f,s,l]),a.default.createElement(za.pp,{id:"buyWithPrimeDeliveryAddress",label:e("shipping.shipping_address_title","Ship to"),summary:d?a.default.createElement(Ha.r,null):a.default.createElement("div",{style:{display:"flex"}},Boolean(o)&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Le.In,{appearance:"critical",source:"critical"}),a.default.createElement(ft.c,{spacing:"extraTight"})),t),onToggle:p,open:u},d?a.default.createElement(Ha.r,null):a.default.createElement(Hp,null))},VaultedShippingMethods:function(e){const t=(0,zr.a)(Vr.Wl),n=(0,zr.a)(Vr.GJ)&&t?Rf:Of;return a.default.createElement(n,e)}}};function qf(){const{brand:e,descriptor:t}=(0,Nd.CS)(),n=(0,uo.Bf)(),r=(0,uo.Vq)();return n?r?a.default.createElement(Jo,{vaulted:!0,reason:"giftCard"}):t?a.default.createElement(Bd,{brand:e,descriptor:t}):a.default.createElement(Ha.r,null):a.default.createElement(Jo,{vaulted:!0,reason:"freeOrder"})}var $f=n(85634),Uf=n(72581);const Hf=new Set([Pe.X.DeliveryCompanyRequired,Pe.X.DeliveryCompanyTooLong,Pe.X.DeliveryCompanyContainsEmojis,Pe.X.DeliveryCompanyContainsHtmlTags]);function jf(){const e=(0,E.W)(),t=(0,Uf.u)(),{hasViolations:n,violations:a}=(0,bl.Ck)(Hf);if(n&&t){const t=function(e){const t=[...e].find((e=>Hf.has(e.code)));if(t)return t.code}(a);let n;return n="DELIVERY_COMPANY_REQUIRED"===t?e("field_errors.address_company_blank","Enter a company name"):"DELIVERY_COMPANY_TOO_LONG"===t?e("field_errors.address_company_too_long","Company name is too long (maximum is 255 characters)"):"DELIVERY_COMPANY_CONTAINS_EMOJIS"===t?e("field_errors.address_company_contains_emojis","Company cannot contain emojis"):e("field_errors.address_company_contains_html_tags","Company cannot contain HTML tags."),{error:n,type:$f.zW.InvalidAddress}}return{error:null,type:null}}const Yf=new Set([Pe.X.DeliveryAddress2Required,Pe.X.DeliveryAddress2TooLong,Pe.X.DeliveryAddress2ContainsEmojis,Pe.X.DeliveryAddress2ContainsHtmlTags]);function Gf(){const e=(0,E.W)(),t=(0,Uf.u)(),{hasViolations:n,violations:a}=(0,bl.Ck)(Yf);if(n&&t){const t=function(e){const t=[...e].find((e=>Yf.has(e.code)));if(t)return t.code}(a);let n;return n="DELIVERY_ADDRESS2_REQUIRED"===t?e("field_errors.address_address2_blank","Enter an apartment, suite, etc."):"DELIVERY_ADDRESS2_TOO_LONG"===t?e("field_errors.address_address2_too_long","The second address line is too long (maximum is 255 characters)"):"DELIVERY_ADDRESS2_CONTAINS_EMOJIS"===t?e("field_errors.address_address2_contains_emojis","Address2 cannot contain emojis"):e("field_errors.address_address2_contains_html_tags","Address2 cannot contain HTML tags."),{error:n,type:$f.zW.InvalidAddress}}return{error:null,type:null}}const Xf=(0,Fd.W)("AmazonPayChangeAddressLinkButton");function Zf(){const e=(0,Sn.W)(),t=(0,E.W)(),{inMemoryAmazonPayParts:n}=(0,In.b)(),r=(0,o.md)(n.sdkStatus),l=(0,Vd.N)(Md.lC.AmazonPay),i=(0,Wd.N)(),s=(0,zd.B)(void 0,Xf),d=t("shipping.add_address","Use a different address");return r.status===Od.SY.Error&&e.notify(new Qf("Unable to render change address link because Amazon Pay SDK is unavailable")),r.status!==Od.SY.Available||i?null:a.default.createElement(J.N,{onPress:()=>{try{r.sdk.Pay.changeShippingAddress({amazonCheckoutSessionId:l})}catch(t){e.notify(new Qf(`Error on changing buyer shipping address. Details: ${t}`))}},id:s},a.default.createElement(ht.o,{blockAlignment:"center",spacing:"none"},a.default.createElement(Le.In,{source:"arrowUpRight",size:"small",appearance:"monochrome"}),a.default.createElement(ft.c,{spacing:"tight"}),a.default.createElement(jn.E,null,d)))}class Qf extends Error{constructor(...e){super(...e),this.name="AmazonPayChangeAddressLinkError"}}function Jf(){const e=(0,o.QN)(),t=(0,gn.FI)(),{shippingAddress:n}=(0,ve.C)(),{error:r}=jf(),l=(0,a.useMemo)((()=>(0,wn.iK)()),[]);return(0,a.useEffect)((()=>{r&&e.write(l.company,r)}),[l.company,r,e]),r?a.default.createElement(h.S,null,a.default.createElement(h.S,{padding:"small400"}),a.default.createElement(Wr,{address:n,addressErrors:l,addressType:"shipping",addressSettings:t,editDisabled:!1})):null}function Kf(){const e=(0,o.QN)(),t=(0,gn.FI)(),{shippingAddress:n}=(0,ve.C)(),{error:r}=Gf(),l=(0,a.useMemo)((()=>(0,wn.iK)()),[]);return(0,a.useEffect)((()=>{r&&e.write(l.address2,r)}),[l.address2,r,e]),r?a.default.createElement(h.S,null,a.default.createElement(h.S,{padding:"small400"}),a.default.createElement(Gr,{address:n,addressErrors:l,addressType:"shipping",addressSettings:t,editDisabled:!1})):null}const eh=()=>{const{formattedAddress:e,address:{firstName:t,lastName:n}}=(0,Op.o2)(["phone","firstName","lastName","company","address2"]);return a.default.createElement(cn.Wd,{id:"amazon_pay_address_edit",titleHidden:!0,selectedItems:["1"],onChange:()=>{},controlHidden:!0,hideRadioButton:!0},a.default.createElement(cn.wC,{id:"1",padding:["small100","none","small100","small100"]},a.default.createElement(rn.C,{spacing:"base",blockAlignment:"start"},a.default.createElement(Hn.a,{inlineAlignment:"start",cornerRadius:"base",padding:"none"},a.default.createElement(h.S,{borderRadius:"base"},a.default.createElement(h.S,{padding:"none"},a.default.createElement(ln.V,null,t," ",n),a.default.createElement(ln.V,{appearance:"subdued"},e)),a.default.createElement(Jf,null),a.default.createElement(Kf,null)),a.default.createElement(Zf,null)))))},th={source:"amazonPay",features:{VaultedDeliveryAddress:function(){const e=(0,E.W)(),{formattedAddress:t}=(0,Op.o2)(["company","address2"]),{error:n}=jf(),{error:r}=Gf(),l=!(0,Uf.u)(),[o,i]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(n||r)&&i(!0)}),[r,n]);const s=(0,a.useCallback)((()=>i((e=>!e))),[i]);return a.default.createElement(za.pp,{id:"amazonPayDeliveryAddress",label:e("shipping.shipping_address_title","Ship to"),summary:l?a.default.createElement(Ha.r,null):a.default.createElement("div",{style:{display:"flex"}},Boolean(n||r)&&a.default.createElement(a.default.Fragment,null,a.default.createElement(Le.In,{appearance:"critical",source:"critical"}),a.default.createElement(ft.c,{spacing:"extraTight"})),t),onToggle:s,open:o},l?a.default.createElement(Ha.r,null):a.default.createElement(eh,null))},VaultedPayment:function(){const e=(0,E.W)();return a.default.createElement(za.pp,{id:"amazonPayDetails",label:e("payment.payment_method","Payment method"),summary:a.default.createElement(qf,null),action:a.default.createElement($d,null)})},MarketingDisclosure:vc}},nh=JSON.parse('{"id":"759287ed01c3f55059976a7a1b2c6a23138806816c7471892af068332cf8e472","name":"CreateCustomerAddress","source":"mutation CreateCustomerAddress($address:CustomerMailingAddressInput!){createCustomerAddress(address:$address){result{id default address{name address1 address2 firstName lastName postalCode zoneCode countryCode city company phone coordinates{latitude longitude __typename}__typename}__typename}errors{code target localizedMessage nonLocalizedMessage __typename}__typename}}"}'),ah=JSON.parse('{"id":"ea765e44a8a9fa13789316e2e0b39c50b9353e6752df33b0ac0c8be6c4134027","name":"DeleteCustomerAddress","source":"mutation DeleteCustomerAddress($id:ID!){deleteCustomerAddress(addressId:$id){result{id default address{name address1 address2 firstName lastName postalCode zoneCode countryCode city company phone coordinates{latitude longitude __typename}__typename}__typename}errors{code target localizedMessage nonLocalizedMessage __typename}__typename}}"}'),rh=JSON.parse('{"id":"1fd6b0d3b12d38c7e2007b8a6747dee27d18e029d6e1b8fb88da4e88eb0752cb","name":"ModifyCustomerAddress","source":"mutation ModifyCustomerAddress($address:CustomerMailingAddressInput!,$id:ID!){modifyCustomerAddress(address:$address,addressId:$id){result{id default address{name address1 address2 firstName lastName postalCode zoneCode countryCode city company phone coordinates{latitude longitude __typename}__typename}__typename}errors{code target localizedMessage nonLocalizedMessage __typename}__typename}}"}');const lh=new Set([Pe.X.BuyerIdentityCustomerAccountRequired,Pe.X.BuyerIdentityContactInfoDoesNotMatchCustomerProfile,Pe.X.DestinationAddressRequired]);function oh(e,t){return e||t.errors.some((e=>lh.has(e.code)))}function ih(e){return{firstName:e.firstName,lastName:e.lastName,company:e.company,address1:e.address1,address2:e.address2,city:e.city,countryCode:e.countryCode,zoneCode:e.zoneCode,zip:e.postalCode,phone:e.phone}}function sh(e){const{address:t}=e;return{id:e.id,address:{address1:t.address1??void 0,address2:t.address2??void 0,firstName:t.firstName??void 0,lastName:t.lastName??void 0,postalCode:t.postalCode??void 0,zoneCode:t.zoneCode??void 0,countryCode:t.countryCode??void 0,city:t.city??void 0,company:t.company??void 0,phone:t.phone??void 0},default:e.default}}function dh(e){return e.map((({__typename:e,code:t,target:n,nonLocalizedMessage:a,localizedMessage:r})=>({__typename:e,code:t,target:n??void 0,nonLocalizedMessage:a,localizedMessage:r??void 0})))}function ch(e){const[t,n]=(0,a.useState)(!1),r=function(e){const t=`${e}Addresses`,{value:n}=(0,I.VS)();return(0,a.useMemo)((()=>"CustomerProfile"===n?.customerProfile?.__typename?n.customerProfile[t]:[]),[t,n?.customerProfile])}(e),[l,i]=(0,a.useState)(r);(0,a.useEffect)((()=>{i(r)}),[r]);const{selectedCustomerAddress:s,setSelectedCustomerAddress:d}=function(e,t){const n=`${e}Address`,r=(0,ve.C)(),[l,i]=(0,o.fp)(r[n]);return(0,a.useMemo)((()=>({selectedCustomerAddress:t.find((e=>(0,wn.eB)(e.address,l))),setSelectedCustomerAddress:({address:e})=>{i(e)}})),[t,l,i])}(e,l);!s&&l.length>0&&d(l[0]);const{createAddressMutation:c,updateAddressMutation:u,deleteAddressMutation:m}=function(){const e=function(){const e=(0,vs.bn)(),t=(0,a.useCallback)((async t=>{const{data:n,error:a}=await e.mutate(nh,{variables:{address:ih(t.address)}});if(!n?.createCustomerAddress||oh(a,n.createCustomerAddress))return{status:"failed_unknown"};const{result:r,errors:l}=n.createCustomerAddress;return!r||l.length>0?{status:"failed",errors:dh(l)}:{status:"success",address:sh(r)}}),[e]);return t}(),t=function(){const e=(0,vs.bn)(),t=(0,a.useCallback)((async t=>{const{data:n,error:a}=await e.mutate(rh,{variables:{address:ih(t.address),id:t.id}});if(!n?.modifyCustomerAddress||oh(a,n.modifyCustomerAddress))return{status:"failed_unknown"};const{result:r,errors:l}=n.modifyCustomerAddress;return!r||l.length>0?{status:"failed",errors:dh(l)}:{status:"success",address:sh(r)}}),[e]);return t}(),n=function(){const e=(0,vs.bn)(),t=(0,a.useCallback)((async t=>{const{data:n,error:a}=await e.mutate(ah,{variables:{id:t.id}});if(a||null==n?.deleteCustomerAddress)return{status:"failed_unknown"};const{result:r,errors:l}=n.deleteCustomerAddress;return!r||l.length>0?{status:"failed",errors:dh(l)}:{status:"success",address:sh(r)}}),[e]);return t}();return{createAddressMutation:e,updateAddressMutation:t,deleteAddressMutation:n}}(),f=function(e,t){const{setAddressError:n}=(0,kn.qo)(t);return t=>{(0,wn.oD)(`${e}_address`,t).forEach(((e,t)=>{n(t,e)}))}}(e,wn.zI),{negotiate:h}=(0,p.T4)(),[,y]=(0,o.fp)(wn.jI),g=(0,a.useCallback)((async({mutate:t,getNewAddresses:a,getNewSelectedAddress:r})=>{n(!0);const l=await t();if("success"===l.status){const t=a(l.address),n=r(l.address,t);i(t),d(n),y(!1),await h(void 0,{include:[`${e}Address`],silenceValidations:!0,silenceViolations:["non-stock"]})}else"failed"===l.status?(f(l.errors),y(!1)):"failed_unknown"===l.status&&y(!0);return n(!1),"success"===l.status}),[e,h,f,d,y]),_=(0,a.useCallback)((e=>g({mutate:()=>c({address:e}),getNewAddresses:e=>[...l,e],getNewSelectedAddress:e=>e})),[c,l,g]),E=(0,a.useCallback)(((e,t)=>g({mutate:()=>u({address:e,id:t}),getNewAddresses:e=>{const t=[...l],n=t.findIndex((t=>t.id===e.id));return t[n]=e,t},getNewSelectedAddress:e=>e})),[l,g,u]);return{createAddress:_,deleteAddress:(0,a.useCallback)((async e=>g({mutate:()=>m({id:e}),getNewAddresses:e=>l.filter((t=>t.id!==e.id)),getNewSelectedAddress:(e,t)=>s&&s.id!==e.id?s:t[0]})),[l,m,g,s]),updateAddress:E,selectedAddress:s,setSelectedAddress:d,loading:t,addresses:l}}class uh extends Error{constructor(...e){super(...e),this.name="InvalidSelectedAddressError"}}const mh={source:"customerAccount",features:{DeliveryAddressEdit:function({addressType:e="shipping"}){const t=(0,be.u)().geolocation.country.code,{createAddress:n,deleteAddress:r,updateAddress:l,loading:i,selectedAddress:s,setSelectedAddress:d,addresses:c}=ch(e),[u,m]=(0,o.fp)(Cl.addressModalState),p=(0,a.useMemo)((()=>new Map(c.map((({id:e,address:t})=>[e,t])))),[c]),f=(0,a.useCallback)((e=>{const t=p.get(e);if(!t)throw new uh;d({id:e,address:t,default:!1})}),[p,d]),y=(0,a.useCallback)((async()=>!!s&&r(s.id)),[r,s]),g=(0,a.useCallback)((()=>{if(!s)throw new uh;m({status:"editing",address:(0,wn.tB)(s.address)})}),[s,m]),_=(0,a.useCallback)((()=>{const e=c[0].address,n=(0,wn.tB)({firstName:e?.firstName,lastName:e?.lastName,countryCode:t??e?.countryCode});m({status:"adding",address:n})}),[c,t,m]),E=(0,a.useCallback)((async e=>"adding"===u.status?n(e):!("editing"!==u.status||!s)&&l(e,s.id)),[u.status,n,s,l]);return a.default.createElement(sr.R,{active:i},a.default.createElement(h.S,{opacity:i?70:void 0},a.default.createElement(Hn.a,{spacing:"tight"},a.default.createElement(au,{addressType:e,selectedId:s?.id,onChange:f,onEdit:g,choices:p,onDelete:p.size>1?y:void 0}),a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(fp,{addressType:e,onSave:E,onAddAction:_,showSavedAddressSelector:!1,addressErrorsAtom:wn.zI})))))},MarketingDisclosure:vc,VaultedContact:function({emailAddress:e,label:t,logo:n}){const r=(0,E.W)(),{showLogoutLink:l,logoutUrl:o}=(0,si.T4)(),{currentReturnSection:i}=(0,Xp.H_)(),[s,d]=(0,a.useState)("VaultedContact"===i),c=(0,a.useCallback)((()=>{d((e=>!e))}),[]),u=l&&a.default.createElement(h.S,null,a.default.createElement(J.N,{to:o},r("customer_account.sign_out_link_label","Log out")));return a.default.createElement(za.pp,{id:"contact",open:s,label:t,logo:n,summary:e,onToggle:l?c:void 0},a.default.createElement(Hn.a,{spacing:"small200"},e,u))},StoreCreditRedemption:Am}};var ph=n(56173),fh=n(92996),hh=n(32261);function yh(){const e=(0,E.W)(),{suggestedAddressType:t,suggestedAddress:n}=(0,tn.uW)(),r="billing-fact"===t?e("payment.use_order_billing_address_label","Use order billing address"):"billing"===t?e("payment.use_location_billing_address_label","Use location billing address"):"shipping"===t?e("payment.use_location_shipping_address_label","Use location shipping address"):void 0;return n&&t&&r?a.default.createElement(on.c$,{id:t},a.default.createElement(on.xV,null,a.default.createElement(jn.E,{emphasis:"bold"},r),a.default.createElement(jn.E,{appearance:"subdued"},a.default.createElement(hh.H,(0,ye.A)({},{hiddenFields:["phone","company","firstName","lastName"],multiline:!1},{address:n}))))):null}var gh=n(41601);function _h(){const e=(0,Ir.N)(),t=(0,si.Iq)(),n=(0,Re.P)("draftOrder"),{isOrderEditCheckout:a}=(0,cc.S)();return Boolean(t&&!n&&!a&&(e?.locationCount||0)>1)}function Eh({showIcon:e=!1}){const t=(0,E.W)(),n=(0,si.Iq)();return a.default.createElement(J.N,{to:n,accessibilityLabel:t("contact.change_company_location_link_label","Change company location"),textDecoration:e?"none":void 0},a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},e&&a.default.createElement(Le.In,{source:"marker",size:"base",appearance:"monochrome"}),a.default.createElement(jn.E,null,t("contact.change_location_link_label","Change location"))))}const bh=538;function vh({addressType:e="shipping",disabledReason:t,onSave:n,onAddAction:r,showSavedAddressSelector:l=!0,addressErrorsAtom:o,showNewAddressButton:i=!0,modalState:s,setModalState:d,address:c}){const u=(0,E.W)(),m="shipping"===e,p=u(m?"shipping.address_form.add_address":"billing.address_form.add_address","Add address"),f=u(m?"shipping.address_edit":"billing.address_edit","Edit address"),y=u(m?"shipping.add_address":"billing.add_address","Use a different address"),g=(0,ra.VH)({businessCustomer:"shipping"===e?u("shipping.add_address","Use a different address"):void 0})??("editing"===s?f:p),_=Boolean(t);return a.default.createElement(a.default.Fragment,null,i&&a.default.createElement(h.S,null,a.default.createElement(He.$,{kind:"plain",disabled:_,textDecoration:"none",onPress:()=>{r()}},a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},a.default.createElement(Le.In,{source:"plus",size:"base",appearance:"monochrome"}),a.default.createElement(jn.E,null,y))),_&&a.default.createElement("div",{style:{paddingLeft:"calc(var(--x-spacing-large-100) + var(--x-spacing-small-200) + 1px)"}},a.default.createElement(ln.V,{size:"small",appearance:"subdued"},t))),a.default.createElement(Va.a,{open:"adding"===s||"editing"===s,maxInlineSize:bh,padding:!0,title:g,onClose:()=>{d("idle")}},a.default.createElement(xs,{addressType:e,onSave:n,showSavedAddressSelector:l,addressErrorsAtom:o,showNewAddressButton:i,modalState:s,setModalState:d,address:c})))}function Ch({addressType:e="shipping",onAddAction:t,onEditAction:n,onDeleteAction:r,paymentModalState:l,addressDeleteModalState:o}){const i="inactive"!==(0,gh.q)(),s=(0,be.u)().geolocation.country.code,{addresses:d,selectedAddressChoiceId:c,setSelectedAddress:u,createAddress:m,deleteAddress:f}=xo(e),y=(0,Ir.N)(),g=_h(),{locationCount:_,selectedCompanyLocation:E}=y??{},b=(_||0)>1,{shippingAddress:v}=y??{},{negotiate:C}=(0,p.T4)(),[S,k]=(0,a.useState)("idle"),[w,P]=(0,a.useState)((0,wn.tB)({})),[A]=(0,zr.Z)([Vr._2]),I=c===ko(e)?void 0:()=>{if("shipping"===e){const e=d.get(c);if(!e)return;k("editing"),P((0,wn.tB)(e))}else n&&n()},x=c===ko(e)?void 0:async()=>f(),M=()=>{"billing"===e&&C(void 0,{fieldsToResolve:["billingAddress"]})},T="shipping"===e&&i||"billing"===e,N="editing"===l||"deleting"===o||"active"===o;return a.default.createElement(h.S,null,a.default.createElement(Hn.a,{spacing:"tight"},a.default.createElement(au,{addressType:e,selectedId:c,choices:d,onChange:e=>{const t=d.get(e);t&&(M(),u(t))},onEdit:N?void 0:I,onDelete:N?void 0:x,openAddressDeleteModal:r,addressPrimary:e=>{if(e===So.CompanyLocationShippingAddress)return b?E?.name:y?.company?.name}}),"shipping"===e&&g&&a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(Eh,{showIcon:!0})),T&&a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(vh,{addressType:e,onSave:e=>(M(),m(e)),onAddAction:()=>{if("shipping"===e){const e=(0,wn.tB)({countryCode:s??v?.countryCode,company:A?"":y?.company?.name});k("adding"),P(e)}else t&&t()},showNewAddressButton:d.size<2,modalState:S,setModalState:k,address:w,addressErrorsAtom:wn.mT}))))}var Sh=n(7851);function kh(){const{method:e}=(0,Qt.iz)(),{record:t}=(0,oe.v)(),n=(0,a.useCallback)((e=>t({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:e}})),[t]),r=(0,ra.VH)({shopPay:n});(0,a.useEffect)((()=>{e&&r?.(`delivery_method_${e.toLowerCase()}_selected`)}),[e,r])}function wh(){kh();const e=(0,E.W)()("shipping.title","Delivery"),t=(0,Qt.E1)();return t?a.default.createElement(Sh.R.Provider,{value:!0},a.default.createElement(h.S,{padding:["base","none"]},a.default.createElement(cm.w,{accessibilityLabel:e},a.default.createElement(Hn.a,null,a.default.createElement(jn.E,{appearance:"subdued"},e),t)))):null}var Ph=n(75140);function Ah({titleHidden:e=!1}){const t=(0,E.W)();return a.default.createElement(a.default.Fragment,null,e?null:a.default.createElement(Ha.r,{size:"small",inlineSize:"large"},t("shipping.waiting_on_pickup_location_notice","Getting available pick up locations…")),a.default.createElement(ma.m,{id:"skeleton-loading",title:e?t("shipping.waiting_on_pickup_location_notice","Getting available pick up locations…"):"",titleHidden:e,onChange:()=>{},selectedItems:[],loading:!0},[1,2].map((e=>a.default.createElement(on.c$,{disabled:!0,id:`${e}`,key:e},a.default.createElement(on.xV,null,a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(Ha.r,{inlineSize:"small"}),a.default.createElement(Ha.r,{inlineSize:"base"}))),a.default.createElement(on.PE,null,a.default.createElement(Hn.a,{spacing:"none",inlineAlignment:"end"},a.default.createElement(Ha.r,{inlineSize:"small"}),a.default.createElement(Ha.r,{inlineSize:"base"}))))))))}const Ih={timeout:8e3,enableHighAccuracy:!0};function xh({onSuccess:e,onError:t,options:n=Ih}){const r=(0,E.W)(),{textField:{errorTypographyStyle:l}}=(0,ta.x)(),[o,i]=(0,a.useState)(!1),[s,d]=(0,a.useState)(void 0),c=r("pickup_point.geolocation.shared_location_button","Use my location"),u=r("pickup_point.geolocation.errors.unsuported_by_browser","Getting geolocation is not supported by your browser. Try again or use a different browser."),m=r("pickup_point.geolocation.errors.permission_not_allowed","Allow sharing your location."),p=r("pickup_point.geolocation.errors.permission_denied","Couldn't get your location. Try again."),f=t=>{i(!1),e(t)},h=e=>{i(!1),d(3===e.code?p:m),t?.(e)};return a.default.createElement(a.default.Fragment,null,a.default.createElement(He.$,{inlineSize:"fill",kind:"secondary",onPress:async function(){if(d(void 0),i(!0),navigator.permissions){const e=await navigator.permissions.query({name:"geolocation"});"granted"===e.state||"prompt"===e.state?navigator.geolocation.getCurrentPosition(f,h,n):d(p)}else navigator.geolocation?navigator.geolocation.getCurrentPosition(f,h,n):d(u)},loading:o},a.default.createElement(ht.o,{blockAlignment:"center",spacing:"small400"},a.default.createElement(Le.In,{source:"geolocation"}),a.default.createElement(ln.V,null,c))),s?a.default.createElement("span",{className:_()(l&&ga.A[l])},a.default.createElement(_a.W,null,s)):null)}function Mh({onSearch:e,searchOnSelect:t}){const n=(0,E.W)(),{geolocation:r}=(0,be.u)(),{shippingCountries:l,loading:i}=(0,Pn.UR)(),s=(0,o.QN)(),d=s.read((0,ve.C)().locationAddress).value,c=(0,o.ET)((()=>(0,wn.tB)(d.address1?d:{countryCode:r.country.code}))),u=(0,a.useMemo)((()=>(0,Ht.Bx)({countryCode:void 0,address:void 0})),[]),m=(0,Ie.j8)(c.fields.countryCode,u.countryCode),p=(0,Ie.j8)(c.fields.postalCode,u.address),{details:f,loading:h}=(0,Pn.S0)(m.value),y=(0,a.useMemo)((()=>f??r.country),[f,r.country]),[g]=(0,o.fp)(u.address),_=(0,a.useMemo)((()=>l?.length?l:[{value:y.code,label:y.name}]),[l,y]),b=(0,a.useCallback)((e=>(0,wn.M0)(e,y,["company","firstName","lastName","phone","countryCode","zoneCode"])),[y]),v=y.zones,C=s.read(c).value,[S,k]=(0,a.useState)(b(C)),[w,P]=(0,a.useState)(void 0),A=h||i,I=!!m.value&&(0,qr.TX)(m.value);!function(e,t,n){const a=(0,E.W)(),r=(0,o.QN)(),l=(0,Sn.W)();(0,Ce.D3)((async()=>{const o=r.read(e).value,i=new Map;return n||(0,Ie.CJ)(o.postalCode)?o.coordinates||i.set("address",a("field_errors.address_address1_blank","Enter an address")):i.set("address",a("field_errors.address_zip_blank","Enter a ZIP / postal code")),(0,Ie.CJ)(o.countryCode)||i.set("countryCode",a("field_errors.address_country_blank","Select a country/region")),i.size?(l.leaveBreadcrumb("Blocking address errors",{errors:Array.from(i).map((([,e])=>e))}),{behavior:"block",reason:en.RE.UnknownReason,perform:()=>{for(const[e,n]of i)r.write(t[e],n)}}):{behavior:"allow"}}))}(c,u,I);const x=(0,kn.bt)(c),M=(t=C)=>{t.coordinates?(v.length||(t.zoneCode=void 0),P(""),e(t)):P(n("local_pickup.could_not_resolve_address","Your address couldn't be located. Try again or use a different address"))},T=t?{source:"magnify",position:"end"}:void 0,N=I&&t,L=N?null:a.default.createElement(He.$,{disabled:Boolean(!C.coordinates||!S.length),onPress:M,loading:A},n("local_pickup.search_button","Find stores")),D=N?["fill"]:["fill","auto"];return a.default.createElement(xr.H,null,a.default.createElement(xr.g,null,a.default.createElement(Mr.l,(0,ye.A)({name:"countryCode",label:y.labels.country,options:_,required:!0,autocomplete:{group:"shipping",field:"country"},readonly:A},m,{onChange:e=>{P(""),k(""),x({countryCode:e}),m.onChange(e)}}))),a.default.createElement(ha.Y,{columns:D},I?a.default.createElement($r,{error:g||w,countryCode:y.code,name:"location address",label:n("contact.address1_label","Address"),onSelect:e=>{x(e),k(b(e)),t&&M(e)},value:S,onInput:e=>{C.coordinates?x({countryCode:m.value}):k(e)},field:"address1",icon:T}):a.default.createElement(Br.A_,(0,ye.A)({name:"postalCode",label:y.labels.postalCode,required:!0,autocomplete:{group:"shipping",field:"postal-code"},readonly:A},p,{error:p.error||w,icon:T})),L))}function Th({locationFormVisible:e,toggleLocationFormVisibility:t,children:n,onLocationChange:r}){return(0,Ut.o)()?a.default.createElement(a.default.Fragment,null,n,a.default.createElement(Nh,{open:e,onModalClose:()=>t(!1),onLocationChange:r})):e?a.default.createElement(Lh,{onLocationChange:r}):n}function Nh({open:e,onModalClose:t,onLocationChange:n}){const r=(0,E.W)();return a.default.createElement(Va.a,{padding:!0,title:r("local_pickup.toggle_location","Change my location"),open:e,onClose:t,maxInlineSize:400},a.default.createElement(Lh,{onLocationChange:n,changeLocationOnSelect:!0}),a.default.createElement(h.S,{minBlockSize:y.OF.default(320).when({viewportInlineSize:{min:"small"}},120)}),a.default.createElement(He.$,{onPress:t,inlineSize:"fill",kind:"plain",size:"extraLarge"},r("local_pickup.cancel","Cancel")))}const Lh=({onLocationChange:e,changeLocationOnSelect:t,hideFormOnGeoCoordinatesShare:n})=>{const{geolocation:r}=(0,be.u)(),{locationAddress:l}=(0,ve.C)(),o=(0,kn.bt)(l),i=(0,E.W)(),[s,d]=(0,a.useState)(!0);return a.default.createElement(Hn.a,null,a.default.createElement(xh,{onSuccess:t=>{n&&d(!1),o({zoneCode:r.zone?.code,countryCode:r.country.code,coordinates:{latitude:t.coords.latitude,longitude:t.coords.longitude}}),e(t)}}),s?a.default.createElement(Hn.a,null,a.default.createElement(rn.C,{blockAlignment:"center",columns:["fill","auto","fill"]},a.default.createElement(zs.c,{direction:"inline"}),a.default.createElement(h.S,{padding:["none","base"]},a.default.createElement(jn.E,{appearance:"subdued"},i("local_pickup.or","OR"))),a.default.createElement(zs.c,{direction:"inline"})),a.default.createElement(Mh,{searchOnSelect:t,onSearch:t=>{o(t),e(t)}})):a.default.createElement(He.$,{inlineAlignment:"start",kind:"plain",onPress:()=>d(!0)},i("shipping.local_pickup.search_address","Search for address")))};n(13609);const Dh=5;let Rh=function(e){return e.Kilometers="KILOMETERS",e.Miles="MILES",e}({});function Bh(){const e=(0,E.W)(),t=(0,_e.p8)(),n=e("delivery_options.pick_up_locations","Pickup locations"),r=t&&a.default.createElement(ln.V,null,e("delivery_options.subscription_pickup_information","This delivery method will apply to all items in this order and to all future orders for this subscription."));return a.default.createElement(cm.w,{accessibilityLabel:n},a.default.createElement(Hn.a,null,a.default.createElement(fe.D,{level:2},n),r,a.default.createElement(Fh,null)))}function Fh(){const e=(0,E.W)(),{value:t}=(0,I.FC)(),{negotiating:n}=(0,Qt.iz)(),r=(0,_e.h)(),l=(0,Ut.o)(),i=(0,zr.a)(Vr.$8),s=a.default.createElement(Ah,null),[d,c]=(0,a.useState)(!1),{setFalse:u,toggle:m,value:f}=(0,Ph.e)(!1),{locationAddress:h}=(0,ve.C)(),g=(0,o.md)(h),_=(0,kn.IL)(g)||"",{negotiate:b}=(0,p.T4)(),v=(0,kt.w9)("Checkout::PickupLocations::RenderBefore"),C=(0,kt.w9)("Checkout::PickupLocations::RenderAfter"),S=()=>{c(!0),u(),b(void 0,{include:["deliveryLines"],fieldsToResolve:["deliveryNext"],silenceViolations:["delivery-method"],onComplete:()=>{c(!1)}})};if(n||d)return s;if(r){const{methods:t,type:n}=r,o=a.default.createElement(ln.V,{appearance:"subdued"},e("local_pickup.location_information",{count:t.length,address:g.address1?_:e("local_pickup.your_location","your location")},{one:"There is %{count} store with stock close to %{address}",other:"There are %{count} stores with stock close to %{address}"})),s=null!==t[0]?.pickupLocation?.distanceFromBuyer,d=(l||i)&&s&&t.length>5?a.default.createElement(He.$,{kind:"plain",onPress:m},f?e("local_pickup.cancel","Cancel"):e("local_pickup.toggle_location","Change my location")):null;return a.default.createElement(Hn.a,null,a.default.createElement(Kn.N,{extensions:v,options:{isLocationFormVisible:f}}),(o||d)&&a.default.createElement(Qn.xA,{spacing:y.OF.when({viewportInlineSize:{min:"medium"}},"large500"),columns:y.OF.default(["fill"]).when({viewportInlineSize:{min:"medium"}},["fill","auto"]),inlineAlignment:"start",blockAlignment:"start",rows:"auto"},o,d),a.default.createElement(Th,{locationFormVisible:f,toggleLocationFormVisibility:u,onLocationChange:S},a.default.createElement(Oh,{methods:t,type:n})),a.default.createElement(Kn.N,{extensions:C,options:{isLocationFormVisible:f}}))}return"unavailable"===t?.status&&t?.hasNoDeliveryMethods?a.default.createElement(a.default.Fragment,null,a.default.createElement(an.l,{status:"critical"},e("order_summary.no_pickup_location","Pickup isn't available for this order. Choose another delivery method.")),a.default.createElement(zh,null)):s}function zh(){return(0,p.t8)({active:!0}),null}function Vh({instructions:e}){return a.default.createElement(h.S,{maxInlineSize:200},a.default.createElement(ln.V,{appearance:"subdued",size:"small"},e))}function Oh({methods:e,type:t}){const n=(0,E.W)(),r=(0,b.Y)(),l=(0,$n.a)(),{negotiate:o}=(0,p.T4)(),i=(0,_e.aR)(),s=(0,f.t)({base:!0,medium:!1}),[d,c]=(0,Zt.Mr)(t),{revealedMethods:u,amountLeft:m,allRevealed:y,revealMore:g}=function(e,t){const n=(0,a.useMemo)((()=>{if(e.length<=Dh)return e;const n=e.findIndex((e=>e.handle===t));if(n>=Dh){const t=[...e];return t.splice(n,1),t.unshift(e[n]),t}return e}),[e,t]),r=function(e){const{selectedDeliveryMethodHandle:t,methods:n=[]}=e||{},a=(0,re.g)(),r=(0,C.Fo)(),{id:l}=(0,P.q)(),o=(0,Ut.o)(),i=(0,I.rZ)(),s=e=>e.handle===t,d=n.find(s)?.originLocation?.id,c=n.findIndex(s);return(e="checkout_pickup_change_buyer_location")=>a.record({schemaId:"local_pickup_checkout/3.1",payload:{eventType:e,checkoutToken:r.checkoutSessionIdentifier||"",shopId:parseInt((0,$t.ee)(l),10),locationId:d&&(0,$t.ee)(d),selectedLocationRank:c,userId:i?.id?parseInt((0,$t.ee)(i.id),10):void 0,numberLocationsFound:n.length||0,checkoutSurface:o?"shop_pay":"guest_checkout"}})}({methods:e,selectedDeliveryMethodHandle:t}),[l,o]=(0,a.useState)(Dh),i=(0,a.useMemo)((()=>n.slice(0,l)),[n,l]),s=n.length-i.length,d=i.length>=n.length;return{revealedMethods:i,amountLeft:s,allRevealed:d,revealMore:()=>{d||(o((e=>e+Dh)),r("checkout_pickup_buyer_reveal_more"))}}}(e,d),{setInverseGroupDeliveryMethodHandle:_,getInverseGroupDeliveryMethodHandle:v}=(0,Zt.Sx)(e,t),S=(0,Ut.o)(),k=(0,a.useCallback)((([e])=>{if(c(e),i){const t=v(e);_(t)}o(void 0,{include:["deliveryLines","merchandiseLines"]})}),[c,i,o,v,_]),{optionList:{typographyStyle:w}}=(0,ta.x)(),A=null==w,x=1===u.length,M=(0,kt.w9)("purchase.checkout.pickup-location-option-item.render-after");return a.default.createElement(Hn.a,null,a.default.createElement(cn.Wd,{id:"local_pickup_methods",title:"",titleHidden:!0,selectedItems:d?[d]:[],onChange:k,controlHidden:!S&&1===u.length,hideRadioButton:x},u.map((({handle:e,cost:{amount:t,currencyCode:o},pickupLocation:i})=>{const{address:d,instructions:c,name:u,distanceFromBuyer:m}=i,p=((e,t)=>0===e?n("shipping.free_rate_label","Free"):l(e,{currency:t}))(t,o),f=((e,t)=>{let n=e||"";if(t){const l=`(${function(e,t){const n=t&&(t.unit===Rh.Miles?"mi":"km");return[t&&t.value.toLocaleString(e,{minimumFractionDigits:0,maximumFractionDigits:1}),n].join(" ").trim()}(r,t)})`;n=a.default.createElement(a.default.Fragment,null,e," ",a.default.createElement(jn.E,{appearance:"subdued"},l))}return n})(u,m),h=c&&(S||s),y=c&&!S&&!s;return a.default.createElement(cn.wC,{id:e,key:e,label:u,padding:x?["small100","none","small100","small100"]:void 0},a.default.createElement(on.xV,null,a.default.createElement(ln.V,{style:w},f),a.default.createElement(ln.V,{appearance:"subdued"},a.default.createElement(hh.H,{address:d,textSize:"small",hiddenFields:["postalCode","countryCode","phone"]})),h&&a.default.createElement(Vh,{instructions:c})),a.default.createElement("div",{style:{textAlign:"right"}},a.default.createElement(on.PE,null,a.default.createElement(jn.E,{emphasis:A?"bold":void 0,style:w},a.default.createElement("span",{style:{display:"flex",justifyContent:"flex-end"}},p)),y&&a.default.createElement(Vh,{instructions:c}))),M&&a.default.createElement(on.bc,null,a.default.createElement(Kn.N,{extensions:M,options:{handle:e}})))}))),!y&&a.default.createElement(h.S,{inlineAlignment:"end"},a.default.createElement(He.$,{inlineAlignment:"end",kind:"plain",onPress:g},n("local_pickup.reveal_more_label",{count:m},{one:"Show %{count} more location",other:"Show %{count} more locations"}))))}function Wh(){const e=(0,E.W)(),{value:t,loading:n}=(0,I.FC)(),r=(0,Qp.B)(),l=jp([...(0,kt.w9)("Checkout::PickupLocations::RenderBefore"),...(0,kt.w9)("Checkout::PickupLocations::RenderAfter")]),[o,i]=(0,a.useState)(l);(0,a.useEffect)((()=>{r&&l&&i(!0)}),[l,i,r]);const s=(0,a.useCallback)((()=>i((e=>!e))),[i]);return Boolean("unavailable"===t?.status&&t?.hasNoDeliveryMethods)?a.default.createElement(za.pp,{id:"pickupLocations",label:e("shipping.local_pickup.rollup_title","Pickup location"),summary:a.default.createElement(a.default.Fragment,null,a.default.createElement(he.S,{spacing:"small200"}),a.default.createElement(an.l,{status:"critical"},e("order_summary.no_pickup_location","Pickup isn't available for this order. Choose another delivery method.")))}):a.default.createElement(za.pp,{open:o,id:"pickupLocations",label:e("shipping.local_pickup.rollup_title","Pickup location"),summary:a.default.createElement(qh,{loading:n,deliveryNext:t}),onToggle:s},a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(Fh,null)))}function qh({loading:e,deliveryNext:t}){const n=(0,E.W)(),r=(0,$n.a)(),l=(0,Gp.ck)(t),o=l&&l[0],i=(0,kn.IL)(o?.pickupLocation?.address,{hiddenFields:["postalCode","countryCode","phone"]});if(!o?.pickupLocation)return e?a.default.createElement(Ha.r,null):null;const{pickupLocation:{name:s},cost:{amount:d,currencyCode:c}}=o,u="PickupInStoreLocation"===o?.pickupLocation?.type&&o?.pickupLocation.instructions,m=0===d?n("shipping.free_rate_label","Free"):r(d,{currency:c});let p=`${s}, ${i}`;return u&&(p+=`, ${u}`),m&&(p+=` - ${m}`),a.default.createElement(a.default.Fragment,null,p)}var $h=n(20399);const Uh="pay_now",Hh="pay_on_delivery",jh=()=>{const{optionList:{typographyStyle:e}}=(0,ta.x)(),t=(0,E.W)(),{negotiate:n}=(0,p.T4)(),[r,l]=(0,o.fp)((0,ve.C)().optionalDuties),i=(0,a.useCallback)((()=>{l({buyerRefusesDuties:!r?.buyerRefusesDuties,refuseDutiesPermitted:Boolean(r?.refuseDutiesPermitted)}),n(void 0,{include:["merchandiseLines","deliveryLines","paymentLines"]})}),[l,r,n]);return a.default.createElement(cn.Wd,{id:"duty_options",selectedItems:[r?.buyerRefusesDuties?Hh:Uh],onChange:i},a.default.createElement(cn.wC,{id:Uh,label:""},a.default.createElement(on.xV,null,a.default.createElement(ln.V,{style:e},t("shipping.duties_and_taxes_options.ddp_title","Pay now")),a.default.createElement(ln.V,{appearance:"subdued"},t("shipping.duties_and_taxes_options.ddp_caption","No additional fees on delivery")))),a.default.createElement(cn.wC,{id:Hh,label:""},a.default.createElement(on.xV,null,a.default.createElement(ln.V,{style:e},t("shipping.duties_and_taxes_options.ddu_title","Pay on delivery")),a.default.createElement(ln.V,{appearance:"subdued"},t("shipping.duties_and_taxes_options.ddu_caption","Additional fees may apply")))))},Yh=({buyerRefusesDuties:e})=>{const t=(0,E.W)(),[n,r]=(0,a.useState)(!0),l=e?t("shipping.duties_and_taxes_options.ddu_title","Pay on delivery"):t("shipping.duties_and_taxes_options.ddp_title","Pay now");return a.default.createElement(za.pp,{open:n,id:"optionalDuties",label:t("shipping.duties_and_taxes_title","Duties and taxes"),summary:l,onToggle:()=>r(!n)},a.default.createElement(jh,null))};function Gh(){const{isOrderEditCheckout:e}=(0,cc.S)();return e?a.default.createElement($h.K,null):a.default.createElement(Cn,null,a.default.createElement(Xh,null))}function Xh(){const e=(0,Qt.E1)(),{VaultedDeliveryAddress:t,VaultedShippingMethods:n,VaultedPickupPoint:r}=rr(),[l]=(0,Zt.lr)(Yt.z.OneTimePurchase),o=(0,Zt.dV)(),{value:i}=(0,I.i0)(),s=(0,Kt.x1)(),[d]=(0,Zt.tF)(),c=s||o,u=c?d:l,m=u.includes(Gt.y.Shipping)||u.includes(Gt.y.Local),p=e=>c?d.every((t=>t===e)):l.includes(e),f=[];return e&&f.push(a.default.createElement(wh,null)),m&&(f.push(a.default.createElement(t,null)),f.push(a.default.createElement(n,null))),p(Gt.y.PickUp)&&f.push(a.default.createElement(Wh,null)),p(Gt.y.PickupPoint)&&f.push(a.default.createElement(r,null)),i?.refuseDutiesPermitted&&f.push(a.default.createElement(Yh,{buyerRefusesDuties:i.buyerRefusesDuties})),a.default.createElement(a.default.Fragment,null,f)}function Zh({formattedAddress:e}){const t=(0,E.W)(),n=(0,Ir.N)(),{selectedAddressChoiceId:r}=Io("shipping"),{selectedCompanyLocation:l,locationCount:o}=n??{},i=r===ko("shipping")&&(o||0)>1||!e;return a.default.createElement(Hn.a,{spacing:"none"},i&&a.default.createElement(ln.V,null,l?.name),e?a.default.createElement(ln.V,null,e):a.default.createElement(ln.V,{appearance:"subdued"},t("review.blocks.no_address","(No address)")))}const Qh={source:"businessCustomer",features:{DeliveryAddressEdit:Ch,BillingAddressEdit:function({onAddAction:e,onEditAction:t,onDeleteAction:n,paymentModalState:r,addressDeleteModalState:l}){const{isLoadingSuggestedAddress:o,isValidSuggestedAddress:i}=(0,tn.uW)();return i||o?a.default.createElement(Ch,{addressType:"billing",onAddAction:e,onEditAction:t,onDeleteAction:n,paymentModalState:r,addressDeleteModalState:l}):a.default.createElement(ss,null)},VaultedContact:function({emailAddress:e,label:t}){const n=(0,E.W)(),r=(0,Ir.N)(),{showLogoutLink:l,logoutUrl:o}=(0,si.T4)(),i=(0,Re.P)("draftOrder"),{isOrderEditCheckout:s}=(0,cc.S)(),{currentReturnSection:d}=(0,Xp.H_)(),[c,u]=(0,a.useState)("VaultedContact"===d),m=(0,a.useCallback)((()=>{u((e=>!e))}),[u]),p=r?.company?.name??"",f=l&&!i&&!s&&a.default.createElement(h.S,null,a.default.createElement(J.N,{to:o},n("customer_account.sign_out_link_label","Log out")));return a.default.createElement(za.pp,{id:"contact",label:t,summary:a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(ln.V,null,e),a.default.createElement(ln.V,null,p)),onToggle:s||!f?void 0:m,open:s?void 0:c},a.default.createElement(h.S,null,a.default.createElement(ln.V,null,e),a.default.createElement(ln.V,null,p),f))},VaultedBillingAddress:function({initiallyOpen:e=!1}={}){const t=(0,E.W)(),n=_h(),r=(0,Ir.N)(),{selectedCompanyLocation:l,shippingAddress:o}=r??{},i=l?.name,{currentReturnSection:s}=(0,Xp.H_)(),[d,c]=(0,a.useState)(e||"VaultedBillingAddress"===s),{secondary:u}=(0,kn.Jn)({address:o??{},nameLinePosition:"inline",addressPrimary:i}),m=o?u:t("review.blocks.no_address","(No address)");return a.default.createElement(za.pp,{id:"billingAddress",label:t("company_location.location_title","Location"),open:d,onToggle:()=>{c((e=>!e))},summary:a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(ln.V,null,i),a.default.createElement(ln.V,{appearance:o?void 0:"subdued"},m))},a.default.createElement(cn.Wd,{id:"billingAddressList",selectedItems:["billToAddress"],onChange:()=>{},hideRadioButton:!0},a.default.createElement(cn.wC,{id:"billToAddress",padding:["small100","none","small100","small100"]},a.default.createElement(rn.C,{blockAlignment:"center",columns:["fill","auto"]},a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(rn.C,{columns:["fill","auto"],spacing:"base",blockAlignment:"start"},a.default.createElement(Hn.a,{inlineAlignment:"start",spacing:"none"},a.default.createElement(ln.V,null,i),a.default.createElement(ln.V,{appearance:"subdued"},m))))))),n&&a.default.createElement(h.S,{padding:["tight","small100","none","small100"]},a.default.createElement(Eh,{showIcon:!0})))},VaultedDelivery:function(){const e=(0,E.W)(),t=(0,_e.tu)(),n=(0,gh.q)(),r=(0,Ir.N)(),l=_h(),o="inactive"!==n,[i,s]=(0,a.useState)(!1),{selectedCompanyLocation:d}=r??{};return t&&!o?a.default.createElement(h.S,null,a.default.createElement(za.pp,{id:"shipping",label:e("shipping.shipping_address_title","Ship to"),open:i,onToggle:e=>{s(!e)},summary:a.default.createElement(Zh,null)},a.default.createElement(cn.Wd,{id:"no_address_list",selectedItems:["no_address"],onChange:()=>{},hideRadioButton:!0},a.default.createElement(cn.wC,{id:"no_address",padding:["small100","none","small100","small100"]},a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(ln.V,null,d?.name),a.default.createElement(ln.V,{appearance:"subdued"},e("review.blocks.no_address","(No address)"))))),l&&a.default.createElement(h.S,{padding:["tight","small100","none","small100"]},a.default.createElement(Eh,{showIcon:!0})))):a.default.createElement(Gh,null)},PurchaseOrderNumberField:function({showHeading:e=!0}){const t=(0,E.W)(),{purchaseOrderNumber:n}=(0,ve.C)(),[r,l]=(0,o.fp)(n),i=t("payment.purchase_order_number.title","PO number");return a.default.createElement(Hn.a,{spacing:"small200"},e&&a.default.createElement(fe.D,null,i),a.default.createElement(Br.A_,{name:"poNumber",label:t("payment.purchase_order_number.label","PO number (optional)"),value:r,onChange:l,prefix:"#",autocomplete:!1,maxLength:50}))},NoticeBanners:ph.c,BillingAddressSelector:function(){const e=(0,E.W)(),{value:t}=(0,I.FC)(),n=(0,dn.w1)(t),r=(0,tn.ro)(),{isOrderEditCheckout:l}=(0,cc.S)(),i=(0,o.QN)(),{billingAddress:s,shippingAddress:d}=(0,ve.C)(),c=(0,o.md)(d),u=(0,fh.FX)(),m=(0,fh.U8)(),p=(0,vt.Bl)(),f=m.length>0&&m[0].deliveryAddress?m[0].deliveryAddress:c,h=(0,Ir.N)(),[y,g]=(0,o.fp)((0,ve.C)().billingAddressOption),_=(0,a.useMemo)((()=>({firstName:void 0,lastName:void 0,address1:void 0,address2:void 0,company:void 0,city:void 0,postalCode:void 0,phone:void 0,zoneCode:void 0,name:void 0,countryCode:i.read(s.fields.countryCode).value})),[s.fields.countryCode,i]),b=(0,a.useMemo)((()=>i.read(d.fields.countryCode).value),[d.fields.countryCode,i]),[v,C]=(0,a.useState)(i.read(s).revision),S=(0,a.useCallback)((([e])=>{g(e),l?"custom"===e?i.write(s,_):"shipping"===e?i.write(s,f):"billing-fact"===e&&u&&i.write(s,u):"custom"===e&&h?i.write(s,(0,Co.wI)({countryCode:b})):"custom"===e&&i.write(s.fields.countryCode,b)}),[g,l,h,u,i,s,_,f,b]),k=e("payment.billing_address_title","Billing address");return(0,tn.BY)(),(0,tn.Vr)(),(0,tn.qw)("billing"),v===i.read(s).revision&&l&&("form"===r?i.write(s,_):"shipping"===y?i.write(s,f):"billing-fact"===y&&u&&i.write(s,u),C(i.read(s).revision)),a.default.createElement(cm.w,{accessibilityLabel:k},a.default.createElement(Hn.a,null,p?null:a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(fe.D,null,k),a.default.createElement(ln.V,{appearance:"subdued"},n?e("payment.billing_address_description_no_shipping_address","Enter the address that matches your card or payment method."):e("payment.billing_address_description","Select the address that matches your card or payment method."))),"form"===r?a.default.createElement(ss,null):a.default.createElement(ma.m,{id:"billing_address_selector",selectedItems:[y],onChange:S,title:e("general.choose_billing_address","Choose a billing address"),titleHidden:!0},h?a.default.createElement(yh,null):a.default.createElement(on.c$,{id:"shipping",label:e("payment.same_billing_address_label","Same as shipping address")}),a.default.createElement(on.c$,{id:"custom",label:e("payment.different_billing_address_label","Use a different billing address"),details:a.default.createElement(pa.g,{controlledBy:"custom"},a.default.createElement(ss,null))}))))}}};var Jh=n(51923);const Kh=({creditCard:e,showAddress:t=!1,actions:n})=>{const r=(0,E.W)(),l=(0,kn.IL)(e.billingAddress,{hiddenFields:["firstName","lastName","phone","company"],countryFormat:"explicit"}),o=(0,fd.r$)(e.cardType),i=e.lastFourDigits?.match(/\d{4}/)?.[0],s=`···· ${i}`,d=` ${r("payment.ends_with_label",{last_digits:String(i)},"ending with %{last_digits}")}`;return a.default.createElement(rn.C,{columns:["fill",...n?["auto"]:[]],spacing:"small200",blockAlignment:"start"},a.default.createElement(Hn.a,{inlineAlignment:"start",spacing:"none"},a.default.createElement(ht.o,{spacing:"small200"},a.default.createElement(fi.k,{name:e.cardType}),a.default.createElement(ht.o,{spacing:"extraTight"},a.default.createElement(jn.E,null,o),a.default.createElement(jn.E,{visibility:"hidden"},d),a.default.createElement(jn.E,{accessibilityVisibility:"hidden"},s))),t?a.default.createElement(ln.V,{appearance:"subdued",size:"small"},l):null),n)},ey="creditCardSelector--",ty=({selectedId:e="",onChange:t,creditCards:n})=>{const r=ny(e),[l,o]=(0,a.useState)(!1),i=(0,a.useCallback)((async e=>{o(!0);const n=function(e){return e?e.replace(ey,""):e}(e);await t(n),o(!1)}),[t]);return a.default.createElement(Pu.s,{name:"CreditCardPaymentSelector",value:r,onChange:i},a.default.createElement(Hn.a,null,n?.map((t=>a.default.createElement(rn.C,{key:t.referenceId,blockAlignment:"center",columns:["fill","auto"]},a.default.createElement(ku.G,{key:t.referenceId,id:ny(t.referenceId)},a.default.createElement(rn.C,{columns:["fill","auto"]},a.default.createElement(Kh,{creditCard:t,showAddress:!0}),e===t.referenceId&&a.default.createElement(sr.R,{size:"small",active:l}))))))))};function ny(e){return`${ey}${e}`}var ay=n(72608),ry=n(84979);function ly({children:e,id:t,label:n,selected:r,opened:l=!1}){const[o,i]=(0,a.useState)(!1);(0,a.useEffect)((()=>{i(l)}),[l]);const s=(0,a.useCallback)((()=>{i(!o)}),[o,i]),d=a.default.createElement(He.$,{id:t,onPress:s,kind:"plain"},a.default.createElement(Le.In,{source:o?"chevronUp":"chevronDown",size:"extraSmall",appearance:"monochrome"})),c=e?a.default.createElement(Ne.o,{onPress:s},r):r;return a.default.createElement(a.default.Fragment,null,a.default.createElement(_p.a,{noWrap:!0,label:n,action:e?d:void 0},!o&&c),e&&a.default.createElement(yt.e,{open:o,id:t},a.default.createElement(h.S,{padding:["none","none","small200","none"]},e)))}const oy=({id:e,label:t,onCreateAddressPress:n,allowEmpty:r,onAddressSelected:l})=>{const i=(0,E.W)(),[s,d]=(0,o.fp)(Jh.U.addedBillingAddress),c=(0,o.md)(Jh.U.addresses),u=(0,o.md)(Jh.U.creditCards),m=(0,a.useMemo)((()=>{const e=u?.map((e=>e.billingAddress)),t=[...e,...c].reduce(dy,[]);return new Map(t.map(sy))}),[u,c]),p=(0,a.useCallback)((e=>{const t=m.get(e)||null;g(t),l(t),d(void 0)}),[m,l,d]),f=(0,a.useCallback)((()=>{const e=Array.from(m.values())[0]??null;return l&&l(e),e}),[m,l]),[y,g]=(0,a.useState)(f);return(0,a.useEffect)((()=>{s&&s.referenceId!==y?.referenceId&&(g(s),l(s))}),[s,y,g,l]),a.default.createElement(ly,{id:e,selected:a.default.createElement(iy,{addreess:y,showEmpty:r}),label:t,opened:!y&&r},a.default.createElement(au,{id:e,addressType:"billing",choices:m,selectedId:y?.referenceId,onChange:p,isExternalVault:!0}),a.default.createElement(h.S,{padding:["small200","small200"]},a.default.createElement(He.$,{inlineAlignment:"start",onPress:n,kind:"plain"},a.default.createElement(ht.o,null,a.default.createElement(Le.In,{source:"plus",size:"base",appearance:"monochrome"}),a.default.createElement(jn.E,null,i("checkout_sdk.address_form.add_address","Use a different address"))))))},iy=({addreess:e,showEmpty:t=!1})=>{const n=(0,E.W)();return e?a.default.createElement(Jc,{address:{address1:e.address1,address2:e.address2,city:e.city,countryCode:e.countryCode,firstName:e.firstName,lastName:e.lastName,name:e.name,phone:e.phone,postalCode:e.postalCode,zoneCode:e.zoneCode},nameLinePosition:"block"}):t?a.default.createElement(ln.V,{appearance:"subdued"},n("checkout_sdk.address_form.add","Add address")):a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(Ha.r,null),a.default.createElement(Ha.r,{size:"small"}))};function sy(e){const t=e.referenceId?.startsWith("tmp")?e.referenceId:`tmp://${(0,M.u)()}`;return[t,{referenceId:t,address1:e.address1,address2:e.address2,city:e.city,countryCode:e.countryCode,firstName:e.firstName,lastName:e.lastName,name:e.name,phone:e.phone,postalCode:e.postalCode,zoneCode:e.zoneCode}]}function dy(e,t){return e.find((e=>{return a=t,(n=e).address1===a.address1&&n.address2===a.address2&&n.city===a.city&&n.countryCode===a.countryCode&&n.firstName===a.firstName&&n.lastName===a.lastName&&n.name===a.name&&n.phone===a.phone&&n.postalCode===a.postalCode&&n.zoneCode===a.zoneCode;var n,a}))||e.push(t),e}function cy({onClose:e,onCreateAddress:t}){const n=(0,E.W)(),{sdk:r,validate:l,errors:i}=(0,mi.Z)(),s=(0,I.mu)(),[d,c]=(0,a.useState)(!1),[u,m]=(0,o.fp)(Jh.U.creditCards),[,f]=(0,o.fp)(Jh.U.selectedCreditCard),y=(0,o.QN)(),g=(0,ve.C)(),[_,b]=(0,a.useState)(!1),[v,C]=(0,a.useState)(null),{negotiate:S}=(0,p.T4)(),k=(0,a.useCallback)((async e=>{const t=(0,ay.Rs)(g,y),n=v;y.write(g.paymentLines,(n=>(0,uo.mD)(n,(0,ay.oC)(e,t,!1)))),y.write(g.billingAddress,n)}),[g,y,v]),w=(0,a.useCallback)((async e=>{const t=[...u],n=e.negotiated.paymentLines?.lines[0].method,a={referenceId:`tmp://${(0,M.u)()}`,cardType:n.brand,lastFourDigits:n.creditCardLastFourDigits,expirationMonth:"",expirationYear:"",billingAddress:(0,ry.ko)(v)};t.push(a),f(a),m(t)}),[u,m,f,v]),P=(0,a.useCallback)((async()=>{await S(void 0,{silenceValidations:!0,fieldsToResolve:["paymentLines"],onSuccess:t=>{w(t),e()},onError:()=>{b(!0),c(!1)}})}),[S,e,w]),A=(0,a.useCallback)((async()=>{b(!1);const{isValid:e}=l();if(e&&v){c(!0);try{const e=await r.vaultCard();if(!e)return void b(!0);k(e),P()}catch(t){c(!1),r.setErrors(t.message)}}}),[l,r,k,P,v]),x=(0,a.useMemo)((()=>(s.value??[]).filter((e=>"direct"===e.type))),[s]).flatMap((e=>e.paymentBrands));return a.default.createElement(fa.l,{onSubmit:A},_&&a.default.createElement(a.default.Fragment,null,a.default.createElement(an.l,{status:"critical"},n("shop_pay.credit_card_form.generic_card_error","There was an error adding this card")),a.default.createElement(he.S,{spacing:"base"})),a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(Hn.a,null,i.sdk&&a.default.createElement(Si,null),a.default.createElement(ls,{cardBrands:x,prefillCardholderName:!0})),!i?.sdk&&a.default.createElement(h.S,{border:"base",cornerRadius:"base"},a.default.createElement(oy,{id:"billing_address_credit_card",label:n("checkout_sdk.checkout.bill_to","Bill to"),onCreateAddressPress:t,allowEmpty:!0,onAddressSelected:C})),a.default.createElement(Hn.a,{spacing:"large200"},!i?.sdk&&a.default.createElement(He.$,{loading:d,accessibilityRole:"submit"},n("checkout_sdk.credit_card_form.save","Save")),e&&a.default.createElement(He.$,{kind:"plain",inlineSize:"fill",onPress:e},n("checkout_sdk.credit_card_form.cancel","Cancel")))))}function uy(){const e=(0,E.W)(),[t,n]=(0,a.useState)("idle");return a.default.createElement(Hn.a,{spacing:"base"},a.default.createElement(h.S,null,a.default.createElement(He.$,{kind:"plain",inlineAlignment:"start",onPress:()=>{n("card")}},a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},a.default.createElement(Le.In,{source:"plus",size:"base",appearance:"monochrome"}),a.default.createElement(jn.E,null,e("payment.use_different_credit_card_label","Use a different card"))))),a.default.createElement(my,{modalStatus:t,setModalStatus:n}))}const my=({modalStatus:e,setModalStatus:t})=>{const n=(0,E.W)(),[r,l]=(0,o.fp)(Jh.U.addresses),[,i]=(0,o.fp)(Jh.U.addedBillingAddress),s=(0,o.md)(Jh.U.addresses)[0]??{},{name:d,firstName:c,lastName:u,phone:m,countryCode:p,zoneCode:f}=s,h={name:d,firstName:c,lastName:u,phone:m,countryCode:p,zoneCode:f},y=(0,wn.tB)(h),g=(0,o.QN)(),_=(0,a.useCallback)((()=>{t("card")}),[t]),b=(0,a.useCallback)((()=>{t("idle")}),[t]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(Ts.x,{open:"idle"!==e,title:"billingAddress"===e?n("checkout_sdk.address_form.add","Add address"):n("checkout_sdk.credit_card_form.add_new_card","Add card"),onClose:b},a.default.createElement("div",{style:{display:"billingAddress"===e?"none":"block"}},a.default.createElement(cy,{onCreateAddress:()=>{g.write(y,h),t("billingAddress")},onClose:b}),a.default.createElement(he.S,null)),"billingAddress"===e&&a.default.createElement(Is,{addressType:"billing",onCancel:_,onSuccess:_,onSave:async e=>{const t=[...r];return e.referenceId=`tmp://${(0,M.u)()}`,t.push(e),l(t),i(e),!0},editableAddress:y,cancelText:n("checkout_sdk.credit_card_form.go_back","Go back"),saveText:n("checkout_sdk.address_form.save_billing_address","Save billing address")})))};function py(){const e=go(),[t,n]=(0,o.fp)((0,ve.C)().billingAddress),r=(0,o.md)(Jh.U.creditCards),[l,i]=(0,o.fp)(Jh.U.selectedCreditCard),{hostedFieldsUrl:s}=(0,P.q)(),d=(0,Sn.W)(),{negotiate:c}=(0,p.T4)();return a.default.createElement(oo.VV,{hostedFieldsUrl:s,onError:d.notify,onSetFieldErrors:e},a.default.createElement(Hn.a,null,a.default.createElement(ty,{selectedId:l?.referenceId,creditCards:r,onChange:async function(e){const t=r.find((t=>t.referenceId===e));if(t?.billingAddress){const e={name:(a=t.billingAddress).name,firstName:a.firstName,lastName:a.lastName,address1:a.address1,address2:a.address2,city:a.city,zoneCode:a.zoneCode,postalCode:a.postalCode,phone:a.phone,countryCode:a.countryCode?a.countryCode:void 0,coordinates:void 0,company:void 0};n(e)}else n({name:void 0,firstName:void 0,lastName:void 0,address1:void 0,address2:void 0,city:void 0,zoneCode:void 0,postalCode:void 0,phone:void 0,coordinates:void 0,company:void 0,countryCode:void 0});var a;i(t),await c(void 0,{include:["billingAddress"],fieldsToResolve:["billingAddress","paymentMethods"],silenceViolations:["non-stock"]})}}),a.default.createElement(uy,null)))}Error;var fy=n(61022),hy=n(58389);function yy(){const[e,t]=(0,fy.yR)(hy.Z.LastSeenErrorReceiptId),[n,r]=(0,a.useState)(!1),l=(0,Pc.IX)();return(0,a.useEffect)((()=>{if("failed"===l?.status&&e===l.id)return r(!0);"failed"===l?.status&&e!==l.id&&t(l.id),"failed"!==l?.status&&t(void 0)}),[l?.id,l?.status]),n}const gy={name:void 0,firstName:void 0,lastName:void 0,coordinates:void 0,company:void 0,address1:void 0,address2:void 0,city:void 0,postalCode:void 0,phone:void 0,zoneCode:void 0},_y={source:"externalVault",features:{PaymentMethodSelector:py,VaultedContact:({label:e,emailAddress:t})=>a.default.createElement(za.pp,{id:"contact",open:!1,label:e,summary:t},a.default.createElement(jn.E,null,t)),VaultedPayment:function(){const e=(0,E.W)(),t=(0,o.md)(Jh.U.selectedCreditCard),{isValid:n}=function(){const{hasViolations:e}=(0,bl.l6)(new Set([...wl.MS,...wl.K9])),{hasError:t}=(0,bl.dA)(El.x9),n=yy();return{isValid:Boolean(!e&&(!t||t&&n))}}(),[r,l]=(0,a.useState)(!t),i=t?a.default.createElement(Kh,{creditCard:t}):null,s=(0,a.useCallback)((()=>{l((e=>!e))}),[l]),d=!n&&a.default.createElement(an.l,{status:"critical"},e("payment.generic_incorrect_card_info","Your payment details couldn’t be verified. Check your card details and try again."));return a.default.createElement(za.pp,{id:"payment",open:r,onToggle:s,label:e("payment.payment_method","Payment method"),summary:i,error:d},a.default.createElement(py,null))},DeliveryAddressEdit:({addressType:e="shipping",id:t})=>{const n=t||`${e}_address`,[r,l]=(0,o.fp)(Jh.U.addresses),[,i]=(0,o.fp)((0,ve.C)().shippingAddress),[s,d]=(0,o.fp)(Jh.U.selectedAddress),[c,u]=(0,o.fp)(Cl.addressModalState),{negotiate:m}=(0,p.T4)(),[f,y]=(0,o.fp)(Jh.n.selectedShippingAddressRef),g=(0,a.useRef)(!1);(0,a.useEffect)((()=>{!s||f||g.current||(g.current=!0,y(s.referenceId))}),[s,f,y]);const _=(0,a.useMemo)((()=>new Map(r.map((e=>[String(e.referenceId),{referenceId:e.referenceId,address1:e.address1,address2:e.address2,city:e.city,countryCode:e.countryCode,firstName:e.firstName,lastName:e.lastName,name:e.name,phone:e.phone,postalCode:e.postalCode,zoneCode:e.zoneCode}])))),[r]),E=(0,a.useCallback)((async()=>{const t="shipping"===e?"shippingAddress":"billingAddress";await m(void 0,{include:[t],fieldsToResolve:[t]})}),[m,e]);return a.default.createElement(Hn.a,null,a.default.createElement(au,{id:n,addressType:e,selectedId:f,onChange:e=>{const t=_.get(e);t&&(y(t.referenceId),d((0,ry.ko)(t)),i(t))},onEdit:()=>{u({status:"editing",address:(0,wn.tB)(_.get(f))})},choices:_,isExternalVault:!0}),a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(fp,{addressType:e,onAddAction:()=>{const{name:e,firstName:t,lastName:n,countryCode:a,zoneCode:l}=r[r.length-1];u({status:"adding",address:(0,wn.tB)({...gy,name:e,firstName:t,lastName:n,zoneCode:l,countryCode:a})})},onSave:async e=>{let t=[...r];return"editing"===c.status&&f&&(e.referenceId=f,t=r.map((t=>t.referenceId===e.referenceId?e:t))),"adding"===c.status&&(e.referenceId=`tmp://${(0,M.u)()}`,t.push(e)),y(e.referenceId),d((0,ry.ko)(e)),i(e),l(t),E(),!0},combineViolationAndValidationErrors:!1})))},MarketingDisclosure:vc}};var Ey=n(56701);const by={source:Ey.B,features:{GiftCardRedemption:_m}},vy=(0,Ge.m)({load:()=>(0,Xe.P)((()=>n.e(615).then(n.bind(n,65118)))),id:()=>65118});function Cy(){const e=(0,E.W)(),{showLoginLink:t,loginUrl:n}=(0,si.T4)(),r=(0,Re.P)("simulated");return t?a.default.createElement(jn.E,{appearance:"subdued"},e("customer_account.have_an_account_label","Have an account?")," ",a.default.createElement(J.N,{to:r?void 0:n},e("customer_account.sign_in_link_label","Log in"))):null}function Sy(){const e=(0,E.W)(),t=(0,ve.C)(),[n]=(0,o.fp)(t.shippingAddress),{hasViolations:r}=(0,bl.Ck)(El.b2),{hasViolations:l}=(0,bl.Ck)(El.Tg),{hasViolations:i}=(0,bl.Ck)(El.WX),[,s]=(0,o.fp)(Cl.addressModalState),d=(0,a.useCallback)((()=>{s({status:"editing",address:(0,wn.tB)(n)})}),[n,s]);let c;return r?c=e("customer_account.incomplete_address",{update_address_link:a.default.createElement(J.N,{appearance:"monochrome",onPress:d},e("shipping.address_update","Update address"))},"Selected address is incomplete. %{update_address_link} or select a different address."):l?c=e("customer_account.invalid_address",{update_address_link:a.default.createElement(J.N,{appearance:"monochrome",onPress:d},e("shipping.address_update","Update address"))},"Selected address is invalid. %{update_address_link} or select a different address."):i&&(c=e("shipping_errors.shipping_method_not_available_generic.one","Your order cannot be shipped to the selected address. Review your address to ensure it's correct and try again, or select a different address.")),a.default.createElement(vl,{message:c})}var ky=n(19084),wy=n(53898);function Py(){const e=(0,E.W)(),t=(0,ve.C)(),[n]=(0,o.fp)(t.shippingAddress),{hasViolations:r}=(0,bl.Ck)(El.b2),{hasViolations:l}=(0,bl.Ck)(El.Tg),{hasViolations:i}=(0,bl.Ck)(El.WX),[s,d]=(0,o.fp)(Cl.addressModalState),c=(0,a.useCallback)((()=>{d({status:"editing",address:(0,wn.tB)(n)})}),[n,d]);let u;return r?u=e("customer_account.incomplete_address",{update_address_link:a.default.createElement(J.N,{appearance:"monochrome",onPress:c},e("shipping.address_update","Update address"))},"Selected address is incomplete. %{update_address_link} or select a different address."):l?u=e("customer_account.invalid_address",{update_address_link:a.default.createElement(J.N,{appearance:"monochrome",onPress:c},e("shipping.address_update","Update address"))},"Selected address is invalid. %{update_address_link} or select a different address."):i&&(u=e("shipping_errors.shipping_method_not_available_generic.one","Your order cannot be shipped to the selected address. Review your address to ensure it's correct and try again, or select a different address.")),a.default.createElement(vl,{message:u})}var Ay=n(24690);const Iy=new Map([[Ay.y.InsufficientFunds,"insufficient_funds"],[Ay.y.InvalidPaymentMethod,"cannot_verify"],[Ay.y.FundingError,"processing_error"],[Ay.y.CanceledPaypalBillingAgreement,"processing_error"],[Ay.y.TokenExpired,"processing_error"],[Ay.y.InvalidToken,"processing_error"],[Ay.y.UnilateralAuthError,"processing_error"],[Ay.y.ThirdPartyInternalError,"processing_error"],[Ay.y.AuthorizationError,"processing_error"],[Ay.y.InvalidCurrency,"processing_error"],[Ay.y.InvalidItemTotal,"processing_error"],[Ay.y.UnprocessableTransaction,"processing_error"],[Ay.y.InvoiceAlreadyPaid,"processing_error"],[Ay.y.IncorrectNumber,"cannot_verify"],[Ay.y.IncorrectCvc,"cannot_verify"],[Ay.y.IncorrectZip,"cannot_verify"],[Ay.y.IncorrectAddress,"cannot_verify"],[Ay.y.IncorrectPin,"cannot_verify"],[Ay.y.AuthenticationError,"three_d_secure_failed"],[Ay.y.InvalidNumber,"invalid_number"],[Ay.y.InvalidExpiryDate,"invalid_expiry_date"],[Ay.y.InvalidCvc,"invalid_cvc"],[Ay.y.ExpiredCard,"expired_card"],[Ay.y.CardDeclined,"card_declined"],[Ay.y.CallIssuer,"call_issuer"],[Ay.y.PickUpCard,"pick_up_card"],[Ay.y.TestModeLiveCard,"test_mode_live_card"],[Ay.y.TransientError,"transient_error"],[Ay.y.InvalidShippingAddress,"invalid_shipping_address"],[Ay.y.MissingShippingAddress,"missing_shipping_address"],[Ay.y.PublicPaymentError,"generic_error"],[Ay.y.SuccessfulOffsiteWithGiftCardError,"successful_offsite_with_gift_card_error"]]);function xy(e){const t=(0,E.W)();let n="generic_error";return e&&(n=Iy.get(e.code)||"generic_error"),t("payment_errors",{scope:n},{amount_too_small:"The minimum payment amount must be higher than $0.50 USD. Please try again with a higher amount.",available_methods_updated:"Available payment methods have been updated.",call_issuer:"Your card was declined. Use a different payment method or contact your bank for more information.",cannot_verify:"Your payment details couldn’t be verified. Check your card details and try again.",card_declined:"Your card was declined. Try again or use a different payment method.",checkout_amount_changed:"Your payment couldn't be processed because the amount due at checkout has changed. Please check your order and try again.",credit_card_processing:"Your payment can’t be processed for technical reasons. Try again in a few minutes or use a different payment method.",decision_rule_block:"There was an issue processing your payment. Please contact the store owner.",deferred_amount_changed:"Your payment couldn't be processed because the deferred payment amount has changed. Please check your order and try again.",deferred_date_changed:"Your payment couldn't be processed because the deferred payment date has changed. Please check your order and try again.",deferred_payment_not_allowed:"Deferred payments are not allowed. Please check your order and try again.",deferred_payment_required:"This order requires a deferred payment. Please check your order and try again.",development_store_order_limit_reached:"You’ve reached the limit for development store orders with this payment processor. To place another order, you’ll need to use a test payment gateway. Learn more about %{development_store_order_testing_docs_link}.",development_store_order_testing_docs_link:"testing orders in development stores",development_store_with_order_limit:"To place a test order, you’ll need to use a test payment gateway. Learn more about %{development_store_order_testing_docs_link}.",expired_card:"Your card has expired. Use a different payment method.",generic_error:"There was an issue processing your payment. Try again or use a different payment method.",insufficient_funds:"Your payment was declined due to insufficient funds. Try again or use a different payment method.",invalid_cvc:"Enter a valid security code",invalid_expiry_date:"Enter a valid expiration date",invalid_number:"Enter a valid card number",invalid_shipping_address:"Your payment couldn’t be processed because we couldn’t find your shipping address. Check your shipping address and try again.",method_not_available:"The requested payment method is not available.",missing_shipping_address:"Your payment couldn’t be processed because your shipping address is missing. Add a shipping address and try again.",multiple_deferred_payment_not_allowed:"Only one deferred payment allowed per request. Please check your request and try again.",order_total_changed:"Your payment couldn’t be processed because your order total has changed. Check your order total and try again.",pay_later_failed:"There was an error processing your payment with Pay later. Choose another payment method and try again.",payment_method_billing_address:"There was an issue with your selected payment method's billing address and you haven't been charged. Check the address and try again or use a different payment method.",payment_processing:"Your payment can’t be processed for technical reasons. Try again or use a different payment method.",payment_processing_no_retry:"Your payment can’t be processed for technical reasons. Please try a different payment method.",paypal_invalid_token:"PayPal wasn't available. Try again or use a different checkout option.",paypal_zero_amount:"You can’t use PayPal for %{amount} orders. Confirm your order is correct and check out without PayPal.",pick_up_card:"Your card was declined. Try again or use a different payment method.",processing_error:"There was an issue processing your payment. Try again or use a different payment method.",processing_error_checkout_as_guest:"There was an issue processing your payment. Try again with a different payment method or {{checkout_as_guest_link}}.",rejected_transaction:"Your payment was declined. Try again or use a different payment method.",selected_payment_method:"There was an issue with your selected payment method and you haven't been charged. Try again or use a different payment method.",shipping_must_match_billing:"Billing address must match shipping address. Please use a different payment method.",subscription_agreement_blank:"To buy a subscription your payment details need to be saved. To continue, confirm that you agree or remove subscription items from you order.",successful_offsite_with_gift_card_error:"There was an issue processing your gift card payment. Try again or use a different payment method.",test_mode_live_card:"This store can’t accept real orders or real payments.",three_d_secure_failed:"Your payment couldn’t be verified. Try again or use a different payment method.",three_d_secure_failed_duplicate:"The credit card's 3D Secure authentication failed because another is already in progress.",three_d_secure_throttled:"Too many attempts; please wait before trying again",transient_error:"There was a problem processing your payment. Try refreshing this page or check your internet connection."})}const My=new Set([...El.Tg,...El.WX,...El.I0,...wl.aQ]);function Ty({text:e}){return a.default.createElement(Yo,null,a.default.createElement(h.S,{inlineAlignment:"center"},a.default.createElement(Te.y,{size:"large"}),a.default.createElement(he.S,{spacing:"small400"}),a.default.createElement(ln.V,null,e)))}var Ny=n(61174);const Ly=(0,Fd.W)("AutocompleteSingleAddressField");function Dy({address:e,onInput:t,onSelect:n,value:r,country:l,hiddenFields:o=["firstName","lastName","company","zoneCode","countryCode","phone"],...i}){const{value:s,setValue:d}=(0,Ny.m)({addressType:i.addressType,countryCode:l.code,initialAddressQuery:e.coordinates?(0,wn.M0)(e,l,o):r});return a.default.createElement($r,(0,ye.A)({id:(0,zd.B)(void 0,Ly),onSelect:function(e){d((0,wn.M0)(e,l,o)),n&&n(e)},value:s,countryCode:l.code},i))}function Ry({onSearch:e,loading:t,addressAutoFocus:n}){const r=(0,E.W)(),{geolocation:l}=(0,be.u)(),{shippingCountries:i,loading:s}=(0,Pn.UR)(),{locationAddress:d}=(0,ve.C)(),c=(0,o.QN)(),u=(0,a.useMemo)((()=>(0,Ht.Bx)({countryCode:void 0,address:void 0})),[]),m=(0,Ie.j8)(d.fields.countryCode,u.countryCode),{details:p,loading:f}=(0,Pn.S0)(m.value),h=(0,a.useMemo)((()=>p??l.country),[p,l.country]),[y]=(0,o.fp)(u.address),g=(0,a.useMemo)((()=>i?.length?i:[{value:h.code,label:h.name}]),[i,h]),b=f||s||t,v="location address",C=r("pickup_point.search_button","Search"),S=r("contact.address1_label","Address"),k=(0,a.useCallback)((e=>(0,wn.M0)(e,h,["company","firstName","lastName","phone","countryCode","zoneCode"])),[h]),w=c.read(d).value,[P,A]=(0,a.useState)(k(w)),I=(0,kn.bt)(d);!function(e,t){const n=(0,E.W)(),a=(0,o.QN)(),r=(0,Sn.W)();(0,Ce.D3)((async()=>{const l=a.read(e).value,o=new Map;return l.coordinates||o.set("address",n("field_errors.address_address1_blank","Enter an address")),(0,Ie.CJ)(l.countryCode)||o.set("countryCode",n("field_errors.address_country_blank","Select a country/region")),o.size?(r.leaveBreadcrumb("Blocking address errors",{errors:Array.from(o).map((([,e])=>e))}),{behavior:"block",reason:en.RE.UnknownReason,perform:()=>{for(const[e,n]of o)a.write(t[e],n)}}):{behavior:"allow"}}))}(d,u);const x=h.zones,{textField:{errorTypographyStyle:M}}=(0,ta.x)();return a.default.createElement(xr.H,null,a.default.createElement(xr.g,null,a.default.createElement(Mr.l,(0,ye.A)({name:"countryCode",label:h.labels.country,options:g,required:!0,autocomplete:{group:"shipping",field:"country"},readonly:t},m,{onChange:e=>{A(""),I({countryCode:e})}}))),a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(ha.Y,{columns:["fill","auto"]},a.default.createElement(Dy,{autoFocus:n,address:w,error:Boolean(y),country:h,name:v,label:S,onSelect:e=>{I(e),A(k(e))},value:P,onInput:()=>{w.coordinates&&I(w)},onChange:e=>A(e),field:"address1",allowAllCountries:!0}),a.default.createElement(He.$,{disabled:Boolean(!w.coordinates||!P),onPress:()=>{x.length||(w.zoneCode=void 0),e(w)},loading:b},C)),y&&a.default.createElement("span",{className:_()(M&&ga.A[M])},a.default.createElement(_a.W,{controlID:v},y))))}var By=n(24258),Fy=n(96088);const zy=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#737373"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#f0f0f0"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#e6e6e6"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#d0ecd3"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{saturation:-100}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{saturation:-100}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{saturation:-100}]},{featureType:"transit",elementType:"labels.icon",stylers:[{saturation:-100},{lightness:15}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#d1e6f5"}]}];var Vy=n(68355),Oy=n(80934);const Wy=n.p+"c0b02582b5a271ce4f3e.svg",qy=n.p+"e4c6bb76317665f6a78e.svg",$y={PickupPointMap:"YG_zD"};var Uy=function(e){return e[e.ActiveMarker=1001]="ActiveMarker",e[e.BuyerMarker=1e3]="BuyerMarker",e[e.InactiveMarker=0]="InactiveMarker",e}(Uy||{});const Hy=[{horizontal:15,vertical:0},{horizontal:-15,vertical:0},{horizontal:0,vertical:-15},{horizontal:0,vertical:-15}],jy=6378,Yy=.002;function Gy({onPickupPointSelect:e}){const t=(0,o.QN)(),n=(0,T.dg)(),{pickupPoints:r,proposedPickupPoint:l}=(0,nn.H)(),i=t.read(l).value?.handle,{locationAddress:s}=(0,ve.C)(),d=t.read(s.fields.coordinates).value,c=[],u=r.map(((e,t)=>{const n=e.pickupLocation,a=i===e.handle,r=(0,Oy.Yj)(n.carrierCode),l=a?function(e,t){return e?(0,Oy.Zl)(t.carrierCode):qy}(r,n):function(e,t){return e?(0,Oy.bH)(t.carrierCode):t.carrierLogoUrl}(r,n),o=a?{width:68,height:78}:r?{width:40,height:40}:{width:30,height:30},s={latitude:n.address.coordinates?.latitude||0,longitude:n.address.coordinates?.longitude||0},d=function(e,t){const n={latitude:0,longitude:0},a=t.filter((t=>Math.abs(t.latitude-e.latitude)<Yy&&Math.abs(t.longitude-e.longitude)<Yy)).length;if(0===a)return n;const r=Math.min(a,Hy.length)-1,l=Hy[r];return n.longitude=l.horizontal/1e3/jy*(180/Math.PI)/Math.cos(e.latitude*Math.PI/180),n.latitude+=l.vertical/1e3/jy*(180/Math.PI),n}(s,c);return c.push(s),{title:n.name,label:n.carrierName,blockInfoWindow:!0,position:{lat:s.latitude+d.latitude,lng:s.longitude+d.longitude},zIndex:a?Uy.ActiveMarker:Uy.InactiveMarker,image:l,style:o,id:e.handle,notInBounds:!a&&t>5,clusterable:!a}})),m={lat:d?.latitude??0,lng:d?.longitude??0};u.push({id:"buyer",image:Wy,notInBounds:!1,position:m,style:{width:36,height:36},blockInfoWindow:!0,clusterable:!1,zIndex:Uy.BuyerMarker});const p={clustererOptions:{averageCenter:!0,clusterClass:"pickup_point_map__cluster",styles:{height:32,width:32,textColor:"#ffffff",textSize:16,textLineHeight:32,fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"}},mapOptions:{gestureHandling:"greedy",scrollwheel:!0,center:u.find((e=>e.id===i))?.position||m,boundsPadding:0,panToCenter:!0,maxZoom:19,styles:n?Fy.K:zy}};return a.default.createElement(Vy.T,{className:$y.PickupPointMap,markers:u,title:"Shopify HQ",mapId:"test_map_id",onMarkerSelect:e,options:p})}var Xy=n(22201);const Zy={Rates:"wKsVx",RateEntry:"JtD_u",LocationName:"qqHQg",LocationAddress:"orOHC"};var Qy=n(36101),Jy=n(72411);function Ky({businessHours:e}){const t=(0,Qy.WD)(),n=(0,E.W)(),{geolocation:r}=(0,be.u)(),l=(0,a.useMemo)((()=>(0,Jy.Ve)(r?.country.code)),[r]),o=(0,Jy.Fl)(l),i={};o.forEach((t=>{i[Jy.LB[t]]=e.filter((e=>e.day===Jy.LB[t].toUpperCase()))}));const s=[],d=[];return o.forEach((e=>{if(s.push(a.default.createElement(jn.E,{key:Jy.LB[e],size:"small"},t(Jy.LB[e].toLowerCase()),":")),0===i[Jy.LB[e]].length)d.push(a.default.createElement(jn.E,{size:"small"},n("pickup_point.location_is_currently_closed","Closed")));else{let t="";i[Jy.LB[e]].forEach((e=>{t=`${t}${""===t?"":", "}${e.openingTime} - ${e.closingTime}`})),d.push(a.default.createElement(jn.E,{size:"small"},t))}})),a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(ln.V,{emphasis:"bold",size:"small"},n("pickup_point.business_hours","Opening hours")),a.default.createElement(ht.o,null,a.default.createElement(Hn.a,{spacing:"none"},s),a.default.createElement(Hn.a,{spacing:"none"},d)))}function eg({pickupPoint:e,displayExtraDetails:t}){const n=(0,$n.a)(),{pickupLocation:r}=e,l=(0,kn.IL)(r.address,{hiddenFields:["countryCode"]});return a.default.createElement(Hn.a,{spacing:"small100"},a.default.createElement(rn.C,{spacing:"small400",columns:["75%","25%"]},a.default.createElement(Hn.a,{spacing:"small500"},a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(ln.V,null,a.default.createElement("span",{className:Zy.LocationName},r.name?.toLowerCase())),a.default.createElement(ln.V,{appearance:"subdued",size:"small"},a.default.createElement("span",{className:Zy.LocationAddress},l?.toLowerCase()))),a.default.createElement(Xy.U,{pickupLocation:r})),a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(ln.V,{emphasis:"bold",inlineAlignment:"end"},n(e.cost.amount,{form:"short",currency:e.cost.currencyCode})))),t&&a.default.createElement(Ky,{businessHours:r.businessHours}))}const tg={Paginator:"qA_tR",PaginatorCaption:"SzkIc",Button:"tYVCC"};function ng({page:e,pageCount:t,currentPageLabel:n,onPageChange:r,firstPage:l=1}){const o=(0,E.W)(),i=(0,a.useCallback)((t=>()=>{r(e+t)}),[e,r]),s=e<=l,d=e>=t+l-1;return a.default.createElement("div",{className:tg.Paginator},a.default.createElement("div",{className:tg.Button},a.default.createElement(He.$,{onPress:i(-1),disabled:s,kind:"plain",inlineSize:"fill"},a.default.createElement(Le.In,{source:"arrowLeft",appearance:s?void 0:"monochrome",accessibilityLabel:o("pickup_point.paginator.next_accessibility_label","Next page")}))),a.default.createElement("div",{className:tg.PaginatorCaption},a.default.createElement(ln.V,null,n)),a.default.createElement("div",{className:tg.Button},a.default.createElement(He.$,{onPress:i(1),disabled:d,kind:"plain",inlineSize:"fill"},a.default.createElement(Le.In,{source:"arrowRight",appearance:d?void 0:"monochrome",accessibilityLabel:o("pickup_point.paginator.previous_accessibility_label","Previous page")}))))}const ag={HeaderCaption:"Q7qtX"};function rg({pickupPoints:e,index:t}){const n=(0,E.W)(),r=(0,o.QN)(),{proposedPickupPoint:l,setProposedPickupPoint:i}=(0,nn.H)(),[,s]=(0,a.useState)(""),d=(0,a.useCallback)((e=>{i({pickupPointHandle:e[0]}),s(e[0])}),[i,s]),c=r.read(l).value?.handle,u=(0,a.useCallback)((t=>{const n=e.findIndex((e=>e.handle===t));return Math.floor(n/6)+1}),[e]),[m,p]=(0,a.useState)(c?u(c):1),f=(0,a.useCallback)((e=>{p(e)}),[]),h=(0,a.useMemo)((()=>e.slice(6*(m-1),6*m)),[e,m,6]),y=Math.ceil(e.length/6),g=6*(m-1)+1,_=Math.min(6*m,e.length);(0,a.useEffect)((()=>{c&&p(u(c))}),[c,u,t]);const b=0===e.length?n("pickup_point.no_pickup_points_found","No pickup points found"):n("pickup_point.paginator.header",{first:g,last:_,count:e.length},{one:"Showing %{first} - %{last} of %{count} point",other:"Showing %{first} - %{last} of %{count} points"}),v=0===e.length?n("pickup_point.no_pickup_points_found","No pickup points found"):n("pickup_point.paginator.selected_page",{first:g,last:_,count:e.length},{one:"%{first} - %{last} of %{count} point",other:"%{first} - %{last} of %{count} points"});return a.default.createElement(cn.Wd,{id:"pickup-points-option-list",selectedItems:c?[c]:[],onChange:d},a.default.createElement("div",{className:ag.HeaderCaption},a.default.createElement(ln.V,null,b)),h.map((e=>a.default.createElement(cn.wC,{key:e.handle,id:e.handle,label:e.pickupLocation.name||""},a.default.createElement(eg,{pickupPoint:e,displayExtraDetails:e.handle===c})))),a.default.createElement(ng,{page:m,pageCount:y,currentPageLabel:v,onPageChange:f}))}function lg({negotiating:e}){const t=(0,E.W)(),[n,r]=(0,a.useState)(0),l=(0,o.QN)(),[,i]=(0,a.useState)(null),{proposedPickupPoint:s,pickupPoints:d,setProposedPickupPoint:c}=(0,nn.H)(),u=(0,a.useCallback)((e=>{c({pickupPoint:d[e-1]}),i(d[e-1]?.handle)}),[c,d]),m=(0,a.useCallback)((e=>{c({pickupPointHandle:e}),i(e)}),[c,i]),p=l.read(s).value,f=(0,a.useMemo)((()=>d.findIndex((e=>e.handle===p?.handle))+1),[d,p?.handle]);if(e)return a.default.createElement(Ty,{text:t("pickup_point.waiting_on_pickup_point_location_notice","Searching for pickup points...")});const y=0===d.length?t("pickup_point.no_pickup_points_found","No pickup points found"):t("pickup_point.paginator.selected_pickup_point_label",{pickup_point_index:f,count:d.length},{one:"%{pickup_point_index} of %{count} point",other:"%{pickup_point_index} of %{count} points"});return a.default.createElement(By.t,{tabs:[{label:t("pickup_point.selector_tab_map","Map"),icon:"map"},{label:t("pickup_point.selector_tab_list","List"),icon:"list"}],selected:n,onChange:r,ariaLabel:t("pickup_point.selector_tabs","Pickup point selector")},a.default.createElement(Hn.a,{spacing:"none",border:["none","base","base","base"],borderRadius:["none","none","base","base"]},a.default.createElement(Gy,{onPickupPointSelect:m}),p&&a.default.createElement(h.S,{padding:"base"},a.default.createElement(eg,{pickupPoint:p,displayExtraDetails:!0})),a.default.createElement(ng,{page:f,pageCount:d.length,currentPageLabel:y,onPageChange:u})),a.default.createElement(rg,{pickupPoints:d,index:n}))}function og({heading:e=!0}){const t=(0,E.W)(),{geolocation:n}=(0,be.u)(),r=(0,a.useRef)(!1),l=t("pickup_point.title","Pickup point"),i=t("pickup_point.or","or"),[s,d]=(0,a.useState)(1),[c,u]=(0,a.useState)(!1),{locationAddress:m}=(0,ve.C)(),f=(0,o.QN)().read(m).value,h=(0,kn.bt)(m),{negotiate:y}=(0,p.T4)(),{pickupPoints:g,setProposedPickupPoint:_}=(0,nn.H)(),[b,v]=(0,a.useState)(!0),[C,S]=(0,a.useState)(),k=(0,kt.w9)("Checkout::PickupPoints::RenderBefore"),w=(0,kt.w9)("Checkout::PickupPoints::RenderAfter"),P=(0,a.useCallback)((e=>{S((t=>t===e?void 0:t))}),[S]);(0,a.useEffect)((()=>(r.current=!0,()=>{r.current=!1})),[]);const[A,I]=(0,a.useState)(!1),x=(0,a.useCallback)((()=>{v(!1),I(!0),y(void 0,{include:["deliveryLines"],fieldsToResolve:["deliveryNext"],silenceViolations:["delivery-method"],onComplete:e=>{switch(e.status){case"success":case"error":if(r.current){I(!1);const n=t("pickup_point.no_pickup_points_near_you","No pickup points found near the selected address");if(e.negotiated.deliveryNext)switch(e.negotiated.deliveryNext.status){case"filled":e.negotiated.deliveryNext.lines.length>0?(d(2),P(n)):(S(n),d(1));break;case"unavailable":S(n),d(1);break;default:(0,Ho.xb)(e.negotiated.deliveryNext)}}break;case"invalid":case"stale":case"denied":case"throttled":case"alreadyCompleted":break;default:(0,Ho.xb)(e)}}})}),[y,P,S,t]);(0,a.useEffect)((()=>{f.coordinates&&f.countryCode&&b&&(g&&g.length>0?d(2):x())}),[d,f,x,g,b]);const M=(0,a.useCallback)((e=>{h({zoneCode:n.zone?.code,countryCode:n.country.code,coordinates:{latitude:e.coords.latitude,longitude:e.coords.longitude}}),x()}),[n,h,x]),T=(0,a.useCallback)((({zoneCode:e,countryCode:n,coordinates:a,address1:r,address2:l,city:o,postalCode:i})=>{h({zoneCode:e,countryCode:n,coordinates:a,address1:r,address2:l,city:o,postalCode:i});const s=t("pickup_point.could_not_resolve_address","Your address couldn't be located. Try again or use a different address");a?(x(),P(s)):S(s)}),[h,x,P,t]);ig(g.length>0);const N=0===g.length?t("pickup_point.no_pickup_points_near_location","No pickup points found near your location"):t("pickup_point.number_of_pickup_points_near_location",{count:g.length},{one:"%{count} pickup point near your location",other:"%{count} pickup points near your location"});return a.default.createElement(cm.w,{accessibilityLabel:l},a.default.createElement(Hn.a,null,e?a.default.createElement(fe.D,{level:2},l):a.default.createElement(jn.E,{appearance:"subdued"},l),a.default.createElement(Kn.N,{extensions:k,options:{isLocationFormVisible:1===s}}),1===s&&!A&&a.default.createElement(a.default.Fragment,null,a.default.createElement(xh,{onSuccess:M}),a.default.createElement(ln.V,{inlineAlignment:"center",appearance:"subdued"},i),a.default.createElement(Ry,{loading:!1,onSearch:T,addressAutoFocus:c}),C?a.default.createElement(an.l,{status:"warning",title:C}):null),2===s&&!A&&a.default.createElement(a.default.Fragment,null,a.default.createElement(ln.V,null,N," ",a.default.createElement(J.N,{onPress:()=>{d(1),u(!0),h({zoneCode:f.zoneCode,countryCode:f.countryCode,coordinates:void 0}),_({pickupPoint:void 0})}},t("pickup_point.change","Change"))),a.default.createElement(lg,{negotiating:A})),A&&a.default.createElement(Ty,{text:t("pickup_point.waiting_on_pickup_point_location_notice","Searching for pickup points...")}),a.default.createElement(Kn.N,{extensions:w,options:{isLocationFormVisible:1===s}})))}function ig(e){const t=(0,Sn.W)();(0,Ce.D3)((async({reason:n})=>"negotiation"===n||e?{behavior:"allow"}:(t.leaveBreadcrumb("Pickup point not selected"),{behavior:"block",reason:en.RE.UnknownReason,perform:()=>{}})))}function sg(){const e=(0,E.W)(),{value:t}=(0,I.mu)(),n=(0,o.md)(xe.D.selectedCreditCard),{hasViolations:r}=(0,bl.l6)(El.mc),l=(0,a.useMemo)((()=>{const e=t?.filter((e=>"direct"===e.type));return e?.flatMap((e=>e.paymentBrands))}),[t]),i=(0,a.useMemo)((()=>{if(r)return!1;if(n&&l){const e=cg[n.brand];return e&&l.includes(e)}}),[r,l,n]),s=(0,a.useMemo)((()=>{if(!1===i){const t=n&&(0,fd.r$)(n.brand);return t?e("payment.brand_not_available",{brand:t},"This store doesn't accept {{brand}}. Please use a different card to pay."):e("payment.generic_incorrect_card_info","Your payment details couldn’t be verified. Check your card details and try again.")}}),[n,i,e]);return{paymentMethods:t,paymentMethodBrands:l,isSelectedCardSupported:i,cardNotSupportedError:s}}const dg={[fo.Y.Amex]:["american_express"],[fo.Y.Bogus]:["bogus"],[fo.Y.CartesBancaires]:["cartes_bancaires"],[fo.Y.Dankort]:["dankort"],[fo.Y.DinersClub]:["diners_club"],[fo.Y.Discover]:["discover"],[fo.Y.Elo]:["elo"],[fo.Y.Forbrugsforeningen]:["forbrugsforeningen"],[fo.Y.Hypercard]:["hypercard"],[fo.Y.Interac]:["interac"],[fo.Y.Jcb]:["jcb"],[fo.Y.Laser]:["laser"],[fo.Y.Maestro]:["maestro"],[fo.Y.Mastercard]:["master","masterdebit"],[fo.Y.Rupay]:["rupay"],[fo.Y.Unionpay]:["unionpay"],[fo.Y.Visa]:["visa","visadebit"],[fo.Y.Visaelectron]:["visaelectron"]},cg=Object.entries(dg).reduce(((e,[t,n])=>(n.forEach((n=>{e[n]=t})),e)),{});function ug(){const e=(0,Di.ot)(),t=(0,X.Di)(),n=(0,Pc.IX)(),r=n?.id,l=(0,Se.p_)(),[,i]=(0,Se.c5)(),{negotiate:s}=(0,p.T4)(),d=(0,Se.iP)(),c=(0,I.jO)().value?.currencyCode,{persistedPayPalAtom:u}=(0,In.b)(),[m,f]=(0,o.fp)(u),h=(0,bl.dA)(new Set(El.XS))?.hasError&&r!==m?.receiptIdForClearedToken,y=m?.tokenCurrencyCode&&m?.tokenCurrencyCode!==c,g=m?.expiresAt&&Date.now()>=new Date(m.expiresAt).getTime();(0,a.useEffect)((()=>{var n;if(d&&(h||y||g)){let a="Currency Mismatch";h?(a="SubmitForCompletion Error",f({...m,receiptIdForClearedToken:r})):g&&(a="Token expired"),n=a,e.incrementCounter("Checkout.Wallets.PayPalTokenCleared",1,new Map([["clearReason",n]])),e.log(Ti.$.Warn,"Clearing PayPal token due to error!",{...t,clearReason:n}),async function(){i({status:"not_connected"}),l(),await s(void 0,{})}()}}),[h,l,d,s,i,y,e,t,g,f,r,m])}var mg=n(86224);const pg=JSON.parse('{"id":"6b52bb946de0ffd24cf91b8732378343815d69f574bbd7cac4add4ad105bd8f7","name":"PaymentGatewayQuery","source":"query PaymentGatewayQuery($sessionToken:String!){shop(sessionInput:{sessionToken:$sessionToken}){id expressPaymentGateways:paymentGateways(kind:EXPRESS){id name __typename}manualPaymentGateways:paymentGateways(kind:MANUAL){id name __typename}offsitePaymentGateways:paymentGateways(kind:OFFSITE){id name __typename}__typename}}"}');class fg extends Error{constructor(...e){super(...e),this.name="PaymentGatewayError"}}function hg(){const e=(0,E.W)(),{recordImmediately:t}=(0,oe.v)(),[n]=(0,hl.kF)(),{layout:r,web_url:l,from_classic:o}=(0,S.I)(),{data:i}=function(){const e=(0,vs.bn)(),t=(0,Rc.K)("session-token"),n=(0,Sn.W)(),[r,l]=(0,a.useState)({express:[],manual:[],offsite:[]}),[o,i]=(0,a.useState)(!1),[s,d]=(0,a.useState)();return(0,a.useEffect)((()=>{(async()=>{i(!0);const{data:a,error:r}=await e.query(pg,{variables:{sessionToken:t}});r||!a?(d(r),r instanceof vs._V||n.notify(r??new fg("usePaymentGateways: Could not get payment gateways via graphql"))):l({express:a?.shop?.expressPaymentGateways??[],manual:a?.shop?.manualPaymentGateways??[],offsite:a?.shop?.offsitePaymentGateways??[]}),i(!1)})()}),[e,t,n]),{data:r,loading:o,error:s}}(),s=(0,is.Jj)(),d=(0,Re.P)("simulated"),c=Boolean(i.express?.length||i.manual?.length||i.offsite?.length),u=!(s.supported&&s.checkoutEligible)&&"web"===r&&c,m=e("shop_pay.credit_card_form.use_different_payment_method","Alternative payment methods");(0,a.useEffect)((()=>{u&&t({schemaId:"shopify_pay_payment_page_ui_impression/2.0",payload:{elementText:m,elementType:"use_different_payment_method",shopAccountUuid:n}})}),[m,t,n,u]);const p=(0,a.useCallback)((()=>{if(d)return!0;t({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:"payment_step_redirect"}});const e=new URL(l);o&&e.searchParams.set(Be.GH,"true"),window.location.assign(e.href)}),[t,l,o,d]);return u?a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(He.$,{onPress:p,kind:"plain"},a.default.createElement(ht.o,{spacing:"small200",blockAlignment:"center"},a.default.createElement(Le.In,{source:"arrowUpRight",size:"base",appearance:"monochrome"}),a.default.createElement(jn.E,null,m)))):null}function yg({openRedeemablesModal:e}){const t=(0,E.W)(),n=bm(),{paymentLines:r}=(0,um.Px)(),l=n.length>0,o=r.length>0,i=[...n,...r];if(!i.length)return null;let s="";return s=o&&l?t("payment.gift_card_store_credit.manage_label","Manage gift cards or store credit"):o?t("payment.gift_card_wrapper.manage_label","Manage gift cards"):t("payment.store_credit.manage_label","Manage store credit"),a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(Hn.a,{spacing:"tight",padding:"small100",border:"base",cornerRadius:["base","base","none","none"]},i.map((e=>a.default.createElement(gg,{key:(0,Wo.R1)(e.method),paymentLine:e})))),a.default.createElement(h.S,{inlineAlignment:"start",padding:"small200",border:["none","base","base","base"],cornerRadius:["none","none","base","base"]},a.default.createElement(He.$,{onPress:e,kind:"plain",textDecoration:"none"},a.default.createElement(ht.o,{spacing:"small200",blockAlignment:"center"},a.default.createElement(Le.In,{source:"pen",appearance:"monochrome"}),a.default.createElement(jn.E,null,s)))))}function gg({paymentLine:e}){const t=(0,E.W)(),n=(0,$n.a)();switch(e.method.redemptionSource){case mo.D.StoreCredit:return a.default.createElement(rn.C,null,a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},a.default.createElement(fi.k,{name:"store_credit"}),a.default.createElement(jn.E,null,t("payment.store_credit.label","Store credit"))),a.default.createElement(ln.V,{inlineAlignment:"end",emphasis:"bold"},e.cost&&n(e.cost.amount,{form:"short",currency:e.cost.currencyCode})));case mo.D.Custom:{const r=e.method.redemptionContent,l=(0,pm.IV)(r);return a.default.createElement(rn.C,{columns:["70%","30%"]},a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},a.default.createElement(fi.k,{name:"gift_card"}),a.default.createElement(jn.E,null,t("payment.gift_card_wrapper.gift_card_label",{identifier:(0,pm.gg)(l)},"Gift card %{identifier}"))),a.default.createElement(ln.V,{inlineAlignment:"end",emphasis:"bold"},e.cost&&n(e.cost.amount,{form:"short",currency:e.cost.currencyCode})))}default:return null}}function _g({openRedeemablesModal:e}){const t=(0,E.W)(),n=km(Em()),r=bm(),{canApplyGiftCards:l}=(0,um.Px)(),{value:o}=(0,I.u_)(),i=o?.amount||0,s=0===r.length&&n;if(!s&&!l||0===i)return null;let d="";return d=l&&s?t("payment.gift_card_store_credit.add_label","Add a gift card or store credit"):l?t("payment.gift_card_wrapper.add_label","Add a gift card"):t("payment.store_credit.add_label","Add store credit"),a.default.createElement(h.S,{padding:["none","small100"]},a.default.createElement(He.$,{onPress:e,kind:"plain",textDecoration:"none"},a.default.createElement(ht.o,{spacing:"small100",blockAlignment:"center"},a.default.createElement(Le.In,{source:"plus",size:"base",appearance:"monochrome"}),a.default.createElement(jn.E,null,d))))}function Eg(){const e=(0,E.W)(),{hasViolations:t}=(0,bl.l6)(El.XU);return t?a.default.createElement(an.l,{status:"critical"},e("store_credit_errors.generic_error","There was a problem with your store credit. Try again or reload the page.")):null}function bg({open:e,onClose:t}){const n=(0,E.W)(),r=km(Em()),{canApplyGiftCards:l}=(0,um.Px)(),o=(0,uo.iy)(),i=(0,a.useRef)(o);(0,a.useEffect)((()=>{i.current=o}),[o]);let s="";s=r&&l?n("payment.gift_card_store_credit.manage_label","Manage gift cards or store credit"):l?n("payment.gift_card_wrapper.manage_label","Manage gift cards"):n("payment.store_credit.manage_label","Manage store credit");const d=()=>{(i.current||!l&&r)&&t()};return a.default.createElement(Ts.x,{title:s,open:e,onClose:t},a.default.createElement(Hn.a,null,a.default.createElement(Eg,null),a.default.createElement(Am,{afterAppliedRedeemablesChange:d}),a.default.createElement(_m,{showHeading:!1,afterAppliedRedeemablesChange:d})))}const vg={Bullets:"Fmezu",LabelWrapper:"l5Blq",Label:"EAJAs"};function Cg({handleNoValidCards:e}){const[t,n]=(0,a.useState)(!1),[r,l]=(0,o.fp)(xe.D.selectedCreditCard),i=(0,o.md)(xe.D.paymentMethod),s=(0,o.md)(xe.D.creditCards),{creditCardDisabled:d}=(0,vp.w)(),c=(0,is.Jj)(),u=Xc(Zc),m=kp(r);if((0,a.useEffect)((()=>{if(t){const e=setTimeout((()=>{n(!1)}),750);return()=>clearTimeout(e)}}),[t]),(0,a.useEffect)((()=>{const t=i?.name===sn.R.ShopifyInstallments&&d(r),a=s.find((e=>!d(e)));a?t&&a&&(l(a),n(!0)):e()}),[d,s,c.config?.availableLoanTypes,r,i?.name,e,l]),!r)return null;const p="····";return a.default.createElement(rn.C,{columns:["auto","fill"],spacing:"small200"},t?a.default.createElement(Ha.r,null):a.default.createElement(a.default.Fragment,null,a.default.createElement(fi.k,{name:r.brand}),a.default.createElement(jn.E,null,u?a.default.createElement("span",{className:vg.LabelWrapper},a.default.createElement("span",{className:vg.Label},a.default.createElement(mm.P,null,m)),a.default.createElement("span",{"aria-hidden":"true",className:vg.Bullets},p),a.default.createElement(jn.E,null,r.lastDigits)):a.default.createElement(a.default.Fragment,null,a.default.createElement(jn.E,null,m),a.default.createElement("span",{"aria-hidden":"true",className:vg.Bullets},p),a.default.createElement(jn.E,null,r.lastDigits)))))}function Sg({expandRollup:e}){const t=(0,uo.Bf)(),n=(0,uo.iy)(),r=(0,uo.Vq)();return t?r?a.default.createElement(Jo,{vaulted:!0,reason:"giftCard"}):n?a.default.createElement(Pg,null):a.default.createElement(Hn.a,{spacing:"tight"},a.default.createElement(Pg,null),a.default.createElement(kg,{expandRollup:e})):a.default.createElement(Jo,{vaulted:!0,reason:"freeOrder"})}function kg({expandRollup:e}){const t=(0,ra.VH)({shopPay:()=>a.default.createElement(Cg,{handleNoValidCards:()=>e(!0)})})??wg;return a.default.createElement(t,null)}function wg(){const e=(0,o.md)((0,ve.C)().paymentLines),t=(0,a.useMemo)((()=>e.filter((e=>"giftCard"!==e.method.type&&"redeemable"!==e.method.type))[0]),[e]);return a.default.createElement(Hn.a,{spacing:"extraTight"},a.default.createElement(Ld.rO,{paymentLine:t}),a.default.createElement(jo,null))}function Pg(){const e=(0,E.W)(),t=(0,$n.a)(),n=(0,_e.Xv)(mo.D.StoreCredit),{paymentLines:r}=(0,um.Px)(),l=(0,ra.VH)({shopPay:"small200"})??"base",o=[...n,...r];return o.length?a.default.createElement(Hn.a,{spacing:"tight"},o.map((n=>{const r=n.cost?a.default.createElement(jn.E,null," - ",t(n.cost.amount,{currency:n.cost.currencyCode,form:"short"})):null;switch(n.method.redemptionSource){case mo.D.StoreCredit:return a.default.createElement(ht.o,{blockAlignment:"center",spacing:l,key:(0,Wo.R1)(n.method)},a.default.createElement(fi.k,{name:"store_credit"}),a.default.createElement(ln.V,null,e("payment.store_credit.label","Store credit"),r));case mo.D.Custom:{const t=n.method.redemptionContent,o=(0,pm.IV)(t);return a.default.createElement(ht.o,{blockAlignment:"center",spacing:l,key:(0,Wo.R1)(n.method)},a.default.createElement(fi.k,{name:"gift_card"}),a.default.createElement(ln.V,null,e("payment.gift_card_wrapper.gift_card_label",{identifier:(0,pm.gg)(o)},"Gift card %{identifier}"),r))}default:return null}}))):null}function Ag(){const e=(0,E.W)(),t=(0,ra.R4)(),n=(0,is.Jj)(),r=t.payment?["base","none"]:"none",l=n.supportedCountryOptions?.map((e=>e.label)).join(", "),o=l?e("shop_pay.installments_debit_cards_supported_countries",{countries:l},"Only debit cards from these supported countries can be used to pay in installments: {{countries}}"):e("shop_pay.installments_valid_debit_cards_fallback","Only debit cards can be used to pay in installments");return a.default.createElement(Hn.a,{id:"debit-card-form",padding:r},a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(fe.D,{level:2},e("shop_pay.credit_card_form.add_debit_card","Add a debit card")),a.default.createElement(ln.V,{appearance:"subdued"},o)),a.default.createElement(fc,null))}var Ig=n(86582);const xg=new Set([Pe.X.PaymentsPhoneNumberDoesNotMatchExpectedPattern]);function Mg({bannerId:e,children:t,...n}){const r=(0,Di.ot)();return(0,a.useEffect)((()=>{r.log(Ti.$.Error,"[Displayed Error] Error banner was rendered",{bannerId:e})}),[e,r]),a.default.createElement(an.l,(0,ye.A)({id:e},n),t)}function Tg(){const e=(0,E.W)(),t=(0,dr.x)(),{progressing:n}=(0,p.T4)(),[r]=(0,or.hr)(),{cardNotSupportedError:l}=sg(),{hasViolations:i}=(0,bl.l6)(El.mc),{hasViolations:s}=(0,bl.l6)(El.Y4),{hasViolations:d}=(0,bl.l6)(El.gN),{hasViolations:c,violations:u}=(0,bl.l6)(wl.uF),m=1===u.size&&u.values().next().value.code===Pe.X.PaymentsMethod,f=(0,ra.VH)({businessCustomer:!0})??!1,{hasViolations:h}=(0,bl.l6)(El.td),y=(0,tn.Zf)(),{message:g}=function(){const e=(0,E.W)(),t=(0,o.md)(xe.D.selectedCreditCard),{hasViolations:n}=(0,bl.l6)(xg),a=(0,ra.Gy)();let r="";return n&&"shopPay"===a?(r=t?e("payment.billing_address_invalid_phone",{label:(0,fd.r$)(t.brand),last_digits:t.lastDigits},"Update the phone number in your billing address for {{label}} {{last_digits}} to continue."):e("payment.billing_address_invalid_phone_no_card","Update the phone number in your billing address to continue."),{message:r}):{message:r}}(),{hasError:_,error:b}=(0,bl.dA)(El.x9),{hasError:v}=(0,bl.To)(),{hasError:C}=(0,bl.X_)(),S=xy(b?{type:"payment",code:b}:void 0),[k]=(0,Ig.Y)(),w=function(){const{directPaymentErrors:e}=(0,ve.C)();return(0,o.ET)((t=>Object.keys(e).some((n=>"server"===t(e[n])?.origin))))}(),P=Eo(),A=(0,a.useRef)(!1),I=yy();if(n)return null;let x,M="critical";return k&&(A.current=!0,x=k),y&&(A.current=!0,x=y),(w||P&&A.current)&&(x=e("payment.generic_incorrect_card_info","Your payment details couldn’t be verified. Check your card details and try again.")),_&&b&&S&&!A.current&&r!==sn.R.GooglePay&&r!==sn.R.ApplePay&&!I&&(x=S),"failed"===t.type&&"completion"===t.negotiationStage&&(x=t.fetchFailed?e("order_errors.network_failure","Your order couldn't be submitted because of a network error. Check your connection and try again."):e("order_errors.creation_failure","There was an issue creating your order. Try again, or contact us for more details.")),C&&!A.current&&(x=e("order_errors.creation_failure","There was an issue creating your order. Try again, or contact us for more details.")),v&&!A.current&&(x=e("order_errors.inventory_reservation_failure","Some items are no longer available.")),h&&(x=e("store_credit_errors.generic_error","There was a problem with your store credit. Try again or reload the page.")),s&&(x=e("payment.expired_payment_method","Selected payment method has expired")),(i||c)&&(x=e("payment.generic_incorrect_card_info","Your payment details couldn’t be verified. Check your card details and try again.")),d&&(x=e("payment_errors.generic_error","There was an issue processing your payment. Try again or use a different payment method.")),f&&m&&(x=e("payment_errors.available_methods_updated","Available payment methods have been updated."),M="info"),l&&(x=l),g&&(x=g),x?a.default.createElement(Ng,{identifier:"PaymentErrorBanner",status:M},x):null}function Ng({children:e,identifier:t,status:n}){const r=(0,v.Hy)();return(0,a.useEffect)((()=>{setTimeout(r)}),[r]),"critical"===n||"warning"===n?a.default.createElement(Mg,{bannerId:t,status:n},e):a.default.createElement(an.l,{status:n},e)}const Lg=e=>a.default.createElement(cm.w,null,e);function Dg({hasAnyPaymentError:e,shopPayPaymentErrorMessage:t}){const n=(0,ra.VH)({shopPay:t?()=>a.default.createElement(an.l,{status:"critical"},t):Tg})??Tg;return e?a.default.createElement(h.S,null,a.default.createElement(n,null),a.default.createElement(he.S,null)):null}function Rg({onEdit:e,onDelete:t,onCancel:n}){const r=(0,E.W)();return a.default.createElement(Hn.a,{spacing:"small200"},e&&a.default.createElement(He.$,{kind:"primary",onPress:e},r("shipping.address_edit","Edit address")),t&&a.default.createElement(He.$,{appearance:"critical",kind:"secondary",onPress:t},r("shipping.address_delete","Delete address")),a.default.createElement(h.S,{padding:"base",inlineAlignment:"center"},a.default.createElement(He.$,{kind:"plain",onPress:n},r("shipping.address_form.cancel","Cancel"))))}const Bg="addressSelector--";function Fg({addressErrorsAtom:e,addressPrimary:t,addressType:n="shipping",choices:r,id:l="",onChange:i,onDelete:s,onEdit:d,selectedId:c=""}){const u=(0,E.W)(),m=(0,o.md)(wn.jI),[p,f]=(0,a.useState)(!1),[h,y]=(0,a.useState)("idle"),[g,_]=(0,a.useState)(c),b=(0,Ms.Z)(),v=(0,a.useMemo)((()=>Array.from(r.entries())),[r]),C="shipping"===n,{isLoading:S}=Kc(),[k,w]=(0,a.useState)(!1),P=(0,kn.g$)(n),A=zg(c,l),I=(0,a.useCallback)((([e])=>{w(!0);const t=function(e,t=""){return e.replace(`${t}${Bg}`,"")}(e,l);i(t)}),[i,l]);(0,a.useEffect)((()=>{S||w(!1)}),[S]);const x=(0,a.useCallback)((()=>{f(!1),y("idle"),_("")}),[]),M=(0,a.useCallback)((e=>{_(e),f(!0),y("context")}),[]),T=(0,a.useCallback)((()=>{y("delete")}),[]),N=(0,a.useCallback)((()=>{y("edit")}),[]),L=(0,a.useCallback)((async()=>{y("deleting"),s?.(),b.current&&x()}),[s,b,x]),D=(0,a.useCallback)((async e=>d?.(g,e)??!1),[g,d]),R=(()=>{switch(h){case"context":return a.default.createElement(Rg,{onEdit:N,onDelete:s?T:void 0,onCancel:x});case"edit":return a.default.createElement(Hn.a,null,m&&a.default.createElement(an.l,{status:"critical"},a.default.createElement(ln.V,null,u("shipping.address_form.generic_error","There was a problem saving your address. Please try again."))),a.default.createElement(Is,{editableAddress:(0,wn.tB)(r.get(g)),addressType:n,onSave:D,onSuccess:x,onCancel:x,addressErrorsAtom:e,combineViolationAndValidationErrors:!0}));case"delete":return s&&a.default.createElement(Ns,{state:h,description:u("address_management.confirm_address_deletion",{address:P},"Are you sure you want to delete the address {{address}}?"),onConfirm:L,onCancel:x});default:return null}})(),B=(()=>{switch(h){case"edit":return u("shipping.address_edit","Edit address");case"delete":return u("shipping.address_delete","Delete address");default:return""}})(),F=1===v.length;return a.default.createElement(a.default.Fragment,null,a.default.createElement(cn.Wd,{id:`${n}Address`,selectedItems:[A],onChange:I,hideRadioButton:F},v.map((([e,n])=>a.default.createElement(rn.C,{columns:["fill","auto"],blockAlignment:"start",key:e},a.default.createElement(cn.wC,{key:e,id:zg(e,l),padding:F?["small100","none","small100","small100"]:void 0},a.default.createElement(rn.C,{blockAlignment:"center",columns:["fill","auto"]},a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(Jc,{nameLinePosition:"inline",address:n,addressPrimary:t&&t(e)})),c===e&&a.default.createElement(sr.R,{size:"small",active:S&&k})),(e=>e===c)(e)&&a.default.createElement(He.$,{kind:"plain",id:"action-sheet-trigger",onPress:()=>M(e),accessibilityLabel:u(C?"shipping.address_more":"billing.address_more","More actions for this address")},a.default.createElement(Le.In,{source:"verticalDots",size:"base"}))))))),a.default.createElement(Ts.x,{title:B,open:p,onClose:x},R))}function zg(e,t=""){return`${t}${Bg}${e}`}const Vg=e=>{const{referenceId:t,...n}=e;return n},Og=(0,Ht.MN)(new Map),Wg=(0,Ht.MN)(void 0),qg=(0,wn.iK)(),$g={source:"sdkCartHints",features:{VaultedContact:({emailAddress:e,phone:t})=>{const n=(0,E.W)(),[r,l]=(0,a.useState)(!1),o=(0,a.useCallback)((()=>{l((e=>!e))}),[]),{label:i,summary:s}=(0,a.useMemo)((()=>t?{label:n("contact.phone_label","Phone"),summary:t}:{label:n("contact.email_label","Email"),summary:e}),[e,t,n]),{delivery:d}=(0,ra.R4)();return a.default.createElement(za.pp,{id:"contact",open:r,label:i,summary:s,error:!e&&!t,onToggle:o},a.default.createElement(rp,{prefetchShippingRates:!d,showEmailMarketingOptIn:!1}))},DeliveryAddressEdit:({id:e})=>{const t=e||"shipping_address",n=(0,be.u)().geolocation.country.code,[r,l]=(0,o.fp)((0,ve.C)().shippingAddress),[i,s]=(0,o.fp)(Og),[d,c]=(0,o.fp)(Cl.addressModalState),[u,m]=(0,o.fp)(Wg);if(0===i.size){const e=(0,M.u)(),t={...r,referenceId:e};s((n=>n.set(e,t))),m(e)}const p=(0,a.useCallback)((()=>{const e=r;c({status:"adding",address:(0,wn.tB)({firstName:e.firstName,lastName:e.lastName,countryCode:n??e.countryCode})})}),[r,c,n]),f=(0,a.useCallback)((async(e,t)=>!!e&&(s((n=>(n.set(e,{...t,referenceId:u}),new Map(n)))),l(t),!0)),[s,l,u]),h=(0,a.useCallback)((async e=>{if("adding"===d.status){const t=(0,M.u)();s((n=>(n.set(t,{...e,referenceId:t}),new Map(n)))),m(t)}return l(e),!0}),[s,l,d,m]),y=i.size>1;return a.default.createElement(Hn.a,null,a.default.createElement(Fg,{id:t,addressType:"shipping",choices:i,selectedId:u,onChange:e=>{const t=i.get(e);t&&(l(Vg(t)),m(e))},onEdit:f,onDelete:y?()=>{if(!u)return;s((e=>(e.delete(u),new Map(e))));const e=i.keys().next().value;if(e){m(e);const t=i.get(e);t&&l(Vg(t))}}:void 0,addressErrorsAtom:qg}),a.default.createElement(fp,{addressType:"shipping",onSave:h,onAddAction:p,showSavedAddressSelector:!1}))},MarketingDisclosure:vc}};function Ug(){const e=(0,E.W)();return a.default.createElement(an.l,{status:"critical"},e("shop_pay.checkout.invalid_billing_address_selected","The selected address is invalid. Edit or select a different address."))}const Hg={Tips:function({renderInSection:e}){const t=(0,E.W)(),n=a.default.createElement(Hn.a,{spacing:"base"},a.default.createElement(fe.D,{level:2},t("tips.title","Add tip")),a.default.createElement(Ra,null));return e?a.default.createElement(H.wn,{accessibilityLabel:t("tips.title","Add tip"),padding:y.OF.default("large200").when({viewportInlineSize:{min:"small"}},["none","none","large200","none"])},n):a.default.createElement(h.S,{accessibilityLabel:t("tips.title","Add tip"),padding:["large100","none","large100","none"]},n)},Rewards:Im,MarketingDisclosure:Im,CashRedemption:Im,SubscriptionPolicy:Im,PurchaseOptionsAgreement:Ec,ContactForm:function({showSmsMarketingOptIn:e}){const t=(0,E.W)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(sp,{title:t("contact.contact_method_title","Contact"),loginLink:a.default.createElement(Cy,null)}),a.default.createElement(he.S,null),a.default.createElement(rp,{showSmsMarketingOptIn:e}))},VaultedContact:function({emailAddress:e,label:t,logo:n}){return a.default.createElement(za.pp,{id:"contact",label:t,summary:e,logo:n},a.default.createElement(Hn.a,{spacing:"small200"},e))},VaultedPayment:function(){const e=(0,E.W)(),{recordImmediately:t}=(0,oe.v)(),n=(0,o.md)(xe.D.creditCards),{hasViolations:r}=(0,bl.l6)(new Set([...El.Y4,Pe.X.PaymentsPhoneNumberDoesNotMatchExpectedPattern])),{hasError:l}=(0,bl.dA)(El.x9),{cardNotSupportedError:i}=sg(),{paymentNoticeMessage:s}=(0,mg.k)(),d=Boolean(s),c=(0,dr.x)(),u="failed"===c.type&&"completion"===c.negotiationStage,m=(0,o.md)(xe.D.selectedCreditCard),p=r||l||d||null!=i||u,f=(0,kt.w9)("purchase.checkout.payment-method-list.render-before"),y=(0,kt.w9)("purchase.checkout.payment-method-list.render-after"),g=jp([...f,...y]),_=(0,uo.Bf)(),b=(0,uo.Vq)(),v=(0,ra.rS)("businessCustomer",!1,!_||b),{currentReturnSection:C}=(0,Xp.H_)(),S=(0,ra.rS)("businessCustomer",!C||"VaultedPayment"===C,"VaultedPayment"===C),k=(0,ra.rS)("shopPay",Boolean(m?.expired),!1),w=S||k,[P,A]=(0,a.useState)(w),{paymentMethodMustSupportInterestBearingLoans:I}=(0,is.Jj)(),{creditCardDisabled:x}=(0,vp.w)();ug();const M=I&&n.every((e=>x(e))),T=(0,o.md)((0,ve.C)().paymentLines),N=T.some((e=>"wallet"===e.method.type&&e.method.name===sn.R.PaypalExpress)),L=(0,zr.a)(Vr.J4),D=(0,_e.OL)(),R=L&&D&&N,B=T.some((e=>e.method.type===en.NK.CreditCard&&e.method.requiresCvvConfirmation)),F=(0,a.useCallback)((e=>t({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:e?"credit_card_expand":"credit_card_collapse"}})),[t]),z=(0,ra.VH)({shopPay:F}),V=(0,a.useCallback)((()=>{A((e=>{const t=!e;return z?.(t),t}))}),[z]),O=a.default.createElement(Sg,{expandRollup:A}),W=p&&a.default.createElement(Dg,{shopPayPaymentErrorMessage:s,hasAnyPaymentError:p}),{PaymentMethodSelector:q,PaymentErrorHandler:$,PurchaseOrderNumberField:U}=rr(),{canApplyGiftCards:H}=(0,um.Px)(),j=(0,ra.VH)({payPal:l||H,googlePay:!1})??!0,Y=(0,ra.VH)({shopPay:hg})??a.default.Fragment,[G,X]=(0,a.useState)(!1),Z=v?null:a.default.createElement(Hn.a,{spacing:"base"},a.default.createElement(yg,{openRedeemablesModal:()=>X(!0)}),a.default.createElement(Kn.N,{extensions:f,render:Lg}),a.default.createElement(q,null),a.default.createElement(_g,{openRedeemablesModal:()=>X(!0)}),a.default.createElement(bg,{open:G,onClose:()=>X(!1)}),a.default.createElement(Y,null),a.default.createElement(Kn.N,{extensions:y,render:Lg}),a.default.createElement(U,{showHeading:!1}));(0,a.useEffect)((()=>{g&&A(!0)}),[g]);const Q=a.default.createElement(za.pp,{open:P,id:"payment",label:e("payment.payment_method","Payment method"),summary:O,onToggle:j?V:void 0,error:W||B},Z),J=(0,ra.VH)({shopPay:M?a.default.createElement(Ag,null):Q})??Q;return a.default.createElement(a.default.Fragment,null,J,R&&a.default.createElement(h.S,{padding:["large100","none"],border:"none"},a.default.createElement(Ei,null)),a.default.createElement($,null))},VaultedShippingMethods:Rf,VaultedDeliveryAddress:function({initiallyOpen:e=!1}={}){const{recordImmediately:t}=(0,oe.v)(),n=(0,o.md)((0,ve.C)().shippingAddress),r=(0,E.W)(),l=(0,a.useRef)(!0),i=(0,a.useRef)(!0),{currentReturnSection:s}=(0,Xp.H_)(),d=function(){const e=(0,E.W)(),{hasViolations:t}=(0,bl.Ck)(El.WX),{hasError:n,error:r}=(0,bl.dA)(El.ye),l=xy(r?{type:"payment",code:r}:void 0);return n&&l?a.default.createElement(an.l,{status:"critical"},l):t?a.default.createElement(vl,{message:e("shipping_errors.shipping_method_not_available_generic.one","Your order cannot be shipped to the selected address. Review your address to ensure it's correct and try again, or select a different address.")}):null}(),[c]=(0,ra.$_)(),u=(0,_e.nK)(),m=(0,Qp.B)(),p=(0,kt.w9)("Checkout::DeliveryAddress::RenderBefore"),f=(0,kt.w9)("purchase.checkout.delivery-address.render-after"),y=jp(p||f),[g,_]=(0,a.useState)(e||y||"VaultedDeliveryAddress"===s);(0,a.useEffect)((()=>{m&&y&&_(!0)}),[y,_,m]);const{hasViolations:b,clearViolations:v}=(0,bl.Ck)(My),{hasError:C,clearError:S}=(0,bl.dA)(El.ye),{loading:k}=(0,I.FC)(),w=(0,Kt.wv)(),P=(0,ra.VH)({shopPay:hp})??void 0,{displayEphemeralAddressCheckbox:A,saveAddress:x,onChangeCheckbox:M}=P?P():{displayEphemeralAddressCheckbox:!1,saveAddress:!1,onChangeCheckbox:()=>{}},{deliveryAddressErrors:T}=(0,ky.a)(),N="shopPay"===c&&!g&&A,L=b&&"loading"!==w?.status||C;(0,a.useEffect)((()=>{L&&_(!0)}),[_,L]),(0,a.useEffect)((()=>{l.current?l.current=!1:v()}),[v,n]),(0,a.useEffect)((()=>{i.current?i.current=!1:S()}),[S,n]);const{DeliveryAddressEdit:D}=rr(),R=(0,ra.rS)("customerAccount",{hiddenFields:[]},{hiddenFields:["phone"]}),B=(0,kn.IL)(n,R),F=(0,a.useCallback)((e=>t({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:e?"shipping_addresses_expand":"shipping_addresses_collapse"}})),[t]),z=(0,ra.VH)({shopPay:F}),V=(0,a.useCallback)((()=>{_((e=>{const t=!e;return z?.(t),t}))}),[z]),O=(0,ra.VH)({shopPay:Pl,externalVault:Py,customerAccount:Sy}),W=b&&!k||C,q=e=>a.default.createElement(h.S,null,a.default.createElement(e,null),a.default.createElement(he.S,null));let $;W&&O?$=q(O):null!==d?$=q((()=>d)):T.length>0&&($=q((()=>a.default.createElement(wy.X,{errors:T}))));const U=(0,ra.VH)({businessCustomer:a.default.createElement(Zh,{formattedAddress:B})})??B,H=(0,ra.VH)({shopPay:u})??!1;return a.default.createElement(Hn.a,{spacing:"none"},H&&a.default.createElement(h.S,null,a.default.createElement(he.S,null),a.default.createElement(Al,null)),a.default.createElement(za.pp,{open:g,id:"deliveryAddress",label:r("shipping.shipping_address_title","Ship to"),error:$??W,summary:U,onToggle:H?void 0:V},a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(Kn.N,{extensions:p}),a.default.createElement(D,null),a.default.createElement(Kn.N,{extensions:f}))),N&&a.default.createElement(Hn.a,{padding:["none","none","base","none"]},a.default.createElement(_i.S,{id:"vaulting_ephemeral_address",name:"vaulting_ephemeral_address",checked:x,onChange:M},r("shop_pay.address_form.save_shipping_address","Save this shipping address for next time"))))},VaultedBillingAddress:function({initiallyOpen:e=!1}={}){const t=(0,_e.O7)(),n=(0,ve.C)(),r=(0,o.md)(n.billingAddress),l=(0,o.md)(n.billingAddressOption),i=(0,kn.IL)(r),s=(0,E.W)(),{recordImmediately:d}=(0,oe.v)(),[c,u]=(0,a.useState)(e),{loading:m}=(0,I.FC)(),p=(0,a.useRef)(!0),{hasViolations:f,clearViolations:h}=(0,bl.l6)(El.G5),y=f&&!m;(0,a.useEffect)((()=>{f&&u(!0)}),[u,f]),(0,a.useEffect)((()=>{p.current?p.current=!1:h()}),[h,r]);const{BillingAddressEdit:g}=rr(),_=(0,a.useCallback)((e=>d({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:e?"billing_addresses_expand":"billing_addresses_collapse"}})),[d]),b=(0,ra.VH)({shopPay:_}),v=(0,a.useCallback)((()=>{u((e=>{const t=!e;return b?.(t),t}))}),[b]),C=t&&"shipping"===l?s("billing.same_as_shipping","Same as shipping address"):i,S=(0,ra.VH)({shopPay:y?a.default.createElement(Ug,null):null})??null;return a.default.createElement(za.pp,{id:"billingAddress",label:s("billing.billing_address_title","Bill to"),open:c,onToggle:v,error:S??f,summary:C},a.default.createElement(g,{addressType:"billing"}))},DeliveryAddressEdit:lo,PaymentMethodSelector:fc,GiftCardRedemption:Im,PriceChangeModal:function(e){const t=(0,ke.j9)(),n=(0,E.W)(),{hasStorefront:r}=(0,P.q)(),l=a.default.createElement(He.$,{size:"base",onPress:e.onClose},n("stock.continue_cta_label","Continue checkout")),o=r&&a.default.createElement(He.$,{to:t.cart(),kind:"plain"},a.default.createElement(ht.o,{spacing:"tight",blockAlignment:"center"},a.default.createElement(jn.E,null,n("stock.return_to_store_label","Return to store"))));return a.default.createElement(Va.a,{open:!0,blocking:!1,onClose:e.onClose,maxInlineSize:600,accessibilityLabel:n("stock.price_update.title","Price update")},a.default.createElement(Hn.a,{spacing:"loose",padding:"large200"},a.default.createElement(Hn.a,null,a.default.createElement(ht.o,{spacing:"base",blockAlignment:"center"},a.default.createElement(fe.D,{level:1},n("stock.price_update.title","Price update")),a.default.createElement(Oa.Oj,null)),a.default.createElement(jn.E,null,n("stock.price_update.description","Prices for these items have changed and are updated in your cart."))),a.default.createElement(h.S,null,a.default.createElement(tr,{loading:e.loading,lineItems:e.lineItems,type:Ga.P.PriceChange})),a.default.createElement(ht.o,{spacing:"large300",blockAlignment:"center",inlineAlignment:"end"},o,l)))},BillingAddressEdit:ss,PaymentMethods:function({billingAddressInContext:e}){return a.default.createElement(Hn.a,null,a.default.createElement(hc,null),a.default.createElement(oc,{billingAddressInContext:e}))},ReviewNotice:Im,Captcha:vy,PaymentErrorHandler:Im,SignUpContact:Im,InvalidShippingMethodBanner:yc,VaultedDelivery:Gh,PurchaseOrderNumberField:Im,NoticeBanners:Im,VaultedPickupPoint:function(){return a.default.createElement(h.S,{padding:["base","none"]},a.default.createElement(cm.w,null,a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(og,{heading:!1}))))},StoreCreditRedemption:Im,BillingAddressSelector:function(){const e=(0,E.W)(),t=(0,tn.ro)(),[n,r]=(0,o.fp)((0,ve.C)().billingAddressOption),l="shipping"===n?gc:_c,[i,s]=(0,a.useState)(l);return(0,a.useEffect)((()=>{s(l)}),[l]),(0,tn.BY)(),a.default.createElement(a.default.Fragment,null,"form"===t?a.default.createElement(wi,null):a.default.createElement(ma.m,{id:"billing_address_selector",selectedItems:[i],onChange:([e])=>{r(e===gc?"shipping":"custom"),s(e)},title:e("general.choose_billing_address","Choose a billing address"),titleHidden:!0},a.default.createElement(on.c$,{id:gc,label:e("payment.same_billing_address_label","Same as shipping address")}),a.default.createElement(on.c$,{id:_c,label:e("payment.different_billing_address_label","Use a different billing address"),details:a.default.createElement(pa.g,{controlledBy:_c},a.default.createElement(wi,null))})))}},jg={[Ey.B]:by,googlePay:Ac,shopPay:Rp,payPal:Bp,buyWithPrime:Wf,amazonPay:th,customerAccount:mh,businessCustomer:Qh,externalVault:_y,sdkCartHints:$g};function Yg({children:e}){const t=(0,ra.Gy)(),n=(0,a.useMemo)((()=>({...Hg,...jg[t].features})),[t]);return a.default.createElement(ar.Provider,{value:n},e)}var Gg=n(89761),Xg=n(15091),Zg=n(46647),Qg=n(45364);function Jg(){const[e,t]=(0,a.useState)(!1),{promiseDate:n,loading:r}=(0,Fp.QL)(),l=(0,I.a9)(),i=(0,o.QN)(),s=(0,Xg.p)(),d=(0,C.Fo)(),c=(0,Pc.ET)(),u=(0,Di.ot)(),{value:m}=(0,I.OL)(),p=m?.find((e=>e.key===Vf.Dn))?.value;let f;try{f=(0,$t.ee)(p||"")}catch(E){u.log(Gg.$b.Error,"[AmazonWebPixelsManager] Failed to parse apiClientId from customAttributes",{errors:E,customAttributes:m})}const h=(0,a.useCallback)((()=>{f&&s.publishCustomEvent(`shopify:app:pixels:load:${f}`,{},{sendTo:"PIXEL-LOADER"})}),[f,s]),y=(0,a.useCallback)((()=>{if(f){const e=(0,Zg.PA)({state:i,negotiated:l,source:d});s.publishCustomEvent("bwp_checkout_started",{checkout:e,deliveryPromiseTimestamp:n},{sendTo:f})}}),[l,i,d,s,n,f]),g=(0,Qg.H)(),_=(0,a.useCallback)((()=>{if(!c||g)return;const e=(0,Zg.PA)({state:i,negotiated:l,source:d,orderId:c.orderIdentity.id||void 0});requestAnimationFrame((()=>{f&&s.publishCustomEvent("bwp_checkout_completed",{checkout:e,deliveryPromiseTimestamp:n},{sendTo:f})}))}),[c,g,i,l,d,f,s,n]);return(0,a.useEffect)((()=>{!r&&n&&e&&y()}),[r,n,e,y]),(0,G.ML)((0,a.useCallback)((e=>{"initiate_checkout"===e.type&&t(!0)}),[t])),(0,G.ML)((0,a.useCallback)((e=>{"complete_checkout"===e.type&&_()}),[_])),(0,a.useEffect)((()=>{h()}),[h]),null}var Kg=n(96625);const e_="cart";function t_(){const e=(0,zr.a)(Vr.VE),t=(0,Op.Y3)(Md.lC.AmazonPay),n=(0,Nd.XS)();return(0,Fp.Bv)()?a.default.createElement(a.default.Fragment,null,a.default.createElement(Jg,null),a.default.createElement(a_,null)):(e?n:t)?a.default.createElement(n_,null):null}function n_(){return(0,Nd.FQ)(),(0,Nd.A7)(),null}function a_(){const{type:e}=(0,C.Fo)(),{value:t}=(0,I.OL)(),n=t?.find((e=>e.key===Vf.xo))?.value,r=(0,Di.ot)(),{persistedAmazonAtom:l}=(0,In.b)(),{primeNotAvailableShown:i}=(0,o.md)(l)??{},s=(0,ge.m)(),d=(0,A.as)(s),c=(0,zr.a)(Vr.Wl);return(0,Fp.dk)(),(0,Fp.cr)(),(0,a.useEffect)((()=>{(0,de.Ri)(e_)&&((0,de.Yj)(e_),r.incrementCounter(Kg.w9,1))}),[]),(0,a.useEffect)((()=>{c||(e===ho.Y.AbandonedCart||d||i)&&n&&window.location.replace(n)}),[]),null}var r_=n(9371),l_=n(60381),o_=n(40016);function i_({children:e}){const{current:{fields:t},parts:{paymentLines:n}}=(0,jt.c$)(),r=(0,o.QN)(),{email:l,paymentLines:i,phone:s}=(0,ve.C)(),{shippingAddress:d}=(0,jt.c$)().current.fields,c=(0,ge.m)(),u=Boolean(c.searchParams.get(Vf.JV))&&!c.searchParams.get(Vf.r7),{isOrderEditCheckout:m}=(0,cc.S)(),{hasSavedCreditCards:p}=(0,uo.Ny)(),{isValid:f}=(0,no.Am)(),h="inactive"!==(0,gh.q)(),[y,g]=(0,a.useState)(!1),[_,E]=(0,a.useState)(!1),{hasViolations:b,violations:v}=(0,bl.Ck)(new Set([...El.G5])),C=(0,_e.Vk)(),S=(0,Pc.IX)(),{shippingRequired:k}=(0,_e.kG)(),w=(0,_e.O7)(),P=(0,uo.Bf)(),x=(0,Re.P)("simulated"),M=(0,Fp.Bv)(),T=x&&c.searchParams.has("shop_pay_sim"),N=(0,r_.a)(),D=(0,L.b)(),{persistedPayPalAtom:R}=(0,In.b)(),[B]=(0,o.fp)(R),{shippingCountries:F}=(0,Pn.UR)(),z=(0,vo.O)(),{value:V}=(0,I.oo)(),O=(0,o.md)(d),W=(0,kn.Z7)(O?.countryCode,F),q=D.isStandard(),$=(0,A.as)(c),U=(0,a.useRef)(),H=(0,a.useRef)(Boolean(r.read(l).value||r.read(s).value)).current,j=(0,zr.a)(Vr.VE),Y=(0,Nd.XS)(),G=(0,o.DD)(function(){if($||T)return"shopPay";if(q&&H)return"sdkCartHints";if(N)return"externalVault";const e=r.read(n).value;if(function(e,t){if(t?.isPayWithPayPalFlow)return!1;if(t?.receiptIdForClearedToken&&t.receiptIdForClearedToken===S?.id)return!0;const n=(0,dn.jl)(e,sn.R.PaypalExpress);return!!n&&(0,l_.Z)(n)}(e,B))return"payPal";if((0,dn.jl)(e,sn.R.GooglePay))return"googlePay";if(M)return"buyWithPrime";if((0,o_.zo)({paymentLines:e,intentBetaEnabled:j,isInAmazonPayFlow:Y,hasSuccessfulAmazonCheckoutSession:u}))return"amazonPay";const a=r.read(t.buyerIdentity).value?.customerProfile?.__typename;return"CustomerProfile"===a?"customerAccount":"BusinessCustomerProfile"===a?"businessCustomer":Ey.B}());(0,o.GI)(t.buyerIdentity,(e=>{"CustomerProfile"===e?.customerProfile?.__typename?r.read(G).value===Ey.B&&r.write(G,"customerAccount"):"customerAccount"===r.read(G).value&&r.write(G,Ey.B)}));const X=(0,a.useMemo)((()=>(0,Ht.MN)((e=>{const n=e(G);if(n===Ey.B)return{contact:!1,delivery:!1,payment:!1,billing:!1};if("sdkCartHints"===n&&U.current)return U.current;function a(){switch(n){case"amazonPay":case"businessCustomer":case"buyWithPrime":return!0;case"shopPay":return e(xe.D.flow)!==Me.p.UnauthenticatedUser;case"sdkCartHints":return e(l).length>0||e(s).length>0;case"externalVault":return e(Jh.U.email).length>0;default:return e(l).length>0}}const r={contact:a(),delivery:function(){function r(e){return"CustomerProfile"===e?.__typename}const l=e(d);switch(n){case"customerAccount":{const n=e(t.buyerIdentity);return!(null==n||!r(n.customerProfile)||(o=n.customerProfile,0===o.shippingAddresses.length)||function(e){return 1===e.shippingAddresses.length&&W(e.shippingAddresses[0].address,"shipping").size>0}(n.customerProfile)||null!=l&&!function(e,t){return!!r(e)&&(e.shippingAddresses??[]).some((e=>(0,wn.eB)(e.address,t)))}(n.customerProfile,l))}case"shopPay":return e(xe.D.addresses).length>0;case"amazonPay":case"buyWithPrime":return!0;case"sdkCartHints":return a()&&function(e){return null!=e&&0===W(e,"shipping").size}(l);case"externalVault":return e(Jh.U.addresses).length>0;case"businessCustomer":return!(h&&!f);default:return Object.values(l??{}).some((e=>null!=e))}var o}(),payment:function(){switch(n){case"shopPay":return P||k?e(xe.D.creditCards).length>0:e(xe.D.addresses).length>0;case"sdkCartHints":return!1;case"externalVault":return!w&&e(Jh.U.creditCards).length>0;case"businessCustomer":{const n=e(t.buyerIdentity)?.customerProfile;if(m||!function(e){return"BusinessCustomerProfile"===e?.__typename}(n))return!1;const a=Boolean(V);return p||(a||z)&&!C}default:return!!p||"customerAccount"!==n&&e(i).length>0}}(),billing:function(){switch(n){case"shopPay":return!k||!P&&k;case"amazonPay":case"buyWithPrime":return _;case"googlePay":return y;default:return!1}}()};return U.current=r,U.current}))),[G,W,t.buyerIdentity,d,h,f,w,P,k,m,C,z,p,i,_,y,l,s,V]),Z=(0,a.useMemo)((()=>({identitySourceAtom:G,vaultedSectionsAtom:X})),[G,X]);return(0,a.useEffect)((()=>{_||!b||(0,o_.T5)(v)||E(!0)}),[_,b,v]),(0,a.useEffect)((()=>{!y&&b&&g(!0)}),[y,b]),a.default.createElement(ra._Z.Provider,{value:Z},a.default.createElement(t_,null),e)}const s_=(0,Ge.m)({load:()=>(0,Xe.P)((()=>n.e(971).then(n.bind(n,11234)))),id:()=>11234});var d_=n(99944);const c_={InlineBlock:"TR16T"};function u_(){const e=(0,E.W)(),{hasStorefront:t,contactEmail:n}=(0,P.q)(),r=(0,ke.j9)();return a.default.createElement(Hn.a,{spacing:"large500",padding:y.OF.default("large300").when({viewportInlineSize:{min:"small"}},"none")},a.default.createElement("div",{className:_()(c_.InlineBlock)},a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(fe.D,{level:1},e("no_address_location.alt_header","Missing shipping address")),a.default.createElement(ln.V,{appearance:"base"},e("no_address_location.message","Contact us to add an address for this location to complete checkout."))),a.default.createElement(d_.S,{status:"warning",color:"black"})),a.default.createElement(he.S,{spacing:"extraTight"}),a.default.createElement(ht.o,{inlineAlignment:"end",blockAlignment:"center",spacing:"large400"},t&&a.default.createElement(He.$,{to:r.cart(),kind:"plain"},e("general.back_to_cart","Return to cart")),a.default.createElement(He.$,{size:"large",to:`mailto:${n}`},e("no_address_location.email_us_button_label","Send us an email"))))}var m_=n(21004);var p_=n(51702),f_=n(95920),h_=n(86155),y_=n(61921),g_=n(69618);function __(){return{persistedShopPayHistoryAtom:(0,fy.QV)(hy.Z.ShopPay,{scope:g_.e5})}}var E_=n(41777);function b_(){const e=(0,b.Y)(),t=(0,E.W)(),n=("undefined"==typeof window?void 0:window.shopPayCaptchaSiteKey)??Be.Rr,[,r]=(0,o.fp)(xe.D.signUpCaptchaRef),l=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(l.current)return r(l.current),()=>{r(void 0)}}),[r]),a.default.createElement(cm.w,{accessibilityLabel:t("captcha.title","Complete the CAPTCHA to continue")},a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(E_.A,{size:"invisible",sitekey:n,languageOverride:e,ref:l})))}var v_=n(7821);function C_({open:e,blocking:t,title:n,description:r,onClose:l,cta:o,onPressCta:i,secondaryAction:s,onPressSecondaryAction:d,cancel:c,onPressCancel:u}){const m=s?a.default.createElement(He.$,{inlineSize:"fill",kind:"secondary",onPress:d},s):null,p=c?a.default.createElement(ou,{borderRadiusBase:!0,inlineSize:"fill",onPress:u,paddingBlock:"base"},c):null,f=a.default.createElement(a.default.Fragment,null,r,a.default.createElement(Hn.a,{spacing:"small200",padding:["base","none","none","none"]},a.default.createElement(He.$,{inlineSize:"fill",kind:"primary",onPress:i},o),m,p));return t?a.default.createElement(du.M,{blocking:!0,open:e,title:n},f):a.default.createElement(du.M,{open:e,title:n,onClose:l},f)}const S_={[v_.W.Generic]:kl.R.PaymentErrorModalGeneric,[v_.W.SignInFailed]:kl.R.PaymentErrorModalSignInFailed,[v_.W.ContinueWithShopPay]:kl.R.PaymentErrorModalContinueWithShopPay};function k_(){const e=(0,E.W)(),{name:t}=(0,P.q)(),{recordImmediately:n}=(0,oe.v)(),{loggedIn:r}=(0,si.T4)(),{currentUrl:i}=(0,l.r)(),[s,d]=(0,a.useState)(!1),[c,u]=(0,o.fp)(xe.D.unauthenticatedErrorModal),[,m]=(0,o.fp)(xe.D.shopPayVerificationTrigger),[p,f]=(0,a.useState)(null),h=S_[p?.type??v_.W.Generic],{to:y,onPress:g}=(0,kl.Q)(h),_=(0,a.useCallback)((()=>{u(void 0)}),[u]),b=(0,a.useCallback)((()=>{n({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:`${h}_close`}}),_()}),[_,h,n]),v=(0,a.useCallback)((()=>{y?(g?.(),window.location.assign(y)):_()}),[y,_,g]),C=(0,a.useCallback)((async()=>{n({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:"change_email"}}),_(),setTimeout((()=>{r?m({source:We.j.ErrorModalClearEmail}):window.dispatchEvent(new Event("shop_pay_verification_reset"))}),0)}),[_,r,n,m]),S=(0,a.useCallback)((async()=>{n({schemaId:"shopify_pay_payment_page_ui_interaction/1.1",payload:{action:"continue_with_shop_pay"}}),_(),m({source:We.j.ErrorModalContinue})}),[_,n,m]);(0,a.useEffect)((()=>{c?(f(c),d(!0)):d(!1)}),[n,c]);const k=(0,a.useMemo)((()=>{switch(p?.type){case v_.W.Generic:return e("shop_pay.checkout.unauthenticated_modals.generic.title","Something went wrong");case v_.W.SignInFailed:return e("shop_pay.checkout.unauthenticated_modals.sign_in_failed.title","Sign in failed");case v_.W.ContinueWithShopPay:return e("shop_pay.checkout.unauthenticated_modals.continue_with_shop_pay.title","Continue with Shop Pay?");default:return""}}),[p,e]);if((0,a.useEffect)((()=>{s&&n({schemaId:"shopify_pay_payment_page_ui_impression/2.0",payload:{elementText:k,elementType:h,shopAccountUuid:""}})}),[s]),!p)return null;const w=(0,ie.Mx)(i.search)?a.default.createElement(ht.o,{blockAlignment:"center",spacing:"small500"},e("shop_pay.checkout.unauthenticated_modals.continue_with_shop_pay.cancel",{shopName:t},"Check out at {{shopName}}"),a.default.createElement(Le.In,{source:"external",size:"small",display:"inline",appearance:"monochrome"})):e("shop_pay.checkout.unauthenticated_modals.generic.cta","Check out as guest");switch(p.type){case v_.W.Generic:return a.default.createElement(C_,{blocking:!0,open:s,onClose:b,title:k,description:e("shop_pay.checkout.unauthenticated_modals.generic.description",{shopName:t},"Shop Pay is currently unavailable. You can still complete your checkout as a guest over at {{shopName}}."),cta:w,onPressCta:v});case v_.W.SignInFailed:return a.default.createElement(C_,{open:s,onClose:b,title:k,description:e("shop_pay.checkout.unauthenticated_modals.sign_in_failed.description",{shopName:t},"This is a problem on our end. You can still complete your checkout as a guest over at {{shopName}}."),cta:w,onPressCta:v});case v_.W.ContinueWithShopPay:return a.default.createElement(C_,{blocking:!0,open:s,onClose:b,title:k,description:e("shop_pay.checkout.unauthenticated_modals.continue_with_shop_pay.description",{email:a.default.createElement(jn.E,{emphasis:"bold"},p.email),shopName:t},"{{email}} has a Shop Pay account. Complete sign in or use a different email."),cta:e("shop_pay.checkout.unauthenticated_modals.continue_with_shop_pay.cta","Continue"),onPressCta:S,secondaryAction:e("shop_pay.checkout.unauthenticated_modals.continue_with_shop_pay.secondary","Change email"),onPressSecondaryAction:C,cancel:w,onPressCancel:v});default:return null}}function w_({children:e}){(0,se.i)(ue);const{recordImmediately:t}=(0,oe.v)(),[n]=(0,hl.M3)(),{promptCreditCard:r,installments:l}=zm(),{isUnauthenticatedSession:i,shopPayFlow:s}=(0,cr.M)();return(0,a.useEffect)((()=>{r&&l.paymentMethodMustSupportInterestBearingLoans&&t({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:Dl.NewDebitCard}})}),[l.paymentMethodMustSupportInterestBearingLoans,r,t]),function(){const{recordImmediately:e}=(0,oe.v)(),t=(0,is.Jj)();(0,a.useEffect)((()=>{t.supported&&t.checkoutEligible&&e({schemaId:le.$D.PayPaymentPageInstallments,payload:{eventType:m_.R.UserEligibility,success:t.userEligible}})}),[t.checkoutEligible,t.supported,t.userEligible,e])}(),function(){const{recordImmediately:e}=(0,oe.v)(),t=(0,is.Jj)(),n=(0,a.useMemo)((()=>{if(t.checkoutIneligibilityReasons&&0!==t.checkoutIneligibilityReasons.length)return JSON.stringify(t.checkoutIneligibilityReasons)}),[t.checkoutIneligibilityReasons]);(0,a.useEffect)((()=>{t.supported&&e({schemaId:le.$D.PayPaymentPageInstallments,payload:{errorMessage:n,eventType:m_.R.CheckoutEligibility,success:t.checkoutEligible}})}),[n,t.checkoutEligible,t.supported,e])}(),function(){const{recordImmediately:e}=(0,oe.v)(),t=(0,is.Jj)(),[n]=(0,hl.sg)(),r=t.supported&&t.checkoutEligible&&t.paymentMethodSelected&&null!=n,l=null!=n&&(n.supportsInstallmentsSplitPayLoan||n.supportsInstallmentsInterestLoan);(0,a.useEffect)((()=>{r&&e({schemaId:le.$D.PayPaymentPageInstallments,payload:{errorMessage:l?void 0:JSON.stringify(["selected_card_unsupported"]),eventType:m_.R.CheckoutEligibility,success:l}})}),[e,r,l])}(),function(){const{recordImmediately:e}=(0,oe.v)(),[t]=(0,hl.eR)(),[n]=(0,hl.sg)(),[r]=(0,hl._c)(),[l]=(0,hl.a4)(),[o]=(0,hl.id)(),[i]=(0,hl.Df)(),s=(0,a.useRef)(o),d=(0,a.useRef)(i),[c,u]=(0,a.useState)(0),m=(0,a.useRef)(0),{value:p,loading:f}=(0,I.FC)(),h=(0,h_.X)(),y=(0,I.CL)(),{shippingRequired:g}=(0,_e.kG)(),_=(0,_e.hW)(),[E]=(0,hl.kF)(),{enabledDeliveryMethods:b}=(0,P.q)(),[v]=(0,hl.Ou)(),S=(0,dn.Me)(p,Yt.z.OneTimePurchase),k="available"===S?.status,w=k&&b.includes(Gt.y.PickUp),A=k&&b.includes(Gt.y.Local),x=k?b.length:0,M=k?S?.methods.find((({handle:e})=>S?.selectedDeliveryMethodHandle===e)):null,{value:T}=(0,I.u_)(),{value:N}=(0,I.aX)(),{value:L,loading:D}=(0,I.DN)(),{installments:R,hasSubscriptions:B}=zm(),[F]=(0,hl.M3)(),z=R.supported&&!R.unavailable,{spiPreselected:V,preselectionReason:O}=(0,is.Zo)(),W="available_total"===L?.status?L.totalTax:null,q=(0,a.useMemo)((()=>N?.lines.reduce(((e,t)=>e+((0,en.rj)(t)?t.amount.amount:0)),0)),[N]),$=F||D||f,{value:U}=(0,I.kf)(),H=U?.lines?.[0],j=(0,ie.nQ)(),{type:Y,sourceId:G}=(0,C.Fo)(),X="cart"===Y?G:"",{value:Z=[]}=(0,I.JZ)(),Q=(0,f_.xf)(Z),J=(0,a.useMemo)((()=>(0,f_.xC)(Z)),[Z]),K=(0,kt.ny)().length>0,ee=(0,y_.f)()?.trackingVisit;(0,a.useEffect)((()=>{$||(e({schemaId:le.$D.PayPaymentPageCheckoutState,payload:{checkoutEligibleForLocalPickupBanner:!!y&&w,merchantHasLocalPickup:w,checkoutHasSubscriptionProduct:B,totalLineItemsPrice:_?.toString()||"",paymentDue:T?.amount?.toString()||"",currency:T?.currencyCode||"",installmentsAvailable:R.supported,requiresVerification:h,checkoutEligibleForInstallments:z,checkoutEligibleForSplitPayInstallments:te(p_.C.SplitPay),checkoutEligibleForInterestBearingInstallments:z&&(0,fd.eu)(R.config?.availableLoanTypes),counter:c+1,merchantHasLocalDelivery:A,taxAmount:W?.amount?.toString()||"",discountAmount:q?.toString()||"",numShippingOptions:x,shippingAmount:M?.cost?.amount?.toString()||"",tipAmount:H?.amount?.amount.toString()||"",shopAccountUuid:E,isFromShopApp:j,cartToken:X,merchandiseIssueType:Q?J:"",trackingVisit:ee,hasCheckoutExtension:K,requiresShipping:g,flow:t}}),u(c+1))}),[R.supported,z,_,w,A,T,e,y,E,W,q,x,M,h,H,J,X,j,Q,ee,K,g,t]),(0,a.useEffect)((()=>{if($)return;m.current++;const t=(0,fd.cA)(r)?.address,n=l.length;let a=0,o=0,i=0;l.forEach((e=>{"credit"===e.funding?a++:"debit"===e.funding&&o++,e.expired&&i++}));const s=n>0&&n===i;e({schemaId:le.$D.PayPaymentPageWalletState,payload:{shopAccountUuid:E,counter:m.current,numCreditCards:a,numDebitCards:o,numCards:n,numExpiredCards:i,isDefaultCardExpired:s,numShippingAddresses:r.length,defaultShippingAddressHasCompanyName:Boolean(t?.company?.trim()),defaultShippingAddressHasAddress2:Boolean(t?.address2?.trim()),defaultShippingAddressHasPhoneNumber:Boolean(t?.phone?.trim())}})}),[$,m,r,l,E,e]);const te=(0,a.useCallback)((e=>!(!z||!R.config?.availableLoanTypes)&&R.config.availableLoanTypes.includes(e)),[z,R.config?.availableLoanTypes]),ne=(0,a.useCallback)((()=>R.userEligible?R.checkoutIneligibilityReasons&&R.checkoutIneligibilityReasons.length>0?JSON.stringify(R.checkoutIneligibilityReasons):"":JSON.stringify(["user_rejected"])),[R.userEligible,R.checkoutIneligibilityReasons]);(0,a.useEffect)((()=>{$||T&&!isNaN(T.amount)&&e({schemaId:"shop_pay_installments_eligibility/2.1",payload:{userId:v,checkoutEligible:z,splitPayEligible:te(p_.C.SplitPay),interestBearingEligible:te(p_.C.Interest),zeroPercentEligible:te(p_.C.ZeroPercent),paymentDue:T.amount,currency:T.currencyCode,ineligibilityReason:ne(),spiPreselected:V,preselectionReason:O}})}),[z,v,ne,te,$,T,V,O,e]);const ae=(0,a.useCallback)((()=>{e({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:"credit_card_select"}})}),[e]);(0,a.useEffect)((()=>{n&&ae()}),[n,ae]);const re=(0,a.useCallback)(((t,n,a)=>{const r={previousAddressId:Number(a?.id??-1),previousAddressCountry:a?.address?.countryCode??"",currentAddressId:Number(n.id??-1),currentAddressCountry:n.address.countryCode??""};e("shipping_address"===t?{schemaId:"shopify_pay_payment_page_select_shipping_address/1.2",payload:{...r,ephemeral:i?.id===Be.r9}}:{schemaId:"shopify_pay_payment_page_select_billing_address/1.1",payload:r})}),[e,i]);(0,a.useEffect)((()=>{i&&d.current?.id!==i.id&&re("shipping_address",i,d.current),d.current=i}),[i,re]),(0,a.useEffect)((()=>{o&&s.current?.id!==o.id&&re("billing_address",o,s.current),s.current=o}),[o,re])}(),function(){const{recordImmediately:e}=(0,oe.v)(),{tracking_unique:t}=(0,S.I)(),[n]=(0,hl.kF)();(0,a.useEffect)((()=>{n&&t&&e({schemaId:le.$D.PaySessionTracking,payload:{shopAppAccountUuid:n,uniqueToken:t}})}),[e,n,t])}(),function(){const{loading:e}=(0,I.FC)(),{loading:t}=(0,I.DN)(),[n]=(0,hl.M3)(),r=n||t||e,[l]=(0,hl.sg)(),[i]=(0,hl.Df)(),[s]=(0,hl.jY)(),{persistedShopPayHistoryAtom:d}=__(),[c,u]=(0,o.fp)(d),m=(0,a.useMemo)((()=>({selectedCreditCardId:l?.id,selectedShippingAddressId:i?.id,selectedPaymentMethod:s})),[l?.id,i?.id,s]);(0,a.useEffect)((()=>{r||(0,Ko.b)(c,m)||u(m)}),[r,m,c,u])}(),n?a.default.createElement(sr.R,{active:n,size:"large"},a.default.createElement("div",{style:{minHeight:"500px"}})):a.default.createElement(a.default.Fragment,null,e,s===Me.p.UnauthenticatedUser&&a.default.createElement(k_,null),i&&a.default.createElement(b_,null))}var P_=n(42882);function A_(){const{data:e,loading:t}=(0,Yc.$r)(),[n,r]=(0,a.useState)(),l=(0,ve.C)(),i=(0,_e.O7)(),{variant:s}=(0,sd.F)(),d=(0,zr.a)(Vr.le)&&s!==sd.Y.Control,{checkoutSessionIdentifier:c}=(0,C.Fo)(),{shippingAddress:u}=(0,ve.C)(),{redirect_source:m}=(0,S.I)(),{data:p}=(0,P_.L)(),[,f]=(0,o.fp)(l.email),[,h]=(0,o.fp)(xe.D.email),[,y]=(0,o.fp)(xe.D.signUpPhoneNumber),[,g]=(0,o.fp)(xe.D.selectedShippingAddress),[,_]=(0,o.fp)(xe.D.selectedFreeCheckoutBillingAddress),[,E]=(0,o.fp)(xe.D.selectedNewCardBillingAddress),[,b]=(0,o.fp)(xe.D.selectedCreditCard),[,v]=(0,o.fp)(xe.D.addresses),[,k]=(0,o.fp)(xe.D.creditCards),[,w]=(0,o.fp)(xe.D.wallet),[,P]=(0,o.fp)(xe.D.sessionVerified),[,A]=(0,o.fp)(xe.D.sessionAuthenticationMethod),[x,M]=(0,o.fp)(xe.D.paymentMethod),[,T]=(0,o.fp)(xe.D.installmentsRejected),[,N]=(0,o.fp)(xe.D.installmentsRetryable),[,L]=(0,o.fp)(xe.D.preselectSpi),[,D]=(0,o.fp)(xe.D.newUser),[,R]=(0,o.fp)(xe.D.publicId),[,B]=(0,o.fp)(xe.D.phoneNumber),[,F]=(0,o.fp)(xe.D.phoneCountryCode),[,z]=(0,o.fp)(xe.D.shopAccountUuid),{updateCheckoutAddress:V}=(0,jc.V)(),O=(0,I.rZ)()?.email,[,W]=(0,o.fp)(xe.D.shopCashBack),[,q]=(0,o.fp)(xe.D.loading),[,$]=(0,o.fp)(xe.D.emailForSignUp),[,U]=(0,o.fp)(xe.D.flow),[,H]=(0,o.fp)(xe.D.enabledFlags),[,j]=(0,o.fp)(xe.D.secureData),{persistedShopPayHistoryAtom:Y}=__(),G=(0,o.md)(Y),X=G?.selectedShippingAddressId,Z=G?.selectedCreditCardId,Q=G?.selectedPaymentMethod&&"wallet"===G?.selectedPaymentMethod?.type?G.selectedPaymentMethod:null,J=(0,a.useMemo)((()=>{const e=p?.session?.negotiate?.result,t="NegotiationResultAvailable"===e?.__typename?e?.buyerProposal?.delivery:null,n="FilledDeliveryTerms"===t?.__typename?t?.deliveryLines[0]?.destinationAddress:null;return"Geolocation"!==n?.__typename&&"InvalidDeliveryAddress"!==n?.__typename?n:null}),[p?.session?.negotiate?.result]);return(0,a.useEffect)((()=>t?(r({status:"loading"}),void q(!0)):e&&"failed"!==e.status?void async function(e){const{flow:t,email:n,phone:a,phoneCountryCode:l,creditCards:o,wallet:s,sessionVerified:p,sessionAuthenticationMethod:C,addresses:S,installmentsRejected:I,installmentsRetryable:Y,preselectSpi:G,newUser:K,publicId:ee,shopCashBack:te,shopAccountUuid:ne,emailForSignUp:ae,enabledFlags:re,secureData:le}=e,oe=d?(0,fd.yc)(c)||(0,fd.rZ)(u,J):void 0;oe&&(0,fd.Lr)(oe,c);const ie=d&&m===Be.C8.ShopPayAsPaymentMethod?(0,fd.kD)(S,oe):S;U(t),B(a),F(l),k(o),w(s),v(ie),M(Q||x||{type:"wallet",name:sn.R.ShopPay}),T(I),N(Y),L(G),D(K),R(ee),h(n),W(te),z(ne),$(ae),H(re),j(le),O&&n!==O?f(O):n&&f(n),t!==Me.p.AuthenticatedUser&&y(""),P(p),A(C);const se={},de=(0,fd.cA)(ie,oe),ce=(X?ie.find((e=>e.id===X)):null)||de;ce&&(g(ce),se.shippingAddress=ce.address,_(ce),E(ce),i&&(se.billingAddress=ce.address));const ue=(0,fd.T4)(o),me=(Z?(0,fd.eC)(o,Z):null)||ue;me?(b(me),i||(se.billingAddress=me.billingAddress.address)):ce&&(se.billingAddress=ce.address),se.fallbackPhoneNumber=a,V(se),r({status:"success"}),q(!1)}(e):(r({status:"failed",errors:e?.errors}),void q(!1))),[t,e]),{shopPayParts:xe.D,status:n?.status,errors:n?.errors}}function I_({children:e}){const{shopPayParts:t}=A_(),n=(0,a.useMemo)((()=>new gl.Z8),[]);return a.default.createElement(hl.y6.Provider,{value:t},a.default.createElement(gl.eI.Provider,{value:n},e))}function x_({children:e}){const{recordImmediately:t,pageLoadId:n}=(0,oe.v)(),r=(0,P.q)(),l=(0,Rc.K)("receipt"),{shopPay:o}=(0,_e.GH)(),{checkout_as_guest_url:i,redirect_source:s}=(0,S.I)(),{notify:d}=(0,Sn.W)(),c=!o(),{checkoutSessionIdentifier:u="checkout_identifier_undefined"}=(0,C.Fo)();return(0,a.useEffect)((()=>{if(c)return;const e="shoppay_login"===window.location.pathname.split("/").pop();(0,ie.Mx)()&&!e&&t({schemaId:le.$D.ShopWebDestinationPageLoad,payload:{pageType:"pay_payment_page",userToken:(0,de.Ri)("_shopify_y")||"",sessionToken:(0,de.Ri)("_shopify_s")||"",experimentFlags:"",pageValue:u}}),t({schemaId:le.$D.PayPageLoad,payload:{pageType:"payment_page",clientTimestampMs:Date.now(),pageLoadId:n,redirectSource:s}})}),[u,n,t,s,c]),c?("completed"===l?.status&&r?.storefrontUrl?window.location.replace(r.storefrontUrl):(d(new D.FX("There was an attempt to access Shop Pay. Shop Pay is not enabled on this store."),{severity:"warning"}),window.location.replace(i)),null):a.default.createElement(a.default.Fragment,null,e)}function M_({children:e}){const{checkout_as_guest_url:t,redirect_source:n}=(0,S.I)(),{status:r,errors:l,shopPayParts:o}=A_(),{recordImmediately:i,pageLoadId:s}=(0,oe.v)(),{detour:d}=(0,p.T4)(),c=(0,a.useMemo)((()=>new gl.Z8),[]);(0,ne.F)({stage:"success"===r?ae.B.Complete:ae.B.Usable,id:"ShopPay"});const u="success"!==r;return(0,m.M3)(u),(0,a.useEffect)((()=>{let e;"success"===r?e="page_loaded":"loading"===r?e="first_meaningful_paint":void 0===r&&(e="begin_page_load"),e&&i({schemaId:le.$D.PayPaymentPageReady,payload:{success:!0,status:e,clientTimestampMs:Date.now(),pageLoadId:s}})}),[s,i,r]),r?"failed"===r?l?.some((e=>e.message===Be.sK))&&n!==Be.C8.CheckoutAutomaticRedirect&&n!==Be.C8.CheckoutUniversalRedirect?(d("shopPayLogin",{routerOptions:{replace:!0}}),null):(window.location.replace(t),null):a.default.createElement(hl.y6.Provider,{value:o},a.default.createElement(gl.eI.Provider,{value:c},e)):null}const T_=(0,Ht.Bx)({financingPlans:[]});var N_=n(21732);const L_=JSON.parse('{"id":"d86c24ba847c0583a6cdd93ad932edcc9f527c9360b5a596103ab32aa1aef57e","name":"FinancingPlans","source":"query FinancingPlans{spiFinancingPlans{maxPrice{amount currencyCode __typename}minPrice{amount currencyCode __typename}terms{apr loanType installmentsCount __typename}__typename}}"}');function D_({children:e}){const{shopifyInstallments:t}=(0,_e.GH)(),n=t(),{data:r,loading:l}=(0,vs.IT)(L_,{skip:!n}),[,i]=(0,o.fp)(T_.financingPlans);return(0,m.M3)(l),(0,a.useEffect)((()=>{r&&i(r.spiFinancingPlans)}),[r,i]),a.default.createElement(N_.C.Provider,{value:T_},e)}var R_=n(43439),B_=n(81930),F_=n(2896),z_=n(75868);const V_="AmazonPayButtonContainer",O_={AmazonPayButton:"OFcHr"};function W_(){const{value:e}=(0,I.jO)(),{value:t}=(0,I.mu)(),{inMemoryAmazonPayParts:n}=(0,In.b)(),r=t?.find((e=>"walletsPlatform"===e.type&&e.name===Md.lC.AmazonPay)),{configurationParams:l}=r||{},i=(0,o.md)(n.sdkStatus),[s,d]=(0,o.fp)(n.buttonStatus),c=(0,o.QN)(),{expressCheckout:{button:{cornerRadius:u}={}}}=(0,bt.kV)(),m="available"===i.status&&i.sdk.Pay,p=e&&e.amount>0?e.amount.toFixed(2):void 0,f=e&&e.currencyCode;return(0,a.useEffect)((()=>{const{buttonStatus:e}=n;return c.write(e,{status:"not_rendered"}),()=>{"rendered"===c.read(e).value.status&&c.write(e,{status:"not_rendered"})}}),[]),(0,a.useEffect)((()=>{r&&m&&"rendered"!==s.status&&document.getElementById(V_)&&(m.renderButton(`#${V_}`,{...l,...p&&{estimatedOrderAmount:{amount:p,currencyCode:f}}}),d({status:"rendered"}))}),[m,l,r,d,s.status,p,f]),a.default.createElement("div",{id:V_,className:_()(O_.AmazonPayButton,(0,ct.Fo)({borderRadius:u}))})}const q_={ApplePayButton:"Mh1MJ",dark:"OiqsO",light:"wxoTu"};var $_=n(48753);function U_({supportedNetworks:e,color:t}){const n=(0,E.W)(),r=(0,b.Y)(),l=(0,$_.A)({asPaymentMethod:!1,supportedNetworks:e}),{expressCheckout:{button:{cornerRadius:o}={}}}=(0,bt.kV)();return a.default.createElement("button",{className:_()(q_.ApplePayButton,q_[t],(0,ct.Fo)({borderRadius:o})),lang:r,onClick:l,type:"button","aria-label":n("brand.apple_pay","Apple Pay")})}var H_=n(15947);const j_=(0,Ge.m)({load:()=>(0,Xe.P)((()=>Promise.all([n.e(239),n.e(148)]).then(n.bind(n,8928)))),id:()=>8928});function Y_(){return a.default.createElement(H_.r,{id:"GooglePay"},a.default.createElement(j_,null))}var G_=n(51080),X_=n(27371),Z_=n(65442);const Q_={Button:"KVEbf","Button--contrast":"LqPnM",ShopPayLogoWrapper:"Rm8vy"},J_="shop-pay-button";function K_(){const e=(0,re.g)(),{id:t}=(0,P.q)(),n=(0,X_.nR)(),r=(0,vt.jK)({foregroundColor:ie.ui}),l=(0,T.dg)(),o=(0,ie.em)(l),[,i]=(0,or.Wc)(),s=(0,Z_.W)(Be.C8.DirectCheckoutCheckout),{expressCheckout:{button:{cornerRadius:d}={}}}=(0,bt.kV)(),c=(0,a.useCallback)((a=>{const r=parseInt((0,$t.ee)(t),10),l=(0,X_.$6)(X_.fi.ShopifyPay,a,r,n);e?.recordImmediately(l),i(sn.R.ShopPay)}),[t,e,n,i]),u=_()(Q_.Button,(0,ct.Fo)({borderRadius:d}),{[Q_["Button--contrast"]]:!r&&!o});return a.default.createElement("a",{id:J_,href:s,className:u,"aria-label":"Shop Pay",onClick:()=>c(X_.lC.Success)},a.default.createElement(op.C,{size:"medium"}))}const eE=(0,Ge.m)({load:()=>(0,Xe.P)((()=>n.e(147).then(n.bind(n,374)))),id:()=>374});function tE(){return a.default.createElement(H_.r,{id:"FacebookPay"},a.default.createElement(eE,null))}var nE=n(7495);const aE=e=>a.createElement("svg",(0,ye.A)({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 102 20"},e),a.createElement("path",{fill:"#333e48",d:"M75.19 1.786q-1.492 0-2.815.98v5.94q1.343 1.024 2.774 1.023 2.898 0 2.899-3.96 0-3.983-2.858-3.983m-2.962-.277A5.9 5.9 0 0 1 73.93.444a4.9 4.9 0 0 1 1.85-.362q1.009 0 1.827.383a3.76 3.76 0 0 1 1.387 1.108q.567.723.872 1.757t.305 2.332q0 1.32-.326 2.385-.326 1.066-.914 1.81a4.1 4.1 0 0 1-1.429 1.16 4.2 4.2 0 0 1-1.87.416q-1.89 0-3.256-1.256v4.983q0 .426-.42.426h-1.24q-.42 0-.42-.426V.827q0-.426.42-.426h.925q.42 0 .483.426l.105.682zm13.194 8.37a4.2 4.2 0 0 0 1.45-.277 5.5 5.5 0 0 0 1.45-.81V6.62q-.526-.127-1.104-.202a9 9 0 0 0-1.124-.075q-2.374 0-2.374 1.853 0 .81.441 1.246t1.261.437m-2.458-7.625-.158.053a.6.6 0 0 1-.179.033q-.273 0-.273-.384V1.38q0-.298.084-.415t.337-.224q.671-.299 1.66-.48.986-.18 1.974-.18 1.995 0 2.942.83.945.831.945 2.577v7.284q0 .426-.42.426h-.903q-.4 0-.463-.405l-.105-.702a5.7 5.7 0 0 1-1.67 1.022 4.9 4.9 0 0 1-1.817.362q-1.513 0-2.395-.863-.883-.862-.883-2.31 0-1.556 1.092-2.481 1.094-.927 2.942-.927 1.177 0 2.647.362V3.852q0-1.15-.504-1.619-.505-.47-1.764-.469-1.472 0-3.09.49zm14.16 10.84q-.568 1.47-1.314 2.109-.744.639-1.943.639-.672 0-1.197-.15a.6.6 0 0 1-.336-.202q-.105-.138-.105-.437V14.5q0-.405.315-.405.105 0 .315.043t.567.043q.799 0 1.24-.384.441-.383.798-1.406l.4-1.086-4.056-10.137q-.146-.361-.146-.511 0-.256.294-.256h1.26q.336 0 .463.106.125.107.251.47l2.942 8.263L99.708.976q.126-.36.252-.469.126-.106.462-.106h1.177q.294 0 .294.256 0 .15-.147.51zM40.15 15.47c-3.761 2.814-9.216 4.31-13.912 4.31-6.583 0-12.51-2.466-16.996-6.572-.352-.322-.038-.763.385-.513 4.84 2.855 10.825 4.574 17.006 4.574 4.17 0 8.753-.877 12.971-2.691.636-.273 1.17.425.547.891"}),a.createElement("path",{fill:"#333e48",d:"M41.717 13.657c-.482-.624-3.181-.296-4.394-.148-.368.044-.425-.281-.093-.517 2.153-1.533 5.682-1.09 6.092-.577.413.518-.108 4.104-2.127 5.816-.31.263-.605.122-.468-.225.455-1.15 1.471-3.724.99-4.349M37.429 2.06V.57A.365.365 0 0 1 37.8.193l6.59-.001c.21 0 .38.155.38.376v1.278c-.003.214-.18.494-.496.938L40.86 7.722c1.267-.03 2.607.163 3.757.818.26.148.33.367.35.582v1.59c0 .218-.237.472-.485.34-2.028-1.077-4.718-1.194-6.96.013-.23.124-.47-.126-.47-.345V9.209c0-.242.005-.656.246-1.024l3.953-5.75H37.81a.37.37 0 0 1-.38-.375M13.4 11.365h-2.005a.38.38 0 0 1-.358-.343L11.038.595a.38.38 0 0 1 .387-.375h1.866a.38.38 0 0 1 .365.35v1.36h.037C14.18.615 15.096 0 16.331 0c1.253 0 2.039.614 2.6 1.93C19.418.615 20.521 0 21.7 0c.842 0 1.758.351 2.32 1.141.635.878.505 2.15.505 3.27l-.002 6.58a.38.38 0 0 1-.387.374h-2.001a.38.38 0 0 1-.36-.374V5.463c0-.438.037-1.535-.056-1.952-.15-.703-.6-.9-1.179-.9-.486 0-.991.33-1.197.855-.206.527-.188 1.405-.188 1.997v5.527a.38.38 0 0 1-.386.375h-2.002a.38.38 0 0 1-.36-.374l-.001-5.528c0-1.163.186-2.874-1.235-2.874-1.44 0-1.384 1.668-1.384 2.874l-.001 5.527a.38.38 0 0 1-.387.375m37.059-9.236c-1.478 0-1.571 2.04-1.571 3.312 0 1.273-.02 3.993 1.552 3.993 1.554 0 1.628-2.194 1.628-3.532 0-.877-.038-1.93-.3-2.764-.224-.724-.673-1.01-1.31-1.01zM50.439 0c2.975 0 4.584 2.59 4.584 5.88 0 3.181-1.777 5.705-4.584 5.705-2.918 0-4.508-2.59-4.508-5.814C45.93 2.523 47.539 0 50.439 0m8.441 11.365h-1.997a.38.38 0 0 1-.36-.374L56.52.561a.38.38 0 0 1 .386-.34L58.764.22c.175.009.32.13.356.291v1.595h.038C59.72.68 60.505 0 61.89 0c.898 0 1.778.329 2.339 1.229.524.834.524 2.237.524 3.247v6.561a.38.38 0 0 1-.385.328H62.36a.38.38 0 0 1-.357-.328V5.376c0-1.141.13-2.809-1.253-2.809-.487 0-.936.33-1.16.834-.281.636-.319 1.272-.319 1.975v5.614a.386.386 0 0 1-.39.375m-24.684.075a.41.41 0 0 1-.473.047c-.665-.56-.785-.82-1.149-1.354-1.1 1.136-1.879 1.477-3.304 1.477-1.687 0-3-1.055-3-3.166 0-1.65.882-2.77 2.138-3.32 1.087-.484 2.606-.572 3.769-.704v-.264c0-.484.037-1.055-.245-1.473-.243-.374-.712-.528-1.124-.528-.765 0-1.444.397-1.611 1.22-.035.183-.167.364-.348.374l-1.943-.214c-.164-.037-.346-.17-.299-.425C27.055.721 29.183 0 31.09 0c.975 0 2.25.263 3.018 1.011.975.924.881 2.155.881 3.497v3.165c0 .952.39 1.37.757 1.882.128.185.156.405-.007.54-.409.348-1.136.988-1.537 1.35zm-2.02-4.953v-.44c-1.45 0-2.98.314-2.98 2.045 0 .88.45 1.473 1.218 1.473.562 0 1.069-.352 1.387-.923.394-.704.376-1.363.376-2.155zM7.926 11.44a.41.41 0 0 1-.473.047c-.667-.56-.786-.82-1.15-1.354C5.204 11.27 4.425 11.61 3 11.61c-1.688 0-3-1.055-3-3.166 0-1.65.88-2.77 2.137-3.32 1.087-.484 2.606-.572 3.768-.704v-.264c0-.484.038-1.055-.243-1.473-.244-.374-.713-.528-1.125-.528-.764 0-1.444.397-1.61 1.22-.036.183-.168.364-.35.374l-1.94-.214c-.165-.037-.347-.17-.3-.425C.783.721 2.911 0 4.818 0c.975 0 2.25.263 3.018 1.011.975.924.882 2.155.882 3.497v3.165c0 .952.39 1.37.756 1.882.128.185.157.405-.006.54a79 79 0 0 0-1.537 1.35zm-2.02-4.953v-.44c-1.45 0-2.982.314-2.982 2.045 0 .88.45 1.473 1.219 1.473.562 0 1.069-.352 1.387-.923.394-.704.375-1.363.375-2.155z"})),rE={AmazonPayClassicButton:"md7D4"};function lE(){const{id:e,currencyCode:t,checkoutPublicAccessToken:n}=(0,P.q)(),r=(0,o.QN)(),l=(0,b.Y)(),i=(0,E.W)(),s=(0,Sn.W)(),{value:d}=(0,I.VS)(),{value:c}=(0,I.Ek)(),u=(0,_e.PW)(),{paymentLines:m,discountLines:p}=(0,ve.C)(),{checkoutSessionIdentifier:f,type:h}=(0,C.Fo)(),[,y]=(0,or.Wc)(),{expressCheckout:{button:{cornerRadius:g}={}}}=(0,bt.kV)();return a.default.createElement("button",{className:_()(rE.AmazonPayClassicButton,(0,ct.Fo)({borderRadius:g})),lang:l,onClick:async()=>{y(sn.R.AmazonPayClassic),await(0,nE.ow)({logger:s,checkoutSessionIdentifier:f,sourceType:h,shopId:e,shopCurrency:t,buyerCurrency:d?.presentmentCurrency,countryCode:d?.countryCode,merchandiseLines:c,hasSellingPlan:u,checkoutPublicAccessToken:n,locale:l,discountLines:r.read(p).value,paymentLines:r.read(m).value})},type:"button","aria-label":i("brand.amazon_pay","Amazon Pay")},a.default.createElement(aE,null))}var oE=n(61086),iE=n(48309),sE=n(19452);const dE={PortableWalletsButton:"i0agh"};function cE({wallet:e}){const t=(0,Sn.W)(),{id:n}=(0,P.q)(),r=(0,C.Fo)(),{value:l}=(0,I.VS)(),{countryCode:i,presentmentCurrency:s}=l??{},d=(0,o.QN)(),c=(0,Op.Y3)(e),u=c?.configurationParams,m=(0,In.b)(),p=function(e,t){if(e===Md.lC.BuyWithPrime)return t.inMemoryAmazonPayParts.bwpButtonStatus;throw new Md.bl(`Unsupported wallet provided:${e}`)}(e,m),{expressCheckout:{button:{cornerRadius:f}={}}}=(0,bt.kV)(),[h,y]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e={status:"not_rendered"};return d.write(p,e),()=>{"rendered"===d.read(p).value.status&&d.write(p,e)}}),[]),(0,a.useEffect)((()=>{if("rendered"===d.read(p).value.status)return;if(!u)return void t.notify(new Md.ET(`[PortableWalletsButton] No config found for: ${e}`));const n=iE.Lr?sE.qU:sE.Vk;(0,oE.k)(n,void 0,!0).then((()=>{y(!0),d.write(p,{status:"rendered"})})).catch((e=>{t.notify(e),d.write(p,{status:"error"})}))}),[p,u,t,d,e]),h?a.default.createElement("shopify-wallet-button",{"wallet-config":JSON.stringify({name:e,wallet_params:u}),"access-token":"abc-123","shop-id":n,"cart-id":r.sourceId,"buyer-country":i??lr.O.Us,"buyer-currency":s??Ou.j.Usd,className:_()(dE.PortableWalletsButton,(0,ct.Fo)({borderRadius:f}))}):null}var uE=n(52089),mE=n(20903),pE=n(19481);const fE=function(){const e=(0,E.W)();return a.default.createElement(Va.a,{open:!0,blocking:!0,accessibilityLabel:e("wallets.payment_in_progress_title","Payment in progress")},a.default.createElement(Hn.a,{spacing:"loose",padding:"large200"},a.default.createElement(fe.D,{level:1},e("wallets.payment_in_progress_title","Payment in progress")),a.default.createElement(jn.E,null,e("wallets.payment_in_progress_body","Your payment is being processed. Your order will be completed soon."))))};function hE({open:e,setOpen:t}){const n=(0,E.W)();return a.default.createElement(Va.a,{open:e,onClose:()=>t(!1),title:n("payment.preview_not_available.title","Preview not available"),padding:!0},a.default.createElement(jn.E,null,n("payment.preview_not_available.content","Don’t worry, this express checkout works for your customers.")),a.default.createElement(h.S,{inlineAlignment:"end"},a.default.createElement(He.$,{onPress:()=>t(!1)},n("payment.preview_not_available.button","Ok"))))}const yE={Header:"UxvQ2",Text:"aHlIb",Layout:"i7LZd",StackWrapper:"lAHfA",SkeletonWrapper:"zYzn1",ButtonWrapper:"A35vI",loading:"_iUlQ",subsequentLoad:"B5oM6",disableIframe:"_BCnl",Stack:"_19K_",ShopPayEmphasis:"lRMEA",DrawerLink:"TMCjZ",InnerDrawerLink:"yQLpY",ShowVenmo:"bVLl7",DrawerHideButtons:"ik0Ix"},gE="express-checkout-wallets-wrapper";function _E({buttonCount:e,venmoStatus:t,children:n,waitUntilLoaded:r=!0,isInCheckoutEditorProfilePreview:l,walletPaymentMethods:o}){const i=(0,vt.Bl)(),s=function(e){const{shopPayEnabled:t}=(0,P.q)(),n=function(e,t=0){const n="undefined"==typeof window?0:window.innerWidth;return n<=279?2:n<=383?e||3===t?3:2:4}(t,e);return e>n}(e),[d,c]=(0,a.useState)(s),[u,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1);(0,a.useLayoutEffect)((()=>{m("not_eligible"!==t?.status&&"rendered"===t?.status)}),[t]);const y=(0,E.W)(),g=(0,Pc.IX)(),[b,v]=(0,or.hr)(),[,C]=(0,pE.k)(),[S]=(0,ld.RT)(),k=(0,or.gC)(),w=!!r&&k,[A,I]=(0,a.useState)(!1),x=(0,_e.PW)(),{id:M,shopPayEnabled:T}=(0,P.q)(),N=(0,uo.M3)(),L=(0,re.g)(),D=(0,X_.nR)();(0,X_.YY)(o,e);const R=(0,a.useCallback)(((t,n)=>{const a=parseInt((0,$t.ee)(M),10),r=(0,X_.JJ)({state:n,shopId:a,nascarData:{...t,walletsRenderedCount:e},paymentMethods:o});L?.record(r)}),[M,L,e,o]),B=xy("failed"===g?.status&&"payment"===g.failure.type&&i?g?.failure:void 0);"failed"===g?.status&&(b!==sn.R.ApplePay&&b!==sn.R.GooglePay&&b!==sn.R.FacebookPay||C(B)),(0,a.useEffect)((()=>{w||A||I(!0)}),[w,A]),(0,a.useEffect)((()=>{"failed"===g?.status&&"payment"===g.failure.type&&N()}),[g,g?.status]),(0,a.useEffect)((()=>function(){v(void 0),C(void 0)}),[]);const F=y("alternative_payment_method_banner.express_checkout","Express checkout"),z="fast"!==(0,Rc.K)("worker-version");return a.default.createElement(a.default.Fragment,null,a.default.createElement(h.S,null,a.default.createElement("div",{className:yE.Container},a.default.createElement("div",{className:_()(yE.Header)},a.default.createElement(uE.M,{className:yE.Text},F)),a.default.createElement("div",{className:_()(yE.StackWrapper)},a.default.createElement("div",{className:yE.Layout},a.default.createElement(EE,{loading:w,hideWallets:d},[...Array(e).keys()].filter(((e,t)=>t<=3)).map((e=>a.default.createElement(gf.E,{key:e,delay:z})))),a.default.createElement("div",{id:gE,className:_()(yE.Stack,yE.ButtonWrapper,{[yE.loading]:w,[yE.subsequentLoad]:w&&A,[yE.DrawerHideButtons]:d,[yE.ShopPayEmphasis]:T,[yE.ShowVenmo]:u,[yE.disableIframe]:l}),onClickCapture:e=>{e.target?.id!==J_&&l&&e.target?.id!==gE&&(e.stopPropagation(),e.preventDefault(),f(!0))}},n)),s&&a.default.createElement("div",{className:yE.DrawerLink},a.default.createElement(J.N,{textDecoration:"none",onPress:()=>{d?(c(!1),R(D,X_.lC.NascarDrawerOpen)):(c(!0),R(D,X_.lC.NascarDrawerClose))},"aria-live":"polite"},a.default.createElement("div",{className:yE.InnerDrawerLink},a.default.createElement(jn.E,null,d?y("alternative_payment_method_banner.show_more_options","Show more options"):y("alternative_payment_method_banner.hide_more_options","Hide more options")),a.default.createElement(Le.In,{source:d?"chevronDown":"chevronUp",display:"inline",size:"extraSmall",appearance:"monochrome"})))),x&&a.default.createElement(Ec,{isForExpressCheckout:!0})))),l&&a.default.createElement(hE,{open:p,setOpen:f}),"payment_cancelled_while_processing"===S?.type&&a.default.createElement(fE,null))}function EE({children:e,loading:t=!1,hideWallets:n}){const{shopPayEnabled:r}=(0,P.q)();return"exited"===(0,mE.p)(t,"base")?null:a.default.createElement("div",{className:_()(yE.Stack,yE.SkeletonWrapper,{[yE.ShopPayEmphasis]:r,[yE.DrawerHideButtons]:n})},e)}const bE={MessageWrapper:"QXKQS"};var vE=n(72999);const CE=e=>e;function SE(){const e=(0,Re.P)("simulated"),t=(0,E.W)(),{walletPaymentMethods:n}=(0,In.b)(),{buttonCount:r,venmoStatus:l}=(0,z_.P)(),i=(0,F_.C)(),s=n.some((e=>e.name===sn.R.PaypalExpress&&e.venmoEnabled)),d=(0,Se.uN)(),c=(0,or.hR)(),[u]=(0,o.fp)(De.XB),m=(0,vE.G)(n),p=(0,kt.w9)("Checkout::Dynamic::Render",B_._.Wallets1),f=!e&&!u;let y=m.map((e=>a.default.createElement(kE,{key:e.name,method:e,triggerProgression:d})));if(i&&s){const e=a.default.createElement(G_.Q,{fundingSource:"venmo",buttonColor:"blue",progressToNextStep:d});y=[...y,e]}const g=c&&0!==m.length?a.default.createElement(a.default.Fragment,null,a.default.createElement(Kn.N,{extensions:p,spacing:"large200",render:CE}),p.length>0&&a.default.createElement(he.S,{spacing:"large200"}),a.default.createElement(_E,{buttonCount:r,venmoStatus:l,waitUntilLoaded:f,isInCheckoutEditorProfilePreview:u,walletPaymentMethods:m},e&&a.default.createElement(h.S,{padding:"large200",cornerRadius:"base",blockAlignment:"center",inlineAlignment:"center",minInlineSize:"fill",className:bE.MessageWrapper},a.default.createElement(jn.E,null,t("payment.simulated_checkout","Preview coming soon"))),!e&&y)):null;return a.default.createElement(a.default.Fragment,null,g)}function kE({method:e,triggerProgression:t}){const n=(0,or._M)();switch(e.name){case sn.R.ApplePay:return a.default.createElement(U_,{supportedNetworks:e.supportedNetworks,color:n});case sn.R.PaypalExpress:return a.default.createElement(G_.Q,{progressToNextStep:t});case sn.R.ShopPay:return a.default.createElement(K_,null);case sn.R.GooglePay:return a.default.createElement(Y_,null);case sn.R.FacebookPay:return a.default.createElement(tE,null);case sn.R.AmazonPayClassic:return a.default.createElement(lE,null);case Md.lC.AmazonPay:return a.default.createElement(W_,null);case Md.lC.BuyWithPrime:return a.default.createElement(cE,{wallet:Md.lC.BuyWithPrime});default:return null}}function wE({padding:e=y.OF.default(["large100","none","large300","none"])}){const t=(0,E.W)()("alternative_payment_method_banner.or","OR");return a.default.createElement(h.S,{padding:e},a.default.createElement(zs.c,null,a.default.createElement(ln.V,{inlineAlignment:"center"},a.default.createElement(jn.E,{appearance:"subdued"},t))))}function PE({textProps:e}){const{name:t}=(0,P.q)(),n=(0,E.W)();return a.default.createElement(jn.E,e,n("payment.markets_pro_disclaimer_label",{markets_pro_terms:a.default.createElement(He.$,{kind:"plain",textDecoration:"none",overlay:a.default.createElement(Va.a,{source:"https://content.global-e.com/shopper-terms",title:n("payment.markets_pro_disclaimer_terms_and_conditions_title","Merchant of Record Terms and Conditions"),padding:!0}),"aria-haspopup":"dialog"},n("payment.markets_pro_disclaimer_terms_and_conditions","Terms and Conditions")),privacy_policy:a.default.createElement(He.$,{kind:"plain",textDecoration:"none",overlay:a.default.createElement(Va.a,{source:"https://content.global-e.com/privacy-policy",title:n("payment.markets_pro_disclaimer_privacy_policy_title","Merchant of Record Privacy Policy"),padding:!0}),"aria-haspopup":"dialog"},n("payment.markets_pro_disclaimer_privacy_policy","Privacy Policy")),shop_name:t},"By clicking below and completing your order, you agree to purchase your item(s) from Global-e as merchant of record for this transaction, on Global-e's %{markets_pro_terms} and %{privacy_policy}. Global-e is an international fulfilment service provider to %{shop_name}"))}var AE=n(27922);const IE=(0,Ge.m)({load:()=>n.e(173).then(n.bind(n,98263)),id:()=>98263});var xE=n(53637);function ME({localizationExtension:e,index:t}){const n=(0,Ie.NX)(),[,r]=(0,o.fp)(n),l=(0,Ie.j8)(e.fields.value,n),i=(0,o.md)(e.fields.title);return(0,p.od)((e=>{if("error"!==e.type)return;const{violations:n}=e;for(const a of n){if("UnprocessableTermViolation"!==a.__typename)continue;const{code:e,localizedMessage:n,nonLocalizedMessage:l,target:o}=a,i=n??l;e===Pe.X.LocalizationExtensionFieldError&&o===`$.localizationExtension[${t}]`&&r(i)}})),a.default.createElement(Br.A_,(0,ye.A)({},l,{name:i,label:i,value:l.value??void 0}))}var TE=n(42856),NE=n(19011),LE=n(76035);const DE="RememberMeCheckbox";function RE(){const e=(0,E.W)(),{record:t}=(0,oe.v)(),{value:n}=(0,I.VS)(),{value:r}=(0,I.rr)(),{value:l}=(0,I.CL)(),[i,s]=(0,o.fp)((0,ve.C)().shopPayArtifact),{shopPayOptInPhone:d}=n||{},[c,u]=(0,a.useState)([]),[m,p]=(0,a.useState)(i?.optIn?.vaultPhone||d||"");(0,a.useEffect)((()=>{u(i?[DE]:[])}),[i]),(0,a.useEffect)((()=>{t({schemaId:"shopify_pay_user_optin_ui_impression/1.0",payload:{elementType:"remember_me_box",source:"order_created"}})}),[t]);const f=l?.countryCode||r?.countryCode||n?.countryCode||"",h=(0,a.useRef)(m);return a.default.createElement(Hn.a,{spacing:"small200"},a.default.createElement(ma.m,{allowMultiple:!0,id:"RememberMe",onChange:function(e){u(e);const n=e.includes(DE),a=i?.optIn?.vaultPhone||d||m;p(a),s(n?{optIn:{vaultPhone:a,optInSource:Sd.RememberMe}}:void 0),t({schemaId:"shopify_pay_user_optin_ui_interaction/3.0",payload:{action:n?"click_remember_me_box":"unclick_remember_me_box",phoneNumber:a,source:"order_created"}})},selectedItems:c},a.default.createElement(on.c$,{id:DE,label:e("shop_pay_remember_me.label","Save my information for a faster checkout"),details:a.default.createElement(pa.g,{controlledBy:DE},a.default.createElement(Hn.a,null,a.default.createElement(Ke.P,{countryCode:f,label:e("shop_pay_remember_me.mobile_phone_number","Mobile phone number"),value:m,icon:"mobile",prefillCountryCode:Boolean(f),onInputValueChange:function(e){p(e),s({optIn:{vaultPhone:e,optInSource:Sd.RememberMe}})},onBlur:()=>{m!==h.current&&(h.current=m,t({schemaId:"shopify_pay_user_optin_ui_interaction/3.0",payload:{action:"update_phone_input",phoneNumber:m,source:"order_created"}}))}}),a.default.createElement(LE.x,{link:null}),c.includes(DE)?a.default.createElement(NE.H,null):null))})))}var BE=n(94275);function FE({showSmsMarketingOptIn:e=!1}){const t=(0,kt.w9)("Checkout::Contact::RenderAfter"),n=(0,kt.w9)("Checkout::Dynamic::Render",B_._.Information1),r=(0,kt.w9)("Checkout::Dynamic::Render",B_._.Information2),{ContactForm:l}=rr();return a.default.createElement(a.default.Fragment,null,n.length?a.default.createElement(a.default.Fragment,null,a.default.createElement(Kn.N,{extensions:n,spacing:"base"}),a.default.createElement(he.S,{spacing:"large300"})):null,a.default.createElement(ao.y,{impressionType:"contact",impressionFeatures:[]},a.default.createElement(l,{showSmsMarketingOptIn:e}),t.length?a.default.createElement(a.default.Fragment,null,a.default.createElement(he.S,null),a.default.createElement(Kn.N,{extensions:t})):null,r.length?a.default.createElement(a.default.Fragment,null,a.default.createElement(he.S,{spacing:"large300"}),a.default.createElement(Kn.N,{extensions:r,spacing:"large200"})):null))}var zE=n(78741),VE=n(28838),OE=n(519);const WE=new VE.hF(0,0,100);function qE(){const e=(0,ve.C)(),t=(0,o.md)(e.email),n=(0,o.md)(e.phone),r=(0,E.W)(),{isOrderEditCheckout:i}=(0,cc.S)(),s=(0,Se.Ji)(),d=function(){const{email:e,shippingAddress:{fields:{firstName:t}}}=(0,ve.C)(),n=(0,o.md)(e),a=(0,o.md)(t);return n?a?`${a} · ${n}`:n:""}(),c=Fe(),[u,m]=(0,a.useState)(!1),[p]=(0,ra.$_)(),f="customerAccount"===p&&t&&"string"==typeof t&&c,h=(0,vt.jK)({foregroundColor:ie.ui}),y=(0,vt.jK)({foregroundColor:WE}),{currentUrl:g}=(0,l.r)();let _;_=h?"branded":y?"white":"black";const b=(0,ra.VH)({shopPay:(0,ie.Mx)(g.search)?a.default.createElement(fe.D,{level:1},r("shop_pay.checkout.your_details","Your details")):a.default.createElement(op.C,{color:_}),payPal:a.default.createElement(ad.T,{wallet:s?"venmo":"payPal"}),googlePay:a.default.createElement(ad.T,{wallet:"googlePay",size:"small"}),amazonPay:a.default.createElement(ad.T,{wallet:"amazonPay"}),buyWithPrime:a.default.createElement(ad.T,{wallet:"buyWithPrime",size:"large"})}),{VaultedContact:v}=rr(),C=(0,ra.VH)({amazonPay:d||a.default.createElement(Ha.r,null),buyWithPrime:d||a.default.createElement(Ha.r,null)})??t;if(i&&"businessCustomer"!==p){const e=t||n;return a.default.createElement(za.pp,{id:"contact",label:r("contact.contact_method_title","Contact"),summary:e?a.default.createElement("p",null,e):a.default.createElement(Ha.r,null)})}return a.default.createElement(a.default.Fragment,null,a.default.createElement(v,{phone:n,emailAddress:C,label:r("customer_account.rollup_label","Account"),logo:b}),f&&a.default.createElement(OE.default,{email:t,open:u,showPopover:e=>{m(e)}}))}function $E(){const e=(0,E.W)(),t=(0,is.Jj)(),n=(0,$n.a)(),a=(0,Cp.l)(),r=t.config?.availableLoanTypes,l=t.chargeAmount?n(t.chargeAmount,{currency:t.currencyCode,form:"short"}):void 0,{payNowLabel:o,payNowSubtitle:i}={payNowLabel:e("shop_pay.pay_now","Pay now"),payNowSubtitle:e("shop_pay.pay_now_subtitle","Pay the entire amount today")},s=!t.unavailable&&l&&r&&0!==r.length?r.includes(p_.C.ZeroPercent)?e("shop_pay.pay_in_installments.only_interest","Pay in monthly installments"):r.includes(p_.C.Interest)&&r.includes(p_.C.SplitPay)?e("shop_pay.pay_in_installments.all","Pay in installments"):r.includes(p_.C.Interest)?e("shop_pay.pay_in_installments.only_interest","Pay in monthly installments"):e("shop_pay.pay_in_installments.only_split_pay",{amount:l},"Pay in 4 installments of %{amount}"):e("shop_pay.pay_in_installments_no_amount","Pay in 4 installments"),d=r&&l&&0!==r.length?r.includes(p_.C.ZeroPercent)?e("shop_pay.pay_in_installments_subtitle.interest","You'll choose your plan on another step"):r.includes(p_.C.Interest)&&r.includes(p_.C.SplitPay)?e("shop_pay.pay_in_installments_subtitle.all",{amount:l},"Starting at %{amount} / 2 weeks with no interest"):r.includes(p_.C.Interest)?e("shop_pay.pay_in_installments_subtitle.interest","You'll choose your plan on another step"):e("shop_pay.pay_in_installments_subtitle.split_pay","Pay every 2 weeks with no interest or fees"):e("shop_pay.pay_in_installments_subtitle.split_pay","Pay every 2 weeks with no interest or fees");return{payNowLabel:o,payNowSubtitle:i,installmentsLabel:s,installmentsSubtitle:d,summary:a===sn.R.ShopPay?`${o} - ${i}`:`${s} - ${d}`}}function UE(){const{payNowLabel:e,payNowSubtitle:t}=$E();return a.default.createElement(h.S,null,a.default.createElement(ln.V,null,e),a.default.createElement(ln.V,{appearance:"subdued"},t))}function HE(){const e=(0,is.Jj)(),{installmentsLabel:t,installmentsSubtitle:n}=$E();return a.default.createElement(h.S,null,a.default.createElement(ln.V,{appearance:e.unavailable&&!e.retryable?"subdued":void 0},t),a.default.createElement(ln.V,{appearance:"subdued"},n))}function jE({ineligibilityReason:e=""}){const t=(0,E.W)(),{recordImmediately:n}=(0,oe.v)(),r=(0,is.Jj)(),[l,i]=(0,o.fp)(xe.D.paymentMethod),s=(0,Cp.l)(),d=(0,x.sG)(),{recordRetailEvent:c}=(0,x.MD)(),{negotiate:u}=(0,p.T4)(),[m,f]=(0,a.useState)(!1),y=(0,a.useCallback)((async()=>{m||(f(!0),await u(void 0,{progression:!1,force:!1,fieldsToResolve:["taxes","paymentMethods"],include:["paymentLines"],customizeNegotiation:e=>(e.payment?.paymentLines.push({amount:{any:!0},paymentMethod:{walletPaymentMethodConfig:{name:sn.R.ShopifyInstallments}}}),e)}))}),[u,m]);(0,a.useEffect)((()=>{s===sn.R.ShopifyInstallments&&y()}),[y,s]);const g=(0,a.useCallback)((e=>{const t=r.config?.availableLoanTypes,{action:a,method:l}=function({paymentMethodName:e,availableLoanTypes:t}){if(e===sn.R.ShopPay)return{action:YE.PayNow,method:{type:"wallet",name:sn.R.ShopPay}};const n={type:"wallet",name:sn.R.ShopifyInstallments};return(0,fd.dx)(t)?{action:YE.PayInterestInstallments,method:n}:{action:YE.PayMethodInstallments,method:n}}({paymentMethodName:e[0],availableLoanTypes:t});i(l),d&&c(a),n({schemaId:le.$D.PayPaymentPageUiInteraction,payload:{action:a}})}),[r.config?.availableLoanTypes,d,n,i,c]);return a.default.createElement(a.default.Fragment,null,r.unavailable&&!r.retryable&&a.default.createElement(h.S,null,a.default.createElement(Sp,{title:t("shop_pay.checkout.payment.payment_option.installments_unavailable","Installments unavailable"),ineligibilityReason:e}),a.default.createElement(he.S,null)),a.default.createElement(cn.Wd,{id:"payment_method_options",onChange:g,selectedItems:l?[l.name]:[],forceList:"choice"},a.default.createElement(cn.wC,{id:sn.R.ShopPay,forceList:"choice"},a.default.createElement(UE,null)),a.default.createElement(cn.wC,{id:sn.R.ShopifyInstallments,disabled:r.unavailable&&!r.retryable,forceList:"choice"},a.default.createElement(HE,null))))}var YE=function(e){return e.PayNow="payment_method_pay_now",e.PayInterestInstallments="payment_method_interest_bearing_installments",e.PayMethodInstallments="payment_method_installments",e}(YE||{});function GE({useRollup:e=!0}){const t=(0,E.W)(),{recordImmediately:n}=(0,oe.v)(),r=(0,is.Jj)(),[l,i]=(0,a.useState)(!1),{summary:s}=$E(),[d,c]=(0,o.fp)(xe.D.paymentMethod),u=(0,is.nN)(),m=(0,Cp.l)(),p=r.config?.availableLoanTypes,f=a.default.useRef(),{spiPreselected:h}=(0,is.Zo)(),{recordRetailEvent:y}=(0,x.MD)();(0,a.useEffect)((()=>{u&&!r.retryable&&m===sn.R.ShopifyInstallments&&c({type:"wallet",name:sn.R.ShopPay})}),[r.retryable,u,m,c]),(0,a.useEffect)((()=>{r.unavailable||(r.isPointOfSale||i(!0),h&&c({type:"wallet",name:sn.R.ShopifyInstallments}))}),[r.unavailable,c,r.isPointOfSale,h]),(0,a.useEffect)((()=>{r.isPointOfSale&&(r.unavailable?y("default_payment_method_pay_now"):y("default_payment_method_installments"))}),[r.unavailable,r.isPointOfSale,y]),(0,a.useEffect)((()=>{(r.unavailable||JSON.stringify(f.current)!==JSON.stringify(p))&&!r.unavailable&&p&&(n({schemaId:le.$D.PayPaymentPageInstallments,payload:{eventType:m_.R.InterestEligibility,success:(0,fd.eu)(p),errorMessage:(0,fd.eu)(p)?void 0:JSON.stringify(["amount"])}}),n({schemaId:le.$D.PayPaymentPageInstallments,payload:{eventType:m_.R.SplitPayEligibility,success:Boolean(p.includes(p_.C.SplitPay)),errorMessage:p.includes(p_.C.SplitPay)?void 0:JSON.stringify(["amount"])}}),f.current=p)}),[p,r.unavailable,n]);const g=(0,a.useCallback)((()=>i((e=>!e))),[]);return e?a.default.createElement(za.pp,{open:l,id:"payment_option",label:t("shop_pay.checkout.payment.payment_option.title","Payment option"),summary:s,onToggle:g},a.default.createElement(jE,{ineligibilityReason:u})):a.default.createElement(jE,{ineligibilityReason:u})}function XE({useRollup:e=!0}){const t=(0,ra.VH)({shopPay:GE})??a.default.Fragment;return a.default.createElement(t,{useRollup:e})}const ZE={DivideChildren:"kfn9Y","DivideChildren--no-final-divider":"gAsqs"};function QE(){const e=(0,ra.R4)(),{negotiate:t}=(0,p.T4)(),n=(0,ra.Gy)(),{isOrderEditCheckout:r}=(0,cc.S)(),{shippingRequired:l}=(0,_e.kG)(),{shippingRequired:o}=(0,dc.D)(),i=r&&o,s=(0,is.Jj)(),{CashRedemption:d,VaultedPayment:c,ReviewNotice:u,VaultedDelivery:m,VaultedBillingAddress:y}=rr(),g=(0,Xp.bo)(),_=(0,f.t)({base:!0,small:!1}),E=(0,f.t)({base:!0,medium:!1}),b=(0,Xp.Ho)(),v=(0,ra.rS)("businessCustomer",e.payment&&!E,!1),C=e.delivery&&(l||i&&r),S="businessCustomer"===n&&!l,k=[...e.contact?[a.default.createElement(qE,{key:"contact"})]:[],...C?[a.default.createElement(m,{key:"delivery"})]:[],...function(){if(r)return e.payment?[a.default.createElement(c,{key:"payment"})]:[];const t=[];return S&&t.push(a.default.createElement(y,{key:"businessCustomerBilling"})),e.payment&&("shopPay"===n&&s.supported&&t.push(a.default.createElement(XE,{key:"paymentOption"})),t.push(a.default.createElement(c,{key:"payment"})),e.billing&&!S&&t.push(a.default.createElement(y,{key:"billingAddress"})),"shopPay"===n&&t.push(a.default.createElement(d,{key:"cashRedemption",source:Dc.Vaulted,vaultedMethods:e.payment}))),t}()];return(0,a.useEffect)((()=>{k.length>0&&t(void 0,{silenceValidations:!0,silenceViolations:["all"]})}),[]),0===k.length?null:a.default.createElement(h.S,null,b?a.default.createElement(zE.T,null):null,!E&&b?a.default.createElement(he.S,{spacing:"large100"}):null,g&&a.default.createElement(u,null),a.default.createElement("div",{className:`${ZE.DivideChildren} ${_||v?ZE["DivideChildren--no-final-divider"]:""}`},k))}function JE(){const e=(0,E.W)(),t=(0,Ir.N)(),n=_h(),{locationCount:r,selectedCompanyLocation:l}=t??{},o=l?.name;return(r||0)>1?a.default.createElement(Qn.xA,{columns:y.OF.default(["1fr"]).when({viewportInlineSize:{min:"small"}},["fill","auto"]),spacing:y.OF.when({viewportInlineSize:{min:"small"}},"base"),blockAlignment:y.OF.when({viewportInlineSize:{min:"small"}},"center"),inlineAlignment:y.OF.when({viewportInlineSize:{min:"small"}},"start")},a.default.createElement(fe.D,{level:1},o?e("contact.ship_to_company",{companyName:o},"Ship to {{companyName}}"):e("shipping.title","Delivery")),n&&a.default.createElement(Eh,null)):a.default.createElement(fe.D,{level:1},e("shipping.title","Delivery"))}var KE=n(90746);function eb(){const e=(0,E.W)(),{getCookie:t}=(0,de.GH)(),[n,r]=(0,a.useState)((()=>"true"===t(KE.c5))),l=(0,I.rZ)(),{shopPayEnabled:o}=(0,P.q)(),i=Boolean(l),s=!o&&!i,d=(0,a.useCallback)((e=>{r(e)}),[r]);return(0,a.useEffect)((()=>{(n?KE.Mx:KE.F_)()}),[n]),s?a.default.createElement(_i.S,{id:"save_shipping_information",name:"save_shipping_information",checked:n,onChange:d},e("customer_account.save_my_information_label","Save this information for next time")):null}function tb(){const e=(0,E.W)()("contact.delivery_option_title","Delivery method"),t=(0,Qt.E1)(),n=(0,vt.Bl)();return t?a.default.createElement(cm.w,{accessibilityLabel:e},a.default.createElement(Hn.a,null,n?null:a.default.createElement(fe.D,null,e),t)):null}var nb=n(74654);function ab({showSmsMarketingOptIn:e=!1}){return kh(),a.default.createElement(Hn.a,{spacing:"large300"},a.default.createElement(tb,null),a.default.createElement(lb,{showSmsMarketingOptIn:e}))}const rb=e=>a.default.createElement(cm.w,null,e);function lb({showSmsMarketingOptIn:e}){const{method:t}=(0,Qt.iz)(),n=(0,E.W)(),r=n("shipping.shipping_method_notice"," "),{activeWalletSessionAtom:l}=(0,In.b)(),{value:i}=(0,I.i0)(),s=(0,Kt.x1)(),d=(0,kt.w9)("Checkout::DeliveryAddress::RenderBefore"),c=(0,kt.w9)("purchase.checkout.delivery-address.render-after"),{hasMultipleDeliveryGroups:u,onlyDeliveryGroupId:m}=(0,Zp.L)(),{extensionsBefore:f,extensionsAfter:h}=(0,Zp.C)({hasMultipleDeliveryGroups:u,targeted:!1}),y=(0,X.y7)(),g=(0,G._p)(),{negotiate:_}=(0,p.T4)(),b=(0,o.QN)(),v=(0,a.useCallback)((({shipping:e})=>{b.read(l).value||_(void 0,{include:["shippingAddress"],fieldsToResolve:["deliveryNext"],silenceValidations:!0,silenceViolations:["all"]}),b.write(e,!0),y("sectionComplete",{section:"deliveryAddress",timestamp:new Date}),g({type:"section_complete",section:"deliveryAddress"})}),[b,l,_,y,g]),C=(0,a.useCallback)((({shipping:e})=>{b.write(e,!1)}),[b]),S=e?a.default.createElement(ep,null):null;switch(t){case Gt.y.PickupPoint:return a.default.createElement(a.default.Fragment,null,a.default.createElement(un.X,{sectionId:"pickupPoints"},a.default.createElement(og,null)),S);case Gt.y.PickUp:return a.default.createElement(a.default.Fragment,null,a.default.createElement(un.X,{sectionId:"localPickup"},a.default.createElement(Bh,null)),S);default:return a.default.createElement(un.X,{sectionId:"shipping"},a.default.createElement(cm.w,{accessibilityLabel:n("delivery_options.shipping_address","Shipping address")},a.default.createElement(Hn.a,{spacing:"base"},a.default.createElement(Kn.N,{extensions:d}),a.default.createElement(Hn.a,{spacing:"large300"},a.default.createElement(xr.H,null,a.default.createElement(Um,{onValid:v,onInvalid:C},a.default.createElement(lo,null,a.default.createElement(eb,null),S))),a.default.createElement(Kn.N,{extensions:c}),a.default.createElement(Hn.a,{spacing:s?"tight":"base"},a.default.createElement(fe.D,{level:2},n("shipping.shipping_method_title","Shipping method")),a.default.createElement(mt.y,null," "===r?null:a.default.createElement(ln.V,null,r),a.default.createElement(Kn.N,{extensions:f,options:{deliveryGroupId:m},render:rb}),a.default.createElement(nb.x,null,a.default.createElement(kf,null)),a.default.createElement(Kn.N,{extensions:h,options:{deliveryGroupId:m},render:rb})))))),i?.refuseDutiesPermitted&&a.default.createElement(cm.w,{accessibilityLabel:n("shipping.duties_and_taxes_title","Duties and taxes")},a.default.createElement(Hn.a,{spacing:"base"},a.default.createElement(fe.D,{level:2},n("shipping.duties_and_taxes_title","Duties and taxes")),a.default.createElement(jh,null))))}}function ob({showSmsMarketingOptIn:e=!1}){const{NoticeBanners:t}=rr(),n=(0,kt.w9)("Checkout::Dynamic::Render",B_._.Delivery1);return a.default.createElement(H.wn,null,a.default.createElement(Hn.a,null,a.default.createElement(ib,null),a.default.createElement(t,{section:"delivery"}),a.default.createElement(Cn,null,a.default.createElement(ab,{showSmsMarketingOptIn:e})),a.default.createElement(Kn.N,{extensions:n})))}function ib(){const e=(0,E.W)(),t=pc(),n=(0,ra.VH)({businessCustomer:a.default.createElement(JE,null)})??a.default.createElement(fe.D,{level:1},e("shipping.title","Delivery"));return a.default.createElement(Hn.a,{spacing:"small400"},n,t&&a.default.createElement(ln.V,{appearance:"subdued"},e("shipping.shipping_used_as_billing_notice","This will also be used as your billing address for this order.")))}function sb(){const e=(0,E.W)(),{acceptTipPayments:t}=(0,P.q)(),n=(0,BE.r)(),r=(0,o.md)(xe.D.creditCards),{paymentMethodMustSupportInterestBearingLoans:l}=(0,is.Jj)(),{creditCardDisabled:i}=(0,vp.w)(),{shopifyInstallments:s}=(0,_e.GH)(),d=l&&r.every((e=>i(e)));ug();const c=mc(),u=(0,ra.VH)({shopPay:d?Ag:fc})??fc,m=(0,ra.VH)({shopPay:db})??a.default.Fragment,p=(0,_e.OL)(),{Tips:f,PurchaseOrderNumberField:h,GiftCardRedemption:y,StoreCreditRedemption:g}=rr(),{isOrderEditCheckout:_}=(0,cc.S)(),b=!_&&t,v=(0,ra.rS)("shopPay",b&&!s(),b),C=function({showTips:e,billingFormPosition:t}){const n=(0,kt.w9)("Checkout::Dynamic::Render",B_._.Payment1),a=(0,kt.w9)("Checkout::Dynamic::Render",B_._.Payment2),r=(0,kt.w9)("Checkout::Dynamic::Render",B_._.Payment3),l=(0,kt.w9)("Checkout::Dynamic::Render",B_._.Payment4),o="inContext"===t?[[],n,a]:[a,n];return e?(o.push(r),"afterPayment"===t&&o.push(l),o):("afterPayment"===t&&o.push(r),o)}({showTips:v,billingFormPosition:c}),S=(0,kt.w9)("purchase.checkout.payment-method-list.render-before"),k=(0,kt.w9)("purchase.checkout.payment-method-list.render-after");return a.default.createElement(Hn.a,null,a.default.createElement(ub,null),a.default.createElement(Kn.N,{extensions:S}),a.default.createElement(Tg,null),a.default.createElement(g,null),a.default.createElement(m,null),a.default.createElement(Hn.a,{spacing:"large400"},a.default.createElement(cb,{dynamicPaymentExtensions:C.shift()||[]},a.default.createElement(u,null),a.default.createElement(Kn.N,{extensions:k}),a.default.createElement(Kn.N,{extensions:C.shift()||[]}),a.default.createElement(y,null)),p&&a.default.createElement(Ei,null),a.default.createElement(h,{showHeading:!1})),v&&a.default.createElement(a.default.Fragment,null,a.default.createElement(un.X,{sectionId:"tips"},a.default.createElement(f,null)),a.default.createElement(Kn.N,{extensions:C.shift()||[]})),n&&a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(he.S,{spacing:"small100"}),a.default.createElement(fe.D,{level:2},e("shop_pay_remember_me.title","Remember me")),a.default.createElement(he.S,null),a.default.createElement(un.X,{sectionId:"rememberMe"},a.default.createElement(RE,null))),a.default.createElement(Kn.N,{extensions:C.flat()}))}function db(){return(0,is.Jj)().supported?a.default.createElement(XE,{useRollup:!1}):null}function cb({dynamicPaymentExtensions:e=[],children:t}){const n=(0,E.W)(),r=mc(),l=pc(),{BillingAddressSelector:o}=rr();return a.default.createElement(Hn.a,{spacing:"large500"},"beforePayment"!==r||l?null:a.default.createElement(Hn.a,null,a.default.createElement(fe.D,{level:2},n("payment.billing_address_title","Billing address")),a.default.createElement(o,null)),t,"afterPayment"===r?a.default.createElement(a.default.Fragment,null,l?null:a.default.createElement(Hn.a,null,a.default.createElement(fe.D,{level:2},n("payment.billing_address_title","Billing address")),a.default.createElement(o,null)),a.default.createElement(Kn.N,{extensions:e})):null)}function ub(){const e=(0,E.W)(),t=pc()?`${e("payment.billing_must_match_shipping_notice","Your payment method’s billing address must match the shipping address.")} `:"",n=e("payment.card_security_notice","All transactions are secure and encrypted.");return a.default.createElement(Hn.a,{spacing:"small400"},a.default.createElement(fe.D,{level:1},e("payment.title","Payment")),a.default.createElement(ln.V,{appearance:"subdued"},t+n))}var mb=n(45203);const pb={MaybeSection:"KO0sE",BlockStackContainer:"l16E3"};function fb({vaultedSections:e}){const t=(0,kt.w9)("Checkout::Contact::RenderAfter"),n=e.contact&&e.payment&&e.delivery&&t.length>0,r=(0,or.hR)();let l=[(0,kt.w9)("Checkout::Dynamic::Render",B_._.Wallets1),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Information1),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Information2),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Information3),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Delivery1),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Delivery2),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Payment1),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Payment2),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Payment3),(0,kt.w9)("Checkout::Dynamic::Render",B_._.Payment4)].reduce(((e,t)=>e.concat(t)),[]);return l=l.filter((t=>!(r&&mb.Kv.includes(t.placementReference)||!e.contact&&mb._j.includes(t.placementReference)||!e.delivery&&mb.Uc.includes(t.placementReference)||!e.payment&&mb._N.includes(t.placementReference)))),l.length>0||n?a.default.createElement("div",{className:pb.MaybeSection},a.default.createElement(H.wn,null,a.default.createElement(Hn.a,{id:pb.BlockStackContainer},n&&a.default.createElement(Kn.N,{extensions:t}),a.default.createElement(Kn.N,{extensions:l})))):null}var hb=n(357);function yb(){const{label:e,to:t,onPress:n}=(0,kl.Q)(),{progressing:r}=(0,p.T4)(),l=(0,a.useCallback)((()=>{r||n?.()}),[r,n]),o=r?void 0:t;return a.default.createElement(J.N,{to:o,onPress:l},e)}var gb=n(18009);function _b(){const{label:e,to:t,onPress:n}=function(){const{persistedPayPalAtom:e}=(0,In.b)(),[,t]=(0,o.fp)(e),[,n]=(0,Se.c5)(),r=(0,a.useCallback)((async()=>{t({isVenmo:!1}),n({status:"not_connected"})}),[n,t]);return(0,gb.A)({onPress:r,shouldResetCustomerInfo:!0})}();return a.default.createElement(J.N,{to:t,onPress:n},e)}function Eb(){const{label:e,to:t,onPress:n}=(0,kc.L)();return a.default.createElement(J.N,{to:t,onPress:n},e)}var bb=n(14368);function vb(){const{label:e,to:t,onPress:n}=(0,bb._)();return a.default.createElement(J.N,{to:t,onPress:n},e)}class Cb extends Error{constructor(...e){super(...e),this.name="BuyWithPrimeCheckoutAsGuestError"}}function Sb(){const e=(0,E.W)()("wallets.return_to_store","Return to store"),t=(0,Sn.W)(),{value:n=[]}=(0,I.OL)(),r=n.find((({key:e})=>"productPageUrl"===e))?.value;return r?a.default.createElement(J.N,{to:r},e):(t.notify(new Cb("Error on rendering return to product page due to productPageUrl being undefined")),null)}function kb(){return(0,zr.a)(Vr.VE)?a.default.createElement(wb,null):a.default.createElement(Sb,null)}function wb(){const{label:e,to:t,onPress:n}=function(){const{interfaceFlow:e,externalDeliveryIds:t}=(0,ve.C)(),[,n]=(0,o.fp)(t),[,r]=(0,o.fp)(e),[,l]=(0,Zt.WS)(),i=(0,a.useCallback)((()=>{r(void 0),l(void 0),n(void 0)}),[l,r,n]);return(0,gb.A)({onPress:i,shouldResetCustomerInfo:!0})}();return a.default.createElement(J.N,{to:t,onPress:n},e)}var Pb=n(19162),Ab=n(94740);function Ib(){const{label:e,onPress:t}=function(){const e=(0,E.W)(),{negotiate:t}=(0,p.T4)(),{dispatch:n}=(0,nr.i)(Jt.G),r=function(){const e=(0,ra.VL)(Ey.B),t=(0,ve.C)(),n=(0,o.QN)(),r=(0,o.md)(t.shippingAddress),l=(0,o.md)(t.billingAddress),i=(0,Ab.L)(),s=(0,uo.J8)();return(0,a.useCallback)((()=>{e(),n.write(t.email,""),n.write(t.shippingAddress,i(r)),n.write(t.billingAddress,i(l)),s()}),[e,n,t.email,t.shippingAddress,t.billingAddress,i,r,l,s])}(),l=(0,Pb.L)(),i=e("checkout_sdk.use_another_payment_method","Use another payment method");return(0,a.useMemo)((()=>({label:i,onPress:async()=>{n("addressReset"),r(),l(),await t(void 0,{silenceValidations:!0,silenceViolations:["non-stock"],onComplete(){n("reset")}})}})),[l,r,n,i,t])}(),{progressing:n}=(0,p.T4)(),r=(0,a.useCallback)((()=>{n||t?.()}),[n,t]);return a.default.createElement(J.N,{to:void 0,onPress:r},e)}function xb(){const e=(0,da.r)(),t=(0,K.ts)(),{currentUrl:n}=(0,l.r)(),r=(0,ra.Gy)(),o=(0,ra.VH)({googlePay:Eb,shopPay:t||!e&&!(0,ie.Mx)(n.search)?yb:null,payPal:_b,amazonPay:vb,buyWithPrime:kb,externalVault:Ib}),i=(0,f.t)({base:!1,medium:!0});return o?a.default.createElement(Mb,{showExtraTopSpacing:!t&&"payPal"===r,showExtraBottomSpacing:t||i},a.default.createElement(o,null)):null}const Mb=({children:e,showExtraTopSpacing:t,showExtraBottomSpacing:n})=>a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(he.S,{spacing:"base"}),a.default.createElement(he.S,{spacing:"large100"}),a.default.createElement(h.S,{inlineAlignment:"center"},e),n&&a.default.createElement(he.S,{spacing:"base"}));function Tb(){const e=(0,E.W)(),{availableDeliveryMethodsLoading:t,progressiveShippingRatesLoading:n}=ff(),r=t&&!n,{selectedDeliveryMethod:l}=hf({onChange:()=>{},prerequisitesLoading:t||r}),o=l?e("order_summary.updated_shipping_method",{shipping_method:l.title},"Updated shipping method: %{shipping_method}"):void 0;return(0,a.useEffect)((()=>{if(o)return(0,qn.u)({content:o})}),[o]),null}function Nb(){return(0,Zt.qj)(Yt.z.OneTimePurchase)?a.default.createElement(Tb,null):null}function Lb(){const e=(0,o.md)((0,ve.C)().email),{progress:t}=(0,p.T4)(),{shippingRequired:n}=(0,_e.kG)(),r=(0,ra.R4)(),l=(0,ra.Gy)(),i=(0,_e.PW)(),s=function(){const{value:e}=(0,I.ef)();return Boolean(e)}(),{postPurchaseEnabled:d}=(0,xE.H)(),c=(0,E.W)(),u=(0,da.r)(),m=(0,I.oB)(),{shopifyInstallments:h}=(0,_e.GH)(),{isOrderEditCheckout:g}=(0,cc.S)(),{currentDetour:_}=(0,p.Wm)(),b=(0,zr.a)(Vr.hD),{acceptTipPayments:v,merchantPolicies:C,emailMarketing:S,smsMarketing:k}=(0,P.q)(),w=(0,TE.KE)(),A=(0,X.y7)(),x=(0,Xp.bo)(),M=S!==Om.N.Off,T=(0,_e.Vk)(),N=(0,BE.r)(),{value:D}=(0,I.VS)(),R=(0,zr.a)(Vr.Ry),B=w.hasViolation&&w.lineItems.length>0;!function(){const{negotiate:e}=(0,p.T4)(),t=(0,I.VS)(),n=(0,ve.C)(),r=(0,o.md)(n.shippingAddress),l=(0,o.md)(n.billingAddress),i=(0,Di.ot)(),{value:s=[]}=(0,I.JZ)(),d=(0,f_.xf)(s),c=(0,f_.BF)(s),{shippingRequired:u}=(0,_e.kG)(),m=u?r.countryCode:l.countryCode,f=t?.value?.countryCode,h=JSON.stringify(t?.value,((e,t)=>void 0===t?null:t));(0,a.useEffect)((()=>{d||c||f&&m!==f&&(i.incrementCounter("country_code_mismatch",1),i.log(Ti.$.Warn,"[EnsureBackAndFrontEndCountryCodeAlignment] There was a mismatch between the preselected and the buyerIdentity countryCode on checkout load.",{selectedCountryCode:m,buyerIdentityCountryCode:f,buyerIdentity:h}),e(void 0,{silenceValidations:!0,silenceViolations:["all"],progression:!1}))}),[])}(),(0,a.useEffect)((()=>{B&&A("inventoryPriceChange",{element:{tagName:"modal"},timestamp:new Date,visible:!0})}),[B,A]);const F=(0,a.useCallback)((()=>{w.updateProposal()}),[w]),z=(0,o.md)((0,ve.C)().localizationExtensions),V=z.length>0,O=C?.find((e=>"subscription-policy"===e.handle)),W=(0,f.t)({base:!0,medium:!1}),q=(0,f.t)({base:!1,small:!0}),$=(0,or.hR)(),Y=(0,In.b)()?.walletPaymentMethods.length>0,G=[Ey.B,"customerAccount","sdkCartHints","externalVault"],Z=!g&&G.includes(l)&&$&&Y,J=Object.values(r).some((e=>e)),K=r.payment&&v,ee=(0,ra.rS)("shopPay",K&&!h(),K),te=null!=O,ne=(0,a.useMemo)((()=>b&&"thankYou"===_?.type?"Checkout::ThankYou::Dynamic::Render":"Checkout::Dynamic::Render"),[_?.type,b]),ae=(0,kt.w9)(ne,B_._.OrderSummary4),re=(0,kt.w9)("Checkout::Contact::RenderAfter"),le=(0,ra.rS)("shopPay",u&&Boolean(W&&!q),!1),oe=Boolean(M&&("shopPay"===l||r.contact)),ie=R&&!(0,wn.yq)(D?.countryCode),se=((0,ra.VH)({businessCustomer:!1,sdkCartHints:Boolean(M&&r.contact&&e)})??oe)&&!ie&&!g,de="shopPay"===l||r.payment?"belowPayment":"abovePayment",ce=k!==Zm.q.Off,ue=(0,ra.VH)({shopPay:!1,businessCustomer:!1})??ce,me=n?"delivery":r.contact?"root":"contact",pe="shopPay"===l&&!r.payment,ye=se&&"belowPayment"===de,ge=ye&&!W,Ee=ye&&W,be=!g&&se&&"abovePayment"===de,Ce=!g&&ue&&"root"===me,Se=["shopPay","sdkCartHints"].includes(l)?a.Fragment:H.wn,ke=ee&&!W,we=r.contact&&!(r.delivery&&r.payment)&&re.length>0,Pe=be||Ce||W?"belowMarketingConsent":"contactSection",Ae=Boolean(m.value),{Tips:Ie,Rewards:xe,CashRedemption:Me,SubscriptionPolicy:Te,PriceChangeModal:Ne,Captcha:Le,MarketingDisclosure:De,SignUpContact:Re,PurchaseOptionsAgreement:Be}=rr(),Fe=(0,L.b)().isPartner(),{reset:ze}=(0,Xp.H_)();(0,p.od)((e=>{"success"===e.type&&"review"===e.nextStep?.id&&ze()}));const{main:{section:Ve,spacing:Oe,dividers:We}}=(0,bt.kV)(),qe=(0,R_.D)(Ve);return a.default.createElement(a.default.Fragment,null,a.default.createElement(Hn.a,{id:"OnePageFrame",spacing:y.OF.default("none").when({viewportInlineSize:{min:"extraSmall"}},"large200")},g?a.default.createElement(Hn.a,{padding:y.OF.default(["large200","large200","none","large200"]).when({viewportInlineSize:{min:"extraSmall"}},"none")},a.default.createElement(AE.D,null)):null,a.default.createElement(ph.c,{section:"top"}),a.default.createElement(fa.l,{onSubmit:()=>t(void 0,{skipToCompletion:x})},a.default.createElement(U.K,null,a.default.createElement(H.iJ,{condition:!qe},Z&&a.default.createElement(a.default.Fragment,null,a.default.createElement(H.iJ,{condition:qe,hideDivider:!0,padding:le?["none","large200","large200","large200"]:void 0},a.default.createElement(Hn.a,{spacing:"none"},a.default.createElement(un.X,{sectionId:"expressCheckout"},a.default.createElement(SE,null)))),a.default.createElement(wE,{padding:qe?y.OF.default([Oe??"base","none"]).when({viewportInlineSize:{min:"extraSmall"}},[Oe??"large200","none"]):void 0})),a.default.createElement(H.iJ,{condition:qe,padding:!Z&&le?["none","large200","large200","large200"]:void 0},a.default.createElement(Hn.a,{spacing:"none"},!r.contact&&a.default.createElement(Q,{section:"contact"},a.default.createElement(St.yn,{section:"contact"},a.default.createElement(FE,{showSmsMarketingOptIn:!g&&ue&&"contact"===me}))),a.default.createElement(QE,null),T&&N&&a.default.createElement(a.default.Fragment,null,a.default.createElement(he.S,{spacing:"small100"}),a.default.createElement(RE,null))),we&&"contactSection"===Pe?a.default.createElement(a.default.Fragment,null,a.default.createElement(he.S,{spacing:"base"}),a.default.createElement(Kn.N,{extensions:re})):null)),a.default.createElement(Re,null),a.default.createElement(Db,{showMarketingDisclosure:be,showSmsMarketingOptIn:Ce,afterContactExtensions:we&&"belowMarketingConsent"===Pe?re:void 0}),!r.delivery&&n&&a.default.createElement(Q,{section:"delivery"},a.default.createElement(St.yn,{section:"delivery"},a.default.createElement(un.X,{sectionId:"delivery"},a.default.createElement(ob,{showSmsMarketingOptIn:!g&&ue&&"delivery"===me})))),a.default.createElement(H.iJ,{condition:!W,accessibilityLabel:c("payment.title","Payment"),hideDivider:We},!r.payment&&a.default.createElement(Q,{section:"payment"},a.default.createElement(St.yn,{section:"payment"},a.default.createElement(H.vq,{condition:W,accessibilityLabel:c("payment.title","Payment")},a.default.createElement(sb,null)))),a.default.createElement(Me,{source:Dc.Root,vaultedMethods:r.payment}),J&&a.default.createElement(fb,{vaultedSections:r}),V&&a.default.createElement(H.wn,{accessibilityLabel:c("localized_fields.additional_information.title","Additional information")},a.default.createElement(Hn.a,null,a.default.createElement(fe.D,null,c("localized_fields.additional_information.title","Additional information")),z.map(((e,t)=>a.default.createElement(ME,{key:e.key,localizationExtension:e,index:t}))))),Ee&&a.default.createElement(Se,null,a.default.createElement(De,null)),!g&&ee&&W&&a.default.createElement(un.X,{sectionId:"tips"},a.default.createElement(Ie,{renderInSection:W})),a.default.createElement(Q,{key:l,section:"summary"},a.default.createElement(St.yn,{section:"summary"},a.default.createElement(H.iJ,{condition:W,hideDivider:!0},a.default.createElement(j.x,null),a.default.createElement(Hn.a,{spacing:"large400"},(ke||ge||Ae)&&a.default.createElement(Hn.a,{spacing:"base"},ge&&pe&&a.default.createElement(zs.c,null),ge&&a.default.createElement(De,null),!g&&ke&&a.default.createElement(un.X,{sectionId:"tips"},a.default.createElement(Ie,null)),Ae&&a.default.createElement(PE,{textProps:{appearance:"subdued",size:"small"}})),a.default.createElement(Hn.a,{spacing:"large200"},i&&a.default.createElement(Be,null),s&&a.default.createElement(Le,null),a.default.createElement(hb.l,null),te&&a.default.createElement(Te,{policy:O}),W&&a.default.createElement(Kn.N,{extensions:ae,spacing:"large200"}))),a.default.createElement(xe,null),!Fe&&a.default.createElement(xb,null)),Fe&&a.default.createElement(xb,null)))))),d&&a.default.createElement(IE,null)),B&&a.default.createElement(Ne,{loading:w.loading,lineItems:w.lineItems,onClose:F}),n&&a.default.createElement(Nb,null))}function Db({showMarketingDisclosure:e,showSmsMarketingOptIn:t,afterContactExtensions:n}){const{MarketingDisclosure:r}=rr();if(!e&&!t&&!n)return null;const l=e||t,o=e&&t?"base":"none";return a.default.createElement(H.wn,null,a.default.createElement(Hn.a,null,l&&a.default.createElement(Hn.a,{spacing:o},e&&a.default.createElement(r,null),t&&a.default.createElement(ep,null)),n&&a.default.createElement(Kn.N,{extensions:n})))}function Rb({children:e}){const[t]=(0,ra.$_)(),n=(0,Re.P)("simulated"),{searchParams:r}=(0,ge.m)(),l="shopPay"===t;return n&&r.get("shop_pay_sim")?a.default.createElement(I_,null,a.default.createElement(D_,null,a.default.createElement(im,null,e,a.default.createElement(Lb,null)))):l?a.default.createElement(x_,null,a.default.createElement(M_,null,a.default.createElement(D_,null,a.default.createElement(im,null,e,a.default.createElement(w_,null,a.default.createElement(Lb,null)))))):a.default.createElement(a.default.Fragment,null,e,a.default.createElement(Lb,null))}var Bb=n(85342),Fb=n(28350),zb=n(1408);function Vb({progressing:e,onPress:t,cartEmpty:n}){const r=(0,E.W)();return a.default.createElement(He.$,{disabled:e,loading:e,size:"base",onPress:t},n?r("stock.return_to_store_label","Return to store"):r("stock.continue_cta_label","Continue checkout"))}function Ob({progressing:e}){const t=(0,ke.j9)(),n=(0,E.W)();return a.default.createElement(He.$,{to:t.cart(),kind:"plain",disabled:e},a.default.createElement(ht.o,{spacing:"tight",blockAlignment:"center"},a.default.createElement(jn.E,null,n("general.back_to_cart","Return to cart"))))}function Wb(e){const t=(0,P.q)(),n=(0,da.r)(),{alignment:r="inline"}=e;if(!t.hasStorefront&&e.cartEmpty)return null;const{primary:l,secondary:o}=function(e,t,n){return e?{primary:t.cartEmpty&&n?null:a.default.createElement(Vb,t),secondary:t.cartEmpty||n&&!t.cartEmpty?null:a.default.createElement(Ob,t)}:e||t.cartEmpty?{}:{primary:a.default.createElement(Vb,t)}}(t.hasStorefront,e,n);return"block"===r?a.default.createElement(Hn.a,{spacing:"large300"},l,o):a.default.createElement(ht.o,{spacing:"large300",blockAlignment:"center",inlineAlignment:"end"},o,l)}function qb({lineItems:e,cartEmpty:t,type:n,subtitle:r,actionsAlignment:l}){const{loading:i,value:s}=(0,I.Ek)(),{progress:d,progressing:c}=(0,p.T4)(),[,u]=(0,o.fp)((0,ve.C)().merchandiseLines),m=(0,a.useMemo)((()=>s?.lines??[]),[s]),[f,y]=(0,a.useState)(i),g=(0,Bb.L1)();(0,Fb.UQ)(g),(0,ne.F)({stage:f?ae.B.Loading:ae.B.Complete,id:"StockProblems"});const _=(0,Fb.KA)(g,(async()=>{const t=e.filter((({problem:e})=>e.type===Ga.P.Unshippable)).map((({line:e})=>e.stableId));t.length&&E(t),await d()})),E=(0,a.useCallback)((e=>{u((t=>t.filter((({stableId:t})=>!e.includes(t)))))}),[u]),b=(0,a.useMemo)((()=>m.reduce(((e,t)=>({...e,[t.stableId]:t})),{})),[m]),v=(0,a.useCallback)((()=>{u((e=>e.flatMap((e=>{const t=b[e.stableId];return t?0===t.quantity?[]:[{...e,quantity:t.quantity}]:[]}))))}),[b,u]);return(0,a.useEffect)((function(){v()}),[m,E,v]),(0,a.useEffect)((()=>{i||(y(!1),zb.F.notify({checkout_in_progress:!1}))}),[i,f]),a.default.createElement(Hn.a,{spacing:"loose"},a.default.createElement(jn.E,null,r),a.default.createElement(h.S,null,e.length>0?a.default.createElement(tr,{lineItems:e,loading:f,type:n}):null),a.default.createElement(Wb,{cartEmpty:t,progressing:c,onPress:_,alignment:l}))}const $b=600;function Ub(){const{canBeDismissed:e,...t}=(0,TE.$M)(),{progress:n}=(0,p.T4)(),[r,l]=(0,a.useState)(!0),[o,i]=(0,a.useState)(!1),s=(0,a.useCallback)((({isSheet:e})=>{i(e)}),[]),d=(0,a.useCallback)((()=>{n((()=>{l(!1)}))}),[n]),c=e?{blocking:!1,onClose:d}:{blocking:!0};return a.default.createElement(Va.a,(0,ye.A)({id:"stock-problems-modal",padding:!0,open:r,title:t.title,maxInlineSize:$b,accessibilityLabel:t.title,onResize:s},c),a.default.createElement(qb,(0,ye.A)({},t,{actionsAlignment:o?"block":"inline"})))}function Hb({actionsAlignment:e}){const t=(0,E.W)(),{value:n=[]}=(0,I.OL)(),r=n.find((({key:e})=>"productPageUrl"===e))?.value;(0,Fp.$5)();const l=a.default.createElement(He.$,{size:"base",to:r},t("wallets.return_to_store","Return to store"));let o=null;return"block"===e?o=a.default.createElement(Hn.a,{spacing:"large300"},l):"inline"===e&&(o=a.default.createElement(ht.o,{spacing:"large300",blockAlignment:"center",inlineAlignment:"end"},l)),a.default.createElement(Hn.a,{spacing:"loose"},a.default.createElement(jn.E,null,t("wallets.errors.unavailable.instructions",{walletName:t("brand.buy_with_prime","Buy with Prime")},"There was an issue with {{walletName}}. Return to store to try again or check out a different way.")),o)}const jb=600;function Yb(){const[e,t]=(0,a.useState)(!1),n=(0,E.W)(),r=(0,a.useCallback)((({isSheet:e})=>{t(e)}),[]),l=n("wallets.errors.unavailable.title",{walletName:n("brand.buy_with_prime","Buy with Prime")},"{{walletName}} not available");return a.default.createElement(Va.a,{id:"prime-not-available-modal",title:l,maxInlineSize:jb,accessibilityLabel:l,onResize:r,padding:!0,blocking:!0,open:!0},a.default.createElement(Hb,{actionsAlignment:e?"block":"inline"}))}function Gb(){!function(){const e=(0,Ut.o)(),{id:t}=(0,P.q)(),n=parseInt((0,$t.ee)(t),10),{checkoutSessionIdentifier:r}=(0,C.Fo)(),l=(0,ke.j9)();(0,a.useEffect)((()=>{r&&async function(){const t=new URL(l.privateAccessToken(e,n));t.searchParams.set("id",r),t.searchParams.set("checkout_type","c1");try{await fetch(t)}catch{}}()}),[r,n,e,l])}();const e=(0,ke.j9)(),t=(0,a.useMemo)((()=>[{match:e.processing(),render:()=>a.default.createElement(ot,null)},{match:e.throttle(),render:()=>a.default.createElement(st,null)},{match:e.postPurchase(),render:()=>a.default.createElement(lt,null),renderPrefetch:()=>a.default.createElement(lt.Prefetch,null)},{render:({children:e})=>a.default.createElement(i_,null,a.default.createElement(Yg,null,a.default.createElement(s,null,a.default.createElement(Bn,null,a.default.createElement(Xb,null,e)))),a.default.createElement(Vn,{id:"OnePage"})),children:[{match:e.shopPayLogin(),render:()=>a.default.createElement(at,null)},{match:e.review(),render:()=>a.default.createElement(s_,null),renderPrefetch:()=>a.default.createElement(s_.Prefetch,null)},{match:e.thankYou(),render:()=>a.default.createElement(it,null),renderPrefetch:()=>a.default.createElement(it.Prefetch,null)},{match:e.orderStatus(),render:()=>a.default.createElement(it,null),renderPrefetch:()=>a.default.createElement(it.Prefetch,null)},{match:e.noAddressLocation(),render:()=>a.default.createElement(u_,null)},{render:({children:e})=>a.default.createElement(Rb,null,e),children:[{match:e.stockProblems(),render:()=>a.default.createElement(Ub,null)},{match:e.primeNotAvailable(),render:()=>a.default.createElement(Yb,null)}]}]}]),[e]);return(0,r.Y)(t)}function Xb({children:e}){const{currentDetour:t}=(0,p.Wm)(),{currentUrl:n}=(0,l.r)(),r=(0,K.ts)(),o=(0,L.b)(),i=(0,ra.R4)(),s=(0,da.r)(),{footer:{content:{visibility:d}={}}}=(0,bt.kV)(),c="thankYou"===t?.type||!i.payment&&!i.delivery,u="shopPayLogin"!==t?.type&&c&&(!r||!o.isPartner()&&o.isStandard()&&"thankYou"===t?.type),m=(0,kt.w9)("purchase.checkout.footer.render-after"),f=(0,kt.w9)("purchase.thank-you.footer.render-after"),h=m.length>0||f.length>0,y=("hidden"!==d||h)&&!s&&!(0,ie.Mx)(n.search)||o.isStandard(),g=(0,ra.VH)({shopPay:rt.m})||void 0,_=(0,ca.J)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(Wn,null),a.default.createElement(xt,{header:r&&!o.isStandard()?a.default.createElement(sa,null):s?void 0:a.default.createElement(oa,null),disclosure:u?a.default.createElement(Yn,null):void 0,orderSummary:a.default.createElement(Zn.D,{ReductionsWrapperComponent:g}),main:e,footer:y?a.default.createElement(Xn.R,null):void 0,blockSize:_?"sdk":s?"appLayout":void 0}),a.default.createElement(Un,null))}},41533:(e,t,n)=>{n.d(t,{x:()=>S});var a=n(15299),r=n(37981),l=n(84506),o=n(47168),i=n(77491),s=n(48642),d=n(23743),c=n(18012),u=n(1304),m=n(41985),p=n(76882),f=n(50256),h=n(69358),y=n(84030),g=n(63292),_=n(73534),E=n(60118),b=n(32148),v=n(36125);const C={IconText:"OGZkU",Button:"E4kzb"};function S(){const e=(0,p.W)(),{currentDetour:t}=(0,v.Wm)(),n="shopPayLogin"===t?.type,[y,g]=(0,a.useState)(n),S=(0,r.t)({base:!0,medium:!1}),{orderSummary:{divided:w}}=(0,b.kV)(),P=(0,E.VH)({shopPay:h.m})||void 0,A=e("order_summary.title","Order summary"),I=(0,a.useCallback)((()=>g((e=>!e))),[]),{totalLineQuantities:x,validMerchandiseLineCount:M}=k();if(!S)return null;if(M<=1)return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.a,{spacing:"large200"},a.default.createElement(o.D,{level:1},A),a.default.createElement(f.D,{ReductionsWrapperComponent:P})),a.default.createElement(i.S,{spacing:"large200"}));const T=`${A} (${x})`,N=y?e("order_summary.collapse_order_summary_short","Hide"):e("order_summary.expand_order_summary_short","Show");return a.default.createElement("div",{className:C.Button},a.default.createElement(s.o,{padding:["none","none","large200","none"],display:"block",expanded:y,onPress:I},a.default.createElement(d.C,{columns:["fill","auto"],spacing:"base",blockAlignment:"center",inlineAlignment:"start"},a.default.createElement(o.D,{level:1},T),a.default.createElement("div",{className:C.IconText},a.default.createElement(d.C,{columns:["fill","auto"],blockAlignment:"center",spacing:"small200"},a.default.createElement(c.E,null,N),a.default.createElement(u.In,{size:"extraSmall",source:y?"chevronUp":"chevronDown"}))))),a.default.createElement(m.e,{open:y,id:"mobileOrderSummary"},a.default.createElement(i.S,{spacing:"small100"}),a.default.createElement(_.V,{withDivider:w}),a.default.createElement(i.S,{spacing:"large200"})),a.default.createElement(f.D,{hideMerchandiseLines:!0,ReductionsWrapperComponent:P}),a.default.createElement(i.S,{spacing:"large200"}))}const k=()=>{const e=(0,y.DT)()||0,{value:t}=(0,g.Ek)(),n=t?.lines.filter((({quantity:e})=>e>0));return{totalLineQuantities:e,validMerchandiseLineCount:n?.length||0}}},34767:(e,t,n)=>{n.d(t,{x:()=>p});var a=n(58168),r=n(94973),l=n(20903),o=n(25387),i=n(15299),s=n(97100),d=n(70234),c=n(1408);const u=538,m=l.S.get("base")??0;function p({children:e,open:t,...n}){const p="entered"===(0,l.p)(t,"slow"),f=(0,s.r)(),[,h]=(0,r.fp)(d.N);return(0,i.useEffect)((()=>{const e=e=>{h("modal_open"===e?"redesign":"none"),c.F.notify({checkout_ui:{type:e,payload:{duration:m}}})};if(p&&f)return e("modal_open"),()=>{e("modal_close")}}),[p,f,h]),i.default.createElement(o.a,(0,a.A)({maxInlineSize:u,open:t,padding:!0},n),e)}},357:(e,t,n)=>{n.d(t,{l:()=>Sn});var a=n(54740),r=n(84506),l=n(86883),o=n(36675),i=n(45041),s=n(27534),d=n(18012),c=n(76882),u=n(15299),m=n(63939),p=n(94973),f=n(36125),h=n(17141),y=n(53637),g=n(84030),_=n(63292),E=n(38482),b=n(36397),v=n(25082),C=n(31374),S=n(52274),k=n(91287),w=n(89557),P=n(27634),A=n(96489),I=n(39178),x=n(9210),M=n(25787),T=n(13652),N=n(52110),L=n(56784),D=n(66126),R=n(38909),B=n(12237),F=n(34839);const z=[N.y.Shipping,N.y.Local];var V=n(94012),O=n(66242),W=n(76386);function q(){const{postPurchaseEnabled:e}=(0,y.H)(),{recordImmediately:t}=(0,P.v)(),n=(0,T.uM)(),{loading:a}=(0,g.kG)(),r=(0,M.Jj)(),l=(0,g.O7)(),o=(0,g.PW)(),i=(0,g.mi)(k.z.OneTimePurchase),{loading:s}=(0,_.DN)(),[,d]=(0,p.fp)(x.D.negotiationProgressError),c=(0,p.md)(x.D.selectedCreditCard),u=(0,p.md)(x.D.installmentsPayment),m=(0,p.md)(x.D.shopCashBack),f=(0,p.md)(x.D.shopAccountUuid),h=(0,p.md)((0,C.C)().billingAddress),N=(0,b.iy)(),{checkout_as_guest_url:q}=(0,v.I)(),$=function(){const e=function(){const[e]=(0,L.Z)([D.le]),{checkoutSessionIdentifier:t}=(0,F.Fo)(),[n,a]=(0,p.fp)(x.D.addresses),[r,l]=(0,p.fp)(x.D.selectedShippingAddress),o=(0,T.eO)(),i=(0,g.mi)(k.z.OneTimePurchase),s=!!i&&z.includes(i.methodType);return async()=>{let i=r?.id;if(!e)return i;if(s&&r&&r.id===R.r9&&r.address&&(0,B.yc)(t)?.saveAddress){const e=await o(r.address);if("success"===e.status&&e.address){const t=n.filter((e=>e.id!==R.r9));a([...t,e.address]),l(e.address),i=e.address.id}}return i}}(),t=(0,T.fI)(),{shippingRequired:n}=(0,g.kG)(),a=(0,p.md)(x.D.installmentsPayment),r=(0,p.md)(x.D.selectedCreditCard),l=(0,p.md)(x.D.selectedShippingAddress),o=a?{disclosuresEvidence:a.disclosures[0].evidence,paymentTermToken:a.token,sellerId:a.seller_id}:void 0;return async()=>{if(!r)return{errors:[{field:[""],message:"No credit card selected"}]};const a=await e(),i=a===R.r9;return t(n&&!i?a:void 0,r.id,o,i?l?.address:void 0)}}(),U=function(){const e=(0,p.md)((0,C.C)().billingAddress),{value:t}=(0,_.mu)();return({agreementToken:n,sessionToken:a}={})=>({method:{type:"wallet",name:w.R.ShopPay,walletContent:{sessionToken:a,agreementToken:n,billingAddress:(0,A.dP)(e),paymentMethodIdentifier:(0,B.N9)(t)}}})}(),H=function(){const[,e]=(0,p.fp)(x.D.negotiationProgressError),t=(0,O.W)();return n=>n===E.RE.CheckingShippingRequirement?{behavior:"block",reason:E.RE.CheckingShippingRequirement,perform(){e(W.Cq.CheckingShippingRequirement)}}:n===E.RE.CalculatingTaxes?{behavior:"block",reason:E.RE.CalculatingTaxes,perform(){e(W.Cq.CalculatingTaxes)}}:n===E.RE.MissingCreditCard?{behavior:"block",reason:E.RE.MissingCreditCard,perform(){e(W.Cq.MissingCreditCard)}}:n===E.RE.InstallmentsFailed?{behavior:"block",reason:E.RE.InstallmentsFailed,perform(){e(W.Cq.MissingInstallmentsBillingAddress)}}:n===E.RE.ShopPayPaymentFailed?{behavior:"block",reason:E.RE.ShopPayPaymentFailed,perform(){e(W.Cq.SubscriptionsBillingAgreementFailed)}}:(t.notify(new V.BS(`Unhandled invalid result reason ${n} identified during Shop Pay negotiation intercept`),{severity:"error"}),{behavior:"block",reason:n})}(),j=function(){const[,e]=(0,p.fp)(x.D.showSessionRevalidator),[,t]=(0,p.fp)(x.D.negotiationProgressError);return n=>{"verification_required"!==n?t("error"!==n?W.Cq.ProcessingError:W.Cq.ProcessingErrorCheckoutAsGuest):e(!0)}}(),Y=l&&h&&!o,G=({state:e,parts:t})=>{if(f){const n=e.read(t.shopPayArtifact).value||{};e.write(t.shopPayArtifact,{...n,shopUser:{...n?.shopUser||{},uuid:f}})}},X=({state:e,parts:t,agreementToken:n,sessionToken:a})=>{const r=e.read(t.paymentLines).value;e.write(t.paymentLines,(0,b.mD)(r,U({agreementToken:n,sessionToken:a})))},Z=({state:e,parts:t})=>{m&&e.write(t.shopPayArtifact,{cashBack:{token:m.token}})},Q=({state:e,parts:t,reason:n})=>{if("completion"===n&&i){const n=e.read(t.deliveryLines).value,a=[i.methodType];n.forEach((t=>{e.write(t.fields.deliveryMethodTypes,a)}))}};(0,S.D3)((async({parts:l,state:i,reason:m})=>{if(d(null),"negotiation"===m)return{behavior:"allow"};if(Y||N)return{behavior:"allow",perform(){X({state:i,parts:l}),G({state:i,parts:l})}};if(a)return H(E.RE.CheckingShippingRequirement);if(s)return H(E.RE.CalculatingTaxes);if(!c)return H(E.RE.MissingCreditCard);if(u&&!c.billingAddress)return H(E.RE.InstallmentsFailed);const p=await $();if(function(e){return Boolean("failed"===e?.status&&e.statusCode&&e.statusCode>=500)}(p))return t({schemaId:I.$D.PayCheckoutError,payload:{errorType:`Shop Pay appears to be down. Http Status code: ${p.statusCode}.`}}),window.location.replace(q),{behavior:"block",reason:E.RE.ShopPayPaymentFailed};if(!p||"failed"===p.status)return{behavior:"block",reason:E.RE.ShopPayPaymentFailed,perform(){j(p?.errors?.[0]?.message)}};if((e||o)&&!u){const t=await n(c.id);return t&&"failed"!==t.status?{behavior:"allow",perform(){X({state:i,parts:l,agreementToken:t.billingAgreementToken,sessionToken:p.sessionId}),e&&Z({state:i,parts:l}),Q({state:i,parts:l,reason:m})}}:H(E.RE.ShopPayPaymentFailed)}if(u&&c.billingAddress.address){const{autopay_enabled:e,disclosures:t,token:n}=u,a={autoPayEnabled:e,billingAddress:(0,A.dP)(h),disclosureDetails:t,installmentsToken:n,sessionToken:p.sessionId,paymentMethodIdentifier:r.config?.paymentMethodIdentifier??""};return{behavior:"allow",perform(){const e=i.read(l.paymentLines).value;i.write(l.paymentLines,(0,b.mD)(e,{method:{type:"wallet",name:w.R.ShopifyInstallments,walletContent:a}})),Z({state:i,parts:l}),G({state:i,parts:l})}}}return{behavior:"allow",perform(){X({state:i,parts:l,sessionToken:p.sessionId}),Z({state:i,parts:l}),Q({state:i,parts:l,reason:m}),G({state:i,parts:l})}}}))}var $=n(70097),U=n(85630),H=n(9520),j=n(5366),Y=n(32485),G=n.n(Y);const X={DoubleSpinnerIcon:"mqkZ3",Circle:"ip0MJ",light:"RuHiV",inner:"jATuK",rotate:"PCUrq",outer:"_6WzuU"};function Z({ariaLabel:e,light:t=!1,size:n=32}){const a={width:`${n}px`,height:`${n}px`};return u.default.createElement(u.default.Fragment,null,e&&u.default.createElement("span",{role:"status",className:"visuallyHidden"},e),u.default.createElement("div",{className:X.DoubleSpinnerIcon,style:a,"aria-hidden":"true"},u.default.createElement("div",{className:G()(X.Circle,X.outer,t&&X.light)},Q("M0 15c0 8.284 6.716 15 15 15 8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15a1 1 0 0 0 0 2c7.18 0 13 5.82 13 13s-5.82 13-13 13S2 22.18 2 15a1 1 0 0 0-2 0z")),u.default.createElement("div",{className:G()(X.Circle,X.inner,t&&X.light)},Q("M4 15c0 6.075 4.925 11 11 11s11-4.925 11-11S21.075 4 15 4a1 1 0 0 0 0 2 9 9 0 1 1-9 9 1 1 0 0 0-2 0z"))))}function Q(e){return u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"100%",height:"100%"},u.default.createElement("path",{d:e}))}var J=n(33519);const K={CodeBoxesWrapper:"T9VTg",CodeBox:"jGM_7",Focused:"eDmc5",Success:"JbVHh",Error:"E3j4l"};function ee({focusedBox:e,codeInput:t,maxLength:n,success:a,error:r}){return u.default.createElement("div",{className:K.CodeBoxesWrapper},[...Array(n).keys()].map((n=>{const l=e===n,o=n<t.length?t[n]:"";return u.default.createElement("span",{key:n,className:G()(K.CodeBox,l&&K.Focused,a&&K.Success,r&&K.Error)},o)})))}const te={CodeInputWrapper:"Wh2Sa",CodeInput:"VbECF"},ne=/^\d*$/,ae=6;function re({onCodeEntered:e,onClear:t,ariaLabel:n,loading:a,success:r,error:l,maxLength:o=ae}){const i=(0,u.useRef)(null),[s,d]=(0,u.useState)(""),[c,m]=(0,u.useState)(0);function p(e){m(e.currentTarget.selectionEnd||0)}return(0,u.useEffect)((()=>{s.length===o&&(i.current?.blur(),e(s))}),[s,e,o]),(0,u.useEffect)((()=>{i.current?.focus()}),[l]),(0,u.useEffect)((()=>{s.length<o&&(r||l)&&t()}),[o,s,r,l,t]),u.default.createElement("div",{className:G()(te.CodeInputWrapper,(0,J.Fo)({colorLayer:"control"}))},u.default.createElement("input",{ref:i,className:te.CodeInput,"aria-label":n,disabled:a,type:"tel",autoComplete:"one-time-code",maxLength:o,value:s,onInput:function(e){const{value:t,selectionEnd:n}=e.currentTarget;a?e.currentTarget.value=s:ne.test(t)?(d(t),m(n||0)):e.currentTarget.value=s},onSelect:p,onClick:p,onKeyUp:p,autoFocus:!0}),u.default.createElement(ee,{focusedBox:c,codeInput:s,maxLength:o,success:r,error:Boolean(l)}))}const le={Footer:"Q9iza"};var oe=n(23743),ie=n(1304);const se=({title:e,description:t,acknowledgeLabel:n,onConfirm:a})=>{const o=(0,c.W)();return u.default.createElement(u.default.Fragment,null,u.default.createElement(oe.C,{columns:["auto","auto"],inlineAlignment:"center"},u.default.createElement(l.S,{padding:["small400","none"]},u.default.createElement(ie.In,{source:"critical",appearance:"critical"})),u.default.createElement(r.a,{padding:["none","base"],spacing:"small200"},u.default.createElement(H.V,{size:"large",emphasis:"bold"},e),u.default.createElement(H.V,{size:"small"},t))),u.default.createElement(r.a,{inlineAlignment:"center",padding:["large200","none","small200","none"]},u.default.createElement(s.$,{kind:"plain",onPress:a},n??o("shop_pay.checkout.close_notification","Close"))))};function de({onComplete:e,onDismiss:t}){const n=(0,c.W)(),[a,o]=(0,u.useState)(""),[i,d]=(0,u.useState)("loading"),[m,f]=(0,u.useState)(!1),[,h]=(0,p.fp)(x.D.sessionVerified),y=(0,T.iV)(),g=(0,T.oW)(),_=(0,u.useCallback)((e=>{e.errors?.some((e=>"limit_exceeded"===e?.message))&&f(!0),d("error")}),[]);(0,u.useEffect)((()=>{(async()=>{try{const e=await y("session-revalidate");"success"===e.status?(o(e.verificationToken||""),d("idle")):"failed"===e.status&&_(e)}catch(e){d("error")}})()}),[y,_]);const E=(0,u.useCallback)((async t=>{if(a)try{d("loading");const n=await g(t,"session-revalidate",a);if("success"===n.status)return d("success"),h(!0),e();n.errors?.length&&_(n)}catch(n){d("error")}}),[e,g,a,_,h]),b=(0,u.useCallback)((()=>{d("idle")}),[]);let v;return v="error"===i?u.default.createElement(H.V,{appearance:"critical"},n("shop_pay.checkout.authorize_incorrect_code","The code you entered is incorrect")):"loading"===i?u.default.createElement(Z,null):u.default.createElement(s.$,{onPress:t,kind:"plain"},u.default.createElement(l.S,{padding:"base"},n("shop_pay.address_form.cancel","Cancel"))),u.default.createElement(j.M,{open:!0,title:m?void 0:n("shop_pay.checkout.title_authorize","Authorize purchase"),accessibilityLabel:n("shop_pay.checkout.title_authorize","Authorize purchase"),onClose:t},m?u.default.createElement(se,{title:n("shop_pay.checkout.authorize_limit_exceeded_title","Attempt limit is reached"),description:n("shop_pay.checkout.authorize_limit_exceeded","Your code was incorrectly entered too many times. Please continue to the regular checkout."),onConfirm:t}):u.default.createElement(u.default.Fragment,null,u.default.createElement(l.S,{padding:["base","large200"]},u.default.createElement(H.V,null,n("shop_pay.checkout.authorize_instructions","Enter the code sent to your phone to securely complete your purchase."))),u.default.createElement(r.a,{inlineAlignment:"center",spacing:"small400"},u.default.createElement(re,{onCodeEntered:E,onClear:b,ariaLabel:n("shop_pay.checkout.authorize_instructions","Enter the code sent to your phone to securely complete your purchase."),success:"success"===i,error:"error"===i}),u.default.createElement("div",{className:le.Footer},v))))}var ce=n(39122),ue=n(72334),me=(n(44114),n(75635)),pe=n(66630),fe=n(48120),he=n(48545),ye=n(88098);const ge=()=>{const e=(0,p.md)(x.D.signUpPhoneNumber),t=(0,p.md)(x.D.signUpPhoneCountryCode),{isPhoneNumberUtilLoaded:n,validatePhoneNumber:a}=(0,ye.X)(),{isPayUserAvailable:r}=(0,pe.M)();return{missingRequiredMobilePhoneNumber:Boolean(!r&&(!e||n&&!a(e,t,!0)))}};var _e=n(98815),Ee=n(12227);let be=function(e){return e.BlankEmail="blank_email",e.BlankPhone="blank_phone",e.InvalidEmail="invalid_email",e.InvalidPhone="invalid_phone",e.ShopAccountsInvalidEmail="shop_accounts_invalid_email",e.ShopAccountsInvalidPhone="shop_accounts_invalid_phone",e.ShopAccountsPhoneLimitReached="shop_accounts_phone_limit_reached",e}({});var ve=n(28540),Ce=n(7821),Se=n(52027),ke=n(97435),we=n(49270);let Pe=function(e){return e.RateLimited="rate-limited",e.NetworkError="network-error",e.InvalidData="invalid-data",e.ChallengeError="challenge-error",e.ChallengeClosed="challenge-closed",e.ChallengeExpired="challenge-expired",e.MissingCaptcha="missing-captcha",e.InvalidCaptchaId="invalid-captcha-id",e.InternalError="internal-error",e}({}),Ae=function(e){return e.ExistingPayUser="existing_pay_user",e.InvalidResponse="invalid_response",e.ResponseEmpty="response_empty",e.ResponseWithHttpError="response_with_http_error",e.ResponseWithNoPhoneNumber="response_with_no_phone_number",e.UnknownError="unknown_error",e}({});const Ie="Mobile phone number is missing or invalid";function xe(){const e=(0,O.W)(),t=(0,F.Fo)(),{recordImmediately:n}=(0,P.v)(),a=(0,ue.If)(),{createUnverifiedUser:r}=function(){const e=(0,O.W)(),t=(0,F.Fo)(),{email:n,emailError:a}=function(){const e=(0,p.md)(x.D.flow),t=(0,p.md)(x.D.email),{email:n}=(0,C.C)(),a=(0,p.md)(n),r=(0,we.nQ)(),l=(e===ve.p.EmailOnlySignup?t:a).trim(),o=(0,u.useMemo)((()=>{const e=(0,ke.s)(l,be.BlankEmail),t=(0,ke.U)(l,be.InvalidEmail),n=r.userStatus===we.$_.Invalid?be.InvalidEmail:void 0;return e||t||n}),[l,r.userStatus]);return{email:l,emailError:o}}(),r=(0,p.md)(x.D.signUpPhoneNumber),l=(0,p.md)(x.D.signUpCaptchaRef),[,o]=(0,p.fp)(x.D.email),{isPayUserAvailable:i,setFlowAuthenticated:s}=(0,pe.M)(),{clearEmailOnlySignUp:d,sharedHCaptchaToken:c,setSharedHCaptchaToken:m}=(0,fe.Y)(),[f,h]=(0,he.$v)(),y=(0,Se.j9)(),{transaction_params:g}=(0,v.I)(),{checkoutSessionIdentifier:_}=(0,F.Fo)(),{missingRequiredMobilePhoneNumber:E}=ge(),[b]=(0,_e.j1)(),S=(0,u.useCallback)(((n,a)=>(e.notify(new V.BS(a.errors[0]?.message??"Error while creating unverified user"),{errorClass:n?W.bW.CreateUnverifiedUserInstallments:W.bW.CreateUnverifiedUserPayNow,severity:"error",metadata:{source:{type:t.type},checkout:{token:t.checkoutSessionIdentifier||t.sourceId},event:{errors:JSON.stringify(a.errors)}}}),a)),[e,t]),k=(0,u.useCallback)((async({withShopPayInstallments:e,useSharedHCaptchaToken:t=!0})=>{if(i||f)return{status:"skipped"};if(b)return{status:"failed",errors:[{field:[],code:Ae.ExistingPayUser,message:"The email address is already associated with a Shop Pay account."}]};const u=[];if(a&&u.push({field:["email"],code:a,message:"email is blank or invalid"}),E&&u.push({field:["phone"],code:be.InvalidPhone,message:Ie}),u.length>0)return{status:"failed",errors:u};let p=t?c:void 0;if(!p)try{const e=await(l?.execute({async:!0}));e&&(p=e.response)}catch(w){return w===Pe.ChallengeClosed?{status:"failed",errors:[]}:{status:"failed",errors:[{field:["hcaptcha"],code:String(w),message:"A captcha error was caught and handled"}]}}let v,C=null;try{C=await fetch(y.shopPayCreateUnverifiedUser(),{method:"POST",body:JSON.stringify({email:n,phone:r||"",hcaptcha_token:p,origin:"c1_unverified_user_signup",checkout_token:_,transaction_params:g}),headers:{"Content-Type":"application/json",accept:"application/json"}})}catch(w){return S(e,{status:"failed",errors:[{field:[],code:Ae.UnknownError,message:"An error was caught and handled during API request"}]})}try{v=await C.json()}catch{return S(e,{status:"failed",errors:[{field:[],code:Ae.InvalidResponse,message:"Failed to parse response"}]})}return 200!==C.status?Array.isArray(v?.errors)&&1===v?.errors.length&&"further_authorization_required"===v?.errors[0].code&&t?(m(void 0),k({withShopPayInstallments:e,useSharedHCaptchaToken:!1})):S(e,{status:"failed",errors:v?.errors||[{field:[],code:`${Ae.ResponseWithHttpError}_${C.status}`,message:"Failed to create user"}]}):v?.parsed_phone?(h(v.parsed_phone),o(n),s(),d(),{status:"success"}):S(e,{status:"failed",errors:v?.errors||[{field:[],code:v?Ae.ResponseWithNoPhoneNumber:Ae.ResponseEmpty,message:"Response is empty or does not contain phone number"}]})}),[i,f,b,a,E,c,l,y,n,r,_,g,S,m,h,o,s,d]);return{createUnverifiedUser:k}}(),{handleCreateUnverifiedUserErrors:l}=function(){const e=(0,c.W)(),t=(0,p.QN)(),[,n]=(0,p.fp)(x.D.signUpPhoneError),[,a]=(0,p.fp)(x.D.createUnverifiedUserErrors),r=(0,p.md)(x.D.flow),{record:l}=(0,P.v)(),o=(0,ce.Hy)(),{openModal:i}=(0,Ee.$)(),s={[be.BlankEmail]:e("field_errors.email_blank","Enter an email"),[be.InvalidEmail]:e("field_errors.email_invalid","Enter a valid email"),[be.ShopAccountsInvalidEmail]:e("field_errors.email_invalid","Enter a valid email")},d={[be.BlankPhone]:e("shop_pay.mobile_phone_number.mobile_phone_invalid","Please enter a valid mobile phone number including country code"),[be.InvalidPhone]:e("shop_pay.mobile_phone_number.mobile_phone_invalid","Please enter a valid mobile phone number including country code"),[be.ShopAccountsInvalidPhone]:e("shop_pay.mobile_phone_number.mobile_phone_invalid","Please enter a valid mobile phone number including country code"),[be.ShopAccountsPhoneLimitReached]:e("shop_pay.mobile_phone_number.phone_limit_reached","This mobile number has been registered too many times")};return{handleCreateUnverifiedUserErrors:e=>{if(0===e.length)return;const c=e.map((e=>e.code));c.forEach((e=>{l({schemaId:I.$D.PayCheckoutError,payload:{errorType:`create_unverified_user/${e}`}})}));const u=s[c.find((e=>e in s))],m=d[c.find((e=>e in d))];return u||m?(t.write(me.Bu,u),n(m)):r===ve.p.EmailOnlySignup?a(e):c.includes(Ae.ExistingPayUser)||i({type:Ce.W.Generic}),Promise.resolve().then((()=>o()))}}}(),o=(0,ce.Hy)(),{progressing:i}=(0,f.T4)(),[s,d]=(0,p.fp)(x.D.internalProgressing),m=(0,u.useCallback)((async({withShopPayInstallments:i=!1}={})=>{d(!0);try{const e=await r({withShopPayInstallments:i}),t=await a.runInterceptors(),s=(0,ue.Ak)(t);if(s||(0,ue.Tz)(t).forEach((e=>{n({schemaId:I.$D.PayCheckoutError,payload:{errorType:e}})})),"failed"===e?.status)return l(e.errors),!1;if(!s)return function(e){Promise.resolve().then((()=>e()))}(o),!1}catch(s){return e.notify(s,{errorClass:W.bW.PayNowIntercept,severity:"error",metadata:{source:{type:t.type},checkout:{token:t.checkoutSessionIdentifier||t.sourceId}}}),!1}finally{d(!1)}return!0}),[r,o,l,e,a,n,t.checkoutSessionIdentifier,t.sourceId,t.type,d]);return{isProgressing:i||s,progressContinue:m}}var Me=n(88726),Te=n(87455),Ne=n(5998),Le=n(32353),De=n(84571),Re=n(85977),Be=n(84979);function Fe({disabled:e,loading:t,onPress:n,isSubmit:a}){const r=(0,i.M)(),l=(0,Te.o)(),o=a&&r?.id;return function(e,t){const n=(0,$.b)().isPartner(),[,a]=(0,p.fp)(Ne.wP),[,r]=(0,p.fp)(Ne.WF),[,l]=(0,p.fp)(Ne.cJ),o=(0,p.md)(Le.s);(0,u.useEffect)((()=>{if(n)return l(!0),()=>{l(!1)}}),[l,n]),(0,u.useEffect)((()=>{n&&r((()=>t))}),[n,t,r]);const i=o!==Le.a.None;(0,u.useEffect)((()=>{n&&a((()=>i||e))}),[n,i,e,a])}(t,e),(0,De.xT)((e=>{e===De.YO.Continue&&(o&&(0,Be.Pu)(o),n?.())})),l?u.default.createElement(ze,null):null}function ze(){const e=(0,ue.If)(),{schema:{postMessageHandler:t}}=(0,Me.Uz)(),n=(0,Re.Y)();return(0,u.useEffect)((()=>e.listenResult((e=>{e||t({type:"journeyProgressionError",flowType:n})}))),[e,t,n]),null}var Ve=n(87039),Oe=n(64106),We=n(66264);const qe={Button:"WFzFx","Button--dark":"GbYHt","Button--contrast":"IYc1D"};function $e(){const e=(0,Oe.jK)({foregroundColor:Ve.ui}),t=(0,We.dg)(),n=(0,Ve.em)(t);return(0,u.useMemo)((()=>G()(qe.Button,{[qe["Button--contrast"]]:!e&&!n,[qe["Button--dark"]]:n})),[n,e])}var Ue=n(70083),He=n(35699),je=n(80125),Ye=n(74051),Ge=n(86766),Xe=n(39979),Ze=n(33663),Qe=n(67902),Je=n(57992);function Ke(){const e=(0,Ue.S)(),{shopPayCheckoutSurface:t}=(0,v.I)(),{recordImmediately:n,pageLoadId:a}=(0,P.v)(),r=function(){const{loading:e}=(0,_.FC)(),{loading:t}=(0,g.kG)(),{loading:n}=(0,_.DN)();return e||t||n}(),{isUnauthenticatedSession:l}=(0,pe.M)(),o=function(){const{loading:e,value:t}=(0,_.FC)(),{shippingRequired:n}=(0,g.kG)();return!!n&&!e&&"unavailable"===t?.status}(),i=function(){const{value:e}=(0,_.FC)(),{shippingRequired:t}=(0,g.kG)(),{shippingCountries:n}=(0,Ye.UR)(),a=(0,Xe.f)(void 0,"shipping"),{shippingAddress:r}=(0,C.C)(),l=(0,p.md)(x.D.selectedShippingAddress),o=(0,p.md)(r),i=(0,je.Z7)(o.countryCode,n,a)(o,"shipping").size>0,s=(0,Ge.Me)(e,k.z.OneTimePurchase,!0),d=(0,Ge.bW)(s),c=d?.methodType===N.y.PickUp;return!(!t||c)&&!l&&(!o||i)}(),s=function(){const e=(0,g.O7)(),t=(0,p.md)(x.D.creditCards),n=(0,p.md)(x.D.selectedFreeCheckoutBillingAddress),a=(0,p.md)(x.D.selectedCreditCard),{hasViolations:r}=(0,Ze.Ck)(Qe.I0);return!!r||!!(e||a||t.length)&&(e&&!1===n?.valid||!e&&!a?.billingAddressValid)}(),d=function(){const e=(0,M.Jj)(),{creditCardDisabled:t}=(0,Je.w)(),n=(0,g.O7)(),a=(0,p.md)(x.D.creditCards),r=(0,p.md)(x.D.selectedCreditCard),l=Boolean((0,B.N3)(e.config?.availableLoanTypes,r?.supportsInstallmentsSplitPayLoan,r?.supportsInstallmentsInterestLoan)),o=Boolean(e.paymentMethodMustSupportInterestBearingLoans&&a.every((e=>t(e))))||!n&&!r&&!a.length;return Boolean(e.paymentMethodSelected)&&!l&&!o}(),{missingRequiredMobilePhoneNumber:c}=ge(),m=function(){const e=(0,g.O7)(),t=(0,p.md)(x.D.selectedCreditCard);return Boolean(t?.expired&&!e)}(),f=(0,p.md)(x.D.checkoutErrors),h=(0,p.md)(x.D.createUnverifiedUserErrors),y=(0,p.md)(x.D.shopAccountUuid),E=(0,u.useRef)(0),b=(0,u.useRef)(null),S=(0,u.useRef)(Date.now()),w=Boolean(f.delivery[0]),A=Boolean(f.payments[0]),T=!l&&(o||i||w||A||s||d||m);return(0,u.useEffect)((()=>{r||(E.current++,n({schemaId:I.$D.PayPaymentPagePayNowState,payload:{shopAccountUuid:y,counter:E.current,deliveryValueIncomplete:o,shippingInformationIncomplete:i,hasDeliveryCheckoutError:w,hasPaymentCheckoutError:A,hasCreateUnverifiedUserError:Boolean(h[0]),paymentInformationIncomplete:s,installmentChecksIncomplete:d,missingMobilePhoneNumber:c,paymentMethodExpired:m}}))}),[r,n,y,o,i,w,A,s,h,d,m,c]),(0,u.useEffect)((()=>{if(r||T===b.current)return;b.current=T;const l=T?"pay_now_button_disabled":"pay_now_button_enabled";e.distribution(He.J.ReviewAndPayProcessTime,{tags:{shopPayCheckoutSurface:t},value:Date.now()-S.current}),n({schemaId:I.$D.PayPaymentPageReady,payload:{success:!0,status:l,clientTimestampMs:Date.now(),pageLoadId:a}})}),[n,a,r,T,e,t]),r||T}var et=n(53008),tt=n(9124);function nt(){const e=(0,c.W)(),{to:t,onPress:n}=(0,tt.Q)(tt.R.PaymentErrorState);return 0===(0,p.md)(x.D.createUnverifiedUserErrors).length?null:u.default.createElement(o.l,{status:"critical"},u.default.createElement(r.a,{inlineAlignment:"start",spacing:"small500"},u.default.createElement(H.V,null,e("shop_pay.account_creation_error",{check_out_as_guest_link:u.default.createElement(et.N,{to:t,onPress:n,appearance:"monochrome"},e("shop_pay.checkout.checkout_guest","Check out as guest"))},"There was an issue creating your Shop Pay account. %{check_out_as_guest_link} to complete your purchase."))))}function at(){const e=(0,c.W)(),[t]=(0,he.eR)();return t!==ve.p.UnauthenticatedUser?null:u.default.createElement(H.V,{size:"small",appearance:"subdued"},e("shop_pay.checkout.sign_up_footer.terms_and_privacy_html",{privacy_href:u.default.createElement(et.N,{external:!0,to:"https://www.shopify.com/legal/privacy/app-users"},e("shop_pay.checkout.sign_up_footer.privacy_policy","Privacy Policy")),terms_href:u.default.createElement(et.N,{external:!0,to:"https://shop.app/terms-of-service"},e("shop_pay.checkout.sign_up_footer.terms_of_service","Terms of Service"))},"The details you use for this order will be saved with Shop for a faster checkout next time. By continuing, you agree to Shop Pay’s %{privacy_href} and %{terms_href}."))}var rt=n(62344);function lt({formattedAmount:e,nextStepLabel:t}){const n="large";return e?u.default.createElement(oe.C,{columns:["fill","auto","auto"],spacing:"base"},u.default.createElement(d.E,{size:n},t),u.default.createElement(rt.c,{direction:"block"}),u.default.createElement(d.E,{size:n},e)):u.default.createElement(d.E,{size:n},t)}var ot=n(86155),it=n(54732),st=n(75090),dt=n(44985);function ct(){const e=(0,O.W)(),{currentDetour:t,currentStep:n}=(0,f.Wm)(),a=(0,dt.r)(),r=(0,F.Fo)(),l=(0,Se.j9)();return(0,u.useMemo)((()=>({ensureShopPayURL:()=>{n||a.navigate(l.shopPay(),{replace:!0})},leaveBreadcrumb:(a,{nextStep:r})=>{e.leaveBreadcrumb(a,{currentDetour:JSON.stringify(t),currentStep:JSON.stringify(n),nextStep:JSON.stringify(r)})},logError:(a,{nextStep:l,result:o})=>{e.notify(new V.BS(a),{severity:"error",metadata:{source:{type:r.type},checkout:{token:r.checkoutSessionIdentifier||r.sourceId},event:{currentDetour:JSON.stringify(t),currentStep:JSON.stringify(n),nextStep:JSON.stringify(l),result:JSON.stringify(o)}}})}})),[t,n,e,a,r.checkoutSessionIdentifier,r.sourceId,r.type,l])}var ut=n(88686),mt=n(1408);function pt(){const e=function(){const e=(0,c.W)(),t=ct(),n=(0,ut.I)(),a=(0,ot.X)(),{nextStep:r}=(0,st.PL)(),l=(0,it.P)("simulated");return(0,u.useEffect)((()=>{l||"thankYou"===r.id||t.leaveBreadcrumb("Shop Pay button is used when next step is not `thankYou`",{nextStep:r})}),[r.id,r.label]),n&&(r.label=e("shop_pay.checkout.subscribe_now","Subscribe now")),a?e("shop_pay.checkout.authorize_purchase","Authorize purchase"):r.label}(),t=Ke(),{onPress:n}=function(){const e=ct(),{recordImmediately:t,pageLoadId:n}=(0,P.v)(),a=(0,ot.X)(),[,r]=(0,p.fp)(x.D.showSessionRevalidator),{progress:l}=(0,f.T4)(),{nextStep:o}=(0,st.PL)(),i=(0,it.P)("simulated"),{progressContinue:s}=xe();return{onPress:(0,u.useCallback)((async()=>{i||(a?r(!0):(t({schemaId:I.$D.PayPaymentPagePayNow,payload:{clientTimestampMs:Date.now(),pageLoadId:n}}),await s()?(l((t=>{"thankYou"!==o.id&&e.logError("Shop Pay button triggered progression when next step is not `thankYou`",{nextStep:o,result:t})}),{onProgressBlocked:()=>{e.logError("Shop Pay button triggered but progression is blocked",{nextStep:o}),e.ensureShopPayURL()}}),mt.F.notify({checkout_in_progress:!0})):"thankYou"!==o.id&&(e.logError("Shop Pay button is pressed when next step is not `thankYou`",{nextStep:o}),e.ensureShopPayURL())))}),[e,i,o,n,l,s,t,a,r])}}(),[a,l]=(0,p.fp)(x.D.showSessionRevalidator),o=function(){const[,e]=(0,p.fp)(x.D.showSessionRevalidator),t=(0,ue.If)(),{recordImmediately:n}=(0,P.v)(),a=(0,ce.Hy)(),{progress:r}=(0,f.T4)();return async()=>{e(!1);const l=await t.runInterceptors();if(!(0,ue.Ak)(l))return(0,ue.Tz)(l).forEach((e=>{n({schemaId:I.$D.PayCheckoutError,payload:{errorType:e}})})),void function(e){Promise.resolve().then((()=>e()))}(a);r()}}(),i=(0,c.W)(),d=(0,U.a)(),{layout:m}=(0,v.I)(),{value:h}=(0,_.u_)(),y=$e(),{isProgressing:g}=xe(),E=(0,$.b)(),b=E.isPartner(),C=E.isStandard(),S=(0,u.useMemo)((()=>C?null:"app"===m&&h&&e===i("general.pay_now_button_label","Pay now")?d(h.amount,{currency:h.currencyCode,form:"short"}):null),[d,m,e,h,i,C]);return u.default.createElement(r.a,null,u.default.createElement("div",{className:y},b?u.default.createElement(Fe,{onPress:n,loading:g,disabled:t}):u.default.createElement(s.$,{inlineSize:"fill",onPress:n,loading:g,disabled:t,inlineAlignment:S?"start":"center",accessibilityLabel:S?`${e}\n${S}`:e},u.default.createElement(lt,{formattedAmount:S,nextStepLabel:e}))),u.default.createElement(at,null),u.default.createElement(nt,null),a&&u.default.createElement(de,{onComplete:o,onDismiss:()=>l(!1)}))}const ft={StickyFooter:"XlHGh",StickyFooterExperiment:"rMCR5",StickyFooterBuffer:"ueKAq",SDKStickyFooterBuffer:"hlTJG",ButtonContainer:"Cfw6S",SDKButtonContainer:"vAl5q"};function ht({children:e}){const t=(0,u.useRef)(null),[n,a]=(0,u.useState)(0),{layout:r}=(0,v.I)(),l="web"===r,o=(0,$.b)().isStandard();return(0,u.useLayoutEffect)((()=>{if(!t.current)return;function e(){if(!t.current)return;const e=t.current.offsetHeight;a(e)}if(e(),!window.MutationObserver)return;const n=new MutationObserver(e);return n.observe(t.current,{childList:!0,subtree:!0}),()=>n.disconnect()}),[e]),u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{style:{height:n},className:G()(ft.StickyFooterBuffer,{[ft.SDKStickyFooterBuffer]:o})}),u.default.createElement("div",{id:"sticky-pay-button-container",style:{height:l?"auto":n},className:G()(ft.StickyFooter,{[ft.StickyFooterExperiment]:l})},u.default.createElement("div",{ref:t,className:G()(ft.ButtonContainer,{[ft.StickyFooterExperiment]:l,[ft.SDKButtonContainer]:o})},e)))}var yt=n(74826),gt=n(23381),_t=n(58725);var Et=n(78414),bt=n(34767),vt=n(26803),Ct=n(67551),St=n(56305);let kt=function(e){return e.CheckoutOne="C1",e.Pay="PAY",e}({});const wt=["initializePay","pingPay","updateCheckout","updateCard","setInitialUserState"];class Pt extends Error{constructor(...e){super(...e),this.name="RPCConnectionTimeoutError"}}const At=1e3,It=100;var xt=n(71866),Mt=n(89941);var Tt=n(31928),Nt=n(50996),Lt=n(6211),Dt=n(28921),Rt=n(46277),Bt=n(21004),Ft=n(77979);const zt=[Ft.X.PaymentsUnacceptablePaymentAmount,Ft.X.DeliveryDeliveryLineDetailChanged];const Vt="shop-pay-affirm-iframe";function Ot({checkoutDetails:e,open:t,onClose:n}){const a=(0,Et.Z)(),[r,l]=(0,u.useState)(),[o,i]=(0,u.useState)(),[s,d]=(0,u.useState)(null),m=(0,u.useCallback)((e=>{a.current&&l(e)}),[a]),h=(0,u.useRef)(),y=(0,c.W)(),[g,_]=(0,p.fp)(x.D.installmentsPayment),[E,b]=(0,p.fp)(x.D.selectedCreditCard),[v,C]=(0,p.fp)(x.D.creditCards),{onInstallmentsError:S}=function(){const{recordImmediately:e}=(0,P.v)(),[,t]=(0,p.fp)(x.D.installmentsRejected),[,n]=(0,p.fp)(x.D.installmentsRetryable),[a,r]=(0,p.fp)(x.D.installmentsPayment),{progress:l}=(0,f.T4)(),o=(0,Rt.IX)(),i=(0,u.useRef)(a),s=(0,u.useCallback)((a=>{const r=function(e){if(!e)return"no_result";if("errors"in e&&e.errors.length>0){const t=e.errors.map((e=>e.code)).join(", ");if(t)return t}return"failure"in e&&e.failure?`failed_receipt_${e.failure.type}`:"status"in e&&e.status?"invalid"===e.status?`error_result_invalid__${e.reasons.join("__")}`:`error_result_${e.status}`:void 0}(a);let l;!function(e){return!!e&&"violations"in e&&e.violations.some((({code:e})=>zt.includes(e)))}(a)?(l=Bt.R.InstallmentsPermanentRejection,n(!1)):(l=Bt.R.InstallmentsRetryError,n(!0)),e({schemaId:I.$D.PayPaymentPageInstallments,payload:{eventType:l,success:!1,errorMessage:r}}),t(!0)}),[t,n,e]);return(0,u.useEffect)((()=>{a&&i.current!==a&&(l((e=>{"success"!==e.status&&"alreadyCompleted"!==e.status&&(s(e),r(void 0))})),i.current=a)}),[a,s,l,r]),(0,u.useEffect)((()=>{if("failed"!==o?.status)return;a&&(s(o),r(void 0));const t="payment"===o.failure.type?o.failure.code:o.failure.type;e({schemaId:I.$D.PayCheckoutError,payload:{errorType:t}})}),[o]),{onInstallmentsError:s}}(),k=(0,u.useMemo)((()=>({onClose(e,t){i(t),s||d(e),n()},setHeight(e){r&&(r.style.height=`${e}px`)},onComplete(e){_(e)},onError:S,onUpdateProgress(e,t){h.current=e;const n=t?v.find((e=>Number(e.id)===t?.id)):null,a=n&&t?.id!==Number(E?.id),r=!n&&t;if(a)b(n);else if(r){const e=(l=t,{lastUsedAt:"",name:"",id:String(l.id),brand:l.brand,expired:l.expired,expiring:!1,expiryMonth:l.month,expiryYear:l.year,funding:l.funding,lastDigits:l.last_digits,supportsInstallmentsInterestLoan:l.supports_installments_interest_loan,supportsInstallmentsSplitPayLoan:l.supports_installments_split_pay_loan,installmentsSplitPayLoanNotSupportedReason:l.installments_split_pay_loan_not_supported_reason,installmentsInterestLoanNotSupportedReason:l.installments_interest_loan_not_supported_reason,storesWithActiveSubscriptions:l.stores_with_active_subscriptions,billingAddress:{address:{firstName:l.billing_address.first_name,lastName:l.billing_address.last_name,company:l.billing_address.company,address1:l.billing_address.address1,address2:l.billing_address.address2,city:l.billing_address.city,postalCode:l.billing_address.zip,phone:l.billing_address.phone,countryCode:l.billing_address.country_code,zoneCode:l.billing_address.zone_code}},billingAddressValid:l.address_valid});C([...v,e]),b(e)}var l}})),[v,r,s,n,S,E?.id,C,_,b]),w=function(e,t){const{checkoutSessionIdentifier:n}=(0,F.Fo)(),a=(0,Tt.Y)(),{myshopifyDomain:r,merchantPolicies:l}=(0,Nt.q)(),[o]=(0,he.sg)(),{pageLoadId:i}=(0,P.v)(),[s,d]=(0,u.useState)(o?.id),c=(0,M.Jj)(),m=c.config?.availableLoanTypes.join(",")||"",p=l?.find((({handle:e})=>"refund-policy"===e))?.url,f=(0,gt.sG)(),h=(0,gt.Qw)(),{variant:y}=(0,Dt.F)(),g=(0,L.a)(D.le)&&y!==Dt.Y.Control;return(0,u.useEffect)((()=>{!e&&o&&d(o.id)}),[o,e]),(0,u.useMemo)((()=>{if(!n||!s)return null;let e;if(g){const t=(0,B.yc)(n);t&&(e=JSON.stringify({first_name:(l=t).address.firstName||"",last_name:l.address.lastName||"",company:l.address.company||"",address1:l.address.address1||"",address2:l.address.address2||"",city:l.address.city||"",zip:l.address.postalCode||"",phone:l.address.phone||"",country_code:l.address.countryCode,zone_code:l.address.zoneCode,country:""}))}var l;const o={checkout_token:n,locale:a,parent_page_load_id:i,selected_card_id:s,shopify_domain:r,last_known_step_id:t,available_loan_types:m,refund_policy_url:p,isPointOfSale:f,ephemeral_address:e},d=(f?Object.entries({...o,...h}):Object.entries(o)).map((([e,t=""])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),{primary:c}=(0,Lt.af)();return`https://${c}/pay/transactions/installments_iframe?${d}`}),[n,a,i,s,r,t,m,p,f,h,g])}(t,o),A=function(e,t,n){const[a,r]=(0,u.useState)(!1),l=(0,u.useMemo)((()=>{if(!t)return;const e=function(e,{logging:t,messenger:n,...a}){return{...(0,xt.UD)(n??(0,Mt.L)(),a),id:a.uuid(),log(n,...a){t&&console.log(`[${e}-RPC] ${n}`,...a)}}}(kt.CheckoutOne,{callable:wt,logging:St.y,messenger:(0,vt.b)(t,{terminate:!1}),uuid:Ct.u});return e.log("expose initializeC1"),e.expose({initializeC1(){}}),e}),[t]);(0,u.useEffect)((()=>{if(!l)return void r(!1);const t={closeModal(t,a){n("closeModal",arguments),e.onClose(t,a)},initializeC1(){return n("initializeC1",arguments),r(!0),{id:l.id,metadata:{timestamp:(new Date).toISOString()}}},installmentsError(){n("installmentsError",arguments),e.onError()},payWithInstallments(t){n("payWithInstallments",arguments),e.onComplete(t)},pingC1(e="interrogative"){return n("pingC1",arguments),l.log(`PING: ${e} @ ${(new Date).toISOString()}`),`PONG: ${kt.CheckoutOne}`},resizeModal(t){return n("resizeModal",arguments),e.setHeight(t),window.innerHeight},updateProgress(t,a){n("updateProgress",arguments),e.onUpdateProgress(t,a)}};function n(e,t){l?.log(e,t)}l.log("expose handlers"),l.expose({...t})}),[e,l]);const o=(0,u.useCallback)((e=>e.initializePay()),[]),{connected:i,error:s}=function(e,t,{timeout:n=At,attemptDelay:a=It}={}){const[r,l]=(0,u.useState)(!1),[o,i]=(0,u.useState)(),s=e&&t&&!r&&!o;return(0,u.useEffect)((()=>{let n=!1;return e&&t&&s&&(e.log("connection initiated"),async function(){if(!e||!t||!s)return;const{call:r,log:o}=e;for(;;)try{o("RPC channel opening...");const e=await t(r);if(!e){if(o("RPC channel not ready yet"),await new Promise((e=>setTimeout(e,a))),n)break;continue}o("RPC channel opened",e),n||l(!0);break}catch(d){o("RPC connection failed",d),n||i(d);break}}()),()=>{n=!0}}),[a,s,t,e]),(0,u.useEffect)((()=>{if(!e||!s)return;let t=!1;const{log:a}=e,r=setTimeout((()=>{if(s){const e=new Pt("RPC channel open timeout");a("RPC connection failed",e),t||i(e)}}),n);return()=>{clearTimeout(r),t=!0}}),[s,e,n]),(0,u.useEffect)((()=>(e||l(!1),()=>{e&&e.terminate()})),[e]),{connected:r,error:o}}(l,a?o:void 0,n);if(s)throw s;if(l&&a&&i)return l.call}(k,r);return(0,u.useEffect)((()=>{!e&&g||(h.current=void 0)}),[e,g]),(0,u.useEffect)((()=>{A&&e&&!g&&A.updateCheckout(e,h.current)}),[e,g,A]),(0,u.useEffect)((()=>{A&&E?.id&&A.updateCard(E.id)}),[A,E?.id]),(0,u.useEffect)((()=>{A&&s&&A.setInitialUserState(s)}),[A,s]),w?u.default.createElement(bt.x,{accessibilityLabel:y("shop_pay.pay_in_installments_title","Pay with Shop Pay Installments"),blocking:!0,iframeId:Vt,iframeRef:m,open:t,source:w}):null}var Wt=n(81772),qt=n(277);const $t={AffirmLogo:"iptI8"};var Ut=n(58168);const Ht=e=>u.createElement("svg",(0,Ut.A)({xmlns:"http://www.w3.org/2000/svg",width:40,height:18},e),u.createElement("path",{d:"M3.058 14.543c-.482 0-.724-.236-.724-.623 0-.72.812-.965 2.292-1.121 0 .962-.656 1.744-1.569 1.744zm.638-5.413c-1.058 0-2.275.495-2.936 1.017l.604 1.26c.53-.48 1.386-.892 2.159-.892.734 0 1.14.243 1.14.734 0 .33-.269.497-.777.563C1.99 12.056.5 12.575.5 14.026c0 1.15.826 1.846 2.116 1.846.92 0 1.74-.507 2.129-1.176v.99H6.46v-4.148c0-1.712-1.2-2.408-2.764-2.408m17.224.188v6.367h1.837v-3.068c0-1.458.89-1.886 1.51-1.886.243 0 .57.07.785.23l.334-1.684a2.1 2.1 0 0 0-.822-.147c-.944 0-1.538.415-1.929 1.258v-1.07h-1.714zm12.979-.188c-.971 0-1.697.57-2.075 1.118-.35-.709-1.093-1.118-1.983-1.118-.971 0-1.643.535-1.954 1.15v-.962h-1.77v6.367h1.838v-3.277c0-1.177.621-1.742 1.201-1.742.525 0 1.007.337 1.007 1.207v3.812h1.835v-3.277c0-1.19.606-1.742 1.213-1.742.486 0 .998.35.998 1.193v3.826h1.834v-4.401c0-1.431-.971-2.154-2.144-2.154m-17.447.187h-1.664v-.648c0-.842.485-1.083.903-1.083.462 0 .822.203.822.203l.566-1.284s-.573-.372-1.617-.372c-1.173 0-2.508.656-2.508 2.716v.468h-2.785v-.648c0-.842.485-1.083.903-1.083.238 0 .557.054.822.203l.566-1.284c-.338-.196-.88-.372-1.617-.372-1.173 0-2.508.656-2.508 2.716v.468H7.269v1.405h1.066v4.963h1.834v-4.963h2.785v4.963h1.834v-4.963h1.664zm1.095 6.367h1.832V9.317h-1.832z","data-logo-part":"text"}),u.createElement("path",{d:"M28.24.434c-4.956 0-9.372 3.413-10.625 7.8h1.795C20.457 4.968 24.012 2.1 28.24 2.1c5.14 0 9.582 3.882 9.582 9.925 0 1.356-.177 2.58-.513 3.66h1.743l.017-.059c.286-1.115.431-2.326.431-3.6 0-6.74-4.95-11.59-11.26-11.59z","data-logo-part":"accent"})),jt=18;function Yt({iconHeight:e=jt}){const t=(0,c.W)();return u.default.createElement(Ht,{className:$t.AffirmLogo,title:t("shop_pay.affirm_title","Affirm"),fill:Ve.ui.toRgb(),height:e})}const Gt="CA";function Xt(){const e=(0,c.W)(),[t,n]=(0,u.useState)(!1);return a=(0,p.md)((0,C.C)().billingAddress),a?.countryCode===Wt.O.Us&&a?.zoneCode===Gt?u.default.createElement(u.default.Fragment,null,u.default.createElement(l.S,{display:"inline",padding:["none","none","none","small500"]},u.default.createElement(s.$,{kind:"plain",onPress:()=>n(!0)},e("shop_pay.eligibility_details.title","Eligibility details"))),u.default.createElement(bt.x,{title:e("shop_pay.eligibility_details.title","Eligibility details"),open:t,onClose:()=>n(!1)},u.default.createElement(r.a,{spacing:"large200"},u.default.createElement(H.V,{appearance:"subdued"},e("shop_pay.eligibility_details.legal_copy","Payment options are offered by Affirm and are subject to eligibility check and may not be available in all states. California residents: Affirm Loan Services, LLC is licensed by the Department of Business Oversight. Loans are made or arranged pursuant to California Financing Law license 60DBO-111681.")),u.default.createElement(s.$,{onPress:()=>n(!1),kind:"secondary"},e("shop_pay.checkout.close_notification","Close")),u.default.createElement(r.a,{inlineAlignment:"center"},u.default.createElement(qt.C,{color:"branded",size:"medium"}),u.default.createElement(H.V,{size:"small",appearance:"subdued"},e("shop_pay.pay_in_installments_affirm_partnership",{affirmLogo:u.default.createElement(Yt,null)},"In partnership with {{affirmLogo}}")))))):null;var a}var Zt=n(21732);const Qt=()=>{const{loaded:e,error:t}=function(e){const t=(0,u.useRef)(document.querySelector(`script[src="${e}"]`)),[n,a]=(0,u.useState)(Boolean(t.current)),[r,l]=(0,u.useState)(!1);return(0,u.useEffect)((()=>{if(!e)return;const n=e=>{"load"===e.type&&a(!0)},r=e=>{"error"===e.type&&l(!0)};return t.current||(t.current=document.createElement("script"),t.current.type="application/javascript",t.current.async=!0,t.current.src=e,document.body.appendChild(t.current)),t.current.addEventListener("load",n),t.current.addEventListener("error",r),()=>{t.current?.removeEventListener("load",n),t.current?.removeEventListener("error",r)}}),[e]),{loaded:n,error:r}}((0,Lt.Lx)()),n=(()=>{const[e]=(0,Zt.l)(),t=(0,g.$v)()?.amount;if(!e||0===e.length)return null;const n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);let a,r,l=!1;if(!t)return null;const o=t/4,i={SPLIT_PAY:"split_pay",INTEREST:"interest",ZERO_PERCENT:"zero_percent"},s=e.map((e=>{const{minPrice:o,maxPrice:s,terms:d}=e,c=parseFloat(o.amount),u=parseFloat(s.amount);return a?c<a&&(a=c):a=c,r?u>r&&(r=u):r=u,t>=c&&t<=u&&(l=!0),{min_price:n(c),max_price:n(u),terms:d.map((e=>{const{apr:t,loanType:n,installmentsCount:a}=e;return{apr:t,loan_type:i[n],installments_count:a}}))}}));return a&&r?{type:"checkout",price_per_term:n(o),full_price:n(t),eligible:l,min_price:n(a),max_price:n(r),number_of_payment_terms:4,financing_plans:s,installments_buyer_prequalification_enabled:!1,seller_id:null}:null})();return t?null:e&&n?u.default.createElement("span",{className:"pZg1c"},u.default.createElement("shop-pay-installments-banner",{"shopify-meta":JSON.stringify(n)})):null};function Jt(){const e=(0,c.W)(),[t,n]=(0,u.useState)(!1),a=(0,u.useCallback)((()=>n(!1)),[]),l=function(){const[e,t]=(0,u.useState)(),[n,a]=(0,u.useState)(!1),{value:r}=(0,_.u_)(),l=function(){const e=(0,gt.sG)(),{value:t}=(0,_.Ek)(),n=(0,u.useMemo)((()=>t?.lines.filter((({quantity:e})=>e>0))),[t?.lines]),{value:a}=(0,g.ld)(k.z.OneTimePurchase),r=(0,Ge.bW)(a),{shippingRequired:l}=(0,g.kG)(),[o]=(0,he.Df)(),i=(0,B.Bv)(e,r),s=(0,gt.bs)(),{value:d}=(0,_.DN)(),c=function(e){switch(e?.status){case"available_total":return e.totalTax;case"available_total_included":return e.totalIncludedInTarget;default:return}}(d),{value:m}=(0,_.u_)();return(0,u.useMemo)((()=>{if(n)return{merchandiseLines:n,shippingAddress:l?o?.address:void 0,shippingAmount:r?.costAfterDiscounts,taxAmount:c,total:m,channel:e?W.Cu.RetailPos:W.Cu.Online,deliveryMethod:i,storeAddress:s}}),[e,r,o,l,m,c,n,i,s])}(),o=(0,_t.Z)(e);return(0,u.useEffect)((()=>{if(!r||!l)return void t(void 0);const n={format:"${{amount}}",decimal_mark:".",thousands_separator:","};if(!e)return void t({currencyFormat:n,installmentsProposalData:l,paymentDue:r});const o=JSON.stringify(l)!==JSON.stringify(e.installmentsProposalData);o&&t({currencyFormat:n,installmentsProposalData:l,paymentDue:r}),a(o)}),[e,l,r]),{checkoutProposal:e,previousCheckoutProposal:o,hasChanged:n}}(),{isProgressing:o,progressContinue:i}=xe(),m=(0,O.W)(),p=(0,M.Jj)(),{recordImmediately:f}=(0,P.v)(),h=Ke(),y=$e(),E=p.config?.availableLoanTypes,b=(0,yt.s)();return(0,u.useEffect)((()=>{l?.hasChanged&&t&&(a(),m.notify(new V.BS("ShopPayAffirmModal closed due to checkout details change"),{metadata:{event:{checkoutProposal:JSON.stringify(l?.checkoutProposal),previousCheckoutProposal:JSON.stringify(l?.previousCheckoutProposal)}}}))}),[l?.hasChanged,t,a]),u.default.createElement(u.default.Fragment,null,u.default.createElement(r.a,null,u.default.createElement("div",{className:y},u.default.createElement(s.$,{loading:o,disabled:h,inlineSize:"fill",onPress:async()=>{await i({withShopPayInstallments:!0})&&(n(!0),f({schemaId:I.$D.PayPaymentPageUiInteraction,payload:{action:"continue_with_installments"}}))}},u.default.createElement(d.E,{size:"large"},e("general.continue_to_payment_plans_button_label","Continue to payment plans")))),u.default.createElement(H.V,{size:"small",appearance:"subdued",inlineAlignment:"start"},(()=>{const t=(0,B.eu)(E),n=new URLSearchParams(location.search).has("force_installments_banner"),a=!b.locale.startsWith("en");return u.default.createElement(H.V,{size:"small",appearance:"subdued"},t&&`${e("shop_pay.installments_subject_to_eligibility","Subject to eligibility.")} `,e("shop_pay.installments_partnership_affirm",{affirmLogo:u.default.createElement(Yt,null)},"Installments in partnership with {{affirmLogo}}."),a&&` ${e("shop_pay.installments_translations_disclaimer","Affirm and its offerings are supported in English only. Translations are not provided by Affirm.")}`,u.default.createElement(Xt,null),n&&u.default.createElement(Qt,null))})()),u.default.createElement(at,null),u.default.createElement(nt,null)),u.default.createElement(Ot,{checkoutDetails:l?.checkoutProposal,open:t,onClose:a}))}function Kt(){q();const{layout:e}=(0,v.I)(),t=!(0,$.b)().isPartner()&&"app"===e,n=(0,M.Jj)(),a=n.supported&&n.paymentMethodSelected?Jt:pt;return t?u.default.createElement(h.Z,null,u.default.createElement(ht,null,u.default.createElement(a,null))):u.default.createElement(a,null)}var en=n(60118),tn=n(13614),nn=n(59208),an=n(41813),rn=n(70212),ln=n(51080);const on={PayPalExpressButtonContainer:"bci5X",PayPalExpressButtonContainerRedesign:"Qaml6",PayPalExpressButtonContainerWhenLoading:"ZfW5G",PayPalExpressButtonContainerWhenSpinnerDisplayed:"_53FP_"};function sn({isLoading:e,isSpinnerDisplayed:t,children:n}){const a=(0,Oe.Bl)();return u.default.createElement("div",{className:G()(on.PayPalExpressButtonContainer,{[on.PayPalExpressButtonContainerRedesign]:a,[on.PayPalExpressButtonContainerWhenLoading]:e,[on.PayPalExpressButtonContainerWhenSpinnerDisplayed]:t})},n)}function dn(){const e=(0,an.H5)(),[t]=(0,an.VS)(),n=u.default.createElement(l.S,{inlineAlignment:"center"},u.default.createElement(rn.y,{size:"large"})),a="rendered"!==t.status&&"error"!==t.status;return u.default.createElement(u.default.Fragment,null,u.default.createElement(sn,{isLoading:e,isSpinnerDisplayed:a},u.default.createElement(ln.Q,{buttonLabel:"pay",isPayWithPayPalFlow:!0,progressToNextStep:!0,buttonColor:"blue",isDisabled:e})),a?n:null)}var cn=n(20484),un=n(69516),mn=n(99741);const pn=(0,u.forwardRef)((function({label:e,loading:t,disabled:n,formId:a},r){(0,De.xT)((e=>{e===De.YO.Continue&&o()}));const o=()=>{a&&(0,Be.Pu)(a)};return u.default.createElement(h.Z,null,u.default.createElement("div",{onTouchMove:e=>{e.preventDefault()},className:"OXkEs",id:"checkout-sdk-pay-button-container"},u.default.createElement(l.S,{padding:["large200","large200","large400","large200"]},u.default.createElement(s.$,{onPress:o,accessibilityRole:"submit",inlineSize:"fill",loading:t,disabled:n,ref:r},u.default.createElement(d.E,{size:"large"},e)))))}));var fn=n(45559),hn=n(42420),yn=n(18194);class gn extends Error{constructor(...e){super(...e),this.name="RageClickError"}}function _n({children:e}){const t=(0,Ue.S)(),n=(0,O.W)(),a=(0,ce.zM)(),r=(0,u.useRef)(),l=(0,u.useRef)(),{blocked:o}=(0,f.T4)();return(0,f.od)((e=>{r.current=void 0,l.current=void 0,"violations"in e&&(r.current=e.violations.map((e=>e.code))),"reasons"in e&&(l.current=e.reasons)})),u.default.createElement("div",{onClickCapture:function(e){e.detail>2&&(t.increment(He.J.RageClick,{value:1}),n.notify(new gn,{metadata:{context:{numberOfErrors:a?.numberOfErrors(),lastInterceptionReasons:l.current,lastViolations:r.current,blocked:o}}}))}},e)}var En=n(19874),bn=n(31533),vn=n(23708);const Cn=e=>u.default.createElement(a.w,null,e);function Sn(){const e=(0,en.VH)({shopPay:Kt})??wn,t=(0,tn.w9)("Checkout::Actions::RenderBefore");return u.default.createElement(fn.y,{impressionType:"pay_now_button",impressionFeatures:[]},u.default.createElement(r.a,null,u.default.createElement(nn.N,{extensions:t,render:Cn}),u.default.createElement(l.S,{id:"pay-button-container"},u.default.createElement(_n,null,u.default.createElement(e,null)))))}function kn(){const e=(0,c.W)(),{walletPaymentMethods:t}=(0,cn.b)(),n=(0,un.Fu)(),a=(0,an._B)(),r=(0===t.length&&n?e("payment.no_working_method_error","This store can’t accept payments right now. Refresh this page or come back later."):null)||a;return r?u.default.createElement(o.l,{status:"critical"},r):null}function wn(){const e=(0,i.M)(),{progressing:t,blocked:n}=(0,f.T4)(),{nextStep:a}=(0,st.PL)(),l=(0,an.YU)(),o=function(){const[e]=(0,an.dx)(),[t]=(0,an.VS)(),n=(0,an.YU)(),a=(0,an.H5)();return"error"!==e.status&&"error"!==t.status&&(n||a)}(),[h]=(0,an.dx)(),[y]=(0,an.c5)(),[_]=(0,an.VS)(),E=(0,c.W)(),v=(0,it.P)("simulated"),{loading:C}=(0,vn.c$)(),S=(0,p.md)(C),[{loading:k}]=(0,hn.T)(),w=(0,m.m)().searchParams.has(yn.JV),{displayedPaymentMethods:P}=(0,g.Ti)(),A=null!=P&&0!==P.length,I=(0,b.Bf)(),x=t||k||w,M=!A&&I||n||v&&"review"!==a.id||l&&("error"===h.status||"error"===y.status||"error"===_.status),T=(0,mn.bo)()?E("general.pay_now_button_label","Pay now"):a.label,N=(0,$.b)().isPartner(),L=(0,bn.M)(),D=(0,En.uL)();let R;const B=S.size>0;switch(!0){case o:R=u.default.createElement(dn,null);break;case N:R=u.default.createElement(Fe,{loading:x||B,disabled:M,isSubmit:!0});break;case L:R=u.default.createElement(pn,{formId:e?.id,loading:x,disabled:M,label:T,ref:D("pay_button")});break;default:R=u.default.createElement(s.$,{accessibilityRole:"submit",inlineSize:"fill",loading:x,disabled:M,ref:D("pay_button")},u.default.createElement(d.E,{size:"large"},T))}return u.default.createElement(r.a,{spacing:"large200"},M&&u.default.createElement(kn,null),R)}},78741:(e,t,n)=>{n.d(t,{T:()=>i});var a=n(76882),r=n(47168),l=n(15299),o=n(63292);function i(){const e=(0,a.W)(),{value:t}=(0,o.u_)();return l.default.createElement(r.D,{level:1,autoFocus:!0},0===t?.amount?e("review.blocks.review_title_free_order","Review and complete your order"):e("review.review_title","Review and pay"))}},75389:(e,t,n)=>{n.d(t,{iJ:()=>u,vq:()=>m,wn:()=>c});var a=n(58168),r=n(15299),l=n(54740),o=n(82199),i=n(77491),s=n(62344),d=n(32148);function c({children:e,hideDivider:t,padding:n,...i}){const{shell:{backgroundImage:s,colorScheme:c="scheme1"},main:{section:u,backgroundImage:m,colorScheme:f,spacing:h,dividers:y}}=(0,d.kV)(),g=(0,d.S2)(u?.blockPadding,u?.inlinePadding),_=m||s?void 0:c??f;return r.default.createElement(r.default.Fragment,null,r.default.createElement(l.w,(0,a.A)({padding:n??g??o.OF.default("large200").when({viewportInlineSize:{min:"extraSmall"}},"none"),borderRadius:u?.cornerRadius,colorScheme:u?.colorScheme??_},i),e),!t&&r.default.createElement(r.default.Fragment,null,r.default.createElement(p,{spacing:h,showDivider:y})))}function u({condition:e,children:t,...n}){return e?r.default.createElement(c,n,t):r.default.createElement(r.default.Fragment,null,t)}function m({condition:e,...t}){const{hideDivider:n,children:a}=t;return e?r.default.createElement(c,t):r.default.createElement(r.default.Fragment,null,a,!n&&r.default.createElement(p,null))}function p({spacing:e,showDivider:t}){const n=o.OF.default("base").when({viewportInlineSize:{min:"extraSmall"}},e??"large400");return r.default.createElement(r.default.Fragment,null,r.default.createElement(i.S,{spacing:n}),t&&r.default.createElement(r.default.Fragment,null,r.default.createElement(s.c,null),r.default.createElement(i.S,{spacing:n})))}},16505:(e,t,n)=>{n.d(t,{K:()=>i});var a=n(84506),r=n(15299),l=n(32148);const o={SectionsContainer:"hhdYQ"};function i({children:e}){const{shell:{backgroundImage:t},main:{sectionsContainer:n,backgroundImage:i},canvas:s}=(0,l.kV)(),d=(0,l.S2)(n?.blockPadding,n?.inlinePadding),c="transparent"===s?.background||Boolean(i)||Boolean(t)?"":o.SectionsContainer;return r.default.createElement(a.a,{padding:d??"none"},r.default.createElement("div",{className:c},e))}},99741:(e,t,n)=>{n.d(t,{H_:()=>s,Ho:()=>c,bo:()=>d});var a=n(73896),r=n(94973),l=n(60118),o=n(75090);const i=(0,a.MN)(void 0);function s(){const[e,t]=(0,r.fp)(i);return{returnTo:e=>()=>{t(e)},currentReturnSection:e,reset(){t(void 0)}}}function d(){const e=(0,o.TT)();return(0,l.VH)({payPal:e,googlePay:e})??!1}function c(){const e=(0,l.Gy)(),t=(0,o.TT)(),{nextStep:n}=(0,o.PL)();return"payPal"===e||"googlePay"===e||t&&"thankYou"===n.id}},20399:(e,t,n)=>{n.d(t,{K:()=>_});var a=n(15299),r=n(9520),l=n(18012),o=n(76882),i=n(85630),s=n(94973),d=n(31374),c=n(30698),u=n(32261),m=n(80125),p=n(60118),f=n(80469),h=n(92996),y=n(63292),g=n(5949);function _(){const e=(0,o.W)(),t=(0,i.a)(),n=(0,p.Gy)(),{shippingRequired:m}=(0,g.D)(),_=(0,s.md)((0,d.C)().shippingAddress),{value:b}=(0,y.FC)(),v=(0,h.U8)(),C=v[0],S=(0,f.N)(),k=S?.selectedCompanyLocation?.name,w=Boolean("businessCustomer"===n&&k);if(!(m||v.length&&C?.lines?.length))return null;if(C.pickupAddress)return a.default.createElement(E,{address:C.pickupAddress??void 0,locationName:C.pickupAddressName});const P="unavailable"===b?.status?_:C.deliveryAddress,A=a.default.createElement(a.default.Fragment,null,w?a.default.createElement(r.V,null,k):null,P?a.default.createElement(u.H,{address:P}):a.default.createElement(r.V,{appearance:"subdued"},e("review.blocks.no_address","(No address)"))),I=C.lines.length?C.lines.map((({title:n,lineAmount:o})=>{const i=0===o.amount?e("shipping.free_rate_label","Free"):t(o.amount,{currency:o.currencyCode,form:"short"});return a.default.createElement(r.V,{key:n},a.default.createElement(l.E,null,n),a.default.createElement(a.default.Fragment,null," ","· ",a.default.createElement(l.E,{emphasis:"bold"},i)))})):null;return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.pp,{id:"address",label:e("review.blocks.shipping_address_title","Ship to"),summary:A}),I?a.default.createElement(c.pp,{id:"shipping",label:e("review.blocks.shipping_method_title","Shipping method"),summary:I}):null)}function E({address:e,locationName:t}){const n=(0,o.W)(),r=(0,m.IL)(e,{hiddenFields:["postalCode","countryCode","phone"]});return t&&r?a.default.createElement(c.pp,{id:"delivery",label:n("review.blocks.pick_up_in_store_shipping_method_html",{location_name:t},"Pick up in store · %{location_name}"),summary:a.default.createElement(l.E,null,r)}):null}},50256:(e,t,n)=>{n.d(t,{D:()=>dt});var a=n(15299),r=n(13788),l=n(9520),o=n(54740),i=n(84506),s=n(62344),d=n(76882),c=n(50996),u=n(32148),m=n(73534),p=n(90992),f=n(77491),h=n(37981),y=n(86883),g=n(1191),_=n(75706),E=n(85630),b=n(35751),v=n(84030),C=n(63292),S=n(13614),k=n(11157),w=n(92996),P=n(57511),A=n(81930),I=n(85762),x=n(5949),M=n(36125),T=n(39746),N=n(64106),L=n(21744),D=n(56784),R=n(66126),B=n(98165),F=n(38948),z=n(72236),V=n(59208),O=n(23743),W=n(1304),q=n(18012),$=n(48642),U=n(85013),H=n(41985),j=n(52110),Y=n(91287),G=n(89857),X=n(72886);function Z({moneyLines:e,deliveryLoading:t,subdued:n,getLinePrice:l,getPriceLetterCase:o}){const i=(0,E.a)(),s=(0,d.W)(),{moneyLines:{valueTypographyStyle:c}}=(0,r.x)(),u=e.length>0,m=e[0]?.currencyCode,p=e[0]?.type,{price:f,priceAfterDiscounts:h}=e.reduce((({price:e,priceAfterDiscounts:t},{cost:n,costBeforeDiscounts:a})=>({price:e+a,priceAfterDiscounts:t+n})),{price:0,priceAfterDiscounts:0}),y=u&&f&&f>h,g=a.default.createElement(q.E,{appearance:n?"subdued":void 0,size:n?"small":"base",style:c,translate:!1,letterCase:o(h,p)},t?s("order_summary.calculating","Calculating…"):l(h,p));return t?g:y?a.default.createElement(U.o,{spacing:"small200",inlineAlignment:"center",blockAlignment:"center"},a.default.createElement(q.E,{size:"base",appearance:"subdued",accessibilityRole:"deletion",translate:!1},i(f,{currency:m})),g):g}const Q=({discountLines:e,shippingLineLabel:t,shippingTooltip:n,forceSubduedStyle:l})=>{const[o,s]=(0,a.useState)(!1),c=(0,d.W)(),u=(0,E.a)(),{value:m,loading:p}=(0,C.FC)(),{shippingRequired:f}=(0,x.D)(),{moneyLines:{labelTypographyStyle:h,valueTypographyStyle:y}}=(0,r.x)(),b=(0,w.U8)(),{currentStep:v}=(0,M.Wm)(),S="information"===v?.id,{isOrderEditCheckout:P}=(0,k.S)(),A=(0,D.a)(R.F7),I=(0,N.Bl)(),T=(0,a.useMemo)((()=>{return"filled"===m?.status?(e=m.lines,t=!I,(0,G.HU)(e).reduce(((e,n)=>{if("not_required"===n.status)return e;const{methods:a,selectedDeliveryMethodHandle:r,type:l}=n,o=a.find((({handle:e})=>r===e));if(!o)return e;const i=o?.priceBreakdown?.length&&o.priceBreakdown.every((e=>e.excludeFromDeliveryOptionPrice)),s=o?.priceBreakdown?.every((e=>!Boolean(e.targetMerchandiseLines[0].sellingPlan?.prepaid)));return i&&s&&t?e:[...e,{type:l,cost:o.costAfterDiscounts.amount,costBeforeDiscounts:o.cost.amount,currencyCode:o.costAfterDiscounts.currencyCode,methodType:o.methodType}]}),[])):[];var e,t}),[m,I]),L=T.length>1&&!function(e){return e.every((e=>e.methodType===j.y.PickUp))}(T)&&!function(e){return e.every((e=>0===e.cost))}(T),B=L&&!I?c("order_summary.multiple_shipping_lines_label","Shipping total"):c("order_summary.shipping_label","Shipping"),[F,z]=(0,a.useState)(B);(0,a.useEffect)((()=>{if(!p){const e=P?b[0]?.pickupAddress:T[0]?.methodType===j.y.PickUp;z(e?c("order_summary.pickup_label","Pickup"):B)}}),[T,p,c,B,b,P]);const V=Boolean(m&&"filled"===m.status&&m.lines.some((({status:e})=>"not_required"!==e))),Q=!p&&!f&&!V,J=(S||I)&&n,K=(0,w.qw)(),ee=(0,w.Dq)(),te=T.length>0?T.reduce(((e,{cost:t})=>e+t),0):void 0,ne=P?K:te,ae=ee||T;if(Q)return null;const re=Boolean("unavailable"===m?.status)||p||Boolean(l),le=e?.filter((e=>(0,X._1)(e)))??[],oe=A?le?.map((e=>a.default.createElement(O.C,{blockAlignment:"center",spacing:"small400",key:e.title,columns:["auto","fill"]},a.default.createElement(W.In,{source:"discount",size:"small"}),a.default.createElement(q.E,{style:h,appearance:"subdued"},e.title.toUpperCase())))):null;return a.default.createElement(a.default.Fragment,null,a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,L?a.default.createElement($.o,{onPress:()=>s((e=>!e)),"aria-controls":"shipping-money-line","aria-expanded":o},a.default.createElement(i.a,{spacing:"small400"},a.default.createElement(U.o,{spacing:"small200",blockAlignment:"center"},a.default.createElement(q.E,{style:h},t??F),J,a.default.createElement(W.In,{source:o?"chevronUp":"chevronDown",size:"extraSmall",appearance:"accent"})),oe)):a.default.createElement(i.a,{spacing:"small400"},a.default.createElement(U.o,{spacing:"small400",blockAlignment:"center"},a.default.createElement(q.E,{appearance:l?"subdued":void 0,style:h},t??F),J),oe)),a.default.createElement(g.yb,null,A?a.default.createElement(Z,{getLinePrice:de,getPriceLetterCase:se,moneyLines:ae,subdued:re||Boolean(l),deliveryLoading:p}):a.default.createElement(q.E,{appearance:re?"subdued":void 0,emphasis:re?void 0:"bold",size:re?"small":void 0,style:y,translate:!1,letterCase:se(ne)},de(ne)))),L?a.default.createElement(H.e,{open:o,id:"shipping-money-line"},a.default.createElement(_.c,{title:""},T.map((e=>a.default.createElement(g.rX,{key:e.type},a.default.createElement(g.Ge,null,a.default.createElement(q.E,{appearance:"subdued",style:h},e.type===Y.z.OneTimePurchase?c("shipping.one_time_purchase_shipping","One-time shipping"):c("shipping.subscription_shipping","Subscription shipping"))),a.default.createElement(g.yb,null,A?a.default.createElement(Z,{getLinePrice:de,getPriceLetterCase:se,moneyLines:[e],subdued:re,deliveryLoading:p}):a.default.createElement(q.E,{appearance:"subdued",size:Boolean("unavailable"===m?.status)||p?"small":void 0,style:y,translate:!1,letterCase:se(e.cost,e.type)},de(e.cost,e.type)))))))):null);function ie(e){return e.every((e=>e.type===Y.z.Subscription))}function se(e,t){return p||void 0===e||!T.length&&!b.length||0!==e?"none":t!==Y.z.Subscription||ie(T)?"uppercase":"none"}function de(e,t){if(p)return c("order_summary.calculating","Calculating…");if(void 0!==e&&(T.length||b.length)){const n=t!==Y.z.Subscription||ie(T)?c("order_summary.free_total_label","Free"):c("shipping.subscription_delivery_description.shipping_price_included","Included"),a=P?b[0].total?.currencyCode:T[0].currencyCode;return 0===e?n:u(e,{currency:a,form:"short"})}return c("order_summary.shipping_default_value","Enter shipping address")}};var J=n(38482),K=n(97865),ee=n(35240);function te({line:e,title:t,amount:n}){const l=(0,d.W)(),o=(0,E.a)(),{isOrderEditCheckout:i}=(0,k.S)(),s=i&&n,c=(0,D.a)(R.F7),u=(0,D.a)(R.WE),{moneyLines:{labelTypographyStyle:m,valueTypographyStyle:p}}=(0,r.x)(),f=(0,w.ar)(),h=0===(0,w.qw)()&&f&&f.length>0;if(e&&!(0,J.rj)(e)||e&&"CART"!==e.discount.presentationLevel||e&&0===e.amount.amount&&u)return null;const y=l("order_summary.free_shipping_discount_label","Free shipping"),_=!!e&&((0,X._1)(e)||0===e.allocations.length);if(c&&_)return null;let b=e?.title;return e&&"custom"===e.discount.type&&""===e.title&&(b=l("order_summary.custom_discount","Custom discount")),a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,a.default.createElement(O.C,{blockAlignment:"center",spacing:"small400",columns:["auto","fill"]},a.default.createElement(W.In,{source:"discount",size:"small"}),a.default.createElement(q.E,{style:m,appearance:"subdued"},e?b?.toUpperCase():t?.toUpperCase()))),a.default.createElement(g.yb,null,a.default.createElement(q.E,{style:p},s?(e=>h?y:(0,ee.eO)(o(e.amount,{currency:e.currencyCode,form:"short"})))(n):e&&function({line:e,freeShippingLabel:t,formatCurrency:n}){return e.allocations.some((e=>e.target.type===K.t.Deliveryline))||0===e.allocations.length?t:(0,ee.eO)(n(e.amount.amount,{currency:e.amount.currencyCode,form:"short"}))}({line:e,freeShippingLabel:l("order_summary.free_shipping_discount_label","Free shipping"),formatCurrency:o}))))}const ne=({lines:e})=>{const t=(0,d.W)(),{isOrderEditCheckout:n}=(0,k.S)(),r=(0,w.sE)(),l=n&&r,o=(0,w.ar)(),i=((e,t)=>e?.filter((e=>!!(0,J.rj)(e)&&"DELIVERYLINE"!==e.discount.targetType&&(!t||0!==e.amount.amount)&&e.allocations.length>0&&e.allocations.every((t=>"CART"===e.discount.presentationLevel&&"DELIVERYLINE"!==t.target.type))))??[])(e,(0,D.a)(R.WE));return a.default.createElement(a.default.Fragment,null,i.length>0&&a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,a.default.createElement(q.E,null,t("order_summary.discount_order_stacking",{count:i.length},{one:"Order discount",other:"Order discounts"})))),i.map((e=>a.default.createElement(te,{key:e.title,line:e}))),l&&r.map((e=>a.default.createElement(te,{key:e.label,title:e.label,amount:e.amount}))),o&&o.map((e=>a.default.createElement(te,{key:e.label,title:e.label,amount:e.amountDiscounted}))))};var ae=n(79858),re=n(57003),le=n(52027),oe=n(38743),ie=n(34839),se=n(11635);function de({children:e}){return"function"==typeof e?e():e}function ce({children:e}){let t,n;return a.Children.forEach(e,(e=>{var r;(0,a.isValidElement)(e)&&(t||void 0===e.props.condition?n||e.type!==de||(n=e):("function"==typeof(r=e.props.condition)?r():r)&&(t=e))})),t??n??null}function ue({taxesLabel:e,taxesTooltip:t}){const{moneyLines:{labelTypographyStyle:n,valueTypographyStyle:l}}=(0,r.x)(),o=(0,E.a)(),i=(0,d.W)(),{value:s,loading:u}=(0,C.DN)(),{value:m,loading:p}=(0,C.FS)(),[f]=(0,D.Z)([R.G3]),h=(0,le.j9)(),{id:y}=(0,c.q)(),_=(0,ie.Fo)(),b=(0,v.rR)(),S=(0,C.Jv)(),k=(0,w.vQ)(),P=(0,v.Fw)(),A=k||(S.value&&P?S.value:"available_total"===s?.status?s.totalTax:null),I=(0,re.R)(h.information()),x=function(e){const t=(0,se.g)(),n=(0,a.useRef)(!1);return(0,a.useCallback)((()=>{n.current||t?.record(e),n.current=!0}),[e,t])}({schemaId:"checkout_taxes_more_info/2.0",payload:{shopId:parseInt((0,oe.ee)(y),10),checkoutToken:_.checkoutSessionIdentifier}});if(b||0===A?.amount)return null;const M=u||p;return a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,a.default.createElement(ce,null,a.default.createElement(ce.When,{condition:Boolean(e)},a.default.createElement(q.E,{style:n},e)),a.default.createElement(ce.When,{condition:Boolean(m)||!f&&!I},a.default.createElement(q.E,{style:n},i("order_summary.taxes_label","Taxes"))),a.default.createElement(ce.When,{condition:f},a.default.createElement(U.o,{blockAlignment:"center",spacing:"small400"},a.default.createElement(q.E,{style:n},i("order_summary.estimated_taxes_label","Estimated taxes")),a.default.createElement($.o,{overlay:a.default.createElement(ae.m_,{onRead:x,readTimeout:1e3},i("order_summary.estimated_taxes_finalization_tooltip_content","The final tax and total will be confirmed by email or text after you place your order."))},a.default.createElement(W.In,{source:"question",size:"small",accessibilityLabel:i("general.tooltip_accessibility_label","More information")})))),a.default.createElement(ce.Fallback,null,a.default.createElement(q.E,{style:n},i("order_summary.information_estimated_taxes_label","Taxes (estimated)"))))),a.default.createElement(g.yb,null,a.default.createElement(U.o,{spacing:"small200"},a.default.createElement(q.E,{appearance:M?"subdued":void 0,emphasis:M?void 0:"bold",size:M?"small":void 0,style:l},A&&!M?o(A.amount,{currency:A.currencyCode,form:"short"}):i("order_summary.calculating","Calculating…")),t)))}function me({taxesLabel:e}){const{moneyLines:{labelTypographyStyle:t,valueTypographyStyle:n}}=(0,r.x)(),l=(0,E.a)(),o=(0,d.W)(),{value:i,loading:s}=(0,C.FS)(),{value:c,loading:u}=(0,C.eO)(),m="available_total"===c?.status?c.totalDuty:null,p=i?.incoterm===J.We.Ddu&&i.reason===J.eX.ErrorOccured,f=u||s,h=m||p,y=a.default.createElement(U.o,{alignment:"center",spacing:"small400"},a.default.createElement(q.E,{style:t},e??o("order_summary.duties_label","Duties")),p&&!f&&a.default.createElement($.o,{overlay:a.default.createElement(ae.m_,null,o("order_summary.error_duties_tooltip","This order is being shipped from another country, so duties and taxes may be charged on delivery."))},a.default.createElement(W.In,{source:"question",size:"base",accessibilityLabel:o("general.tooltip_accessibility_label","More information")})));return a.default.createElement(a.default.Fragment,null,h&&a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,y),a.default.createElement(g.yb,null,a.default.createElement(U.o,{spacing:"small200"},p?a.default.createElement(q.E,{appearance:"subdued",size:"small",style:n},o("order_summary.may_be_charged_on_delivery","May be charged on delivery")):a.default.createElement(q.E,{appearance:f?"subdued":void 0,emphasis:f?void 0:"bold",size:f?"small":void 0,style:n},m&&!f?l(m.amount,{currency:m.currencyCode,form:"short"}):o("order_summary.calculating","Calculating…"))))))}ce.When=function({children:e}){return"function"==typeof e?e():e},ce.Fallback=de;const pe=({loading:e})=>{const{moneyLines:{valueTypographyStyle:t,labelTypographyStyle:n}}=(0,r.x)(),l=(0,d.W)();return a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,a.default.createElement(U.o,{alignment:"center",spacing:"small400"},a.default.createElement(q.E,{style:n},l("order_summary.duties_and_taxes_label","Duties and taxes")),a.default.createElement($.o,{overlay:a.default.createElement(ae.m_,{readTimeout:1e3},l("order_summary.error_duties_tooltip","This order is being shipped from another country, so duties and taxes may be charged on delivery."))},a.default.createElement(W.In,{source:"question",size:"base",accessibilityLabel:l("general.tooltip_accessibility_label","More information")})))),a.default.createElement(g.yb,null,a.default.createElement(q.E,{appearance:e?"subdued":void 0,size:e?"small":void 0,style:t},e?l("order_summary.calculating","Calculating…"):l("order_summary.may_be_charged_on_delivery","May be charged on delivery"))))},fe=({taxesLabel:e,taxesTooltip:t,dutiesIncluded:n})=>{const{value:r,loading:l}=(0,C.FS)(),{value:o,loading:i}=(0,C.i0)();return o?.refuseDutiesPermitted&&o?.buyerRefusesDuties&&r?.incoterm===J.We.Ddu?a.default.createElement(pe,{loading:i||l}):n?a.default.createElement(ue,{taxesLabel:e,taxesTooltip:t}):a.default.createElement(a.default.Fragment,null,a.default.createElement(me,{taxesLabel:e}),a.default.createElement(ue,{taxesLabel:e,taxesTooltip:t}))};function he({line:e}){const t=(0,d.W)(),n=(0,E.a)(),r=(0,a.useMemo)((()=>{const t=e.method.redemptionContent?.sourceAmount;if(!t||!e.cost||!e.cost.amount)return;const a=parseFloat(t.amount);return!a||a===e.cost.amount&&t.currencyCode===e.cost.currencyCode?void 0:n(a,{currency:t.currencyCode,form:"short"})}),[e,n]),l=t("order_summary.shop_cash_title","Shop Cash");if(!e.cost)return null;const o=r?`${l} · ${r}`:l,{amount:i,currencyCode:s}=e.cost,c=(0,ee.eO)(n(i,{currency:s,form:"short"}));return a.default.createElement(g.rX,{label:o,value:c})}function ye({line:e}){const t=(0,E.a)(),n=(0,d.W)();if(!e.cost)return null;const r=n("payment.store_credit.label","Store credit"),l=(0,ee.eO)(t(e.cost.amount,{currency:e.cost.currencyCode,form:"short"}));return a.default.createElement(g.rX,{label:r,value:l})}var ge=n(64237);function _e({line:e}){const{moneyLines:{labelTypographyStyle:t,valueTypographyStyle:n,giftCardStyle:l="masked"}}=(0,r.x)(),o=(0,E.a)(),i=(0,d.W)();if(!e.cost)return null;const{amount:s,currencyCode:c}=e.cost,u=(0,ee.eO)(o(s,{currency:c,form:"short"})),m=(0,ge.IV)(e.method.redemptionContent);return a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,a.default.createElement(U.o,null,a.default.createElement(q.E,{style:t},i("order_summary.gift_card_label","Gift card")),"masked"===l?a.default.createElement(U.o,{blockAlignment:"center",spacing:"small400"},a.default.createElement(W.In,{source:"giftFill",appearance:"subdued"}),a.default.createElement(y.S,{accessibilityVisibility:"hidden"},a.default.createElement(q.E,null,(0,ge.gg)(m))),a.default.createElement(y.S,{visibility:"hidden"},a.default.createElement(q.E,null,i("order_summary.gift_card_ending",{last_characters:m||""},"Gift card ending with %{last_characters}")))):null)),a.default.createElement(g.yb,null,a.default.createElement(q.E,{style:n,emphasis:"bold"},u)))}function Ee({line:e}){switch(e.method.redemptionSource){case P.D.ShopCash:{const t=e;return a.default.createElement(he,{line:t})}case P.D.StoreCredit:{const t=e;return a.default.createElement(ye,{line:t})}case P.D.Custom:{const t=e;return a.default.createElement(_e,{line:t,key:t.method.redemptionContent?.redemptionAttributes[0].value})}default:return null}}function be({line:e}){const{moneyLines:{labelTypographyStyle:t,valueTypographyStyle:n,giftCardStyle:l="masked"}}=(0,r.x)(),o=(0,E.a)(),i=(0,d.W)(),s=e.method.code.slice(-4).toUpperCase();return a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,a.default.createElement(U.o,null,a.default.createElement(q.E,{style:t},i("order_summary.gift_card_label","Gift card")),"masked"===l?a.default.createElement(U.o,{blockAlignment:"center",spacing:"small400"},a.default.createElement(W.In,{source:"giftFill"}),a.default.createElement(y.S,{accessibilityVisibility:"hidden"},a.default.createElement(q.E,{style:n},i("order_summary.gift_card_masked",{last_characters:s},"•••• %{last_characters}"))),a.default.createElement(y.S,{visibility:"hidden"},a.default.createElement(q.E,null,i("order_summary.gift_card_ending",{last_characters:s},"Gift card ending with %{last_characters}")))):null)),a.default.createElement(g.yb,null,a.default.createElement(q.E,{style:n,emphasis:"bold"},e.cost?(0,ee.eO)(o(e.cost.amount,{currency:e.cost.currencyCode,form:"short"})):"")))}var ve=n(75014),Ce=n(51702),Se=n(23381),ke=n(25787);function we({totalLabel:e,paymentDue:t,taxesIncludedInTotalMarkup:n}){const l=(0,d.W)(),o=(0,E.a)(),{value:i}=(0,C.oo)(),{moneyLines:{valueTypographyStyle:s},moneySummary:{currencyCode:c=!0,currencyTypographyStyle:u,labelTypographyStyle:m,valueTypographyStyle:p}}=(0,r.x)(),f=(0,B.O)(),h=(()=>{const e=(0,Se.sG)(),t=(0,ke.Jj)();if(e&&t.supported&&t.config.availableLoanTypes.includes(Ce.C.SplitPay)&&t.paymentMethodSelected)return t})(),y=!(0,L.n)()&&(i||f),g=o(t.amount,{currency:t.currencyCode,form:"short"});return a.default.createElement(a.default.Fragment,null,y?a.default.createElement(ve.Lb,null,a.default.createElement(ve.Gg,null,a.default.createElement(q.E,{style:s},l("order_summary.payment_terms_totals.due_today","Total due today"))),a.default.createElement(ve.QO,null,a.default.createElement(U.o,{blockAlignment:"baseline",spacing:"small200"},a.default.createElement(q.E,{size:"medium",style:s,translate:!1},o(0,{currency:t.currencyCode,form:"short"}))))):null,a.default.createElement(ve.Lb,null,a.default.createElement(ve.Gg,null,a.default.createElement(q.E,{emphasis:"bold",size:"large",style:m},e),n),a.default.createElement(ve.QO,null,a.default.createElement(U.o,{blockAlignment:"baseline",spacing:"small200"},c&&!g.includes(t.currencyCode)&&a.default.createElement(q.E,{accessibilityRole:{type:"abbreviation"},size:"small",appearance:"subdued",style:u,translate:!1},t.currencyCode),a.default.createElement(q.E,{accessibilityRole:"strong",emphasis:"bold",size:"extraLarge",style:p,translate:!1},g)))),h&&a.default.createElement(ve.Lb,null,a.default.createElement(ve.Gg,null),a.default.createElement(ve.QO,null,a.default.createElement(q.E,{size:"small",translate:!1},l("shop_pay.pay_in_installments_split_pay_short",{amount:o(h.chargeAmount,{currency:h.currencyCode,form:"short"})},"4 payments of %{amount}")))))}var Pe=n(94973),Ae=n(45034);function Ie(){const e=(0,d.W)(),t=(0,E.a)(),{value:n,loading:l}=(0,C.Oe)(),{moneySummary:{currencyTypographyStyle:o}}=(0,r.x)(),i=(0,Pe.md)(Ae.G);if(!(n||l&&i))return null;const s=n&&!l?e("order_summary.alternative_payment_currency_total",{amount_due:t(n.totalWithoutGiftCards.amount,{currency:n.totalWithoutGiftCards.currencyCode,form:"explicit"})},"Charged as %{amount_due}"):e("order_summary.calculating","Calculating…");return a.default.createElement(g.rX,null,a.default.createElement(g.yb,null,a.default.createElement(q.E,{size:"small",appearance:"subdued",style:o},s)))}function xe({title:e,tooltipText:t,itemText:n}){const{moneyLines:{labelTypographyStyle:l,valueTypographyStyle:o}}=(0,r.x)();return a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,a.default.createElement(U.o,{spacing:"small200",blockAlignment:"center"},a.default.createElement(q.E,{appearance:"subdued",style:l},e),t?a.default.createElement($.o,{overlay:a.default.createElement(ae.m_,null,t)},a.default.createElement(W.In,{source:"question",size:"small"})):null)),a.default.createElement(g.yb,null,a.default.createElement(q.E,{appearance:"subdued",style:o},n)))}function Me({title:e,tooltipText:t,children:n,itemText:o}){const[i,s]=(0,a.useState)(!1),{moneyLines:{labelTypographyStyle:d,valueTypographyStyle:c}}=(0,r.x)();return a.default.createElement(_.c,{title:e},a.default.createElement(g.rX,null,a.default.createElement(g.Ge,null,a.default.createElement($.o,{"aria-expanded":i,"aria-controls":"recurring-totals-collapsible",onPress:()=>s(!i)},a.default.createElement(O.C,{columns:["auto","auto"],spacing:"small200",blockAlignment:"center",inlineAlignment:"start"},a.default.createElement(l.V,{appearance:"subdued",inlineAlignment:"start",style:d},e),t?a.default.createElement($.o,{overlay:a.default.createElement(ae.m_,null,t)},a.default.createElement(W.In,{source:"question",size:"small"})):null,a.default.createElement(W.In,{source:i?"chevronUp":"chevronDown",size:"extraSmall",appearance:"accent"})))),o?a.default.createElement(g.yb,null,a.default.createElement(q.E,{appearance:"subdued",style:c},o)):null),a.default.createElement(H.e,{open:i,id:"recurring-totals-collapsible"},a.default.createElement(_.c,{title:e},n)))}function Te({deferredTotal:e,showShippingLine:t,shippingLineLabel:n,shippingTooltip:r}){const l=(0,d.W)(),i=(0,E.a)(),s=(0,b.l)(),c=e.dueAt?l("order_summary.deferred_total_due_date_label",{date:s(new Date(e.dueAt),{month:"short",day:"numeric",year:"numeric"})},"Total due {{date}}"):l("order_summary.payment_terms_totals.due_later_checkout_to_draft","Total due later");function u(e){return i(e.amount,{currency:e.currencyCode,form:"short"})}return a.default.createElement(o.w,{accessibilityLabel:c},a.default.createElement(_.c,{title:c},a.default.createElement(Me,{title:c,itemText:u(e.amount)},a.default.createElement(xe,{title:l("order_summary.subtotal_label","Subtotal"),itemText:u(e.subtotalAmount)}),e.taxes.amount>0?a.default.createElement(xe,{title:l("order_summary.taxes_label","Taxes"),itemText:u(e.taxes)}):null,t?a.default.createElement(Q,{shippingLineLabel:n,shippingTooltip:r,forceSubduedStyle:!0}):null)))}function Ne({totalSavings:e}){const t=(0,d.W)(),n=(0,E.a)(),{moneySummary:{labelTypographyStyle:l,valueTypographyStyle:o}}=(0,r.x)(),i=t("order_summary.total_savings","Total savings").toUpperCase();return a.default.createElement(ve.Lb,null,a.default.createElement(ve.Gg,null,a.default.createElement(U.o,{blockAlignment:"center",spacing:"small200"},a.default.createElement(W.In,{source:"savings",size:"base",appearance:"monochrome"}),a.default.createElement(q.E,{accessibilityRole:"strong",emphasis:"bold",style:l},i),a.default.createElement(q.E,{accessibilityRole:"strong",emphasis:"bold",style:o,translate:!1},n(e.amount,{currency:e.currencyCode,form:"short"})))),a.default.createElement(ve.QO,null))}var Le=n(85914);function De({recurringTotals:e}){const t=(0,d.W)(),n=(0,E.a)(),l=(0,Le.G)(n),{moneyLines:{labelTypographyStyle:s}}=(0,r.x)(),c=t("order_summary.recurring_subtotal_label","Recurring subtotal"),u=e?.length>1?a.default.createElement(o.w,{accessibilityLabel:c},a.default.createElement(_.c,{title:c},e?.map((e=>a.default.createElement(xe,{key:e.title,title:e.title,itemText:l(e)}))))):a.default.createElement(o.w,{accessibilityLabel:c},a.default.createElement(q.E,{appearance:"subdued",style:s},l(e[0])));return a.default.createElement(i.a,{spacing:"small200"},a.default.createElement(q.E,{appearance:"subdued",style:s},t("order_summary.recurring_payments","Recurring Payments")),u)}function Re({recurringTotals:e,isShopPay:t=!1}){const n=(0,d.W)(),l=(0,E.a)(),i=(0,Le.G)(l),{moneyLines:{labelTypographyStyle:s}}=(0,r.x)(),c=n("order_summary.recurring_subtotal_label","Recurring subtotal");return t?a.default.createElement(De,{recurringTotals:e}):e?.length>1?a.default.createElement(o.w,{accessibilityLabel:c},a.default.createElement(q.E,{appearance:"subdued",style:s},n("order_summary.recurring_total_multiple_label","This order has a recurring charge for multiple items."))):a.default.createElement(o.w,{accessibilityLabel:c},a.default.createElement(_.c,{title:c},a.default.createElement(xe,{title:c,tooltipText:n("order_summary.recurring_total_tooltip","Does not include shipping, tax, duties, or any applicable discounts."),itemText:i(e[0])})))}const Be=e=>a.default.createElement(o.w,null,e),Fe=(0,a.memo)((function({shippingLineLabel:e,shippingTooltip:t,taxesLabel:n,taxesTooltip:i,withBorder:c=!1,isShopPay:u=!1,withDivider:m=!1,includeOrderSummaryExtensions:O=!1}){const W=(0,v.rR)(),q=(0,v.Q$)(),$=(0,d.W)(),U=(0,E.a)(),H=(0,b.l)(),{currentStep:j,plan:Y,currentDetour:G}=(0,M.Wm)(),{value:X}=(0,C.kf)(),Z=X&&X.lines[0],J=(0,w.H)(),{value:K}=(0,C.CQ)(),{value:ee}=(0,C.u_)(),{value:te}=(0,C.DN)(),ae=(0,C.Dr)(),{value:re}=(0,C.oo)(),{value:le}=(0,C.aX)(),{value:oe}=(0,C.FC)(),{value:ie}=(0,C.BE)(),se=(0,C.uM)(),{value:de}=(0,C.Tt)(),{value:ce}=(0,C.Pk)(),{value:ue}=(0,C.DU)(),me=(0,v.tu)(),{shippingRequired:pe}=(0,x.D)(),he=(0,w.LP)(),ye=(0,w.L7)(),{isOrderEditCheckout:ge}=(0,k.S)(),_e=(0,w.Kk)(),ve=(0,w.X5)(),Ce=(0,z.C)(),Se=(0,v.Xv)(P.D.StoreCredit,P.D.ShopCash),{paymentLines:ke}=(0,F.Px)(),Pe=(0,B.O)(),Ae=(0,v.$v)(),xe=(0,L.n)(),Me=(0,D.a)(R.hD),Le=(0,D.a)(R.Jv),{control:{background:De="base"}}=(0,r.x)(),Fe={background:De,border:"base",padding:"base",cornerRadius:"base"},ze="available_total"===te?.status?te.totalTax:null,Ve="available_total_included"===te?.status?te.totalIncludedInTarget:null,Oe=W&&null!==Ve?a.default.createElement(l.V,{size:"small",appearance:"subdued"},a.default.createElement(p.c,null,$("order_summary.vat_label_html",{amount:U(Ve.amount,{currency:Ve.currencyCode,form:"short"})},"Including %{amount} in taxes"))):null,We=q?a.default.createElement(a.default.Fragment,null,a.default.createElement(f.S,{spacing:"small400"}),a.default.createElement(s.c,null),a.default.createElement(f.S,{spacing:"small400"}),a.default.createElement(l.V,{size:"small",appearance:"subdued"},a.default.createElement(p.c,null,$("order_summary.duties_included_label","The total amount includes all applicable taxes and customs duties for no additional charges on delivery")))):null,qe=ae.value?.lines.filter((e=>"giftCard"===e.method.type))||[],$e=Boolean(ke?.length),Ue=Boolean(oe&&"filled"===oe.status&&oe.lines.some((({status:e})=>"not_required"!==e))),He=pe||Ue,je=Boolean(le?.lines.length),Ye=Boolean(Se?.length),Ge=Boolean(qe.length),Xe=!W&&Boolean(ze&&0!==ze.amount),Ze=ge?J:Z?.amount,Qe=Ze&&Ze.amount>0,Je=Boolean(He||je||Ge||$e||Xe||Ye||Qe||ge),Ke=Me&&"thankYou"===G?.type,et=(0,a.useMemo)((()=>Ke?"Checkout::ThankYou::Dynamic::Render":"Checkout::Dynamic::Render"),[Ke]),tt=(0,S.w9)(et,A._.OrderSummary3),nt=(0,S.w9)("Checkout::Dynamic::Render",A._.OrderSummary4),at=(0,h.t)({base:!0,medium:!1}),rt=(0,N.Bl)()&&at,lt=(0,a.useMemo)((()=>ge?$("order_summary.total_outstanding_label","Amount to pay"):Pe?$("order_summary.payment_terms_totals.due_later_checkout_to_draft","Total due later"):ce?.amount?$("order_summary.payment_terms_totals.due_today","Total due today"):re?xe?$("order_summary.total_label","Total"):re?.dueDate?$("order_summary.deferred_total_due_date_label",{date:H(new Date(re.dueDate),{month:"short",day:"numeric"})},"Total due {{date}}"):re?.type===I.A.Fulfillment?$("order_summary.payment_terms_totals.due_on_fulfillment","Total due on fulfillment"):$("order_summary.payment_terms_totals.due_later_checkout_to_draft","Total due later"):(0,T.u)(j,Y.greenPath[Y.greenPath.length-1])?$("order_summary.total_label","Total"):$("order_summary.partial_total_label","Total")),[ge,Pe,ce?.amount,re,j,Y.greenPath,$,H,xe]),ot=de??K,it="thankYou"!==G?.type&&"orderStatus"!==G?.type,st=(0,w.qk)().some((e=>e.quantityChange&&e.quantityChange.delta)),dt=ve&&ee&&st,ct=Le&&ie&&Boolean(0!==ie.amount);return a.default.createElement(a.default.Fragment,null,O&&!Ke&&a.default.createElement(V.N,{extensions:tt,spacing:"large200",render:Be}),a.default.createElement(o.w,c?Fe:{},a.default.createElement(_.c,{title:$("order_summary.cost_table_title","Cost summary")},Je&&a.default.createElement(a.default.Fragment,null,ot&&a.default.createElement(g.rX,{label:$("order_summary.subtotal_label","Subtotal"),value:U(ot.amount,{currency:ot.currencyCode,form:"short"})}),a.default.createElement(ne,{lines:le?.lines}),me?null:!ge&&!ue||ge&&he&&Ce&&Ce.lines.length>0?a.default.createElement(Q,{discountLines:le?.lines,shippingLineLabel:e,shippingTooltip:t}):null,Number(ye?.aggregatedReturnShippingFees?.amount)>0?a.default.createElement(a.default.Fragment,null,m&&a.default.createElement(y.S,null,a.default.createElement(f.S,{spacing:"small200"}),a.default.createElement(s.c,{key:"subtotalDivider"}),a.default.createElement(f.S,{spacing:"small200"})),a.default.createElement(g.rX,{label:$("order_summary.return_shipping_fee_label","Return shipping"),value:U(Number(ye?.aggregatedReturnShippingFees?.amount),{currency:ye?.aggregatedReturnShippingFees?.currencyCode,form:"short"})})):null,Number(ye?.aggregatedRestockingFees?.amount)>0?a.default.createElement(g.rX,{label:$("order_summary.return_restocking_fee_label","Restocking fee"),value:U(Number(ye?.aggregatedRestockingFees?.amount),{currency:ye?.aggregatedRestockingFees?.currencyCode,form:"short"})}):null,a.default.createElement(fe,{taxesLabel:n,taxesTooltip:i,dutiesIncluded:q}),[...Se,...ke].map((e=>{let t="";if("CUSTOM"===e.method.redemptionSource){const n=e;t=n.method.redemptionContent?.redemptionAttributes[0].value||""}return a.default.createElement(Ee,{key:e.method.redemptionSource+t,line:e})})),Qe?a.default.createElement(g.rX,{label:$("order_summary.tip_label","Tip"),value:U(Ze.amount,{currency:Ze.currencyCode,form:"short"})}):null),(dt||_e)&&m&&a.default.createElement(y.S,null,a.default.createElement(f.S,{spacing:"small200"}),a.default.createElement(s.c,{key:"subtotalDivider"}),a.default.createElement(f.S,{spacing:"small200"})),dt&&a.default.createElement(g.rX,{label:$("order_summary.order_total_updated_label","Updated total"),value:U(Number(ve.amount),{currency:ve.currencyCode,form:"short"})}),_e?a.default.createElement(g.rX,{label:$("order_summary.total_already_paid_label","Paid"),value:U(Number(-_e.amount),{currency:_e.currencyCode,form:"short"})}):null,qe.map((e=>a.default.createElement(be,{line:e,key:e.method.code}))),Ae&&a.default.createElement(a.default.Fragment,null,(Je||_e)&&m&&a.default.createElement(y.S,null,a.default.createElement(f.S,{spacing:"small200"}),a.default.createElement(s.c,{key:"subtotalDivider"}),a.default.createElement(f.S,{spacing:"small200"})),a.default.createElement(we,{paymentDue:Ae,totalLabel:lt,taxesIncludedInTotalMarkup:Oe}),We),it&&a.default.createElement(Ie,null)),ce&&!Pe?a.default.createElement(Te,{deferredTotal:ce,showShippingLine:ue,shippingLineLabel:e,shippingTooltip:t}):null,ct?a.default.createElement(a.default.Fragment,null,a.default.createElement(f.S,{spacing:"extraTight"}),a.default.createElement(Ne,{totalSavings:ie})):null,se?.value?a.default.createElement(a.default.Fragment,null,a.default.createElement(y.S,null,a.default.createElement(f.S,{spacing:"small400"}),a.default.createElement(s.c,{key:"recurringTotalsDivider"}),a.default.createElement(f.S,{spacing:"large200"})),a.default.createElement(y.S,null,a.default.createElement(Re,{recurringTotals:se.value,isShopPay:u}))):null),O&&!rt&&a.default.createElement(V.N,{extensions:Ke?tt:nt,spacing:"large200",render:Be}))}));var ze=n(98841),Ve=n(41598),Oe=n(19874),We=n(18229),qe=n(27534),$e=n(25387);function Ue({shippingSourceUrl:e}){const[t,n]=(0,a.useState)(!1),r=(0,d.W)()("shop_policies.shipping_policy","Shipping policy");return a.default.createElement(qe.$,{kind:"plain",onPress:()=>{n(!0)},"aria-haspopup":"dialog",accessibilityLabel:r},a.default.createElement($e.a,{open:t,source:e,title:r,onClose:()=>n(!1),padding:!0}),a.default.createElement(W.In,{source:"question",size:"small"}))}var He=n(58168),je=n(39122),Ye=n(36675),Ge=n(60293),Xe=n(15271),Ze=n(19787),Qe=n(54003),Je=n(42064),Ke=n(54732),et=n(80469),tt=n(56173),nt=n(77745),at=(n(44114),n(26925)),rt=n(31374);function lt(){const{paymentLines:e,discountLines:t}=(0,rt.C)(),n=(0,d.W)(),{isOrderEditCheckout:r}=(0,k.S)(),l=(0,Pe.md)(e),o=(0,Pe.md)(t),i=(0,v.Xe)(Je.e.Discount)||r,s=(0,w.ar)(),{removeDiscount:c,removeGiftCard:u}=(0,We.OX)(),m=l.reduce(((e,t)=>("giftCard"===t.method.type&&e.push({originType:"giftCard",code:t.method.code}),e)),[]),p=o.reduce(((e,t)=>{if("code"===t.discount.type||"custom"===t.discount.type&&"CART"===t.discount.presentationLevel){let a=t.discount.title;"custom"===t.discount.type&&""===t.discount.title&&(a=n("order_summary.custom_discount","Custom discount")),e.push({originType:"discountCode",code:a})}return e}),[]),f=s.reduce(((e,t)=>(e.push({originType:"discountCode",code:t.label}),e)),[]),h=[...r?f:p,...m];return h.length<1?null:a.default.createElement(U.o,{accessibilityRole:"unorderedList",spacing:"small300",accessibilityLabel:n("order_summary.gift_card_and_discount_label","Discount code or gift card")},h.map((e=>{const t="giftCard"===e.originType?n("order_summary.gift_card_masked",{last_characters:e.code.slice(-4)},"•••• %{last_characters}"):e.code,r="giftCard"===e.originType?n("order_summary.gift_card_ending",{last_characters:e.code.slice(-4)},"Gift card ending with %{last_characters}"):void 0,l="giftCard"===e.originType?"giftFill":"discount",o="discountCode"===e.originType&&i?void 0:()=>{"discountCode"===e.originType?c(e.code):u(e.code)};return a.default.createElement(y.S,{accessibilityRole:"listItem",key:e.code},a.default.createElement(at.v,{accessibilityLabel:r,onRemove:o,icon:l},t.toUpperCase()))})))}const ot={bannerMessage:"HW0_x"};function it(e){return a.default.createElement(je.c_,null,a.default.createElement(st,e))}function st({WrapperComponent:e=a.default.Fragment}){const t=(0,d.W)(),{giftCardsEnabled:n,discountCodesEnabled:r}=(0,c.q)(),{isOrderEditCheckout:l}=(0,k.S)(),o=(0,N.Bl)(),s=(0,Oe.uL)(),{value:u}=(0,C.oo)(),{loading:m,reductionCodeField:f,dirty:h,setDirty:y,handleSubmit:g,discountCodeWarning:_,removeDiscountCodeWarning:E}=(0,We.OX)(),b=(0,je.Xn)({active:!0}),{currentDetour:w}=(0,M.Wm)(),P=(0,S.w9)("Checkout::Reductions::RenderBefore"),A=(0,S.w9)("Checkout::Reductions::RenderAfter"),I=(0,v.Xe)(Je.e.Discount)||l,x=r&&!I,T=(0,B.O)(),L=(0,et.N)(),D=(0,Ke.P)("draftOrder"),R=null!=L&&D,F=Boolean(L&&u),z=(0,We.El)();if(w||R||T||F&&!x)return null;if(!n&&!x)return a.default.createElement(tt.c,{section:"reductions"});const O=_?a.default.createElement(Ye.l,{iconHidden:!0,onDismiss:E,status:We.gK.has(_.negotiationErrorCode)?"info":"warning"},a.default.createElement("div",{className:ot.bannerMessage},a.default.createElement(p.c,null,null==(q=_.message)?null:a.default.createElement("span",{dangerouslySetInnerHTML:{__html:q}})))):null;var q;return a.default.createElement(i.a,null,a.default.createElement(V.N,{extensions:P}),a.default.createElement(nt.X,{sectionId:"reductions"},a.default.createElement(e,null,a.default.createElement(Ge.l,{onSubmit:g},a.default.createElement(Xe.Y,{columns:["fill","auto"]},a.default.createElement(Ze.r_,(0,He.A)({ref:b,name:"reductions",label:z},f,{onInput:e=>y(e.length>0)})),a.default.createElement(qe.$,{submit:!0,loading:m,disabled:!h,accessibilityLabel:t("payment.discount_button_action_label","Apply Discount Code"),ref:s("apply_discount")},o?t("order_summary.apply_discount_button_label","Apply"):a.default.createElement(a.default.Fragment,null,a.default.createElement(Qe.j,{below:"medium"},t("order_summary.apply_discount_button_label","Apply")),a.default.createElement(Qe.j,{above:"small"},a.default.createElement(W.In,{source:"arrowRight",appearance:"monochrome"})))))),O,a.default.createElement(lt,null))),a.default.createElement(V.N,{extensions:A}))}function dt({hideMerchandiseLines:e=!1,ReductionsWrapperComponent:t}){const n=(0,d.W)(),{merchantPolicies:p}=(0,c.q)(),f="shipping-policy",h=p?.some((e=>e.handle===f)),y=p?.find((e=>e.url.includes(f)))?.url,{orderSummary:{divided:g}}=(0,u.kV)(),_=(0,N.Bl)(),{moneyLines:{divided:E}}=(0,r.x)(),b=h&&a.default.createElement(Ue,{shippingSourceUrl:y}),{oneTimePurchaseLines:v,subscriptionPurchaseLines:C}=(0,ze.C)(),S=[...v,...C,...(0,w.qk)()],k=(0,We.El)();return _&&(0,Ve.xR)(S)?a.default.createElement(l.V,{inlineAlignment:"center"},n("stock.empty_cart_label","Your cart is empty")):a.default.createElement(Oe.yn,{section:"summary"},a.default.createElement(o.w,null,a.default.createElement(i.a,{spacing:"large200"},!e&&a.default.createElement(m.V,{withDivider:g}),a.default.createElement(i.a,{spacing:"large200"},a.default.createElement(o.w,{accessibilityLabel:k},a.default.createElement(it,{WrapperComponent:t})),g&&a.default.createElement(s.c,null)),a.default.createElement(Fe,{withDivider:E,shippingTooltip:b,includeOrderSummaryExtensions:!0}))))}},58396:(e,t,n)=>{n.d(t,{XB:()=>o,kf:()=>l,mC:()=>r});var a=n(73896);const r="RELOADING",l=(0,a.MN)(null),o=(0,a.MN)(!1)},14788:(e,t,n)=>{n.d(t,{X:()=>o});var a=n(15299),r=n(76882),l=n(579);function o(){const e=(0,r.W)();return a.default.createElement(a.default.Fragment,null,e("review.review_notice_html",{terms_of_sale:a.default.createElement(l.c,{handle:"terms-of-sale"}),privacy_policy:a.default.createElement(l.c,{handle:"privacy-policy"}),terms_of_service:a.default.createElement(l.c,{handle:"terms-of-service"}),refund_policy:a.default.createElement(l.c,{handle:"refund-policy"}),contact_information:a.default.createElement(l.c,{handle:"contact-information"}),purchase_options_cancellation_policy:a.default.createElement(l.c,{handle:"purchase-options-cancellation-policy"}),subscription_policy:a.default.createElement(l.c,{handle:"subscription-policy"}),shipping_policy:a.default.createElement(l.c,{handle:"shipping-policy"}),legal_notice:a.default.createElement(l.c,{handle:"legal-notice"})},{options:{dangerouslySetInnerHTML:!0}}," "))}},35780:(e,t,n)=>{n.d(t,{Y:()=>a});let a=function(e){return e.Amex="AMEX",e.Bogus="BOGUS",e.CartesBancaires="CARTES_BANCAIRES",e.Dankort="DANKORT",e.DinersClub="DINERS_CLUB",e.Discover="DISCOVER",e.Elo="ELO",e.Forbrugsforeningen="FORBRUGSFORENINGEN",e.Hypercard="HYPERCARD",e.Interac="INTERAC",e.Jcb="JCB",e.Laser="LASER",e.Maestro="MAESTRO",e.Mastercard="MASTERCARD",e.Rupay="RUPAY",e.Unionpay="UNIONPAY",e.Visa="VISA",e.Visaelectron="VISAELECTRON",e}({})},14856:(e,t,n)=>{n.d(t,{q:()=>a});let a=function(e){return e.Off="OFF",e.Unchecked="UNCHECKED",e}({})},69358:(e,t,n)=>{n.d(t,{m:()=>N});var a=n(15299),r=n(86883),l=n(70212),o=n(94973),i=n(31374),s=n(25082),d=n(9210),c=n(18229),u=n(36125),m=n(27634),p=n(13652),f=n(77979),h=n(50996),y=n(70083),g=n(35699),_=n(76882),E=n(37981),b=n(18012),v=n(17141),C=n(52322),S=n(82199),k=n(32485),w=n.n(k),P=n(48179);function A(){return a.default.createElement(P.A,{style:{fill:"white"},title:"Shop"})}const I={small:{main:570},medium:{main:660,orderSummary:520}},x={StickyPortal:"VPBCl","slide-in":"QhGhi",DiscountCodeToast:"ANqx0",DiscountCodeToastPadding:"AtEhW",slideOut:"CqLmi","slide-out":"w2TU2"},M=3e3;function T(){const e=(0,_.W)(),t=(0,E.t)({medium:!0}),[n,l]=(0,a.useState)(!0),[o,i]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=setTimeout((()=>l(!1)),M);return()=>{clearTimeout(e)}}),[]);const s=a.default.createElement(a.default.Fragment,null,a.default.createElement(b.E,{size:"medium"},e("shop_pay.checkout.order_summary.discount_code_applied","Discount code applied")),a.default.createElement(A,null));return o?null:a.default.createElement(v.Z,null,a.default.createElement(r.S,{onAnimationEnd:function(){n||i(!0)},className:w()(x.StickyPortal,{[x.slideOut]:!n})},a.default.createElement(C.xA,{minBlockSize:S.OF.when({viewportInlineSize:{min:"medium"}},"fill"),columns:S.OF.default(["0fr","1fr","0fr"]).when({viewportInlineSize:{min:"small"}},["1fr",I.small.main,"1fr"]).when({viewportInlineSize:{min:"medium"}},["1fr",I.medium.main,I.medium.orderSummary,"1fr"])},t&&a.default.createElement(a.default.Fragment,null,a.default.createElement(C.Ei,{columnSpan:2}),a.default.createElement(r.S,{className:x.DiscountCodeToast,padding:["none","large500"]},s),a.default.createElement(r.S,{className:x.DiscountCodeToastPadding})),!t&&a.default.createElement(a.default.Fragment,null,a.default.createElement(r.S,{className:x.DiscountCodeToastPadding}),a.default.createElement(r.S,{className:x.DiscountCodeToast,padding:["none","large200"]},s),a.default.createElement(r.S,{className:x.DiscountCodeToastPadding})))))}function N({children:e}){const{formStatus:t,walletDiscountCodeApplied:n}=function(){const e=(0,o.QN)(),{negotiate:t}=(0,u.T4)(),{handleNegotiationErrors:n,discountCodeWarning:r}=(0,c.OX)(),{discountLines:l,reduction:_}=(0,i.C)(),E=(0,o.md)(l),{discountCode:b}=(0,s.I)(),v=(0,o.md)(d.D.wallet),C=(0,o.md)(d.D.shopAccountUuid),{myshopifyDomain:S}=(0,h.q)(),{recordImmediately:k}=(0,m.v)(),w=(0,p.Kx)(),[P,A]=(0,a.useState)(!1),I=(0,y.S)(),[x,M]=(0,a.useState)(""),[T,N]=(0,a.useState)(!1),L=(0,a.useCallback)((e=>{k({schemaId:"shopify_pay_login_with_shop_sdk_discount_wallet_events/2.0",payload:{action:e,shopAccountUuid:C,shopPermanentDomain:S,discountCode:x}})}),[S,k,C,x]),D=(0,a.useCallback)((async()=>{"success"===(await w(x)).status&&(L("invalidated - discount had been deleted"),I.increment(g.J.DiscountCodeError,{value:1,tags:{errorMessage:"invalidated - discount had been deleted"}}))}),[w,L,I,x]),[R,B]=(0,a.useState)((()=>E.length?"open":b?"negotiating_app_discount":"closed")),F=(0,a.useCallback)((e=>{const t=["InputValidationError","UnprocessableTermViolation","RemoveTermViolation"],n=new Set([...c.NJ,f.X.DiscountsCustomerUsageLimitReached,f.X.DiscountsUsageLimitReached]);return e.some((e=>t.includes(e.type)&&n.has(e.code)))}),[]),z=(0,a.useCallback)((e=>{const t=["InputValidationError","UnprocessableTermViolation","RemoveTermViolation"],n=[f.X.DiscountsPurchaseNotInRange,f.X.DiscountsQuantityNotInRange,f.X.DiscountsNoEntitledLineItems];return e.some((e=>t.includes(e.type)&&n.includes(e.code)))}),[]);return(0,a.useEffect)((()=>{M(v.latestDiscount?.code??""),x&&B("negotiating_app_discount")}),[x,v]),(0,a.useEffect)((()=>{0===E.length&&B((e=>"negotiating_app_discount"===e?e:r?"open":"closed"))}),[r,E.length]),(0,a.useEffect)((()=>{N(Boolean(x)&&E.some((e=>e.title.toLowerCase()===x.toLowerCase())))}),[E,x]),(0,a.useEffect)((()=>{const a=x||b;!P&&"negotiating_app_discount"===R&&a&&(A(!0),e.write(_,{code:a}),t(void 0,{onComplete:async t=>{if(A(!1),"success"===t.status||"error"===t.status){const l=t.negotiated.discountLines?.lines.some((e=>e.discount.title.toLowerCase()===a?.toLowerCase()));x&&(n(t.errors),l?(L("applied"),N(!0)):(e.write(_,void 0),F(t.errors)?D():z(t.errors)&&(L("failed to apply - invalid cart"),I.increment(g.J.DiscountCodeError,{value:1,tags:{errorMessage:"failed to apply - invalid cart"}})))),B(l||r?"open":"closed")}},force:!0}))}),[P,n,r,t,b,x,R,F,L,z,D,I,_,e]),{discountLines:E,formStatus:R,setFormStatus:B,walletDiscountCode:x,walletDiscountCodeApplied:T}}(),{layout:_}=(0,s.I)(),[E,b]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{"web"===_&&n&&b(!0)}),[_,n]),"negotiating_app_discount"===t?a.default.createElement(r.S,{inlineAlignment:"center"},a.default.createElement(l.y,null)):a.default.createElement(a.default.Fragment,null,e,E&&a.default.createElement(T,null))}},5366:(e,t,n)=>{n.d(t,{M:()=>u});var a=n(58168),r=n(15299),l=n(23743),o=n(47168),i=n(40381),s=n(25387),d=n(86883);const c=430;function u({children:e,...t}){const n="string"==typeof t.title?{title:r.default.createElement(l.C,{columns:["fill","auto"],padding:["base","large200"],spacing:"large200",blockAlignment:"center"},r.default.createElement(o.D,{level:2},t.title),r.default.createElement(i.Oj,null)),accessibilityLabel:t.title}:{};return r.default.createElement(s.a,(0,a.A)({maxInlineSize:c},t,n),r.default.createElement(d.S,{padding:["small400","large200","large200","large200"]},e))}},82380:(e,t,n)=>{n.d(t,{N:()=>o});var a=n(46277),r=n(33663),l=n(67902);function o(){const{hasError:e}=(0,r.dA)(l.x9),t=(0,a.IX)();return e&&"failed"===t?.status}},33294:(e,t,n)=>{n.d(t,{$6:()=>p,RT:()=>u,Zj:()=>m});var a=n(76882),r=n(94973),l=n(15299),o=n(20484),i=n(48753),s=n(89557),d=n(38482),c=n(52274);function u(){const{inMemoryApplePayParts:e}=(0,o.b)();return(0,r.fp)(e.paymentSheetError)}function m(){const e=(0,a.W)(),[t]=u(),n=e("wallets.errors.generic",{walletName:e("brand.apple_pay","Apple Pay")},"There was an issue with {{walletName}}. Try again or use a different payment method."),r={unhandled_completion_status:e("payment_errors.generic_error","There was an issue processing your payment. Try again or use a different payment method."),exceptional_completion_status:n,exceptional_negotiation_status:n,session_terminated:n,shipping_options_changed:e("wallets.errors.outdated.shipping_method","The shipping options have changed for your order. Review your selection."),unusable_partial_address:e("wallets.errors.terminal",{walletName:e("brand.apple_pay","Apple Pay")},"There was an issue with {{walletName}}. Please use a different payment method."),payment_cancelled_while_processing:void 0},l=t?.type;if(l)return r[l]}function p({supportedNetworks:e}){const t=(0,i.A)({asPaymentMethod:!0,supportedNetworks:e}),{activeWalletSessionAtom:n}=(0,o.b)(),a=(0,r.md)(n),u=(0,l.useCallback)((({parts:e,state:n,reason:r})=>{if("completion"===r&&!a){const a=n.read(e.paymentLines).value,r=a[0]?.method;if("wallet"===r?.type&&r?.name===s.R.ApplePay)return{behavior:"block",reason:d.RE.OpeningApplePayPaymentSheet,async perform(e){"block"===e.behavior&&1===e.reasons.length&&e.reasons[0]===d.RE.OpeningApplePayPaymentSheet&&t()}}}return{behavior:"allow"}}),[a,t]);(0,c.D3)(u)}},97184:(e,t,n)=>{n.d(t,{E:()=>p,t:()=>m});var a=n(15299),r=n(39629),l=n(63801),o=n(94012),i=n(15694),s=n(52027);class d extends Error{constructor(...e){super(...e),this.name="MissingAutocompleteEndpointError"}}const c=(0,r.W)("Autocomplete-IFrame"),u=(0,r.W)("Validate-IFrame");function m(){const e=(0,s.j9)().sandboxAutocomplete(),t=(0,a.useRef)(),n=(0,i.B)(void 0,c);return(0,a.useLayoutEffect)((()=>{if(!e)throw new o.bq("Unable to find autocomplete sandbox URL");const a=(0,l.Z8)({id:n,url:e,privileges:["allow-scripts","allow-same-origin"]});return t.current=(0,l.oT)(a,e),()=>{a.remove(),t.current?.terminate()}}),[e,n]),(0,a.useMemo)((()=>({search(...e){if(!t.current)throw new d("Called search without valid autocomplete endpoint");return t.current.call.search(...e)},fetchAddress(...e){if(!t.current)throw new d("Called fetchAddress without valid autocomplete endpoint");return t.current.call.fetchAddress(...e)}})),[])}function p(){const e=(0,s.j9)().sandboxAutocomplete(),t=(0,a.useRef)(),n=(0,i.B)(void 0,u);return(0,a.useLayoutEffect)((()=>{let a;try{if(!e)throw new o.bq("Unable to find autocomplete sandbox URL");a=(0,l.Z8)({id:n,url:e,privileges:["allow-scripts","allow-same-origin"]}),a.addEventListener("load",(()=>{t.current=(0,l.oT)(a,e)}))}catch(r){if(r instanceof o.bq)return()=>{}}return()=>{a.remove(),t.current?.terminate()}}),[e,n]),(0,a.useMemo)((()=>({validation(...e){if(!t.current)throw new d("Called validation without valid autocomplete endpoint");return t.current.call.validation(...e)}})),[])}},95410:(e,t,n)=>{n.d(t,{K:()=>r,i:()=>l});var a=n(15299);function r(e){(0,a.useEffect)((()=>{document.title=e}),[e])}function l(e){(0,a.useEffect)((()=>{let t=document.querySelector("link[rel=icon]");t?t.href=e:(t=document.createElement("link"),t.rel="icon",t.type="image/png",t.href=e,document.head.appendChild(t))}),[e])}},21299:(e,t,n)=>{n.d(t,{J:()=>o,L:()=>l});var a=n(18009),r=n(43843);function l(){return(0,a.A)({shouldResetCustomerInfo:!0})}function o({shouldResetCustomerInfo:e}){return(0,r.M)({shouldResetCustomerInfo:e})}},9124:(e,t,n)=>{n.d(t,{Q:()=>b,R:()=>E});var a=n(15299),r=n(76882),l=n(44985),o=n(27634),i=n(38909),s=n(48120),d=n(25082),c=n(49270),u=n(66630),m=n(52027),p=n(54732),f=n(33538),h=n(33860),y=n(55081),g=n(87039),_=n(61022);let E=function(e){return e.SignUp="sign_up_page",e.Payment="payment_page",e.PaymentErrorState="payment_page_error_state",e.PaymentErrorModalGeneric="payment_page_error_modal_generic",e.PaymentErrorModalSignInFailed="payment_page_error_modal_sign_in_failed",e.PaymentErrorModalContinueWithShopPay="payment_page_error_modal_continue_with_shop_pay",e}({});function b(e=E.Payment){const t=(0,m.j9)(),n=(0,r.W)(),{recordImmediately:b}=(0,o.v)(),{checkout_as_guest_url:v,profile_preview_token:C,checkout_profile_context:S}=(0,d.I)(),k=(0,p.P)("simulated"),{isEmailOnlySignUp:w,clearEmailOnlySignUp:P}=(0,s.Y)(),{token:A}=(0,f.Em)(),{isPayUserAvailable:I}=(0,u.M)(),{currentUrl:x}=(0,l.r)(),M=(0,_.$_)(),{userStatus:T}=(0,c.nQ)(),N=T===c.$_.Found,L=(0,a.useMemo)((()=>{if(k)return"";const e=new URL(v),n=(0,h.EL)();return A&&e.searchParams.set(f.bQ,A),n&&e.searchParams.set(h.e2,n),C&&S&&(e.searchParams.set(i.vc,C),e.searchParams.set(i.Dc,S)),(0,g.Mx)(x.search)&&e.searchParams.set(i.Jn,"shop_web"),I||N?e.searchParams.set(i.GH,"true"):e.searchParams.delete(i.GH),I?(e.searchParams.set(i.TK,"true"),e.searchParams.set(i.HZ,"true"),t.logout(e.href)):(e.searchParams.delete(i.TK),e.searchParams.delete(i.HZ),e.href)}),[k,v,A,C,S,x.search,I,N,t]);let D=n("shop_pay.checkout.checkout_guest","Check out as guest");return(0,y.ts)()&&(D=n("checkout_sdk.use_another_payment_method","Use another payment method")),(0,a.useMemo)((()=>({label:D,to:L,onPress:()=>{if(k)return null;w&&P(),I&&M.clearAll(),b({schemaId:"shopify_pay_payment_page_checkout_as_guest/2.1",payload:{origin:e}})}})),[D,L,b,e,k,w,P,I,M])}},83101:(e,t,n)=>{n.d(t,{o5:()=>u,ie:()=>c,E1:()=>p,iz:()=>m,hp:()=>f,e_:()=>h});var a=n(15299),r=n(76882),l=n(71949),o=n(50996);const i=86400;function s(e){return e/i}var d=n(63292);const c=(0,l.R)("DeliveryMethodsContext"),u=(0,a.createContext)(void 0);function m(){return(0,l.i)(c)}function p(){return(0,a.useContext)(u)}function f(){const e=(0,r.W)();return(0,a.useCallback)((t=>{if("number"==typeof t){const n=Math.ceil(s(t));return n<1?null:e("shipping.estimated_delivery_date",{count:n},{one:"%{count} business day",other:"%{count} business days"})}const{lower:n,upper:a}=t;if(void 0===n||void 0===a)return null;const r=Math.ceil(s(n)),l=Math.ceil(s(a));return l<1?null:r<1||r>l?e("shipping.estimated_delivery_date",{count:l},{one:"%{count} business day",other:"%{count} business days"}):e("shipping.estimated_delivery_date_range",{minimum:r,maximum:l},"%{minimum} to %{maximum} business days")}),[e])}function h(){const{value:e,loading:t}=(0,d.FC)(),{enabledDeliveryMethods:n}=(0,o.q)();return!(!e||"unavailable"===e.status||t||n.length>1)&&e.lines.every((e=>"not_required"===e.status||"available"===e.status&&e.methods.length<2))}},29271:(e,t,n)=>{n.d(t,{C:()=>s,L:()=>u});var a=n(58482),r=n(63292),l=n(13614),o=n(14879),i=n(67361);function s({targeted:e,hasMultipleDeliveryGroups:t,shouldHandleRollup:n}){const a=(0,l.w9)("Checkout::ShippingMethods::RenderBefore"),r=(0,l.w9)("Checkout::ShippingMethods::RenderAfter"),o=e===t,i=d(a,o,e),s=d(r,o,e);return n?o?{extensionsBefore:i,extensionsAfter:s,extensionsForRollupReveal:[...i,...s]}:{extensionsBefore:i,extensionsAfter:s,extensionsForRollupReveal:e?[]:[...c(a),...c(r)]}:{extensionsBefore:i,extensionsAfter:s}}function d(e,t,n){return t?n?c(e):e:[]}function c(e){return e.filter((({apiVersion:e})=>(0,o.q5)(e)))}function u(){const{value:e}=(0,r.FC)();if((0,a.x1)())return{hasMultipleDeliveryGroups:!0,onlyDeliveryGroupId:void 0};const t=("filled"===e?.status?e.lines:[]).filter((e=>"not_required"!==e.status&&!e.hasNoDeliveryMethods)),n=t[0]?.id,l=t.length>1;return{hasMultipleDeliveryGroups:l,onlyDeliveryGroupId:l||!n?void 0:(0,i.L0)(n)}}},74251:(e,t,n)=>{n.d(t,{SY:()=>c,mx:()=>d,or:()=>s,t$:()=>i});var a=n(76882),r=n(94973),l=n(15299),o=n(20484);function i(){const{inMemoryGooglePayParts:e}=(0,o.b)();return(0,r.fp)(e.sdkStatus)}function s(){const{inMemoryGooglePayParts:e}=(0,o.b)();return(0,r.fp)(e.paymentSheetError)}function d(){const e=(0,a.W)(),[t]=s();return(0,l.useMemo)((()=>"invalid_config"===t?.type||"config_missing_required_fields"===t?.type?e("wallets.errors.generic",{walletName:e("brand.google_pay","Google Pay")},"There was an issue with {{walletName}}. Try again or use a different payment method."):"unusable_partial_address"===t?.type?e("wallets.errors.terminal",{walletName:e("brand.google_pay","Google Pay")},"There was an issue with {{walletName}}. Please use a different payment method."):void 0),[t,e])}function c(){const{persistedGooglePayAtom:e}=(0,o.b)();return(0,r.fp)(e)}},15694:(e,t,n)=>{n.d(t,{B:()=>r});var a=n(15299);function r(e,t){const n=(0,a.useRef)(e);return n.current=e??n.current??t(),n.current}},9155:(e,t,n)=>{n.d(t,{E:()=>o,q:()=>i});var a=n(73896),r=n(94973),l=n(15299);const o=(0,a.MN)(!1);function i(){const e=(0,r.QN)();return(0,l.useCallback)((t=>{e.write(o,t)}),[e])}},88686:(e,t,n)=>{n.d(t,{I:()=>i,L:()=>o}),n(44114);var a=n(15299),r=n(77979),l=n(63292);function o(){const e=(0,l.JZ)(),t=(0,a.useMemo)((()=>{const t=[r.X.MerchandiseLineTransformersRunError];return e.loading||!e.value?[]:e.value.reduce(((e,n)=>("UnprocessableTermViolation"===n.__typename&&t.includes(n.code)&&e.push({message:n.localizedMessage||n.nonLocalizedMessage,target:n.target}),e)),[])}),[e]);return(0,a.useMemo)((()=>({merchandiseLineTransformerErrors:[...t].filter(function(){const e=new Set;return t=>{const n=`${t.message}${t.target}`,a=e.has(n);return e.add(n),!a}}())})),[t])}function i(){const{value:e}=(0,l.Ek)();return!!e&&Boolean(e.lines.length>0&&e.lines.every((e=>e.recurringTotal)))}},45034:(e,t,n)=>{n.d(t,{G:()=>a});const a=(0,n(73896).MN)(!1)},55541:(e,t,n)=>{n.d(t,{Nn:()=>l,Wu:()=>o,X:()=>i}),n(44114);var a=n(77979),r=n(40639);class l{constructor(e,t,n){this.actionMapper=e,this.defaultMapper=t,this.getViolationActions=n}mapResultToPaymentSheetAction(e){const t=e.status in this.actionMapper&&this.actionMapper[e.status];return t?t({result:e,violationActions:this.getViolationActions(),defaultMapper:()=>this.defaultMapper(e)}):this.defaultMapper(e)}}class o{getMergedPaymentSheetAction({resultViolations:e,violationActions:t}){const n=e.map((({code:e})=>e)),l={};t.forEach((e=>{e.violations.forEach((t=>{n.includes(t)&&(l[t]=e.generateAction)}))}));const o=e.find((e=>e.code in l));let i;return o&&(i=l[o.code]()),{firstPaymentSheetAction:i,generatePrioritizedPaymentSheetAction:()=>{let t;const o=(0,r.Y_)()(["abort","show_error","submit","update"]),{generatedActions:i,allEffects:s,allErrors:d}=Object.keys(l).reduce(((e,t)=>{const n=l[t]();return n.effects&&e.allEffects.push(...n.effects),"submit"!==n.action&&n.errors&&e.allErrors.push(...n.errors),e.generatedActions.push({paymentSheetAction:n,violation:t}),e}),{generatedActions:[],allEffects:[],allErrors:[]}),c=e=>o.map((t=>e.find((e=>e.paymentSheetAction.action===t)))).find((e=>Boolean(e)));let u=c(i);const m=a.X.PaymentsUnacceptablePaymentAmount,p=void 0!==l[m]&&1===e.filter((e=>e.code===m)).length,f=n.filter((e=>e!==m&&void 0!==l[e])).length;return u&&p&&f>0&&(u=c(i.filter((e=>e.violation!==a.X.PaymentsUnacceptablePaymentAmount)))),u&&(t=u.paymentSheetAction,t.effects=s,"submit"!==t.action&&(t.errors=d)),t}}}getUnhandledErrors(e,t){const n=function(e){return e.flatMap((e=>e.violations))}(t);return e.filter((({code:e})=>!n.includes(e)))}}function i(e){return"errors"in e?e.errors??[]:[]}},15947:(e,t,n)=>{n.d(t,{r:()=>s});var a=n(94973),r=n(15299),l=n(71949),o=n(28073),i=n(16787);function s({id:e,children:t}){const n=(0,a.DD)(!1);return r.default.createElement(o.Mi.Provider,{value:(0,r.useMemo)((()=>({id:e,completeStatusAtom:n})),[e,n])},t,r.default.createElement(d,null))}function d(){const e=(0,l.i)(o.Mi),t=(0,a.md)(e.completeStatusAtom);return(0,i.Lg)(e.id,!t),null}},53637:(e,t,n)=>{n.d(t,{H:()=>l});var a=n(71949),r=n(17148);function l(){return(0,a.i)(r.R)}},58725:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(15299);function r(e){const t=(0,a.useRef)();return(0,a.useEffect)((()=>{t.current=e}),[e]),t.current}},85914:(e,t,n)=>{n.d(t,{G:()=>l,p:()=>o});var a=n(76882),r=n(85630);function l(e){const t=(0,a.W)(),n=(0,r.a)(),l=e||n;function o(e){return l(e.amount,{currency:e.currencyCode,form:"short"})}return function({fixedPrice:e,recurringPrice:n,fixedPriceCount:a,interval:r,intervalCount:l}){const i=(()=>{switch(r){case"year":return t("subscriptions.recurring_total_intervals.year",{count:l},{one:"year",other:"%{count} years"});case"month":return t("subscriptions.recurring_total_intervals.month",{count:l},{one:"month",other:"%{count} months"});case"week":return t("subscriptions.recurring_total_intervals.week",{count:l},{one:"week",other:"%{count} weeks"});case"day":return t("subscriptions.recurring_total_intervals.day",{count:l},{one:"day",other:"%{count} days"});default:return""}})();return e&&a?function(e,n,a,r){return`${t("subscriptions.recurring_totals_with_policies.first_cycles",{count:a,total_price:n},{one:"First payment %{total_price}",other:"First %{count} payments %{total_price} each"})}${t("subscriptions.recurring_totals_with_policies.following_cycles",{total_price:e,interval:r},", then %{total_price} every %{interval}")}`}(o(n),o(e),a,i):t("subscriptions.recurring_totals",{total_price:o(n),interval:i},"%{total_price} every %{interval}")}}function o(e){const t=l(e);return function(e){return e?e.map(t):void 0}}},38948:(e,t,n)=>{n.d(t,{Px:()=>p});var a=n(94973),r=n(15299),l=n(57511),o=n(63292),i=n(84030),s=n(19705),d=n(36125),c=n(23708),u=n(64237);class m extends Error{constructor(...e){super(...e),this.name="TooManyRedeemablePaymentMethodsError"}}function p(){const e=function(){const{value:e}=(0,o.mu)(),t=e?.flatMap((e=>"redeemable"===e.type&&e.redemptionSource===l.D.Custom?[e]:[]));if(void 0!==t&&0!==t.length){if(t.length>1)throw new m("There can only be a single custom redeemable payment method per redeemable type.\nGift card is currently the only supported redeemable type");return t[0]}}(),[t,n]=(0,r.useState)([]),p=(0,i.Xv)(l.D.Custom),h=(0,r.useMemo)((()=>p.filter((e=>{const n=t.some((t=>(0,u.Ax)(t,e.method))),a=!e.cost||0===e.cost.amount;return!n&&!a&&Boolean(e.method.redemptionContent)}))),[p,t]),y=(0,c.aj)(),{negotiate:g}=(0,d.T4)(),_=(0,a.QN)(),E=Boolean(e),b=(0,r.useCallback)((e=>{const t=t=>{if("redeemable"!==t.type||t.redemptionSource!==l.D.Custom)return!0;const n=t;return!(0,u.Ax)(e,n)};_.write(y.parts.paymentLines,(e=>e.filter((e=>t(e.method))))),_.write(y.parts.availableRedeemables,(e=>e.filter((e=>t(e.paymentMethod)))))}),[_,y]),v=(0,r.useCallback)(((e,t)=>{const n=function(e,t){if(!t)return null;if(t.amount<=0)return null;return{method:e.paymentMethod,cost:{amount:f,currencyCode:t.currencyCode}}}(e,t);return n?(_.write(y.parts.paymentLines,(e=>[...e,...n?[n]:[]])),new Promise((e=>{g(void 0,{include:["paymentLines"],onComplete:t=>{"error"===t.status&&t.violations.some(s.t8)&&b(n.method),e(t)}})}))):Promise.resolve(null)}),[_,g,y,b]),C=(0,r.useCallback)((e=>{const t=_.read(y.parts.paymentLines).value.length;return b(e),n((t=>[...t,e])),t>_.read(y.parts.paymentLines).value.length?new Promise((t=>{g(void 0,{include:["paymentLines"],onComplete:a=>{n((t=>t.filter((t=>!(0,u.Ax)(t,e))))),t(a)}})})):Promise.resolve()}),[_,g,y,b]),S=(0,r.useCallback)((()=>{const e=_.read(y.parts.paymentLines).value.length;return _.write(y.parts.paymentLines,(e=>e.filter((e=>{const{method:t}=e;return!("redeemable"===t.type&&t.redemptionSource===l.D.Custom)})))),e>_.read(y.parts.paymentLines).value.length?new Promise((e=>{g(void 0,{include:["paymentLines"],onComplete:t=>{e(t)}})})):Promise.resolve()}),[_,g,y]);return{canApplyGiftCards:E,paymentMethod:e,paymentLines:h,submit:v,remove:C,removeAll:S}}const f=0},80779:(e,t,n)=>{n.d(t,{f:()=>a});const a="·"},58482:(e,t,n)=>{n.d(t,{FW:()=>I,Ki:()=>A,QI:()=>S,V_:()=>w,ZS:()=>T,ju:()=>x,lX:()=>k,wv:()=>C,x1:()=>M});var a=n(15299),r=n(94973),l=n(73896),o=n(54444),i=n(40874),s=n(76882),d=n(63292),c=n(71949),u=n(72149),m=n(77979),p=n(81772),f=n(70083),h=n(35699),y=n(56784),g=n(66126),_=n(50996),E=n(11950),b=n(90643),v=n(32877);function C(){const{uiStateAtom:e}=(0,c.i)(v.G);return(0,r.md)(e)}function S(){const e=(0,a.useContext)(v.G);if(null!=e)return e}function k(e){const t=(0,r.QN)(),n=(0,f.S)(),l=(0,o.c)(),{asyncDeliveryPromiseExperienceEnabled:s}=(0,_.q)();(0,a.useEffect)((()=>{if(!l?.supportsMeasure||!l.supportsMarks)return;let a;return t.subscribe(e,(({value:e})=>{"loading"===e.status?a=function(){const e=(0,i.tB)();return()=>{const t=(0,i.tB)()-e;n.distribution(h.J.ShippingMethodsLoadingDuration,{value:t,tags:{async_shop_promise:s}})}}():a&&(a(),a=void 0)}))}),[s,l,t,n,e])}function w(){const e=(0,f.S)();return(0,a.useCallback)(((t,n)=>{e.distribution(h.J.ShippingMethodsElapsedTime,{value:t,tags:{apiClientId:n.toString()}})}),[e])}const P=()=>(0,l.Q4)(((e,t)=>{switch(e){case"ignored":if("timeout"===t)return"idle";break;case"idle":if("countryChange"===t)return"debounced";if("otherAddressFieldChange"===t)return"ignored";break;case"debounced":switch(t){case"countryChange":return"debounced";case"otherAddressFieldChange":return"ignored";case"timeout":return"idle"}}}),"idle");function A(e,t){const n=(0,r.QN)(),l=(0,a.useMemo)(P,[e]),[o,i]=(0,r.fp)(l);(0,r.ab)(l,(({prevState:e,action:n})=>{"debounced"===e&&"timeout"===n&&t()})),(0,a.useEffect)((()=>n.subscribe(e.fields.countryCode,(()=>{i("countryChange")}))),[e.fields.countryCode,i,n]),(0,a.useEffect)((()=>{if("debounced"===o||"ignored"===o){const e=setTimeout((()=>{i("timeout")}),100);return()=>{clearTimeout(e)}}}),[i,o]),(0,a.useEffect)((()=>{const t=Object.keys(e.fields).filter((e=>"countryCode"!==e)).map((t=>n.subscribe(e.fields[t],(({value:e})=>{e&&i("otherAddressFieldChange")}))));return()=>{t.forEach((e=>e()))}}),[e.fields,i,n])}function I(e){const t=(0,u.w)();return(0,a.useMemo)((()=>{const n=t.some((({code:e})=>e===m.X.MerchandiseCartUpdatedBasedOnCountry||"TaxExemption"===e)),a=e.some((e=>e.hasDeliveryLineChange)),r=e.length>1||e.some((e=>e.methods?.length>1));return a&&!n&&r||!1}),[e,t])}function x(){const{shippingRatesReloadStrategy:e}=(0,_.q)();return(0,a.useCallback)((({countryCode:t,zoneCode:n})=>{try{(0,E.v)("string"==typeof t,"Expected a country code");const a=e.get(t);switch((0,E.v)(null!=a,`Could not find a strategy for ${t}`),a.type){case"regional":{const e=Math.max(...a.regions.values());return null==n?e:a.regions.get(n)??e}case"national":return a.strategy}}catch(a){const t=e.get(p.O.Zz);return"national"===t?.type?t.strategy:b.N.Anything}}),[e])}function M(){const e=(0,y.a)(g.GJ),{value:t}=(0,d.FC)();return e&&"filled"===t?.status&&t.lines.length>1}function T(){const e=(0,s.W)(),t=new Map;return t.set("year",(t=>e("shipping.subscription_delivery_description.subscription_delivery_frequency.year",{count:t},{one:"every year",other:"every %{count} years"}))),t.set("month",(t=>e("shipping.subscription_delivery_description.subscription_delivery_frequency.month",{count:t},{one:"every month",other:"every %{count} months"}))),t.set("week",(t=>e("shipping.subscription_delivery_description.subscription_delivery_frequency.week",{count:t},{one:"every week",other:"every %{count} weeks"}))),t.set("day",(t=>e("shipping.subscription_delivery_description.subscription_delivery_frequency.day",{count:t},{one:"every day",other:"every %{count} days"}))),(e,n)=>{const a=t.get(e);return a?.(n)||""}}},21732:(e,t,n)=>{n.d(t,{C:()=>l,l:()=>o});var a=n(94973),r=n(71949);const l=(0,r.R)("ShopPayInstallmentsContext");function o(){return function(e){const t=(0,r.i)(l);return(0,a.fp)(t.financingPlans)}()}},72334:(e,t,n)=>{n.d(t,{Ak:()=>d,If:()=>s,Tz:()=>c,Z8:()=>o,eI:()=>i});var a=n(15299),r=n(94012);class l{constructor(){this.listeners=new Set}listen(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}emit(e){this.listeners.forEach((t=>t(e)))}}class o{constructor(){this.interceptors=new Set,this.resultEmitter=new l}async runInterceptors(){const e=[...this.interceptors],t=await Promise.all(e.map((e=>e())));return this.resultEmitter.emit(d(t)),t}intercept(e){return this.interceptors.add(e),()=>{this.interceptors.delete(e)}}listenResult(e){return this.resultEmitter.listen(e)}}const i=(0,a.createContext)(void 0);function s(){const e=(0,a.useContext)(i);if(null==e)throw new r.Wm("Missing ProgressInterceptorContext");return e}function d(e){return e.every((e=>e.success))}function c(e){return e.filter((e=>!e.success)).map((e=>e.location))}},57992:(e,t,n)=>{n.d(t,{w:()=>o});var a=n(15299),r=n(12237),l=n(25787);function o(){const e=(0,l.Jj)();return{creditCardDisabled:(0,a.useCallback)((t=>{if(!t)return!1;const{expired:n,supportsInstallmentsInterestLoan:a,supportsInstallmentsSplitPayLoan:l}=t,o=(0,r.N3)(e.config?.availableLoanTypes,l,a);return Boolean(n||e.supported&&e.paymentMethodSelected&&!o||e.paymentMethodMustSupportInterestBearingLoans&&!a)}),[e.paymentMethodSelected,e.supported,e.paymentMethodMustSupportInterestBearingLoans,e?.config?.availableLoanTypes])}}},7395:(e,t,n)=>{n.d(t,{X:()=>h}),n(44114);var a=n(31928),r=n(15299),l=n(94012),o=n(6211),i=n(57355),s=n(13614),d=n(63292),c=n(50996),u=n(34839),m=n(38909),p=n(18905),f=n(25082);const h=e=>{const{alternate:t}=(0,o.ft)(),n=(0,s.LD)(),h=(0,d.rZ)(),{iframe_token:y,redirect_url:g,transaction_params:_}=(0,f.I)(),E=(0,a.Y)(),{myshopifyDomain:b}=(0,c.q)(),{checkoutSessionIdentifier:v}=(0,u.Fo)(),C=(0,i.ci)({lookup:!0});return(0,r.useMemo)((()=>{if(!v)throw new l.BS("Checkout token is undefined");if(!C)return;const a=e===p.K.C1InlineModal?{[m.zY]:m.C8.ShopPayAsPaymentMethod}:null,r={shopify_domain:b,checkout_token:v,origin:e,locale:E,iframe_token:y,redirect_url:g,transaction_params:_,shop_pay_new_signup_login_variant:C,...a};h?.email&&(r.fast_login=!0);const o=Object.entries(r).map((e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(e[1])}`));n&&o.push(n);const i=o.join("&");return`https://${t}/pay/transactions/new/email?${i}`}),[e,t,b,v,E,y,g,_,C,n,h])}},29664:(e,t,n)=>{n.d(t,{i:()=>i});var a=n(47472),r=n(44985),l=n(6211),o=n(25082);function i(){const e=(0,a.K)(o.z),{currentUrl:t}=(0,r.r)(),n=Boolean(e?.from_classic);return(0,l.as)(t)&&n}},54469:(e,t,n)=>{n.d(t,{l:()=>o});var a=n(94973),r=n(89557),l=n(9210);function o(){const[e]=(0,a.fp)(l.D.paymentMethod);return null==e?r.R.ShopPay:e.name}},22947:(e,t,n)=>{n.d(t,{H:()=>s});var a=n(15299),r=n(6211),l=n(50996),o=n(34839),i=n(52027);const s=()=>{const{myshopifyDomain:e}=(0,l.q)(),{checkoutSessionIdentifier:t}=(0,o.Fo)(),n=(0,i.j9)();return{exchangeSessionTokenForCookie:(0,a.useCallback)((async({token:a,origin:l,analytics_trace_id:o,in_checkout_profile_preview:i})=>{const{primary:s}=(0,r.af)(),d=new URLSearchParams({token:a,origin:l,shopify_domain:e});t&&d.set("checkout_token",t),o&&d.set("analytics_trace_id",o),i&&d.set("in_checkout_profile_preview",i),await fetch(`https://${s}${n.shopPaySession()}?${d.toString()}`,{method:"POST",keepalive:!0})}),[t,e,n])}}},86224:(e,t,n)=>{n.d(t,{k:()=>c});var a=n(15299),r=n(94973),l=n(76882),o=n(53008),i=n(9124),s=n(9210),d=n(76386);function c(){const e=(0,l.W)(),t=(0,r.md)(s.D.negotiationProgressError);if(!t)return{};switch(t){case d.Cq.CheckingShippingRequirement:case d.Cq.CalculatingTaxes:return{topNoticeError:t};case d.Cq.MissingCreditCard:return{paymentNoticeMessage:e("payment_errors.selected_payment_method","There was an issue with your selected payment method and you haven't been charged. Try again or use a different payment method.")};case d.Cq.MissingInstallmentsBillingAddress:return{paymentNoticeMessage:e("payment_errors.payment_method_billing_address","There was an issue with your selected payment method's billing address and you haven't been charged. Check the address and try again or use a different payment method.")};case d.Cq.ProcessingError:return{paymentNoticeMessage:e("payment_errors.processing_error","There was an issue processing your payment. Try again or use a different payment method.")};case d.Cq.ProcessingErrorCheckoutAsGuest:return{paymentNoticeMessage:a.default.createElement(a.default.Fragment,null,e("payment_errors.processing_error_checkout_as_guest",{checkout_as_guest_link:a.default.createElement(u,null)},"There was an issue processing your payment. Try again with a different payment method or {{checkout_as_guest_link}}."))};case d.Cq.SubscriptionsBillingAgreementFailed:return{paymentNoticeMessage:e("payment_errors.selected_payment_method","There was an issue with your selected payment method and you haven't been charged. Try again or use a different payment method.")};default:return{}}}function u(){const e=(0,l.W)(),{to:t,onPress:n}=(0,i.Q)();return a.default.createElement(o.N,{to:t,onPress:n},e("shop_pay.checkout_as_guest_link","check out as guest"))}},86155:(e,t,n)=>{n.d(t,{X:()=>l});var a=n(84030),r=n(48545);function l(){const[e]=(0,r.mO)(),[t]=(0,r.pu)(),{shippingRequired:n}=(0,a.kG)(),[l]=(0,r.Df)(),o=Boolean(l?.requiresVerification);return(!n||o)&&("email"===t||!e)}},98815:(e,t,n)=>{n.d(t,{Bk:()=>y,j1:()=>h});var a=n(73896),r=n(94973),l=n(15299),o=n(76882),i=n(44985),s=n(53008),d=n(87039),c=n(9124),u=n(50996),m=n(9210),p=n(16335);const f=(0,a.MN)(null);function h(){return(0,r.fp)(f)}function y(){const e=(0,o.W)(),{currentUrl:t}=(0,i.r)(),{name:n}=(0,u.q)(),a=(0,d.Mx)(t.search),[,f]=(0,r.fp)(m.D.shopPayVerificationTrigger),{onPress:h,to:y}=(0,c.Q)(c.R.PaymentErrorState),g=(0,l.useCallback)((()=>{f({source:p.j.ErrorBannerConfirm})}),[f]),_=e("shop_pay.checkout.unauthenticated_checkout.verification_error.confirm","Confirm it’s you"),E=a?e("shop_pay.checkout.unauthenticated_checkout.verification_error.checkout_at_shop",{shopName:n},"check out at {{shopName}}"):e("shop_pay.checkout.unauthenticated_checkout.verification_error.checkout_as_guest","check out as guest");return()=>({textMessage:e("shop_pay.checkout.unauthenticated_checkout.verification_error.message",{confirmLink:_,checkoutAsGuestLink:E},"This email is registered with Shop Pay. {{confirmLink}} or {{checkoutAsGuestLink}}"),error:e("shop_pay.checkout.unauthenticated_checkout.verification_error.message",{confirmLink:l.default.createElement(s.N,{appearance:"monochrome",onPress:g},_),checkoutAsGuestLink:l.default.createElement(s.N,{appearance:"monochrome",onPress:h,to:y},E)},"This email is registered with Shop Pay. {{confirmLink}} or {{checkoutAsGuestLink}}")})}},49270:(e,t,n)=>{n.d(t,{$_:()=>o,nQ:()=>d,oO:()=>s});var a=n(73896),r=n(94973),l=n(15299);let o=function(e){return e.None="none",e.Loading="loading",e.Found="found",e.New="new",e.Invalid="invalid",e}({});const i=(0,a.MN)({email:"",userStatus:o.None});function s(){const e=(0,r.QN)();return(0,l.useMemo)((()=>({get:()=>e.read(i).value,set:t=>{e.write(i,t)}})),[e])}function d(){return(0,r.md)(i)}},94275:(e,t,n)=>{n.d(t,{r:()=>b});var a=n(44985),r=n(94973),l=n(70097),o=n(80469),i=n(41889),s=n(6211),d=n(63292),c=n(84030),u=n(38482),m=n(31374),p=n(52274),f=n(34839),h=n(50996),y=n(64106),g=n(36397),_=n(36125),E=n(38909);function b(){const{currentUrl:e}=(0,a.r)(),t=(0,s.as)(e),n=(0,o.N)(),u=(0,d.rZ)(),{checkoutSessionIdentifier:b=""}=(0,f.Fo)(),C=(0,c.OL)(),S=(0,y.Bl)(),k=(0,m.C)(),w=(0,r.md)(k.paymentLines),{value:P}=(0,d.Dr)(),A=(0,r.md)(k.phone),{getCookie:I}=(0,i.GH)(),{currentDetour:x}=(0,_.Wm)(),M=(0,l.b)().isPartner();(0,p.D3)((async({parts:e,reason:t,state:n})=>{if("completion"===t){const t=n.read(e.paymentLines).value,a=t[0]?.method,r="direct"===a?.type,l=Boolean(n.read(e.phone).value);if(r&&l)return{behavior:"allow",perform(){n.write(e.shopPayArtifact,void 0)}}}return{behavior:"allow",perform:()=>{}}}));const{shopPayEnabled:T}=(0,h.q)(),{hasSavedCreditCards:N}=(0,g.Ny)();if(M)return!1;if(A)return!1;if(n)return!1;if(!T)return!1;if("CustomerProfile"===u?.__typename&&C){if(!S)return!1;if(!N)return!1}return I(E.Sl)!==b&&!t&&("thankYou"===x?.type?!!P&&v(P.lines):v(w))}const v=e=>{if(!e?.length||!e[0].method)return!1;const{method:t}=e[0];return"direct"===t.type||t.type===u.NK.CreditCard}},12227:(e,t,n)=>{n.d(t,{$:()=>c});var a=n(94973),r=n(15299),l=n(94012),o=n(66242),i=n(34839),s=n(9210),d=n(28540);function c(){const e=(0,o.W)(),t=(0,i.Fo)(),n=(0,a.QN)();return{openModal:(0,r.useCallback)((a=>{const r=n.read(s.D.flow).value;r===d.p.UnauthenticatedUser?n.write(s.D.unauthenticatedErrorModal,a):e.notify(new l.BS("Cannot open an unauthenticated error modal outside of the unauthenticated flow"),{severity:"error",metadata:{source:{type:t.type},checkout:{token:t.checkoutSessionIdentifier||t.sourceId},event:{modalType:a.type,shopPayFlow:r}}})}),[e,t,n])}}},18905:(e,t,n)=>{n.d(t,{K:()=>a});let a=function(e){return e.C1InlineModal="c1_inline_modal",e.C1Modal="c1_modal",e.C1ModalShopPay="c1_modal_shop_pay",e.C1ModalShopPaySignIn="c1_modal_shop_pay_sign_in",e.PaymentRequest="payment_request",e}({})},16335:(e,t,n)=>{n.d(t,{j:()=>a});let a=function(e){return e.LoginLink="login_link",e.ErrorBannerConfirm="error_banner_confirm",e.ErrorModalClearEmail="error_modal_clear_email",e.ErrorModalContinue="error_modal_continue",e}({})},7821:(e,t,n)=>{n.d(t,{W:()=>a});let a=function(e){return e.Generic="generic",e.SignInFailed="sign_in_failed",e.ContinueWithShopPay="continue_with_shop_pay",e}({})},76386:(e,t,n)=>{n.d(t,{Cq:()=>a,Cu:()=>o,FJ:()=>r,Vp:()=>i,bW:()=>l});let a=function(e){return e.CheckingShippingRequirement="checking_shipping_requirement",e.CalculatingTaxes="calculating_taxes",e.MissingCreditCard="missing_credit_card",e.MissingInstallmentsBillingAddress="missing_installments_billing_address",e.ProcessingError="processing_error",e.ProcessingErrorCheckoutAsGuest="processing_error_checkout_as_guest",e.SubscriptionsBillingAgreementFailed="subscriptions_billing_agreement_failed",e}({});class r extends Error{constructor(...e){super(...e),this.name="PaymentMethodDoNotMatchError"}}let l=function(e){return e.PayNowIntercept="ShopPay::Exception::PayNowIntercept",e.CreateUnverifiedUserPayNow="ShopPay::Exception::CreateUnverifiedUser::PayNow",e.CreateUnverifiedUserInstallments="ShopPay::Exception::CreateUnverifiedUser::Installments",e}({}),o=function(e){return e.Online="online",e.RetailPos="retail_pos",e}({}),i=function(e){return e.Dismissed="dismissed",e.Pending="pending",e.Verified="verified",e}({})},7851:(e,t,n)=>{n.d(t,{R:()=>r,j:()=>l});var a=n(15299);const r=(0,a.createContext)(!1);function l(){return(0,a.useContext)(r)}},19481:(e,t,n)=>{n.d(t,{k:()=>o});var a=n(73896),r=n(94973);const l=(0,a.MN)(void 0);function o(){return(0,r.fp)(l)}},62576:(e,t,n)=>{n.d(t,{a:()=>s});var a=n(15299),r=n(32485),l=n.n(r),o=n(50190);const i={BlockStack:"KP_ZA",spacingNone:"CUcNw",spacingXtight:"T3hEd",spacingTight:"_Vom2",spacingLoose:"BRK6G",spacingXloose:"SyDPW",alignmentLeading:"RxfXv",alignmentCenter:"jH81J",alignmentTrailing:"U8Dkt"};function s({alignment:e,spacing:t,children:n}){const r=l()(i.BlockStack,e&&i[(0,o.N)("alignment",e)],t&&i[(0,o.N)("spacing",t)]);return a.default.createElement("div",{className:r},n)}},51633:(e,t,n)=>{n.d(t,{j:()=>r});var a=n(15299);function r(){const[e,t]=(0,a.useState)(window.matchMedia("(prefers-reduced-motion: reduce)").matches);return(0,a.useEffect)((()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),n=()=>{t(e.matches)};return e.addListener(n),()=>{e.removeListener(n)}}),[]),e}},96090:(e,t,n)=>{n.d(t,{p:()=>o});var a=n(15299),r=n(51633);const l=new Map([["none",0],["fast",100],["base",200],["slow",300],["slower",400],["slowest",500]]);function o(e,t="slow",n=!1){const[o,i]=(0,a.useState)(!n&&e),[s,d]=(0,a.useState)(!1),c=(0,a.useRef)(!n&&e),u=(0,a.useRef)((()=>{d(!1),i(c.current)})),m=(0,r.j)();return(0,a.useEffect)((()=>{e!==c.current&&d(!0),c.current=e;let n="string"==typeof t?t:t.enter,a="string"==typeof t?t:t.exit;m&&(n="none",a="none");const r=setTimeout(u.current,e?l.get(n??"none"):l.get(a??"none"));return()=>{clearTimeout(r)}}),[t,m,e]),s?e?"entering":"exiting":e===o?e?"entered":"exited":e?"enter":"exit"}},56764:(e,t,n)=>{n.d(t,{d:()=>p});var a=n(15299),r=n(13407),l=n(2162),o=n(55180),i=n(92240);const s={},d=(0,a.memo)((function({receiver:e,component:t,controller:n}){const l=n.get(t.type),d=(0,o.S)(e,t),m=(0,a.useMemo)((()=>{const a=null==d?void 0:d.props;if(!a)return s;const l={};for(const o of Object.keys(a)){const s=a[o];l[o]=(0,r.z8)(s)?(0,i.Y)(c,{parent:t,receiver:e,fragment:s,controller:n}):s}return l}),[e,n,null==d?void 0:d.props,t.version]);if(null==d)return null;const{children:p}=d;return 0===p.length?(0,i.Y)(l,{...m}):(0,i.Y)(l,{...m,children:u(t,p,e,n)})})),c=(0,a.memo)((function({parent:e,receiver:t,fragment:n,controller:a}){var r;const{children:l}=null!==(r=(0,o.S)(t,n))&&void 0!==r?r:{};return l?(0,i.Y)(i.FK,{children:u(e,l,t,a)}):null}));function u(e,t,n,a){const{renderComponent:r,renderText:o}=a.renderer;return[...t].map((t=>{switch(t.kind){case l.rC:return r({parent:e,component:t,receiver:n,controller:a,key:t.id});case l.x7:return o({parent:e,text:t,receiver:n,key:t.id});default:return null}}))}const m=(0,a.memo)((function({text:e,receiver:t}){const n=(0,o.S)(t,e);return n?(0,i.Y)(i.FK,{children:n.text}):null}));function p(e,{renderComponent:t,renderText:n}={}){const a=new Map(Object.entries(e)),r=({parent:e,component:t,controller:n,receiver:a,key:r})=>(0,i.Y)(d,{parent:e,component:t,controller:n,receiver:a},r),l=({key:e,receiver:t,text:n,parent:a})=>(0,i.Y)(m,{receiver:t,text:n,parent:a},e);return{get(e){const t=a.get(e);if(null==t)throw new Error(`Unknown component: ${e}`);return t},renderer:{renderComponent:t?e=>t(e,{renderDefault:()=>r(e)}):r,renderText:n?e=>n(e,{renderDefault:()=>l(e)}):l}}}},55180:(e,t,n)=>{n.d(t,{S:()=>r});var a=n(15299);function r(e,t){const[n,r]=(0,a.useState)({receiver:e,id:t.id,version:t.version,value:t});let l=n.value;return n.receiver===e&&n.id===t.id||(l=e.attached.get(t),r({receiver:e,id:t.id,version:t.version,value:l})),(0,a.useDebugValue)(l),(0,a.useEffect)((()=>{let n=!1;const a=()=>{n||r((n=>{const{id:a,version:r,receiver:l}=n,{id:o}=t;if(l!==e||a!==o)return n;const i=e.attached.get(t),s=null==i?void 0:i.version;return r===s?n:{receiver:e,value:i,id:o,version:s}}))},l=e.attached.subscribe(t,a);return a(),()=>{n=!0,l()}}),[e,t]),l}},6541:(e,t,n)=>{n.d(t,{q:()=>a});const a="remote-ui::ready"},89941:(e,t,n)=>{n.d(t,{L:()=>r});var a=n(6541);function r({targetOrigin:e="*"}={}){if("undefined"==typeof self||null==self.parent)throw new Error("This does not appear to be a child iframe, because there is no parent window.");const{parent:t}=self,n=()=>t.postMessage(a.q,e);window.addEventListener("message",(e=>{e.source===t&&"complete"===document.readyState&&e.data===a.q&&n()})),"complete"===document.readyState?n():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&n()}));const r=new WeakMap;return{postMessage(n,a){t.postMessage(n,e,a)},addEventListener(e,n){const a=e=>{e.source===t&&n(e)};r.set(n,a),self.addEventListener(e,a)},removeEventListener(e,t){const n=r.get(t);null!=n&&(r.delete(t),self.removeEventListener(e,n))}}}},26803:(e,t,n)=>{n.d(t,{b:()=>r});var a=n(6541);function r(e,{terminate:t=!0,targetOrigin:n="*"}={}){var r;if("undefined"==typeof window)throw new Error("You can only run fromIframe() in a browser context, but no window was found.");const l=new WeakMap;let o;function i(t){t.source===e.contentWindow&&t.data===a.q&&(window.removeEventListener("message",i),o())}null===(r=e.contentWindow)||void 0===r||r.postMessage(a.q,n);const s=new Promise((e=>{o=e,window.addEventListener("message",i)}));return{async postMessage(t,a){var r;await s,null===(r=e.contentWindow)||void 0===r||r.postMessage(t,n,a)},addEventListener(t,n){const a=t=>{t.source===e.contentWindow&&n(t)};l.set(n,a),self.addEventListener(t,a)},removeEventListener(e,t){const n=l.get(t);null!=n&&(l.delete(t),self.removeEventListener(e,n))},terminate(){window.removeEventListener("message",i),t&&e.remove()}}}},94048:(e,t,n)=>{n.d(t,{Yq:()=>i});const a=new Map;function r(e,t){const n=function(e,t={}){return`${Array.isArray(e)?e.sort().join("-"):e}-${JSON.stringify(t)}`}(e,t);if(a.has(n))return a.get(n);const r=new Intl.DateTimeFormat(e,t);return a.set(n,r),r}const l=Intl.DateTimeFormat("en",{hour:"numeric"}),o=void 0===l.resolvedOptions?void 0:l.resolvedOptions();function i(e,t,n={}){if(null!=o&&!1===n.hour12&&null!=o.hourCycle&&(n.hour12=void 0,n.hourCycle="h23"),null!=n.timeZone&&"Etc/GMT+12"===n.timeZone){const a=new Date(e.valueOf()-432e5);return r(t,{...n,timeZone:"UTC"}).format(a)}return r(t,n).format(e)}},75140:(e,t,n)=>{n.d(t,{e:()=>r});var a=n(15299);function r(e){const[t,n]=(0,a.useState)(e);return{value:t,toggle:(0,a.useCallback)((()=>n((e=>!e))),[]),setTrue:(0,a.useCallback)((()=>n(!0)),[]),setFalse:(0,a.useCallback)((()=>n(!1)),[])}}},61058:()=>{},11263:()=>{},37205:()=>{},1909:()=>{},70627:()=>{},65859:()=>{},29383:()=>{},4890:()=>{},92240:(e,t,n)=>{n.d(t,{FK:()=>a.FK,Y:()=>l}),n(15299);var a=n(50172),r=0;function l(e,t,n,l,o,i){var s,d,c={};for(d in t)"ref"==d?s=t[d]:c[d]=t[d];var u={type:e,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--r,__source:o,__self:i};if("function"==typeof e&&(s=e.defaultProps))for(d in s)void 0===c[d]&&(c[d]=s[d]);return a.fF.vnode&&a.fF.vnode(u),u}}}]);